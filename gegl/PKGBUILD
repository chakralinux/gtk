# CCR:  danyf90 <daniele.formichelli@gmail.com>

pkgname=gegl
pkgver=0.2.0
pkgrel=3
pkgdesc="Graph based image processing framework."
arch=('x86_64')
url="http://www.gegl.org/"
license=('GPL3' 'LGPL3')
depends=('babl' 'gtk2' 'intltool')
makedepends=('ruby' 'lua' 'openexr' 'ffmpeg' 'librsvg' 'jasper' 'exiv2')
optdepends=('openexr: for using the openexr plugin' 'ffmpeg: for using the ffmpeg plugin' 'librsvg: for using the svg plugin' 'jasper: for using the jasper plugin')
options=('!libtool')
source=("ftp://ftp.gimp.org/pub/${pkgname}/${pkgver%.*}/${pkgname}-${pkgver}.tar.bz2" 'gentoo-gegl-0.2.0-ffmpeg-0.11.diff')
sha1sums=('764cc66cb3c7b261b8fc18a6268a0e264a91d573' 'c10fd988c634fcf0948cc91a51d6528f6f1704ba')

build() {
  cd $srcdir/$pkgname-$pkgver
  patch -Np1 -i $srcdir/gentoo-gegl-0.2.0-ffmpeg-0.11.diff
  ./configure --prefix=/extra/usr --with-sdl --with-openexr --with-librsvg --with-libavformat --with-jasper --disable-docs || return 1
  make
}

package() {
  cd $srcdir/$pkgname-$pkgver
  make install DESTDIR=$pkgdir
}
