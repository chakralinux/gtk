pkgname=firefox-i18n
pkgver=52.0.2
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('d9067d33827b13bca10aac9130b94ad615ae9cae68f27d4a49d5970e590f0120'
            '1371aa54ebb68f1a3865e2f53698c4f40feac80ac6004533855c45316b4a3c98'
            'b09d5aeb3439edf8647774e2eeec0ebd056d33df582c4398050c4b902fe3d09a'
            '076791531cbce9c785b1c909664dac917385004da0e71d6fa69293971d149199'
            '166f6c34b937066e6608051b8afb05c6930b0b859de4ff4751f81c76bcb5e346'
            '63a782a0560042fb80d3302ba94faae5396975818c86f1f36a718af7adf373df'
            'c4b66fce8e1075406c6eedbddf47f7cd40c45472bb342b135c992e9a95389ae7'
            '7c11e59d67a75d5a166c5fab65afb0548551858491a49ff4c440f9ddd5bb58d7'
            'a2e10b22c43ed431e4d604b53e1db803931f75b08d562b7e166ce90e0cd8ff97'
            'f7f52717331bc40bf6a83eb21a2e98d676a078465b85406e94f5077fb62904e4'
            '068b1a776a7d61e0c3f6ef46e01b02a576605eb9a985ed03a4926b4ca07c8848'
            'b004793248ae76885c43dae88ebbbf2fc7d1c192d1e9a6a377d81f98af0a914a'
            'f7143e212958ac28f7d4626443d90bca06a03cb860203e12c04052084408d583'
            '2b12def9aab5b3b52550257fd16c83d84307fa6cf61c743245c96b7b419d2396'
            'ee609b76448388acf86cd6245b023cb551f5251b35794bb3f5d4f3a403ba3571'
            '7ef68c7994052fef8c63c2466267710efd4e9920ea0b1eaa1fb4c84d9697f310'
            'd997c4edc073f6187ad379aab795cf6b38c0dc3c99afb426350e3c8ea25ac448'
            'f81a90979efd6f814dc691a4c6a5e72dfef9580aa2deaebe7d579505adf75fed'
            'b58b13a8bbde8d911633aaeb2b7a168b9a600137d59693076226f4bff78505b9'
            '70b60c3a9af2e7430da59e03e26086c060da83898240dbceabe633a8d4e2fcd7'
            '4e7bff04b22e6a3b6518887d49d0332330da72111bfc5a889cc2f03bfdc61df7'
            'e3e95a649ec0daa2d5582812a0fee6a65a037da89888c1de69b6e614e3d7132a'
            'd95d92b6e9a9c2d9bed13feb7e91fa0bad73e1cb25957624f79f4a63ae9f68d5'
            'd59f4489381b5e47f2db958d6337263dc6346d5e595c9dff0d39bef0548d89f3'
            '55f1936b0c69dec8122641ca81725904623abc4be4ce9b2faedee622703155db'
            '14f1617ac5dc702b176d90b17ab3915bdbf79f962f8935813197dc8615213437'
            '6300ad5e9b0a777cad774eb4a84f579ddc6a5bcceac144441762374d57d84849'
            'f9ba978768d95f6ec1ec4cfcb8f800da30b85ab62638bcceefab830dd2a32510'
            '23d78c773b62b8995e7703f500c950625055d2243903d957e2a9e6e26a6b1482'
            '7377d104f5a2d4f612921ef016683140a379b50896394b920e93995b5832c851'
            '50230e7ed9084dde9a1e55557947d945be639798a655e1f549236132399eb034'
            '1ee00ba8a9e272db6e6c4db93fe1aed3b724aa10aa3592b832fab727dde5e14f'
            '6f19928dca2afb50f4d12f490850f1ad056eb4cadfc3ce150f9a44ab0bc00e75'
            '7a7488923336d3f26c3ca982052fb0a5d583eb1b1d6351405e58e09dadc59223'
            '4e3836809972acba43b9d467836093273b7d4edecbe12d13f205d9b19e80799c'
            '3c4b675c0df0a08461b623c3e0524f506e6828de68623b9f99239f7848b9ed69'
            '60e8358dec4d55e6eb30c99bc7c9c4da3db5d2b0be8613e7ce652afe13c26aaf'
            '17ea41517f55ed8e4b2b849fa65ddc68ee6448b98d35e9bdaaac6c444913c5bc'
            '1d25cf60b982ab3ac05b54fd5ed50582c5a59915c8850a8b0611bb3777d0e8c8'
            'ee99934d445d50245c3e39e276febe4ed34f05b2948a71dd558f830a76cd3d03'
            '003f0c2659be7b0c115fc52fb6bc18d850def64bb5f68a451c791386a0e56b16'
            '896aeda4604b9063a37242c6c3208fac18d0c0fe6dff76412bd40f2b1a0d2050'
            'f7aeb66685fa932e9e504401b50d016701a66b7b5f994ac025476f8c8ad3e67d'
            'a96bdb086cb8afc9b089d27ed102667574ecb3936df107df5d332691d5941f74'
            'd8aa03a8bffb6b5091e39b3a803d8080933d43b9637cc82f3960a7720a19c7b1'
            'f41a6cebeb1bdf73033c6e5532c3b1aaafca3293afeb6db3f5c912658cfbd875'
            '951babf7c91016936e1906e7812e39fd5f8f018ce12fd4842047a6700acd910a'
            '9d1c3a2d444640cb920f363acb843ed6874dad0d6815435f95a07129cd624d4e'
            '9ba09ee0a5a9cea864885718a08e1edeab52108e1e0c758d6128f625cf46ba8d'
            '31674336db039481b43a636f85057246de660530e97cb99b3697ea5f7351d046'
            'a598eb15288df0932110b8ebb82a9c7654cbd8b73462da32d09b8ed654c66580'
            'c3aebdc4778da9b06dfdad8d8b4ebcac0f9161c61412bc90f8f0ede2eb8ab9e9'
            '21d6ce5be73e348156588f84552b03c60f3f462281211f456c2439773e01c229'
            '37e9b78390a2b147ed07b9b91d61eddb3bf20c511e35443111b83a870acc0b7f'
            '0d040eab9233ed2a2d3008b18848cd36db51774f115fb8eb79111468bbf5b3be'
            'c3aa236b74aed558678a0f421f8b287374b1c335f08da598455211661e40f5ae'
            'cbe6ad2d8e143f4207b8ccfa0de1c42c7c466bf6498637ca8411b119e04450a5'
            '401f6de5ee704e99b83c56324b05bf21e469c3d983bf47356ad2f318becce187'
            'fb7aeb1e8bb582843b6fa5c2fa0248341ea0402a38a5ad263504fae4c87df305'
            'b7547581f8e521c7fc210f460c80ca9dd89bc1afbc8ca45b211e220d32aa212a'
            '8c084817f99caa52372c033e8f9f5a4673dac7fc8cba6d9d51da26ce4ab51c9d'
            'f2ccd897eb5f4177276f46874b6c566e114d16bfc11672e0dda792be6981f2e0'
            'fd5afc84ba39369e7a907fcb3a46120c69f15944b20d04f06273f5e6c0120aa1'
            'd98218c62bd056546254668ee66d3670e26e7c76ef0dcfa5b9ae70e17c307ca0'
            '96d4eaba3122689d88df16e10702da785ffc4208a7efeddcd2b55443827a0a87'
            '00624e59d688bfa47259a99fa900f67002aaf69cd9e4c48b793b6b5838356317'
            'a493501ad0be58bf3e56f4570183f0a875db3c9f13266075bbb760c6cf38a4d8'
            'c0aed522e992f7d589afe35c89242556500292d659a4a4f806d801976c151351'
            'd5563cc06d1933d2efce0ce8afab0c3b235d8b33a998bfcf240e5ac097da5377'
            'ac65021071c51a1de3c3f3c2b1e8362af253a6d41156e3eb9968a070a4ad4620'
            '3164471f95fa2b98c5b9db76ad34dea99e37148532e7ec95328c68ba7e32e030'
            'bbefcaf93d7a695ce7f4a3483104020d1ddd72c2574e769ca2e23b47902a052e'
            'd7a8ec5d3a160bd45a114a75411ca0ca6869b42b5aa1f5fbddc974153d4af882'
            'da2dd4e6e2c27121d8bf05b614603f15cfeba2f07919600dd593f7f95be98863'
            '8aa23c20a7e13a86a74f32b0f1627431f65d0a6834149a4668d723c54a5dafd5'
            '486da727824852613d37d0cf95713cd4824c1e948f22dbef495b83cd64138b54'
            'dedd5e7be137b5310682e79d224503b3a8cc6a80e8197d2bbf586acb92030dcc'
            '146987469b356fd533ca249167e781170c1341910b8d5d503f34e59ecd702f76'
            '57739feeb19808dac2266807a2bc7da6603e3491bbafc598ad642a96d1bf16d6'
            '5854e971e9dfffb474332c3265106dcec247eb3b1e4eb887330f09e49b42f488'
            'dabae83d5769bf85c3ff9d0f125c3b9a3cbb80fffb15504b5c75b45661477ded'
            '160172adea7cfc829e7cb8db0efc519142e1e2ff821e30e4bf851171d4a03737'
            '2494b9479959a6d10e71c876d4d5c98620f2d553bad9438d95a9912d7d665404'
            'd11e94cda884cab23f85e9c4b5708afb9a9af817915fee03450d5e611c434d71'
            'b9d9271f14403868e159d5746bc125144f8eb1b2bb205caf156339435f7d9a26'
            'a309ed4f8256a7b8ffce3a18644c5dc70419c77ad4022f03a5578cf9023ebf43'
            '855986dcdfc65bdd5bedb09343f80e5f512607911e52bd2778f9a1ff4967f95f'
            '36278027e96b84ed66995795f479f4aadb0c3ba097d3f76ab3bbc6c9e17acdc2'
            '8110ab6cf1c82a4a3f5e9680f8bec3fba3198a3bc49e27b93a9f45a7f89bdb85'
            '416da27dfff1ef2db160b61471912c4004e9818915f4020a3b37683e2aacd674'
            '742562f457e1dceef1d1cb5da3828dc0786c37b81f9ab77a8172f31a85e02509')
