pkgname=firefox-i18n
pkgver=53.0.3
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('dc2d7cbac7b9a1259592c813de1faa87c2627b969e6b6f4adbac4576af126d86'
            'dcf418de71e4ed3bd9e1eee6de36d2f03a9eb9747eb5d360ecd7c714aea97436'
            'dbc225fe506d3478157a13dc3a1d70f2af0a5cd999edb9f569c69a6cc2f8034b'
            'dbceb279face60de1e7575d67552144f7ef082cca63e90f5c58df487594ae0e1'
            'b5581e0de196c60f51eca847ceeb4eaa2050077ba8f05b2620cc00ebf3113338'
            'a4fc0ad22efb3569a4e235460be3413c2753d8230ee917a7742b2e7dbd19181d'
            '0d6844c65bd2d76d1eee11f86e2106a0e34249dbc8bf9e02fd31919c94618396'
            '03bbcea7bd70ae3ac2a16e9627c22fc8fbcc82dc40c7ffddb6d3f8e6b4e1c1e8'
            '40a9605bf701fe3660bdc8bd7b34a96f9b470cd87546508934482842522466a2'
            '0a5f8d20f084c1b9f8ee430fa8b78a9b3a8d266a60813eeaf6561f1dc1a9fc07'
            '698c001f8bd8b5fd0395b08502655a45ff80c36d2bdf77ee598903168b8f45d5'
            '55859ae476eb0abfb18cbb0e1e095ae4014fa54d9a1b44aafb82a836ea1783c1'
            'b18ea80c67cd916e491d5157e846078c20b7df9036cc460968ebb1f54e2dcc6e'
            'da26233522648a0675798f10a5d39fa70070680febe1a6143d5ad27cbaf903c0'
            '68d53c08fc17312050912c82b25a0e3257d00c5b955166a1bf16bf589c89ecec'
            'c33f9486b4cc7208c3030cec20f28b668db146e0302c3897749cbd434144965c'
            'f908143ecaa5c11dbd0de99900ec9afa385495168a4810ef3b94604d48021f51'
            'f1215f734021043adbb80ff1bdd5f1d5a9e6472ad35354cfeb3dfa7d77460328'
            '1d9430cd2f99849c14dfc318cc77f7b1dcb27815e2f2a6013a872c72e2b1f979'
            '9ac76a233a8f58d1ed40b7c127baee29876a6bde92352254abfc42def62fe70c'
            '193c492ac1473bc3c776d6eb36672eaaa10846882d71222d5bb0ae93eeaec72b'
            '888bf17dcaed146247e5142cd956caa7c72ca248a90595066c8869c52a7a78db'
            'cba8c9e2ea513f0f30eeaeb2ef51d803a448d6c82c6e95f16a41b8fe8ccdc972'
            'cf6d939db6aee06f7b5ddda1fa07bef4d6b733fe64fedf9bd77eed8db74ee53f'
            '65146981036ec8adf3a6e238d5a125fc717260c1c84053a89b3349b6ae056268'
            'a607431ab4ae3a5312d75fce87c54b61033bf2c43aafd40e9f4657752815144b'
            '14a6729833cdf2dc0d7177c64d40676e82ef4f637f866d30a39cc614309d9d72'
            'f9a65c5f6724e417c0daae19634521f80f68c94fbd4774fa8bb8738f49167dae'
            '2143b41aba14a4cb01b616a2cb1f7ef397e7f7f66daa2ea929695c95fbd870fa'
            '4bba0ab3027b6fe8716323d96d6e0cad634b363e1682ac1df20e858effa46f6c'
            'a8f45495c096dd6a3845b651fb21bdf29a55b8533ab05037b73448b45002839e'
            '516472a1618b35c168b869b221d021e74259db38f8a8e18a650362c20aafb641'
            '0fbb3f1eb6647b95e3069566b60bee83e4a936edbda6c231876adefaea01706f'
            '65750216db57b6a2b1c5f77e3025f6bd7718db00c7828ba9858e1e6675fe9e47'
            'c996de6e8173d8c71a2473e1408599594ff757d06faa0169db56243faf6713f5'
            'b81d077ea735a511ee50b10f4c5801488376968219c7ee34a3cc217d4c632c8e'
            '9e4ff1835873cee551ae6634999487a3f52ec7d799c4da63d303eb34afbeb6a4'
            'a3cdc5bf8fb880cc15e93a18c940797f3e0d5c65b916b3b4805a3ba6e2a65280'
            '8c298f24df50f0c2ce40a704012adf5bddf9279732bc203a522bf8ee42a92f4b'
            '642c7f3317d9c95a19fc1e18005c9dd875097e63550206cd28371317c7b4f8ce'
            '86fc1f206217173a4bbc5145e42737dee7b41d4f93361b5badfa11a904726294'
            '78c12a45a19811f12d4ed8828e1aedbf3d1746beb3085d218b2f1d32141daad2'
            'dfc8d4adedf0054c856fde66a6d28297431e0bb871a511f2521157269283870b'
            '7540b3291a6d5044911ff7b1188dd2acdd96051a69d57a47ce83aa8c5e1bfdb8'
            'f67475e4bc759371bd0682dfb028eb583d9fb1cd2d8a0631b9bf2009893ea89c'
            '0b49ee01f5f32197ebdfc239d5a434ac20cb033764a7d6f34b2e4c22464e4e33'
            '136b8b8b1f0d6cd1cb387997cdd4e3142d67f31bcf579256c734e4a07dd45916'
            '8c51f4ac2396d1d4226b1e76cb52fb929e16ee5e4799d6d085a025ab1061a686'
            '9f35cc2e0463ef905f9ea2d278bac133e286fbaf036c6c350647de5180aa1b67'
            '92999df9c0e09f59f70d9d3a47ab686ec02bcc2a93a695a7365e8212ec422037'
            '3f8cc8a4478b76d668b6ad05b2c1d85b5ae3bb66134231bca00b136a8c910bb9'
            '892137b8a3bb665f99ad9132a7f2d796e52d61bc3d82d738612fa449ff1ad33e'
            '123c7355a49f595d549ba33e6eea8ce285558cbd9c5f894fc3b82833b2da0830'
            '1f86533b2f412b2bc149e15f7a2ee73f618c1644b811b4449534620c57daca64'
            'e8aa3f17bcb806e7b350e3998e034372022147fe20264de2193b8647b4fed5be'
            '53b39f221291ff94c8baf2e8cd86d3de8a14d30e786131639aaaa6000ee9b7c3'
            '44977e917e1e3ab482759491603851441ac9b16d194c487738522f11f4ecb1ee'
            '00f950c749023ddab75307506c66a85c12bf3857f6e227ad1a7525564cc60ca6'
            '5b915b9c0233d7b08fdd17cd61033106e35729189dc9dd46a2412698c387b946'
            '0611ddc48827479a64034f0ef5898bd6f92fb5d8563c2bef30b15e287b41bb70'
            '44d622ce55125d949f1cf4153ae30d35402f689a1868bf43e89127e61a0ee328'
            '20aa043eb8a1c574f24ff8e8bd2987eeaf32d3d717c703a89739a468a10fc50d'
            '1367f5e7e1e91b129669e4dee13aaac64fec4acf9dea642a64208b2bf6b0faba'
            '45640cc6b280bd28da167f5f1ce36a429f5570df32a490e99cb35adf4fc79322'
            '3a343a421af5b600774cfcbb7b8a5e2519ec0ca0598fea5af1e8c694d817ae01'
            'fbd47e32f04dbaa9a5e8adfbe12cb92a7d73d8b438efffd35f8694f3d95e43fc'
            '02e527143fe63484d3025bcd2cea51250312aa5cf4ed53a545c3663bd0324502'
            '3d14a3fe4c96b2d5f9201a22bf1a132e1b661215699377de45747d9e9f253b8c'
            '834838303f35408ecdf6ed3882e371c3e4c630c7e78594ef824acd1165159781'
            '38e237b435aa0e19855cf7beb2121be4f7e36ec7293a539e6d8910a172516058'
            '5e4c6769bd191f1e786316be32c1697c496701ebb5357d2438c9518f71c3fe5a'
            '319f78293849c93a8a7df4816cbdfaad533463239047e3e0d3ae0c071cf7667e'
            'e3f4500a4281e6efdd4c78cd193522170c7a560054a314eda2e27c953a0040fd'
            '626059a8c8fc926b41e37d33c1bec7c8b3eb841ef5fd47743bf3f9aa473a8147'
            '6e623c9b3c670f63535fc6030d9ccfb7a710d95a797c84904a2161b8331aec0e'
            '383bea87c171047e257e3730e345330f6781016e3caebd2f9d04bd912388bffb'
            '807894eb103150580ed3cdbb36b37fab9abf0a86a4d91eccf7a363103c2ec562'
            'f0d82f5ba184c1fc534494b2f7ed85845b4cb06ea2efd3c2b637100b38cb1224'
            '002e6fa00990789c2fc3d335374f6fd188d1a7a53da98e930bb88c2e179a72dc'
            '0ac4b305c99e73a11e4f8c6cb5a4240981740825a0d9ba98cda44b2226d5ffa3'
            'c676882b49643f2755bea395d6519aa73748ed6507841fc72e26a2abfd5121a4'
            'a11495a8498cf2009bc3e55e0cfb294c25f8680338cdd1d6b2c9caf76d0e7515'
            '56ef62ea75467172543a45bd55b841e8d3a15c47a93979646b035309b910a97c'
            '22f6eedb2274ac35cb2757feb7e7e48823546dd4c784e83835e4e7ae0b5605d9'
            '828db07a87831e58344ef4592bc958f8d6627c5a5566bea302f6a6fcfa7e573e'
            'b9fa2ce99b557260a778c9521ce3fbb519f714ba62c9db55d1bc6c342f86cbdc'
            'f21194418414ddd40346c2fbb16ed68cab325ef660f62e864345f7182a00d576'
            '38c06ff1f1c41327e6dc2e320481b36115584f71c87a1630540b30daffe5bb59'
            '8f49083530551f7eaa72a835219c52f99c15eff7eb2309f800f1bde3dab10dac'
            '94650ec9de8aac6208a8e42b13c3ff3643edce573beda863e930a7c19a8e2e3d'
            '84b5fbdb658621b4b50859454e0e85947e393775b2fa6c79779f152ad4a201c0')
