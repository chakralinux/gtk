pkgname=firefox-i18n
pkgver=53.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('4de886113661f70dd9d0ee8e623845a5bb8eaea53ecbd5191cb78914dc48bc3e'
            '2e34e9471db30a7c36361b2bde7177d1ec1adeba499ccfdedd380d89397b695f'
            '64918d0a6395f85c243fad1f7f6397a6096000507f6f031b7899b27b59394690'
            '19d0f64f53656594dac1e2e75cc5a4596a4a1129d171242efe31402b26f62728'
            '110111ccdc7ff186f64e4b7401305d3d6fcc42d401d8b0be0713a2e1fa4c440d'
            '632ac665546e64cab921a5bd199875fd25391ba9c0e131afb85d22a91eb82a7d'
            '4a4e37b2cf58f64157e1c05d905f77cdeae476815c08c6536e90c1baf6c75c82'
            '7c41e6e968045eee6d370841bc379f0df02ff73d90b48e92408c324d9b73db3d'
            '8b084c3b75c55c3b8e71015537bedeb12294ac1892fea17933d1c4add9b18591'
            'dcab170940f2c4ce0fc7d10d0d24389877d556a5bb7f8c07f7a3060833447a69'
            '6e9432299d66d24aa4f97204326bff8f41dc657de8c7ebe014cb9ee57a812371'
            'd3c8b021395d28368e10e2e47a4e5f3099542328fb941d94f0c1dcf67d6d911a'
            '5bff055dca526aa479c9d832e94edc58753a83f1dd795d691dd61a9ffda34baf'
            'd89acd7bde252133ad34a2470632ba495dd17d49aff8ddc6389e3c7169c57a37'
            '6c2ebf355d38757c32d5f6040226163c48198a1b0eb3825d3e2a4d50d5b3aeea'
            'b942d8d0dddceafe424d83d7eece40b0ca517361c8609a45288b3dc0391574d4'
            'e06fd0c008127f29b1ddf49263548268f889037539e919502d8970aa467bb0a9'
            'f559c998e0a9d0fb6272f7fa93211e55c7ef71dd443f3dba14716d81d44c88cb'
            'd55d5d0a158db2da4c386138fa214d6698fabbe7450a18fdd43e403c82bfb489'
            '7f8a7014401a642b5f1ba7a3d60d1c4d445917feb9d3f4d14fec3f68964d7029'
            'e8d3d164d433d755f7619c8413d1f53041f2f23d5819c8043362408b26245398'
            '87b6d7e179ccd1b5e75eccf4487aed4def8e6c37d203355f92dbe3b89f1e5044'
            '2f102230421e0f57842352382bf77d0d4e1e5fb8f10d02c46b943cdae3a8c3ee'
            'f11c03e77b3975defca7d68152e8e95f8c4bac8c40492d080e8b0a8385c67778'
            'b8d10a36f9eac0934072f4942615a2e1f43f2ec7305eb24061a50ad1a3694d3f'
            '345a201d2a93322162aa116130682f7a43c95bb074974bd885580606c3918adb'
            '14f8bfe25bcda0c0f7a9eaee3d6a582661e6d3cda03e2abd47ba7b5c42f4ac3d'
            'f29c067cf099ca37fc494951dbd7a8cd0d14854aeea1e2daaec1eb4baeebdc10'
            '29fedf0007385cd7ef3954de8c0447e2018e93d7f5abc5f4d6263756395b5e10'
            '7b9688ff120afccebab3cb690e9519e0bc9c84cb4d603aaaa76659cf6b81c7f1'
            '97708d12b8990f7dddb1a0b6e8ab3af3fa2ad03b31e428b7d9e03678d59cef8f'
            'f69afbc09dc781ef3c304838122dfd1f17676d76c3b76e59ffb504e238095313'
            '6800aba04ef8310ae98a6256a35890b11e30f49eed43f2e69de2c94804115308'
            '3b6eca1fc2f16d42ccb4a1d15a4316af22f364affa656e93ad080419da55dd39'
            '7a597aa25d81523ec5ccaa525ff8771fe14d7531ac3464bc6e2a6f7a394b1759'
            '4b17423156d399a693a5a2d508af2bf4631fbf8dfc1778cee2408e30787e1153'
            'd2ec574dff0b1d944cb2d90736937831a004f79af007d54ba55ca61f7851c9ba'
            'd28398341f345455c3ac39de07e1570ff6ccb5abdd4afcf918fd1b65677351ff'
            '3524d7db0912dd68a579d38ad52cfadc27b9de556d584dc1bc8100c866398bdd'
            '5ceb868931e13b528659d6c2bd030116013ec3291ed21ff41a585b66a7fd2987'
            '0e5808b1ec635043ad9a334b6352b9f7242fd55b2f80493fb73e319d471e0c4b'
            '811b08146078a6dfc9f59fdb0ff80bb2072560f012a4d2702de1347f2c02b155'
            '81d8a80543aac8945026b976c21a61a17be541444eecbec3cdb2f8d7ef971d58'
            '498690f68f8a169e4398178508ab5eec5465781e6c77003baee64932ef340484'
            '137ffb34277c28f78e040a01eb8a179c22ef767806c6848638006613783d6805'
            'ca0e4826932e701b0a43edbc2f4b64632c4ffe848d3029a90aea63907451d256'
            'a8ffca061666059f1121e144d3561d54e84e3644ce06006c3d907d55e2a5623e'
            '107764a78341b1c502d5370ee36d4b429139df33cce64555f4f79929fd6945e1'
            '06cc05b94d0cc622462bb85aa3d322632df4a348fb4c74183cd9997a8524bf19'
            '9f3559d278be8bc8e264b7870223f1200b0101b66df9808a25abdce4f6c4a3b0'
            'dfd9c1e53cbb47a204f8a7c91752f5dc751796bbdac09a44fa3973edff092e95'
            'f4a914acdef3e776586794523566d694fd03df2b8fb200da4f4352d055d6d8db'
            '67a071e1cf5b26afdd545ba96b0c8dbdadc3b5bc4dbde07f699b4e7e2668d86b'
            '31f416f778e55047793fd7ff4b71aa194e0048a2ac911a903903c29ed376ccc5'
            '2ab928e41b360ecc4f2e2ec4d76c984ee313e18278eadec6ae7d1539115d3c12'
            '27632a562140d94c7b906d2792f5417c00966f2217c38552ca51832748e00225'
            '42b5fb3765e0651ac5cde182301f7956283eba22032bd01fe41037cdbd6e4179'
            '2fd2d5d708b8281c4072bcc55c3200dca669e38be752af291f5194082664a17e'
            '6fef5aaeb7a8c1f8aabcc8dd4021795e9c8168928d194d3dd8840dcf8c0a915f'
            'bc6ba57ed129dc6a68cd59b3a5a453b885fd942cd1218ae1c4e53a127c1a0e81'
            '2d9641d52b48489763a06a60c59c2b370fbe4163a54f36dd367ed23c7efde6cd'
            '4fa8b8aa2128533dc55782afc87b63d6982d20617a1d2fbeec198c5c8d267f88'
            '911f96309add4728b28e1f6954f4e3421f280aa1eef214abf31f4598c09f682e'
            '3a681a280cddce8f17d61fd36116e6603f4d7d4c71390edccbe6c9d5ca008ceb'
            'a1bff51d32903b3a561ffe1a040b2d0b48db6463aac1c31e6eaeedd1af1ee9a7'
            '5e40d33fcd0db8b3f06da7c934ff1816ff21abb40f8dd5c135c3f78642457a6a'
            'df07d339f56c6cde5ca117e6233be12b7594a58002caec82bbf176dadb6f36ee'
            'e71be564d97ffe496a441a6e13d136fa1350f191b8ae32e0bd5ac92cf2eb6afd'
            '2e6d49ca79a1d322291f8de4827e3cfae92e02775ddb75887459cbbff8ab2d8e'
            '68d3a8fb6cf53fac9146d5ed628541404527203f0a6a218df33a785070a17a4f'
            '99b3551c4463640a55b5faad51424983f7d7c2f4bbc4b3e9a6c283b3c585303b'
            'c2da348ff549cfd78ee03ad6b1271bc8662bce860658e701349e0dd878406317'
            '2b2caf4b5bd57584eddf191f4b6bcce03198c7fa3b4d54ea19b3d865da22484c'
            'b1c0775d414aeb471f1837ccfd89f07510b5f98219fc3969efd80b86f9c072e6'
            'c2fcddfbad8e676606716fe4eef0eca0ecbae7a29960fa7513e6b8f50ef01b02'
            '42ede561f0cae8ec227dff4caeffbfa7ffb3f67804335a20f2b77f643f99e603'
            '10521ed01d1afe868f524bf7386ceaf0a1a1295c9d42f78937483fe5324538d2'
            'c8aabf6f33b57297ad0d1421d2383d03f883435aed3db551b36638344540ecaf'
            '16301cbd33337bb37e04ce0cfd1eedf40582388485879c099da705c10017b2d2'
            '3b64dc5ef94d2690c1715ec303c36ec92a66df78d18ae302a2b3cf3dcf50d2f3'
            'dcd27d39d798db10840c24d20455c5c924ba45cac16dbd6c01ca6351868e64d6'
            '00f83b1c3fc19702537d674672faf38986e048fa02ce2912ef93c44b338cebf6'
            'ed91eedd36f448f05b1a35ebf668ae5ca6e4308e0ccd862890ff2b3fbc6a81bd'
            'fe0c3a101a2cbd8212a29050b8b881ebd5692f883b85c50117feded794b20939'
            '382443552ed9ba78b5312d70334b87ca2280fd04674c5f239860652f3c0cc4fa'
            'a246d3ef11bd2f30146e29af5ccbedc4ef511878abc123e42a2b805d36d7c938'
            '3059d090d922024bee9e56a7445f7973ba6046ac27a5687bc22ad4a6641b71e9'
            '1187c35b6cda4801910e41e73d531657b611942735501a0089aadaad24d72751'
            'fe43189554603fb84dbac34a64c39716cc5e60f8c5ac8e32d6cc0ce3809c162a'
            '8aa5140514e8cea17eff26e73273db66917aae3fe6839a79d4dbdcce64189968'
            'b72ddb1b5b58d098c6ecdaf6dbe711f0003ec6e5f2eef599499a22f940459587')
