pkgname=firefox-i18n
pkgver=49.0.2
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('65298d08d05171bf513dee4e36d57349ab1a890dc111ff29cca5730c971969d8'
            'a4c8632c5f91daa6c0fa8b82a1a8540501a8070a928fca263fe0e6051b9f36c8'
            '2f3e691e0a6cf82ceaf0209ffa13015075b7b4b409f3695fe9e6a4f3929b823e'
            'f455b47dd47756459723dae058a30cc017bf2e509adfd6617d674b564b07fcee'
            'd29b19abb7ffe9ef42e59c72aa459af0b4849c3b6acee0542f389c69281b4cbd'
            '7a2cc27f1104c677cccf1e968fcd6bb06fdaed17926f9e5581bc5c00a9a1eeb0'
            '73c473caa130074cbaffc134fbfaeaf69525229e32d4f2e9e6c9f9f64f14d034'
            '986a4518068e1ec701d5e98e83e582662837b2e6b1e7556b4ae211040bb822c0'
            '95c7a0ab06a503e52ff3fc6caf63488bb7c1c64fd74d2a32a09507595f25367a'
            'd14bf8c1b28f80c6de07bb7a3442a19f6fce5bbff1db2631e98e8f9ad3611b29'
            'e0d73834ae46019ecfcc38f162479ec2d217dc3e564d61eea620ea304bd3e4b1'
            '911da1c057463096b792ecb2e040080c47edf658c8e9d3acec3da89c32d106b8'
            '370347b913d71d1d3e22dd1e3294bbc1067b7962acdafa58f81652f78094a566'
            'd364aec508247914190da1f29462bc409dc16d486bb85988b5aeb8268b52c991'
            '511aca0eaf0ca1d9da5cd6014250323312e1fcb168a1516dbf3ce1a4b367a53b'
            '742745a00bd1b3bb7cf0b80fdb9bb7fb8bbf34069219b9b7ac59557e3f79371e'
            '54cd81ecaf4ba25a0f55ae12549b525d76ec272bcafa41476bc1aa47af9a89e3'
            '686d668a29cf867fde17e92e8f317b1a9899414b6764668beb16a3a80eb656ea'
            'b3238f69088984305932d6a26aebcca8321b000ea45a3265d85fa678c0e2e5a0'
            'a3868164bc67d806d518113e105d3685a6f042881028d3bf97daafdb8025447c'
            '53bc1aa5d7d23531a2946458f4edbf811d29b142b74d69d3627118627ff760fa'
            'e42b6aa6855d857e2e661edd5be5f7d9f456e08f9bfe7d661e60356a56d8c74a'
            '96c9fedb5c48204df4e6037a5824fad79f9260ca98a8cc6d49fbb9ea97f15ae5'
            '75840961d99c2e1961e353a05cb0960f051e71d9ddce65ec09c1f08cf6a93cf4'
            '8ca500d3a963031bfbe4f12f27c1f0676b3d396b083d7eb4e2d0052b2ad47dab'
            '3856124d8e2d297c19186462e6b61910fda55ff4b6838da8219c2969d266a927'
            '882e2300499552eea0997ba76e423180f5b23ff0cd7e486d7e816da217062c08'
            '8654e839dddd1d5145666afe2454044157963ba575a6695d1bbc7f7105a146b3'
            'f571b253e47586663528ed0a742baec6426c40ce5843dce448ade893459a5af4'
            '9cceea5e910da2d5f491e142b44184c311665b8507994f4c3a4443cbc2e7ad06'
            'fe81fd58c32e3d09cbf9ff953945f2205d1056a756e5f089979ae54b0e4dc7b5'
            '3464ce2fa8e5810b3e919f958ca86ba45f0a49fa72e0046db0915d073d80ae02'
            '4b6b6c80c541f9eff56e27c2bb88d72bbf9992e4c7658c690649138eb3d44370'
            'e55f05e9d4c6e319bb70e150ea85cee4de64a18521b3e59bc4290b7cee6dac63'
            '2bc3835c63140e0c793dcc171cbed211ec107abb57b2f36a9a6408057c422a4c'
            'd0b349d51e6abafe531e3b0b2e0eb609bd7173a227a66272834b341e436658fc'
            'c76f4bedeb0e8b069d5f5cb4a4280156e7d67fee9448171c4fc5383c7d77467d'
            '3e2619d75724f4fb794ea32e481d255bc3a6da75bf41cf554c83968f5402b6dc'
            '6aba31b4ee2b4c59715535f0aa49c26e5a0a887aa9d4030b85c372dc9514655a'
            '503d9a19852a0e252e79aa4a280fab07c7a45438f5dd3e9bae8cd3b3ae87eef2'
            '2ba2038fac61a9e48c44ec2b3178584f35b34e53aca16d36ab6d8ca9caa1683e'
            'd0c704ac98e642568e56a819fc36dad2281d268475a2f0f8c8489ee15e59e018'
            '0ca792d67d121e37a84da17f0c8364d557a6d059ebf0c2787db83a1b43654c50'
            '1c8f2dad47dee51943da3eda3420b65deee69afb7b99b178e269de3831903869'
            '37379599895942f2a4705cdf1a278db148caef5dad6dc4e979c7676294428a2d'
            '59ae728a2dde238009a2a9b0810a444ae3a6f43949796f0558d6d2fee49073c1'
            '30018611e03da20a96ca44eff4f02ed2fdca4a012832057bd5bd1d8381d9daf2'
            'b62df8365fd6294de64b6d0b5c67c97e5b9673d8aac5205347e9b7acdbf1249b'
            '4a25f8ed2db138c6d193d1818e22b36fa18299e9879a623bd3f7ed0383924e80'
            '77b9f14e4e4a8ee04028548c03614a4b4f7c4025b79b8970d557d7cd85974b50'
            'ab2a5391e9c76c697f4b1ec445b15de3cb331a49c06e847fef97e09834282ec0'
            '5c8d9988e1cf27b1d95b16f57d596dd8221d32983c12fecf2f4816ebc94f2d2a'
            '1e0fa27a5c17fe58a8e3a7262776f3584c871b72b2234edf05fa0b6940d3c705'
            '9cf95dc737ab870997ad600fd1da6ac37d17b88f992a84a2fd2e82ba4905edbe'
            'a08e147f20292af34e5279f5cf9f52ce8c0ad6e21fd1f082104c118217dab562'
            'fc28c74e78199f227f8e5d8317509779081320c30c3d2a251bfbbf06326efb9a'
            '2c2be8fbea56cfe5da6bf61c692021d019e3d9aae52adb182df4df8acfb4c60b'
            'ea14b1991f3fadb9f8612c143ffb2d1b6d09d3aaedad6878238070ba65d4733d'
            '9e47264c80373315b405707ee90a9545cbe36f8f3f9f19c7ad862dffdf0bcae1'
            '6e0757e0bdc2531b58cc5743af4df69a0ca7a8e8a867f395dc984887d81cedab'
            '5f7a36c98da410d3548fa1cd0c3ea2e08b84dc4879d8c083b2068bb6daef5146'
            '89b949a1472eab71d36f3685ba6e56a970bf84fb510dd5ce060f27f7f86db91b'
            'aac6e722b075a341c6990403700c5092f1794239ef79bfdf6a3b886531d1e64a'
            '5e5738c1d5705982f1f95bac6dd9b4ba81327cbb9a38aa839b82af82fda485e7'
            '82e38107cb0bb7f6708d01eee1e13171337cd8bf1d8cfd673668e6c469798f2b'
            'd34606671b381f75074e94c3c67da503d2604c41acb4de54ef50318f023f27c0'
            'a110ec5e79fb6d26c5b7efe613bf6c4385c51e2a7a38130c84e03d96f5ea5d7e'
            'cef8ac88026b4ec15f16834217d545c60cba23117650e00f05eb3a8afbf82bad'
            'b568620760faa754eeec21f45d85e83b1edb91df8bc5de39866608c7b13ab1ad'
            '7865ff1a1019621fc243d2431951930c089761ab6b56b885969cc6ea048b2d10'
            'e6b21d65d61cf17aec523fe8e4bc640ef12045433c498d4cfd9cebee4fc0f33b'
            'e60500c60816f769738abeb3df94c4c431b2bb17dd18741a6142854acae2cb5c'
            'a66f8029fcff77da10a62fd2ee02bd4d293da7b5dffe00ded823bc2fcf5d8e70'
            '0a2ffec75cd32c7bc43a792ac08b2fdc6a9fd491cecba5d8d5e5f4a9d94307cf'
            'c3b27109c7125f2d83193d35ff11a3d69883da51f255dcd4d1bfb50e71d8791d'
            'c27e527b02e05af1b04cdd3044ea3d28a6ba72dc95a3da98b18fb18b49d2ace8'
            '95f39e602c8c0bdb5d53cab58b650cfba7572117fde26107c38239c655c1cda6'
            '96491de89677a55c6dacf0f91566f77f72e63a1536674ffc46e1640863e78b65'
            'ed8e4f818f306d07ccb333539c3a5502261d0d8ee4e454bea965c29b5022a4de'
            '6a3e64ae496566871b9d54627d9b5f20879b3c4ac38e013488a74df9fed64efd'
            '37e93977137c15f1c8438d67bbca16a273e619d558ec9a8ed5471f3bf7535b45'
            'b53b82bfc6aa6ff18e7f57a3b74ebf4838da5d232e50ed53e2ad69915fa170a6'
            '5ba9f4f7302f7d7ca05ef95a3d7a86be1d756d973032e0d3f299b22d71d8fa21'
            '0e0bb9198a03df8a877aa297d2727edeacf656b72803c5fb536c08491a042148'
            '4e1be84266aeb2ce62f270f112985a29b7c256038037e8dbc99ab67f6a297229'
            'f89fff5c0340cb53ad1acef175c5d353f7365f521ab94760f2c3efcaf4b334e8'
            '5310af081a72d8bea9852def29793a08e6fd8f3b6f482e4fc40390613a11672d'
            '0795682e6b8da9bc2849ac051cc0ba892237b5231d8b0f0e6c3b07b1b54d597c'
            '60c3d9fd78e203a3c8530d163a6e79813d3bfe375b8b8c1c85d7430007cc16a8'
            '6eecb6570fafc49c1f3b7524fa55b36c73a6671f445d2662d43fa7d4890aafe9')
