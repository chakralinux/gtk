pkgname=firefox-i18n
pkgver=55.0.1
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('6f7c4240fed77e889f109fde816b50455b634b987ab992a3c7b694be125205cc'
            '490aef3f5970fd14079ac797267141d8a6a5b41ec34ab6152256a9dea7e557d5'
            'cdb91103d3944af2fa6b6e10fa30feae23b84a3b804183e0f0fda94cd272b2df'
            '6d026949b018a7ffed5a856c7ad49c2ad2ea90baf9fb3cdce3fc53cbe4418afc'
            '7cbab39d14f34662315abc17b79b9d817e13ebae22a88c2b6a0e3861193d43e8'
            '44362a21adf85925a4f4adee880e68b5cfb39354ce1fda155ac627ac5e229b1c'
            '553610561dc8e1aa22a81b5f381d3aacb13cfbb5ace12197117921364ba6b89a'
            '98fc0879139861cfaad1b07c32b8ff652d5d222c4b96929cec0198a417dc9e45'
            'b358aebfc407430989c8f4953b6ccd0fcc41afd0afa3635ce85b81fa3ff25529'
            'fa2d898be10e9dcdb639f4f1ecfc8bae79490536a6949b33b5d06612a1c6da0d'
            '4644f60ba5dfc76df68732c5824b6bbcff3f9fd65716fb5bb46c934e0f84c396'
            'b95850454f675bef6c6ea67b077e489b30f4f8d387ff0a267a77ff02c3092b92'
            '87c47d5d11701b52514534e6dfef480a95aa801c89f481355b5486991bd6a0be'
            '6f7a93484ddb5eae1586b53da28a30624e933ff65c1c993f3eb5bc1ab89c458a'
            '7e3fff98eba95d944677c2141e906c1696a1ba9ae353c38bcdd78f2a1655b25a'
            '41a9f19e9993f82d229da0460ccb0fc4578f55a253405685df96866fed8c2038'
            'b55ac53458319d19af09f314c49675a8da7af36337882c16f985bad10ed7226e'
            '55e0736450973bf731f167c42b248559b69c34beee75fb644d0daa39ef1b5d18'
            'a6d483a9b6ab7a83f7147627b8058524eaf6f8f893ad1d59e0009d15287c8093'
            'fc993dd881361162df5e8b2399359b21b2efb3d7756e8e64c3c3f51c48d1fcc7'
            '7078baf35f5c02299683b1dcb3767bc796c9dc26a9dd649729ed4109b91fa8f4'
            '44a9e1264d8336dd3e23991d0a2b2b4b590828397cec54fc62a2f1bfac0b1e92'
            '5ec55fb7f8f91117ad844b3c5b311a58a0217b198be7af32fc9121584ba9f9e7'
            'd6b76fb39b24e3ff093808016f5d216cfb4c5bfa7233429816ce3967b95ca3e5'
            '5813bab2d610874edd3e28be89627d70c197705c7133e620a5c48aeca51f1876'
            '8e5bb23eba622e86fe972a8c9205f279896e9177df500d4647f85e2bfafe3e27'
            'f54726ff922d7e87d374e0967bc18b620085b8795315de3c968fa84909b82efe'
            'fbf54f27015a88d6a055c021429c0cc10f58586aa1d5c143da4d685a4a4e0305'
            '658dc38ac717fd8447fdce76be8776f6dc188c6c574a103f41d890c81656e2bb'
            'e96133eb241ddc6f9f7adcee754df3c1b5653ac997f51e703eec4d3586322b98'
            '0e8814f133573e6cc2405ea34e224a8b2443c3fcc9f250471f701a4527ab5f05'
            'e6de2051c011bea6d5a543ee1b831257f94eb83e3bfdef9513f31384dca11780'
            '9272be8af0f1522432e91a89b82dc5d39d04f01b76a784492da223c89e39e06a'
            'bce880c117a4644e95a23d22d5f389c4d3014ff5f95a81ba0508b01ac5145082'
            'e0a047c2c863a1587e7006b26df751f81f49bed149d4232f61f69b0ad78bb064'
            'd02e85c41c68460aab10f58338c6384ca9dbdc28291e226ab31d0b0d09b2bced'
            '6e65bcc743bcce363cb67f47c6957cd859694febd62f8920f33150b7d51675d3'
            '8ff9f05d38c1584b8ed5d081e778780d4c1772b23c32967772895d725b5fddf7'
            '6d5586691abf4f8d4067d629ee32d38928b28c7a588befdd261bf736c1fc32aa'
            'c03e7a53225c61b01a49de0be8948c331ccd5d31865c95dbfc1865ce83cab24c'
            '5bf5b86b6d353fa7e3ce1b9406e672c7a2a661551d45d1a491d602c187081697'
            'f1e34c791aaa55edec82a97561519dde281868f4042ee0a243f67fe43b806ebe'
            'edfa8ed8cecfb30f349fe21b1b1d65594a52495d8fbac39baa2255acdf8a9050'
            '624591079b206877e6800850adf181ddb0b91b0a53c030c5b2af4c4ebe0b843f'
            'ff0ac12ea88839c84bd3e22af3ff460f0148c8c94329ca16dc125a5fddfc7b7d'
            '46b9ee87262295decfd6afa69fb8b298f2619e5cb01bd1513680b41a8b683f42'
            '44cdd021dc3a4839dd3ffe47c02a9b87a7bd8dc58cce05ff0cf366b165190de6'
            '39643095b1f9db4b222e3f78b16351e004ac493e6064b88491fffa0216adf813'
            '4351c30e8bb07e87cc47a1871fbbc4b0a9ff3a676277a53778a212ffcfd2e380'
            '3936a1ca64c5f08b37e80d277bd90d9e86e96f473fb8be09e8fed349b3dd5a46'
            '4d9ad39025aa9a10d6f7e7b21c645cbb0f75cd7eff53445026c97529edde1d8f'
            '79ae929d6525c4837a92a5a7e26ba440287b574ba7acc2d93fd538c3a90bab70'
            '1e685db811dc69bd04847a6e339d369c50a79d8980c3cda961bcbc897be8a3fd'
            '1552e7844381bc7905de04f90c36708c455cc8c4d6c47a19a3d3fe33621440b9'
            'caaf5ff7f8b629a3f1016b1dcebb68d41c667ff4a03fc54358dcbdd01c7c2988'
            'f8a5dba9a56c8753eb11e72e9dcb96e70094c6ee9fe13dfab8af04451f81b7da'
            '664b8b141107c85b24e132526f322fcd63cb20624edebf949bfc0c0704889e91'
            '47349667372d587c7246c574409f47e45cd097237f72ba6be28fe8cd55f9cdaf'
            'ca6278ee5fdf9bb11648ab22c5752a9a0c0d02993fb4042a1a15fc892baade49'
            '212e777a3de4962ad2bb6331f923484364175e2949f8f258bbf565a0f1bc387e'
            'd3f2b4b80daa430dc2030c5cf733dc0456719ab825bb339fddbd73a45e39f5ef'
            'ce83a9066e1a924cc0f504ac0327170f73ed630ff32af3449edb18a77dc79213'
            'be3febae9545cfe25e42936b8b5931d6c0751598ea5cdb88bd0f5a9d13d175c8'
            '347a6a41ab763a2099bb197b4f43aa72faeea48143ea8f1c993ae04c320433ae'
            '7731a0877d2d162477ed5a7b4df425f2e3c3a6d4facd2f59af8e7760063ae452'
            '7a57539701af596768db8f4294427081b7b03810182c26ca69bd90c4dc259c6b'
            'a3c66b54cb1b7e3963ec9c72defe55f6b8eb6fc2d692a9336dec5e384826524b'
            'b5bb2ab053e34f4edfc11028914f95c944adac8e9220820e9fa0df280097a07f'
            '0e9fe13a981a7b3c54abce94c3950712271038199a0b7de4715dcb8af84930a2'
            'df98278fbed08d1b4a3598774b26cef65d675f9f6439da026d1dd722f46a76ab'
            '6fcea7e238357703d8b6e1cb7de27694a560484a84f2b164e08c10d95ef50306'
            '27c752ad330e81d4d544888c4fdaa9f0e5095413c6cd852328440f2043bac36a'
            'd4cc453048c86c01a84e08218e71a492cd5b422a09551de943659382bff83536'
            '5526b2ba459425d6ad13b4e36e15a43777f96b49498929bc71e0937b66b686e9'
            'ce5d14c0deda2688541eeff0ccdc9869e55f5699566978befb8bbd08ace55e47'
            '1d8680ecd57299eb292c954e24e5106bd61025651a704709dcb7da28a3f4c338'
            '5cfb44406616ed8a2d33059217d4e86c5e946fdca0a50cfbbefd2c11e40802a6'
            'f114ca3617d88a38328069b9ba6f0a9aedc1f335960a1763708f2d4b331695de'
            '101d7a23104ab16cc3cfa407d635059af0bcdfaacd558eecc9bbb4e4faee4238'
            'e1393f3650ba0d20ea4eb3ba186cbce97e1600e1c2e553650a495304c70dd0b6'
            '6f8f8f52951fdaac3599e3f597dd21480038c1b0684b48635dd91c192ffefb34'
            'a2808a494f98ee9a8f30c059546a45d2faf18feecbab174bd330b80001f6d280'
            '60821b105eb139f81dd41a24549d6f8c1c7e6518cc7792f0d9e427e68687c2ca'
            '70e1763998a695dc98b80e4b3d16eedb6fdbc436f3792018bc23d35b17bb3a29'
            '067f89db9075a5782c351973c3df1ab7c4c0fd9fe967811e4238de9cf718dd48'
            'f75d1ce43dded507b6ec5ec1157a57a7059ce1fa50a2d8246da211b98a5b59cc'
            '36a39d95a6372f8d624d88212d596cbd6dc08340d9c74ae6bb9965a99c9a81c2'
            '303e99ec0d3d5c3dd02d7633e191a2b33353a11e400e0ab4d864cd2b023e20dc'
            '54ebc599e65e6537b513cc0192803f75395a974777e63d705d00f2d5997d6db8'
            '1687a317d2fe5bb69c7701d4f9484dfb5a62fca92174286250a601d833f28da0'
            '66889e22eefcbcae5eef8bb6ab741d01052016d6223275f3cc7f98b899478e5a'
            'f47562ce8d6b63f4a52417a4867f939b1ac2f38f48c5ae10c806266aef9384bc')
