pkgname=firefox-i18n
pkgver=52.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('4c415cf825a610b7a08b176f1a6982cd0922c88982c4c0df5d886e0444d71585'
            'f2de6906facbd514ae721099a380827a7ca154f3d5234aeae9d981e5bc7bc620'
            'fe62fdc89daab5287553effddc2a195a1fa4fb8e0442762c326436e9662869b7'
            'a58274a40475d5e336eb39e73fee0bdc21556dce89e9c536bbf5a9cbb4c39a58'
            'da5eca8dedc741b4d6a393698777390442aac148ea26ef2ebd12f08ed1728851'
            '5256cdf25f94186bc95d3092e7a9707fdf940ef60d313c8d74d2dcac095c6d3b'
            '7f81b3537177a950a9ab0363c0d71f162a89eb7099a4e804b382eccbc2b17f1c'
            'c751bdd2fed028ca8028488318471fdaced520db2060d61d6dcdd01bd2913580'
            '572e03d3fad9ef24157f01a5e1e4a778aba8dd41ab32605724812a7d4abb8f01'
            'd876f3359f5fa3d72db4450aaf4b79038d75e1070618344e65cdcb1ddbcf41a2'
            'f301d9a05dffaf247489fe7973c20daac171d985c1a3ea89ebddf5b5946e5e4d'
            'ed5965f53b917964ca9eba14a8b2ae896659db0ea7c6ef756dc599f155e7f4fe'
            '64e1a327145e7e175dda533c5d00248eeb40950f975b0ab3a7f4bbe9c92fcb51'
            '749753249f3aaf9cdaa5e367491941af93ebd9d1a748613b34ca034a489c541c'
            'bfe44f217ac0a707d282e0135e8d3806517d5873463ea6dd05e4a5b35ed117bb'
            '9e5f65b8160961ed3acc246aaae062256a939ce42d87fe07ff761459ff08c7f0'
            '89b3c9bb9b5b82c39bd125a28477ff04ed1a57ccc7ae7ff71ccd191006bb5b6c'
            'e50be592dcf2de20b3bb580e61266af989a4abc20e7554de14c4e8efe47c0088'
            '5004c6211edea9bb9cff662d5a0afc5e82f21af8c610a1acef3a54b7a41572e0'
            'f3c8b7fd52e9fb2a1b157776889bc4bd046ed2a164613780d7ca3597a7f190c7'
            'fc82349c4edcb9240117dd1a3b76b26898d006a086d95929c3a9adc41b93eeca'
            '01570ae120972aa30e62d4f90ff016d9420e749e744b138835cb09fb24794dec'
            '8cc982c3f9211486d3e8410297f3fd0aece40ab4246fceae6ed615503ae22f5c'
            'c99fc2af9468327eb36ee51a1d9996220923271e91b73e5c9e8fbc8b099ea1a6'
            '4f9a69342f1b58ed953bbd9c16d68728c967172af23f6b77f00cee5ba4de6d44'
            '9754855d00bed1992ebae49ded80f2734836e2d0f38280bfbc67bebfc0f51c0a'
            '6f6e4b48e557bb7c98d2cce746539624ab85f2edd90013675ac989f76a36b303'
            'eea641b38f167a271fdd74bc2b0496d2a2d7614bbc749ee5c8219c047e859f31'
            '639ac1016ad894e53d4e58400271f42d6b16ebbdc8857c0c2c2bd1f751df02e4'
            'b05b3848554fe60d81bd6190416a20f8799e2b8f5ce7539b6bc7fdd73db4480e'
            'f569bf4a59d9c52cf66364a552f213a76f7897e5227124b5da1fe1b8ee0403d8'
            '0826fe512270a75795ef995c3c7011332bf8266f2c10cb09b188421b5b4547ad'
            '259c8e5e57b6e92519fced628b7c4b436d18be0185c7c36104642b1bd2f62f9f'
            '06f8349e0a334d34aa2729b015277da1f4a79beefd759b2e425722a6b61db44b'
            '7cba0dac04203b11f7d38640b4a053c19a6cc658e073dee9f3ab60b83c7bce29'
            'e2aa7f53588f593e828de858b60b90e52aec861fe0f8b961ce984cd66488e8e4'
            'a548959d3d9c89a4566418e13f60bfdcca9ae7c7459b58320d690da6a1b1449a'
            'be8b3cccf9fa2515a248fd53ca9b93e86a12ad5260ca407911ddbd3388276c5c'
            'df972d6babfdb12589528e0bd772a03371a8b1af4f5f6958659bd000e7ee80ef'
            'bb48eb6eadb89e514efacef93b1d1ff8e07232fe7f1d62621e0913299c3f22f6'
            'bc6fada4fd46da81956cd0a388108bb2440bf87b939b21be2465cef20bc346f4'
            '15e4e2553b47aa3df238bd0860a11d3af078b1b90ea5cbfd8a852a01eb0321fe'
            '3bd8372ce80d7d719d49b59d20388800e93edf6046cade35400a2f81f338959a'
            'cea59ade0b872a20f50de1de2359cdbfbaca5241174d8bda801e943c1ba65e40'
            'd5cbf16a04efca8431e70ab154e433a776ca008bc89fc82a25a5f3df03883544'
            '8b887827cd4fad4bb8b852abe2e43bf85cb9684626b857c57e66a3694d9362cb'
            'b3cf2bbd9f60436ea3f64271343fa01d9eb89df8c903adf3451be94d52d52075'
            '8442a9e21aa14cdab4d59eafab4701509d03fba8c02670e4989203142eb62a51'
            'cc3f875b54cedf02b57e6ac09f53a30f6caef0695c1641b03fb4d7bc0aa019cd'
            'e20db9f5d08e2f043d9ab87466645eb41c978faaf1e8d0499d7a728e2de866b3'
            '61a46b0d2656fedb60bac31d01865c1691e4bfeab49c3a01465ae7c37de96b76'
            'cafcda7af5f7c337a8065ca8eb214211b543c16a0df6c4385d485c77f83c13c8'
            '7f62e7867c9e4a2a573f1ca9ac0b0096cd18f563f02114da7b5bbf8594284184'
            '55f668b7ca4a8ab21fc21ee290c3b9f170f7ab991782690b6cb8a0578c9aa6ff'
            '4177f3ab08247cc5936c59be1dd950b2185b9f3b6406550d62ca394a4bf8a894'
            '5fca46c98ea036f41794d15f6a597ffc3c3a72b6a91f198d82e314bf7c17ac5f'
            'cd24c6980223e38a7ebe53c364dc1a36dcc62cfbaa18b2c0220360be785d6cf9'
            'd2b71da8189eb9cd58221a1d75ee54d04686d3424738aefcf2405b4f08751e3b'
            '30d894610d31b9238ad2a245d85409c46e9f6c90916591b2189fe0ffe1318750'
            'a9b509b91114cb5719633a2d2a75c9c07779649961dbde234ebe6427d15b176b'
            'e64d8af15482cc8a89a22973d8d68243b669955862805350111ccfbe883a80e4'
            '1aef3f08c75386fb1a40c3d6f635361fa1274e4dd8b495b57d0f2973caebf6f1'
            'd3780a7dfb861e64ef196a4832cfc6f1e8bee0a98fae76c626ce6fb2bb1dea5d'
            '7ea26e998b18911788a73e442c086468f06a48f4fc5a3b66ff4963e7cdcd3727'
            '9eb44279f8c64f1e2712ddb9b36cd39fdaf771b23673cb21edcf38132993dd34'
            'ce1233b16ae657a82118272b3fc28ccfae147f16894f4a0791de08bd133a3262'
            '5609176fa7f01cd7f13069c24580c5f3f536b1369b597bceaa1d132adfef0ead'
            '8d23b5a57db0e5f26984ebf58d11c95c88c9cc0117935b6f9c5307f4404c5115'
            'dc85acb8a352270a6f64bee8dad1d88ab3e13885ce41aae4494428cca1f3fc21'
            'd1dc89179457d6adc7555c288b26f271e86ed7f8226a554361b1bad9f418ea06'
            '9cec4237092712d368ab04d2f8229e4fe1e8897ff855c06fb48ec5aff5ecb340'
            '809d5b64229e93bda41a0a2edaec2c4a339539551043a6f5763088dcf7decf4b'
            'b4e9fac95270462161f74dfdbe572f9c06aa10278957b3146013665eefe261d3'
            '1e137e4c49c5c6e35efaeefae3084d63325223799eb0d4727d0858f4e436a5d1'
            '8f73f3a6a5ed49e0b5ed70e4e0cc36d1411ed856efbd3ee58846a353b375b6d5'
            '4cdb95e553eb21c911b92dedf266afca1d7808684bdedb67b0e14c2757358099'
            'b9aa86f35cc4fa14cbdfd9f460f05e7833f14d792b61ccede9c5693a95f2d5cf'
            '41608ce92ce135e0f13ffbe712376c0d8e86af09d06365e8fc183de33547eb3a'
            '3c69e4ec74f15a320b24f1242d6cdb18694ca7e384b1e7a4863942871c12266e'
            'd0bb4f2ccf91dd2e60c5a23a69e31333e1c58bf45c67afdc297840b3267701ce'
            'a2cb25b346cc91e0a7c70e0ba15af638b86f4808c80abc15a5dbdc2588d971d5'
            '1d4ee2ab3a921f6fab784e7cd5c7de57dacde3e86fac3953bd00ed4a8ca912d1'
            '0dad695fbc64e41764af47597412ed737d6e9bc1ff91e4d690bce61c8f76f8c4'
            'd80d0ad4237cf5f2bf01045c973684aedf1db6a1d6177cb0b4a8bf3275153fd5'
            '0a33ab6978425a96adc716dfcfe11edab42adad6d47351843b641510d5a6b1d1'
            'beae74be14a3195bc660aa1c488943d293a827c9c73219965b6fc72ef67ebd90'
            '97f29218ee6703982d485a27d1dc1fb74297eafa5346d150d9cb5023354b4e00'
            '45813b64cca5ff4164570bd1e7dc12f9907a94dfa0898e8fcbcd2b1b1141c497'
            '8fe5c0ecc52db49264a6eeb98d689ce601d62fadb390a8331c2ed69293a0ae15'
            '5c28c39ac2eaf5d687be1b179bbd65527841c19274b1e99da82c107bf7dca74c'
            'ba40de0fadd2817b10388df2cd5a8486b9b278b517cf57157116f5adf64b5c9e')
