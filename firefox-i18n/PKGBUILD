pkgname=firefox-i18n
pkgver=53.0.2
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('75bb0cb52e28facad62f65b459b46771d13c82d9421acc05382e54af37079bc3'
            '76aaa79d9a4362c8333e5990765c7dfac1f9c52acfc9d16b2cc9fff2723324c1'
            'b29ed11bcf51790d407ca086747f9ef1d144822d660f1c6f4929f81c08fbe899'
            '100e2a378382ed355450167402ae40e9f357267944136be9f23c8579ec6a1f24'
            '4ce5ea5684cbac667da1ea2618650003f4eaf56ce35b2877e28a8256c1ed7f72'
            '99d6a888ca20c9ae0980903b1c2c40430661acf08d909c7baa87d017c6553716'
            'bf48d7f6caacaa38bb2d3362de10f496a32d3cdf1c2ed2f4c68c18068150ad7e'
            'a2f0f8886dcb4c501cf18788ac46ff2cac4366878cdd0fcb59501f6c884d3e35'
            '18fb39b3d25df2a91763db84a28e7fae426815e9a1c8f48a0885b591cf979c9d'
            '3a4344c6d2842563fefc44f3c49d1f4600339121b56226c693bcd6828f70b8ea'
            '58f3b800a11f2623a6d143f74e9e87eb60aefbc6acd2cd06cd953dd89f7f0530'
            '10fc40871c26da18ea87aff612ce70665561bd7a0ceb56e04ef505e9b7824b27'
            '759af1d890f32dbc050c77fe8346fb045c9de7a5d670fff8f1142e45a7643d63'
            'f29d802ea6cb9628ea82de7a230f43bcd8041cdf86b2d5f577a04a8cb35e8215'
            '71e54f56ba8ba44c32dffd3b78ae69cde0b3c6b9d01f492fe60571559c7778f1'
            'ae83c04751709e5bfb1f4f788b5bfd312a8fc01b98adc2a9bf006c6258835358'
            'a74d73d677cc11657610e7a1c2fe2d2ecb7686ca043c500a97a8736988e70886'
            '2fe4421fff4276230779572309beb9d34240dd0ea41067bc85b9dbc9a44f3fcc'
            '4cba3d6de7ab058c02d4742445f7e03be0077bcd4a9203f9e6e1e36d576278c0'
            '9a7b748936ae3adef5fbe984412ab2125dad0617525df80f19f41ea746e13ed5'
            '2612776ad4b67c0f38cdbdfa2acc47af9dfd9785a59a80115e05379eeaaecd89'
            'c1458e10d67373dbfe77d7478b033bc5470da8168619cc9673cc5d5b6c4a1aab'
            '3d52f0afbe48aab5922d6e2d94f8d59e9c8243c1c88677bc13b25bcf5af351f5'
            'a935a03d6a2d13409be002075478d52f01b24374871292edea54fff0b02b7255'
            '4bb2ba5f84ade25fc885ce690f0431eee07b679b4d2c60860c6cf4a806a306a8'
            'ec2e0af3385050eec553e0b8aca66aadb44b3e66577b9f96a6ee5079670b4aad'
            '65f6aa75c8719f97cef72bbdd58b8ee5c413b8294da0b39f87b0d343410120f9'
            '1ae2547895fffdb8d8695f66f7332f53bd860b614994903cd2d74ca8fedc96ab'
            'baea1ae4d254a79430c45f2e35bbbcd7e5c3b76e3b78cfbb5bed55a7a2a26fa2'
            '2fc2fbc88e3ee0441a583c2210a297c7323af54ca26204906aee59c472202d36'
            'b0f66ec53bb5abc1499aebc8a963277a25379ea7cc3d2ef733eeedacaeaa3279'
            'acbd65785c285c16206e37e9fc9c5629eefce12453c66f4f822debd9ba4c11cc'
            'd8a0a41eff1c12f56f14011c6af1dc1c29dc93fb9adb68468b7c4f22e1cfd158'
            'df455683f76f0c5844f0e53555eadee6efa465c8766f42200c145480ca4926c9'
            '03b19610643abe108d0bba5918695ba6a331efacc0ab903aeb389cde7a1d7d28'
            '37f7d4b77357636f9f21ee8173b82abc3ced1c15810da833b2e8af35ec577066'
            'c247e61dfb34918d7bcedf10eb5ac00d595023d5c914247da411d8aaed4828b0'
            'ba702a1b747446d6d4aba5da8e66a440f2cb23dbbd8cbc8ff177c42c6d5c5be3'
            '27b98069530590cbde987de5448a56ab90c3059a1916b9ee17f00fc5c5747ef3'
            'fd6fcf34120a0e122fac34c29bd45dce764cce977f07351b526a9b62832f4c25'
            '3b98d7a796d8e29faa75ac69a3c67868c7420c401a536c2d5bc7ce633c5849e9'
            '1bfbe617ae075c7a951176c575e05c4fa82f4f0919da9778f581cbe4283bc765'
            'ea38add28c30cda397aa3386568f42d0cfa803b3861c4c66872c54ae01ba4eec'
            'a98bdc537251bcaaae58cc81a2ed7f3d4d07d6dfc231e8fcae1f0571b90214c2'
            'f44903ae6a994384b8d413b33e194ff1b638168cafd1246d9b785f0c5eb76eea'
            'feb6d7b2ef80040d31b83ffda12973ddb194a10a84cafce317b78d22a68b2690'
            '65e1165f8b39942f02ba8f7721c5c190237c151c2258101f5b2ba036d4d45ce9'
            '80781ecf074bfdec2fcdcaec7431d9e095e6359ca9c988655a6f4c5331520c7b'
            '0fb6aaaff08da493bfaaadf6a00c427607c80f80179d99f6dcd75d9d223f73f1'
            'b08ce730d05b137b0c18063b5324d3a753a5e0edb0ef4c7c0e129b17303f56ce'
            '6c72bafc940400735abdc73508244575b2f47b82ab1a1686c6f85eaed7b9976f'
            '0bc38ae95bc22a8eca56120b4b3dc1de44c6ca65127f203b6e747f4eadf91029'
            '0be8f7eba37578591a18e7e450549ad774464ee3dbf554c9496861bc12c80887'
            'e149d51a62e7f3d9598b5da78de35ba9d98b31976ab192a42b39bdafa3b4ff38'
            '2d8e591638f5649c07048c9e1793fffd5e8f56139edd9dd39adcc6f8b9f10dad'
            '0ec3221932f89e5d1d80e85424dc2ecb5f8c0290437422fc5299689c82e4f441'
            '2f1ea19032a8aab4390e7c8ca471d1b0ee9c72133a95a0a9bede49293d2fa30b'
            '520165d39695871034baf646885a6dcf7aa6668cad68085c9ac33dfdf35ee11d'
            '7eb001cac13d3e51de117fa3b907915ac376723491c38ef25b91d81ded4ebf3b'
            '452110d9b84a89b70441df6a16730af64bfa43d69305e3c6219f317ad638fec8'
            'a976a6f0e919ad776e58921e4c5257cb7a5958127b0c41bb9de759b695d1e4ed'
            '3bd68c7d8d800f9ddcea53723c0905a9108216004eac172d6e83294f27fd75cb'
            '32b2a026806606e3ebf63db3c2388c8f24741ab2bfb4512d03345fb7691d0816'
            '322b8933f3e2d6c0984cefff715b6f8a799d9ddfe4214d751b986a8407244b25'
            '98aaf348d6738348836b1c11da14f5342405c223b16de5726ebf6bc1035acbbe'
            '0c374e4430dd1b8643fe6bb334227c1deec1009d96b8d2c83811c2d7736122c3'
            'e4e5bc6f7770bf67e2bbdddbed84b14ec7c2d932caf701aac4cb1ea9b6050e3d'
            '43c26e6b15761026a49cff643b2909cd2fbdce3b447c1332c4d3ab074cefce7c'
            '448872a225bb27ea1a30197f7b144173b5d5dfdfef9dae510971a810b378344e'
            'a67a185202103f2a2ea6ab2c8f74a8a8970fbf633cd1f592d2af89a0212395ab'
            '94bb200efdbdd5c81f3d182ccc45e5fbf277ce83b9229de7d385987c7858e3de'
            '6190ebf0c202af5ed175aca08fb01d1dfe2697a46a515fe2b924815934d576ae'
            'ee37ffb352e70847f62e64201ce8173b2618ce1081dbb3771cb36ebc8e9dcf8b'
            'b8b0135c0a1db0b67555cdffc1f38cb25eae8838c06e9cb6fe14042c8c3b3d8e'
            '3564c50be4290d2241d51e18d0208675041abefca3c91191da90e605983a62e5'
            '11e43a0e1cb1877277c5f8ba5606145315ef01be88cc4b3a44e3be0c45e2eedd'
            '4bf400b4076c239526b2aaea696ccdf621d0c34dd547bc885e3ce3ede37de1c8'
            '7a9cdbdd7718f117f4d6047fc6b97822f24e8411fc4d6871de017f5d943506c3'
            'e2b2b6bad3d7e9f327c7cf0a03eb1428b5b37a1681c6f842ed2934f1d764a6ee'
            '636106c6b524c30d9df402b632e4aa7f03c9b18172ad98177b4bd1abea3a839a'
            'b3745387f506a299bfab438bee13e85777b8f5e4f0aeb8671bbbd42b8eab8737'
            '66a1983994db9f1dc07e7a59aed0399e066d608f95a354130f6cc04edc65819d'
            'cbae896619e1d6e7d88b815a148f1c675be688c8ec9f2dc234810896bb8a9426'
            'baca5138ec7c551a2e55dea05f2892403713ad60e75ce5bea9cf1750c133a5b1'
            '552628c03fa3b292019928c4e58c0679be1bf932349fa6424d1a725bc9a8256f'
            '2f0826f641fd2fea56d143b95feca93abe141293b5b2b76c802164ff1b74a6e6'
            '6175936c4e04e25bec950ec08c2a0651fc7236a26376ceecce530a4c690242dc'
            '65b1e4e67363c61c86fe6d7e07136c69897afa61361004a4e550ddcbf55e10f0'
            '1e53d15b4157960ebcfd78b446d526e6f470e7e22d86a11a39ad04447d4fa030'
            '140c1cf5563c2fc666d7306bd070154f043ae0649957d69b26d31626eae20082'
            '5c05ae435655610c628508c31dd947c6f8d5012b1a816ccfe3df66320ce818eb')
