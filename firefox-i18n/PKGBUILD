pkgname=firefox-i18n
pkgver=57.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('000d31d272ec1dcf94fb47cd006c96ac74c0109ad78ff3c2b66eb7b1db1d3c74'
            'a3e1aff345f6ffb1e82ba55c04e91ac6da0ae02f8d9146c963c7cec812a788d5'
            'a8708b1a8b07161e1bbdda9594ae3c17be59916c17fabbb857a51c093f4ae814'
            '8d2ef26e5fb1f2f15585ac1a6af22300f4e9a99caf64f10bb4f9f8d5f4fa6bad'
            '1ba6874911e21bc052fafdeae0637a59d05cbcf9602cf7007a685d4b35363525'
            '2bc6b317ae7d4c433e21ba2ebd1d72bf9587edfc9347ca9924cd12fcdd157426'
            '3a60286c17bc34e05550e69b744a27fb0f6e9960cc3aba4c4796150f2bab2bad'
            '13db806a1213fb759f4489f6931a9c9309ad7fe3e6f9baeb55796efc9f60f358'
            '3ccca355b507383473799481468f366c5d9634034863bdd519ab733867d17851'
            '0c27d535c64640fd1a1571295257867bda0d637f0559c62ce6637478bcdc38ab'
            '1fa26a6217a90f22ac169e065237e94cbc290d75a42cfbe48f4635cc51be1412'
            '4cd909d163eee151735133ea95e1fe84717faf3ce1a8080a12bb1f3dac1eea03'
            '5f2cc97712cbf62111cab6491d4bfe771aecebf5a3cc908bc3888da1098b2061'
            'e424f912ca1a20f81fb431743eda49df3bc606ae8cd97b606e439731fea3502f'
            '6be7c22952f9fd2a9ea366514851666351560bde940d925ee0887a5b0bebb38f'
            'b38844f23dec6eb91ce3a39e1b1011326b337f7196f14711e0b2bcf8a6af4c8e'
            '0efd0ae87321a8debe51964367c9d037f863585842b97cae16e6358e0c96f833'
            'd77316afaacf861a82584138bd45c97c5caca45f08dc7150b2ab45dad93d1861'
            '06506d93eb70c3421cee089fe11dbd9ec98b768e3cd27524221a777cea94e11d'
            '7dffebb5f774086c6c2b06a1b31bf72090342882cea93982506448e7115752de'
            'ac8b76c6ad2f10b62c784cb97b30b7c8cf0b466102a3732199a2ce5f355aa0db'
            '002ab3c4a68c97edb3c1a9c14ebd33e36089f20dbd05d7287cbce2d874aa9b5e'
            'd955820a9f8cc45357a73465f99b2ef7ec9c52def3f91d86b6c96d7d7b681b36'
            '38510cb43907ffaa51ef7c561edc591fcbed6fa2964d4af441c341e3a83b22c3'
            'a016bcb97ba15d3ed7be5687c0304deb5c8cb0b3b66f4dda9257ea479ef905f2'
            'dcbed2cae03babd17d915887deed8105d54d29b42e9d948a56cd4ac79e7d48cb'
            '89b622ab51acbd5344ef7ba41183a633b2f9c30f2eee46270454b6ff6845c705'
            'aa3e3b5d6394a703caadc0edf143bd3f426e6b7602228a20eeee1dfa0c90dcd9'
            'e3b4cdff9951a1794ca7b58d66f1fa8f54a821d288b9fa562758cffb0eed90a1'
            'ea79eec0ab147b1adad6c822fc2d143376554bd7571637aedc6be183937f5e23'
            'f6f39dba4b8526bbd78cc8cee7268a8d9e894d9942177aba4f3c2862435f2370'
            '64268c589750469ff57cbff54c7f7c5c6b5a816b8ef96675adfdf5c848962865'
            '9763da205a835bb4217e36ff3ef4d6bdcf341a46be44c43a430576ca694b2ae1'
            '998a1f5ff2ab5b85e29ecc39b082d9c0f6a9bbdda6010d9da68cc89496446eb9'
            '7c964990d19f9487b4421fafad0cc535974fe8edcce51aaebba90919ef20cde4'
            'b0a6fd154dfdb4378b7749ec8535d6e59ec47142dda4be1fda08573c5aebc38e'
            'ab1699b8727aa79e80f4c47b20e5355fb0fecb68c8e27f71791a1cbdc3d8d1ca'
            '659fd0c6cb77443c38781ddd04039627e725be55536e6f78031c7387bf935574'
            '0b3145eb603e6216a2319362d56d849a23f60113efe006f2d365a069ae94e43f'
            'd7d45cd393fdbc2868cdbacb1dc63958164f561dcfc08603c0decfe83fae7c2f'
            'e9b8f7e973660f2a9574769286cb72a963847fd765a6ba1f3192cdd3139d4d92'
            '7a10f3862dbbf8b894b6fa5e2af16f576a596621ce0d39dd0c7ffa94bf87f544'
            'ebe04b126b79b28865c4596f664ad903ab22773f84f9b0075d498a0d5d467b2a'
            '6c0ebfe0d4f636eee3c4bbe487c65716e4dcade9534e20feb30372b259a13c51'
            'd90ffb70c9e5996b97d723999396724ffc9afd9cfc1b8c9992887c23edae447d'
            '55d92e6a196d9aef1476d3d8b28cd1994291c9597b9bf3316f2d7071e3112869'
            '86d8c8b15371d46f41c2e7981690619bd580150b06a2aa200b1e7559fae9fd88'
            '47b5a89a66bec891a3713d322b2340b04c4e0f76b438e2be8c9c8c5466c5ca2a'
            'cf34bea1bbb439bf46eca14ff9455b48be2fec8c4690c96a5d8861af16edd2ba'
            '2dc030e237efbb3a436dfb62d605d4a58e9e4fc74bf8be656bafca29bb47b9c9'
            '024896231e76f2a968c2c9ef04f54122baf8be9dd4a891721131b240410a59ca'
            '11111923544044362aa00684df45188aafe2384f8eada7b11aff3095cc5724bf'
            '1892498318bbf5b9078584903d1917a3887209f27a345fd3f55ede014fca8795'
            '1aa48ebce8d3a0f5347075e77d5e653932a974fb6a6d9fbd0e20fc9811044508'
            'fe0495d787aef4501ef9002edaca4b8eec33b653312dc20ee7ad59d3b341824f'
            'f1da6436210d15bdf7879167251349bea247baeb33726f64a6d805963ca254d6'
            '2fdee372f748540d1caf6a90f3a0cc499e461db9c6e31223cd87da42e96b7754'
            '8adee1a6343b194effe99b350fa00ab0d4bc43cace5ce2b9f95204aa2a05f6de'
            'c76710d9315e89f647cbee0d9eeb198c648c46f18396d936a0097b83494bc638'
            '1631b239f8ef4594da88801477136fb21124e24889a9d40513486fe513a20e10'
            '3d13ecdf3b894c07b10efe9cb749bab20b78b5528595939892747e7cdafbaefe'
            '3d647e05560f7156d46b9402a51f21839c497f75aa724d9b351246d43f268cd3'
            '39f17884ee2654a8574dc6fb69763fd1d214267fd68fca6af97528255519bc7c'
            '595fd3d7fa1fb42a63587e99b51b1b24768c38bd6dfaee73d3f9d566797742ec'
            '5ee5297864a542837638c889e6b7a3f548b26ac1d1ac0e2a760d57ca3688b9cc'
            '76829da5fe24ae3d7d4755f3a6a5ac9722a3363f38b3d09dd5e8c50685edc60f'
            'fe36dbd4af9cdf507ad09436abd0a4d1ef93ec0eaa8996afbe5f5aa7437995bc'
            '6125cfdb8006bbe755cd8bfdbb81d81d3d3e63e64a95a337469f793ed57bdacc'
            'e321b16dea5d23d3875309e9c84293c0cebcce6633a21d18e9d1f7ddb33108c6'
            'ad78266695c1d7ac8738a6206905747bbe818e09c960c65cdc4a622a5a5551f3'
            '016a9139bbe373d8e27051f1d4d975132fcc0cb8eb9688380dc164ade190f28e'
            'c6dfd9804797430bbb8f645b25daa0fd0fbf87b9dbe2e869c17f94634da6f098'
            '4138f1d73b9f2c76d4131cf0e5093791b5e48c3b46f3f09fd3f2302e30da1cde'
            '9d76a50318f27534e14f375379664ee9d8593f4262342216dc86562359d7cbb1'
            '3cda042089cac1a6bed41edab346607649af8c00c9c3993c94e8bc65455b69e6'
            'ca9a8442f5175a3a5e9ad2edbe5a71dc70f5052df3f9d90bf79f369e9a995e53'
            '4769085da20ecaf20e9bc84c99edac5b46ef950324eab9eed34719918d28ca49'
            '7e55303212ec089d95a04232462af7769da798591f068a07bc78c92e939768d4'
            '0842ca455879824b7ec033b85f2dfb17d11ff39c8cb39223a737f47b1bb02465'
            '6c0fd2f5d38a98f81b904d0fc57d9ed5ff09ab5155b51d23a587ff1da8ac0a14'
            '809940be22c381f0de7ba942f217f5ba85ffbf5d58245cf51504be8af06c078e'
            '74595b842dd69a7b729881763efedecd13d955107e2a5c4678bb3339e400b414'
            '5f926aea491b4f1f7efe60318b14499d06ceb9b7c5d28b29f1795fe6aaf6819b'
            'b5c3d978f79fa9c2d5bd30d8b4fd0247b15c3200f0299d6ef653332821cf4d55'
            'f53c558e435e7d5cdba0c3d5e061e42c9b9a8d049e7d3fbc4aaf90c9a2978fd0'
            'ef7e0ef46b5cba65fa8485ca8ef402e8ee3c77185b829aeea8f2c74ed60c2e1c'
            'e5a8c42179d380abbcbd4f4272ee10b6d1e84b378b37cdc6601c045ee14af4f7'
            'b2afc5e222e9d2e88af51066f040d6f33075cd1e184d73bba915c79817daa2d3'
            '70c806f58b947b816d349bc582f021a854b48eb1144eeb8199deec295274fe1b'
            '4bd0bb7111a9e4ad9cf85138d84a291da6d420e7719179c0c487045c1448481f'
            '86cb61bf0efd1abe0b8030712db6db44e1cfef23f89c934e0fa97a466f0ebf2b'
            'afeaa67e6dbb954b098234a021351d5130a529c7ceb65adddf13ad4177ddebd9')
