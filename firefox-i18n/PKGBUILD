pkgname=firefox-i18n
pkgver=63.0.1
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('x86_64')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-CA  "English (Canadian)"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'ne-NP  "Nepali"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('0f914fa0f491867f8be796b8f2f4a342fad4c0fa7412441aa4584b36d4e7da8b'
            '0567a65a7fe4a4ecf95ffb643b35c4a142f8d0494923db8303b23dad17718dfc'
            '3f8e086a50cfacfeb29d3661c8baaddbcdc079834b9042a9f459759c3004371d'
            'cb3172c4d86f6e68183da67978d12d6783012b8f265abc045ca0c97c6a3b60ff'
            'c94beed4245796e00a8b5b559d325d6fa5c21dbad416b31794f3d67dd0d00ca4'
            '8b208db732d0ae7e65a986a078385c4704162913c625d39f46711e6cf543723e'
            'd4415b881b7adab4b14e2bcf9fe97794c2a6c322b6eb59a7f29c7cef8ddd5c1f'
            '39403c25e2d1eb4c2669e432c1c0062135138076c52aa209d60147ca5de5cc85'
            'a5b321a199502965768e1520705a7e24ce5851c3224cec3f7b35795b445d7ea6'
            '453be2e8d8fcd38f8bdc160ec5a709b5dfb693f8ae811cb88fee4cd893635c66'
            '90ded1900cfa73b5a3d30c5e948fcb7ca8721f4de98f9df2ef0da8c00cb73073'
            '92041e8972911f5bead4ff32c7586741d0053c3af976354c9773a713072d2762'
            '458a35b79e4e3e73dcffa41e48201d18d331710dc4deffa05f2a4a27027fbeea'
            '7577d13ea090e2214629ad43b525a3d42cf44d1f405d711e90388a0df72af7bc'
            '0c9e668258c6454120302ad458369442bfcf799cd8d2187f4c77c206500cae06'
            'cc1147da953e65c8ae803c684efac3b6358e8e6589ef9172a479aa40c25dc59b'
            'a9062df17d7ca170dc0f52a5093ed899bc75d003b0224f7a430e247c02625042'
            '2dd0e523bf92fe62b58770bddc5dd10fd08799824ba82c30bf8cbd897a5d4877'
            '566fa764f71c95c257cb0702fcb3d28379fb74205d3a8a1e61819182b84221f5'
            '18054e70013a8833f849fd3232e1242ff354b37ef4fd4d5aa0493de991753713'
            '9a2b48d1d61c555c9018bae357ed26ccc62ed1d70e948ef064b4ec449cb5c819'
            '142e625ade206be6845f8d943cdabc8bc4049a36a03ba7f6cfb7a978bd72b407'
            'e14081e40b7a7b63c384a9a26a2a843ee5a4651b7733eb4d3728fedbf03c7386'
            '5dbb2a8cf83fd2b773b2fce3b7ff0e7224ae8ec6b22964c83438caa09aab3852'
            '7516e97650011059014122c440655bf7d916dafd75f14854718ff28c3c596a5d'
            '3c316d79df7833a8c646ad92d1b46f2582e45ad91fac6371531a6f1689858737'
            'd1d32484475c2c800ee60d5b51f5f72ceb3ba785366c9eaa5a2c076bbcebfcfc'
            '7ca49f273c4ef8d5713a7ecc1046eb61085f263deb1ba4ab7ea99e8143d81b0c'
            '55c377a361e422101c2b0597b9107efc8c92bd5e42f31bb2302077699f80bf4d'
            '15f98844708497b106c502ff2152a2cd8cc57c701487ace3838ed265207095f5'
            '229063ca5bc3fb4e35b1b53be704802d9bc4e575a1a2e8fb208fe92aaa03640f'
            '93790bd7dc4b30b5e400d31a411e3348df7219f72e0572c5278e87d68d3c91a5'
            '63f4cf0c1f0e3c7682331827b366402941b9e30cfe5013366f32d9de3b40f3e7'
            '9a5dcd61b424a44aaea7472ec3afb781c691c0a711f32ed2e262ee10c7cc99d6'
            'ba63f10eeac674fd3ffa3c7fc28d1f12614ca2415acf3fc75ea179d92b858aac'
            'd064ada193e3836e84bb4520dcd9c676165b551c94cd9524be8662931bb6537d'
            'd930524a249a9e8d5fd450881b75be041d006a48536cf066b985d0a8bfc3af66'
            'e4c0c6e60732a417ead3537e0b577b94c725fb98ca719b06a9809c988e51df20'
            '5354c98e170323e99ecc4431e556ee18aedea55d5ddc074ed5e431c12aaff80c'
            'd3be1367d0d3d29eb2c2e5408577f2775236877c1210aa0c64f9b54a2529b8cd'
            'c0a57551644eb2eeb90485daa185540a01750580b32c2ac33c6e8df4f04f2801'
            '88c8099538920bc708bc2c2babc99601331c1c134b2dec333fb1a2dcbea3667f'
            '450f6ad9312720a37cca5ee9099a7d78079faf54f956a9fe9633c6a1921b6b14'
            'e1b603540e7e579e47910956888efa520531470dc5dd8406b43e12d396d7d5b1'
            'a3254f83cc1fab0e4b726c650b64764d25b02cdfa4bd1bb7961839f937462bb1'
            '3bd0e030aef9ce9a0b04f268eb92477413e40ea4f9293d8ba961d3fa366bee0c'
            '3dc241ee5ba4a777e21a276b2cc5e2d4d4dfb5ec0c2050d1ec739803a60279c6'
            '58ea1212f3eb319f26d6c3a16602c914d99ca9f051305033ad976a1fb9890430'
            '4572b12ef2df363fec1023dffa93e05a660aa02b3fcee3b3493e53feb42ffed6'
            'e53f1096b7074c51c92c4a0b168deff20db224bcc0d3785c53b9c1afef3be928'
            '155dd8a9610655b4d0ea9b41396d9dbc24fb9df4f578bb024567819e1cd02fa6'
            '4aae1ad2b211bdfaca45c7ca4aefff2a373c882877245e8c36806892ec4d66a8'
            'cdc82192eed5f0c8a6c49f4de1f4f617e5037c50dec2d3cd15672d6146b3e5cf'
            '163db0c3f9c229b032620b3ecbbab1655a2806392be8ae591c6c5cbffc9b86e7'
            'f689fa0064f1be961b05d198150df100e805eeb9264ab676c897b7b62c7ca684'
            '747ab30b9125f6c6d4e06f5ff601fc636afef73c42141be0ac440d92ca47b353'
            'fc9eb8bcc2eec05d17f743b647e4bf119559ca9d37b4d24bb20e07095e5d23ce'
            '10d4698e6fbcdfc0dfed1e3036a64c9887b7f749601393087516e8196444ac2f'
            '1db8839a231609afbdfc4aa5c81b6c285f82674e2dee225d6f9342ac48f4e77b'
            'ab29a777e6b8ae6d2dcc0f7e13d985272c1c198fa8d734ed79a16d339ef217c3'
            '33e9114883c191e80f9fe6c9a27327bb15d9f1138ddb118ba1974e448f23f879'
            'ab61211dde8c18b75bbcbc69de451c4cbefadf529717e7772f775c009f7b5a03'
            'ac84ff7fe713d8a7c7e6e467015bf62567ff21378454f82221d41783370c7a94'
            '7926b3c07ac4312a392a52b04cdd88e213b267da9d27bc2a10b40d4bda41b983'
            '6ae2ad5e68db71a9cdf66712a2f2c0034c5156f0e0c634bacda7ac098701abb2'
            'c1ced778af8aedc1d7bd019c949dbc8e0ea20cbbb9f94cfe337902df40314537'
            '3f166035b7ec69a76422d9f2a9ee99e1594ee97e0281dd5d0ba4a26c18ab0500'
            '62d109c8ff9ae0ef0964b12257f7375e2cd3ea9b6cfee4aed3b4610542bce2a6'
            '05253ae1f4b7b7c836c9f6852350b80a963a6851fc78c96cb59dd204600bc35e'
            '5f5dfd4961027751fe014673ecb6fb9311ba163589cb7da316321eddd0702f87'
            '51bb6a8797a11d756b4bcada5bfc227d3a630212e20f3d0727cc2fe4862b634a'
            '702c9030b0f3a821ce481db2e1700aedaa88ccc60b6922d2422a1706b2e67ba9'
            '9a6ab8995c22ea85c331194a7e18c4787da87702a59b7005ae6f4ce3b70adc34'
            '01bcac0ee9580047525452eca7718bd84a2c86a445fc7ff1f4a2a1ec763be91e'
            '6d8bb3c2ce2dc02057b8979414058b46aa4ac2d5adaa7ec4991828a3f5a164e0'
            '7af09fb4c80961a914d999c324e8fd5fe94b68709c6a677aa69ab51fd7adacd8'
            '77d03be6acdbf72ce0866db9d98626283dd567b133ab45df6439071d241226a3'
            '454d5f723b66667add9aee3f15c98f4e89fdba2b3cf645a4e31196472cbc6cd4'
            '809fa9830a2322819415e0660e37b006e75b734dd97299d42bb2cb08af7e4f8d'
            '36de5bfbb82d798faa2cb90bf40f91b7ae5de45267fa0fccb98fcc1c43b2c409'
            '467a640bc41fb14b509411404dcc60d3d2f659df5c08d6472931087825639912'
            '9110e660dfca7e6e149ccc659f936cef0d95dc1de9719d45d2cc10ccfc69b71a'
            '26f425d8a95a0128bed8f497877014b16f4f133f4d6920fca642db9a19ddb40f'
            '2423b3f25d34a4c4c2b1f6eb1b420cb44df14960000973fa1c80770942abfefd'
            '236ba6a2409f44f4c2da2f209e0ed1516a0202cfa1a88feba7a44f265b130aa3'
            '41386f23a18185c41f28ed2cac34ff56bb1bfbfab02b80f11ddc6d0ce850c2ed'
            'a07db59670d92b69b500c755d42cbcd8596fb2598c51a927198c899ae5fd2871'
            'e2646ae1959a5e5f6440edb67171aa3d7d9a9f8521463ccb650b19fae752fff5'
            '8583130c0090615b7f6e656d13ef5a0bde2bff6bf9b25480bf8ed1763bedb4f2'
            '0b20bc9b31b0d5db84c5d399dfd2115acc8d123cde06edd0caf3e9eb3bed2f3f'
            '485abdd974496c02b58462a49ffa79e5c45d55400c8cada15f1d345b3cd8fbd1'
            'fcc18842716318c1ee3ed3c033fab5694fca3333f02bdc74cad8d458d3b5f87a'
            'bdc1363e4dcc88f93e4e0399b4c4b638c3e2fca057b3cb034c0a446d44bbe472'
            '6b0fd73b797ddc31c096f7a867c6a476d69a28f5d3cedabbed97e6f313040144')
