pkgname=firefox-i18n
pkgver=55.0.2
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('30f9a0a6c7cd51d16c0658f492c8fb05f478b76b227a715611770856733a8f4d'
            'c8810be25f35c16af20065ecf60978567c31bbcbe7907913e662c585093ddf81'
            'a7c29d65e7832ba8a20606810a6bd0485130969aad124a7311f8aeaa616f1230'
            'dcbd593b6a7f540f29b36a3d6d88cdc6dd4406cd456b342e23f0926bc504342a'
            '56eb929eb6eca0b7418874a9926dbb0c0f538ef375bd818bb7fe5c826234e4d2'
            'e2fd22a48cbb37f76e4e1bdb721fa951bed31c1be33b33c9dbf0909ae70a1662'
            'c3dd39c4ddf4267fe2438286e55a8972763b6f177fb2e1b134bd08c759f55c42'
            'f0f826bc49adbbc484b2385eedf24e9d8b93f0a4862e7d5a3176976b8dd0c182'
            '621836a3b94db119a3ca29c8dfdf82f085de65f7de0d67e0b4593b0c4095d044'
            'be1556e605118f4c5f7ebc1333e97f441693eda1c209eb73d14ad54c761a77a6'
            '3b93a028195193947fc4bf7382e406f4b958fea8b192f4a7ddaab2970e16fac3'
            '8c020b3cc1f015391ad601262287c7a147269768b87670ca33befeb8f0a6d7a1'
            '1df3093f70af87acd54d21691d36b274d8918fd25022dfbd8f22f08c30cbafb7'
            '61225b4b5b2cff3c06a562d0f9f26ebdf28f52af03a8316bb12949b6a12b46d8'
            'ff181cd3b4c9ec6cf98fc2334cfc75aaf9d497f827fb82fd00fc6e63bb5ac4af'
            '0436d16a8f2b884dfaec0973eebfc0f7be3bb3af64b32699d093e60be6d9c229'
            'b803ca173d3c546802a629ebd477d444695ebb32d98068439692b8dbaccfb3ad'
            '9bd9d7e9b5150701b215aa3e501ae9e8081550b9a3b654b686b9726632c460e6'
            '51fa8cbb1ba4e5e8b913938f2a9504ac6eaabc41098b28bb306ae861e85ef6e9'
            '2bfcce4f4b8dc2d49c361236d0822f0eebeb5940bdd34f9d97832a7237bb4453'
            '4821f12b5a7543d4284a091425b8edbde0877d7c58ec5bea8483e055f2a4f695'
            'ba0f80ccd1c0f9ceeb0a82b410cff823b9fa5d57d37b86aced22899c19cf29ba'
            '5381040659a5d6eb3be1ed9901d628adc4de2b64a7f629dd063e9cd7865f87a1'
            '2388a0d9c2d73ca809faf4251847d2f64ab467536ccee2295bccf11e19196bdb'
            '8b96f5698a42f63fb159f07833104d873782d450c806ed07fa64e7bb769a7582'
            '091a53021816f1356fa71579ed4ff865b1ab53b81c72b923dfee008f8fcb719d'
            '81207f3e3b6871e7d39fb210b91215e546491e3fddb548ac1c6f4ddd0a336f89'
            '9eb86f2a69dd75c2651c1061ba21cfcfe834f167075b61e7cd6e9158bb5104f3'
            '2f325bac9f8eff6930fd62dce44fda17b01511b937180a000d69f8ef278e0f3b'
            'fb0b90e0f9ecae06f0a450a932730824fb4d56c77a05183fcc7ea34b1543c2dd'
            'd6b49d4eff10e2138f822582e025646276e13257923a2360107f7404c4d47f5f'
            'b5fdd61ad8e86624558f6a508e122b7e97adefbd46d15d30129c4200a19b578d'
            '2eba5ace5dcd70ebd09fdd58dec87319ce9e7ba18ef7350f15ff733bfd3903c9'
            '08514cead0a67e84414a95cc059c3cf8679c2d8337e050c7caf8d76204a5e75b'
            '76d75c03aab2c8a01490e0f5bf3316173cc984da1acc8636bfdd1561e349fb75'
            'd4a049c7cef1381a17afdc37febc51d65b010e010e4de25fd3efdacfd7f51010'
            '2cb6d8a40ae0290a3d99f88625e0db1b7bdb33a564c5e2e9a5c524bd679fe971'
            'e602a7d8956c50676ab9c896cab766b96606e37bc1e1d1a911663bb5bece1a22'
            '7c4bbd21e5ea492804c51ab840ee30e6944549fdec9c27341402d4ae14e05d23'
            '5e95ec2eda63799ce115c49b11ac0d6f92adcbfe1be6c4888bd46b0a97f749ac'
            '31fce5150dc4e2b2166e1a58d4289e96242a052465c6deb117b6488073e1e0ca'
            'e463d11829757c725acb1c956c9efcc77b067d8d5a338e5f5eefd846aa1b3ece'
            'a1c59000c391b141e72ece956ddd82296ddda3a0d015707a1a13fbf4e4a7b29b'
            'ef27238c890a93ff3587a49455804e9e7b3aaa303cb45fdc66240dee8968ce8c'
            '11e779460bf8fb5f3b2d0f07c0783a5ad947067bfca90e404098ddedc23ee2aa'
            '5975fa164a60bec3c1b9f4d433b334a8c3f63dcfa546d16847b8a5d19721dc5f'
            '96c9589b9430c8bc93ab116babd5c9c02ab2f7b106005c306a4a4790d189bf38'
            '889b14c53ea6d48d08edf2a65fdcd117b00042069959ebe7a6a371f50447b87b'
            'c7b5e663047d30b1e6866683a94c4ef550c2eeec6ecdae3e35e43f99f71a0a81'
            '6a69e142cec4f305d0fa74fdf5c91b9f60837d3637ce12281e870abcd18b3086'
            '5e25a2d3557d96c1f5bbdf76348a842de3fde6937517e5993364f6c1c9461d43'
            '8ee6a140a99ebc5c787ef3307ec7f2454edccc046848c0b39f67bd5d69d5c156'
            'd8369f130d2e84c4ad49a2b281f382d620354ae75e34bd593c1ff4ca3a643772'
            'f31340b27baff545f7d4f05e252cb33d11c8a9eacfcf10212b3cf3efdb466482'
            '4a450f414857b54d5d11eee82a88a07125f1bdbf3dba1fc40aa69cb8d5d64f9d'
            'c354bb3071b7aa92dcfc4400324514176485b8048c3fe4a2a09d6dc5bdc76cb5'
            '07b1a4354561a199d977b1dad09da80a554120c9a0f304c3a4f52eb9ac5eb2e2'
            '59fd99d9b7634ff86a0a32ebfaea4cf482cd56464dc05e65bfa7feba9c4b9677'
            'b807fc26aa23b8af118917e6532fe7ebbe543e1a797bdbd031a3ae0d8eba6cbf'
            '2d85476a40df2714a408b03ec7bcd799e749a1fd954ce19d8b4360bc62c52f19'
            'e0901a65c782f0b412e683188f99156f9195b13d7829913459e50dce7323389f'
            '4d2305338dbf736dc99b5775b2c8756e5a4bd3349f34eb8650464cdd090dcbdd'
            '686aee8d1a74cfe7eed896407e7cb9174eb8c9e56c5b1601ead10ebc19d8e959'
            '0ddb8e52cfc6e00b968fd2cc9a50382a064daaf99689b7b0be3d9edd2b4a72fa'
            '5c5524c8cb009e9edf960c75327fcb46cc9efea9e7f29049dc4060becfa54e87'
            '3d63e86de9f549ff3a08b1a72cec9c3560ad9ba93ce133689c9c9c4de5bc3b8b'
            'd2e8048917d873627d97347a46aae66f2c39a2ed91cb7bb4ad55089c9fb67c2b'
            'dd61f51a0c27ef3ae7130820c0d67efe018f76f83038fa81646dc24765adc03b'
            'ace8d923c54f30515b252b64720d3c3b8f210fba821d5cf8702bad375848011b'
            '793a1b3f873e8663c9e3a5d5b872a7009b0d9f4007da4a466cc1c242c6f54a33'
            '51cae944299b665d93d5be1867b5a94b84be6f2ee4ca35a83477c178bc1d06a8'
            '9c33d20e23707955242dd78d67c65fb6e0707a921c2e833777713be961e702ea'
            '30fd5468dfbfd012337eee9184bfdce54f66e5433d345ced23807f62d1a42963'
            '6aca65b04426ade7ed74196ebaecd6253a33ff7b1fe4228148013543ad056277'
            '8d136597f38378891906c9dc9835e87812964319d8b4bb45069601f3a873fde7'
            '2b8fccaede07abcb96e10ac7fd590af60179975344466ff676e5c4364c97b949'
            '9a083a1ffaf6e38ed26b91f6e1585342254c958ee3aad6371e1ed829214c506c'
            '5327d9d827b91b83272318bc2bedcc06e365b8d36a2ab635115236b15e3c67fb'
            '2435cbc8ac2d5293c88c548d50b86533c6c4a6c7545be0b8cad8bd7110d4f2a8'
            'e2597af05492593d809e5454ddb1c5511372be4448af9141bd7267389fd2a5ba'
            '18b5a4dc561258ec83f2ea089b76b50ba9f1c1e35aa712b34178908152d877b1'
            '5c53ea785522ddbd8e4cf142bb0785b5f0c1efc466727ea96b33bddcc91a5408'
            '49d3a4de7dce141bf4b91c611c1c5e900e06dccfd822fe03e2d954f8c89080f3'
            'fcb23590ea1ffbf5e50797cb7a1fd465e7b552b4c0a87d42e13efc1aaaddee4a'
            '1e9ad3ad47e473efca11b9cd7238d0aa8872b9f86f9192f03b9f89488228a7cf'
            '06af0ff4c99276671803dbc4041168107aecca9ef13d1148075a722763ffd097'
            'cfdf18965e7eeb54b981bb90b108c7d0cd9c8f261227590c8604069ed09065b8'
            '8302032cdf5fe6f996e7f7b12fd5ff28b67852466d99b93404f41563cf235ad8'
            '5e262578dcd343c45b05cb67cc3e176d4e659f838a941dd94dbd701b20369b87'
            '296e8585d0ab6af2b011a99c74a6fa6b07617feb73085f27e22cd86c35404b8b'
            '2843653566f3e30af00b3ab881d5aec7191208ffb3afb3d52a2b3a61bf0e9611'
            '55c08656c4a7e621a78e8086c24f7aebf155f9358cde29829fe05f6c66ed454f')
