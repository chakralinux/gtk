pkgname=firefox-i18n
pkgver=48.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('a65df3d0c0b07f04152946f6214261f97b9200a06c729333252bf7a97a1ca19d'
            '196610936f8581f8b248d6f736b667043b447b6b456f10d6ac4a45fab8d3e440'
            'e738f083a74a1f0392a3f5570df84d13fed6271789a775b1615b704eb983966a'
            'd1755cbbd783b4a311792cfcf74f2d72f1324b950c04cd693d382023de61cc62'
            '17aa00cded2e531fa3ca3c004c3bc2649a8f2908acf1019de92d1ccae5c28c7a'
            '27381cabe272aa116aface2020d4ca1c78119625d899d0e8165a771fe77679f7'
            '017c4a87d9563cf0c6adabd263048e92d1236b2a0887ed410da06e1b2c749d24'
            'd36ea99b2a87f028bfe9524bb3fea516d90ac80c5d0b1db24e0e02f5c35aadfa'
            'b95ee130b6ccb1fddf415ca2685daf4e379debff50f670e8260e1c7a2b834813'
            '56b5ef6a984b7948deb9abfca325c434c9e2507bb61be36f54511bfa4f1a0093'
            'fced4b50ad120f31712c4b5f374a56dd3ae197afca8d3917c68846508f9e97b7'
            'bb25024e83beb44b7bfa03103a62940172c67abc0af0b4e1a74af3b93762edc4'
            '861063676e13bd0b612ac65751e7e94527ac62a44b05527841a52149509a8c17'
            '8b41afc735400f392debb311838e3fff093bfc45bff9ac495c0ecaed2388cafa'
            '7c2f6774b38514012c46a2bc6c85af17532ec02eff7128fe9264ac2c58c7e0d6'
            '906389d832fe550ab5a065e51504d91e39f7472debba989b7452e1e7da224548'
            'e3d90df234d5c0549dadcda71c483e4887f09ea5f69e0cb7982c5852c7f14b4b'
            'e1bf66356280c214fe4e4300e3e3de92a923a362e1379c9759caa37f6b434a7d'
            '358f527a146036bc2504fce65723093030e3354208dd1321e6b9960374291d8e'
            '72cced6971c5f1ab4d2e27331e5af5d912ddfa6413b8d2a71dc3475a058a9579'
            '0b41863d65a18fc283e646a743587fe098beb07a9623fc943edc79e634dc003c'
            'ad675e9d417e01ccf6e2fb3894c1bcf701c782d397158b5f6b84d092914d9ad6'
            '8fc0294b711da3dcc99e6572f090e956bcbeedad860a49a429be17276307f914'
            '0c735c25d2dde578c5c87f77a32016aec3267bf2abed9cac4bb65d3276755600'
            'efd16b8fa815c7427504c8e34db48d8113ddf18ee03e99662e3cd803fce721c6'
            'fb4ba02627fc23a48a6a22b2221f781931c1d6eaeb9b0c6496809a159b7ba095'
            'b336503ea37ea6dddc9577aad636b6efe00a544931931070d0370fb4dc5688b2'
            'deeaaf8e64b9b0a15dbbeef7748248f984a6df4a4f0e9157eea76657778f7aa3'
            '0cafaffc7a4919edcbb6849e701da4bf9a4f251bcb5214c6482e899be0d9a006'
            'deedc1e8adfff051a2ad1d9b2717ba47c4bda8b03dd9501c24c89a865e1423c0'
            'bd7b5d1dc55e9788d8d3c6e90d67938293079feebd9feb200201056fded05ba3'
            '94264026a7202385b345229c2180d0aab7d34159f1294236eeb5ac966955f139'
            '0f4eac1d43f6128f84990c578f1b1de427f67db4de81bec01031d39b8d434611'
            '9b3473ba695bdd41ad650dce25bdda20a419809f78b69efb31df728eeeb0ec7f'
            'a0130a2c75f71a4fd1997d7d2f0f129eb6b7dc4b65747164c4baa7a8df08107b'
            '9a8e22c7c8e235b566a631773ee6d71db7f2563cc5ba0e4f83396f776fbeb35a'
            '31d018449eaba2bbc0c851503c8d0d3a9ab89495c8859ae36dfac1d2d2708bc9'
            'ff319e8b13de09340ff0839a3998cc07f5b8922fc778497676d266e54c2f3344'
            '60a0e2a3ec882993fa134d947ad82d06d93f4d394e97db6acd821aebd7368d99'
            '4979b2f9e571a116a488394788ee76196a3bc0eb6a37160ef34e5029b3fc1ef0'
            '05466bfcc4bc2c8efc171ae73ec9aeb1f465e4b2b558b33e4c20d4330e83621c'
            '1251f45175612deb52f02fe62a81a3118a2f1337e2b49ce97638930b077a9142'
            '00ec4e714f051b20b0f06bd1922d7e52224c5c1cb416b1eaff64208d931400b4'
            '255776d4ab258091a7193ff4b6e70a5aa66c0946a01463f5c332ba433c16aac5'
            '4f54a0309c13bd72504afe72787c255e3ec7b327bc4678f189926d8324ade3a6'
            '156dd1628f56702bd39d938119482e8ff42049a1ee1ca88bc151621de474859b'
            'af68294bc2e665cae482501e2849de442d2df0346dc6334e1f914dbbf3d615aa'
            'e7d4a3f348ef35ca9d76222da578596fa302d8d8356f54bc670b500c758e57b1'
            '3b3770d7a4b5b39fe02eec2524c923cc176857f289651c2136fe87e70e40da89'
            'a910270313b275917cbe0dbc8652bf283c93392a16a3c785b9758e0dfc4ae5dd'
            'ff0cfe0177a996ed831b6ed44576f4020223e2e54a4226aed409029e2296ce50'
            'd34b4578824aa0c7f250e56d5f3f5b1d0e58c58f88e5e04bd77c867fb4d734ca'
            '1255aad1a3d3a132601b7af47392cc143fed4a3c33baeb8a8207208c53444e8b'
            'c70becaea5eb1132ceed6ccaaa9e08bc9067d2225a21f70a12ca941aaacbd6d5'
            'bf6c5f7786fda348cbcc180b6c7da9caeb0918340936030334ee157a2d344c36'
            'efdc93262c51bcbb8602a27088a12dc70abf1858a328a1647658180568c06f5c'
            'd10bc345f04fd54304a70c5ebc6571478fa59eda7db16b18876fd67523c49782'
            '3887ff0f6ddc84912af4dacfcba6113a938ee54e1f41337fa3a1390023401de3'
            '2367927d54a21cd153e99c74b16ab809556b5651ccffa81b26cf9dd1b24677af'
            'e50c7d227c18066c859b01b0eb6e07df7203a88de1df17cc5879f838544be845'
            '42a0b0ab7a12d5b3d1c8b3b709049f5d3027245ebdd76b38e391db560bcb069f'
            '0650bddc1609e60156ceb27448a382708d39360e09215d78ca555dbe0b01884a'
            'f2343bf3c0b929e305bd3944d35301afa599d7eebf21a3ba1d5ade14db13c0fd'
            '8fd8edd5897a65cf62a30ef82e9daae4c8ec4d30bfa410b43bca360e2ced61ff'
            'a053ef411200f877b7bef8b44ece10298f8aa48c00ccf7661864d349242c50d2'
            '72d8ddbe7dc0c3968f93584fd9782e4e17a0990827dc7fff781d4d6080c0afb7'
            'af0116e0e2fc5bea743bc4ac832724870476b0aeda40923cd10ee0dc1f00142c'
            '5de0e378c0fbae780aedad913a37c3e1d69a808b5ca439d1771f7ae2dab50996'
            'd2d340ff61241b30d90d1706acf7d665885121df591a4b88e3e020d8ffb6a7fc'
            'fc86e888f8c9c007f18a8c09f7ebbedf09bf8561f2bad7c7ca880cf757e4582f'
            'd44ef66c318d617a4e6824e0d10025d6c87120678cea9bcd200bd7ac7775cb08'
            '099eaf3611bcecdc4cedf6f7ce62b16f09911d47c0c3c35fb561cecfcd96079f'
            '8386256c498808d8419ca5d003e0c95246f9cfa6c4b864d3452ebd66a4223429'
            '88c08cda9677f0a6fc9083ad1cb0a1ed3ead62b25efbe72371b98a3725ab8b3f'
            '27dd969bb7e25615f733a4a0d352abb780e84694bdb140e26d34e6bcef9a98b6'
            '53a6d56b8e4b5f5dfeec6767959ba9995ec354f62bae76a5f9d72b5b0065689f'
            'e6726cca7b1957fba7ce7b474f7cf2be865e4740ad5ce1c9933e9ea19f4263ae'
            'aab109adc3d8b34d6aca2b54faa9c7202feb24e5c37b3d489fe680e3ac3e0f9e'
            'e86ca8c7cd352f56838fe63899f5e2680cf3156bc6ae7e39e681274ce83ffbde'
            '95bdb63f6a3298eb0a9a48e324ea2f96cad8003becfa36e05191b9b961a6b8da'
            '2b64f2ee7ba395d7abac8bc6d7ae7cb06fba66d0210a408511e59eb15b7ca9dd'
            '363c712c6a1f05aaf4880378bc8ab69ee9ce2c4b4baf0b9c08117ea05a0174bb'
            '460589c1befcb53cc3f83daaeef800e3857bab3faf6cfd4dc2e7acace18edf8b'
            '6b5cab4d42b78ccabf12885b4507521c7799e24b84ef93885acda540ac46ee93'
            '003ec3a1c1f78d62b8eea3ab5bbb92f004d8c324610c39ccc95b00748d9e0f71'
            'a61740d5f623ad8c444627fe9c0fe66b34c4d9fb9253e3cd343ae54c48a4d987'
            '32d140dedaff42407ddda69b41184a96176beabbb57c5cd6a4a5ef2f2548d52b'
            '557ab9da5d2d08eeb34c0360813c7afe6ef5b466a15ecd8cfa3440aabb3b1761'
            '780c3c286887d869154bf8b6a3283545413f893d4e332c6526173a103554c7e3'
            'ec950aae471d5b007039f29c39afbe4bdbee2a51e87be9ce2fef60045a5518bf')
