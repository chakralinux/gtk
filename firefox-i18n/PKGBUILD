pkgname=firefox-i18n
pkgver=52.0.1
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('a1f5861e1de14a7e7552301767ae44b3c399396f8e62c5a6bbb0af9e0c61e636'
            'a1cd4223b5e1d1ef2d199006af9a907bf0eea2788c358261e6efbe0bc48d7dd7'
            'f5faed97b2eb2222f5dc13aae14f8d236d19eacb7cc3d1d8b547b950559691c1'
            '1b8f7656ed3d5c97823e1c9367f6fec1dfb24b31974cb94e1789e23c668cd4ff'
            'e6681a4e86aed4c964ac4328c4f875ba2851dfdbdd4af5e59aad8d8b7880b201'
            'edc61fb56470e8ae14b79a2a239a0f90a429ff3f003e5cfaec1f80fd8aa079c8'
            'fa4e14f3fc822d3271e0656fbb41b4a6eaa851735a5390844be386941300cbff'
            '166b4d1311d0ea7623ed98c6e520f92c9e9774c7d812b48331223d80478cd8d8'
            '4d36c68ee7112e610b07f21a34869aa9aefa76638ba00cc69f6ba7b1a33ea132'
            '372831a24fb11e01a8dbdb4d06d4455a996e1adae351a34fc68e752ec8e0c77f'
            'a25ad0eb785b22fc88d42df0e082b4ab3547394ab6d0b1ed2e9147266a73f802'
            'c19d3781c550c87e9cb87337eeaeea7a7e6e2a672855499c7712bfb6a9b78ea3'
            'aedec8841b84f4d7a9d5f1cd666720ce30e23d7b7cd1cf4bba763850758fb8cc'
            'c36e27f7ae2834a58875ccb9fd36022cde1a212cba0da0223998c45d56718a8a'
            '4bdb68cd04f0c89e460cf111f22c94c41d0ceb59d8408d6bd0fe80a35807b7f6'
            '0ab41b44123c968fab87637934600b1481718b191d0c651bcd427c54774571f5'
            '3acf2fc74905069b602d5731dec37bec8b85ad5036a5fa3444de3e4ce878de89'
            '11940b67c5b33415eb4e6f0d234b9f3038e10c5ad7da212e5dee6c774631b503'
            '798f435018d6d67f6596207b200c21ae4cb0876268b5e665a25e2161d9e4c610'
            '616531799d7c2409369c730c52b03c46e9fd05d935ba460ac31ac8a2b6df9320'
            'ae650ca20172ae91e02e90ab5d7c69379e91360b53b855dce12156a3375e32fd'
            '7256098551419080cdd680ef4a758216be8347af33e30be7c0bd8855798a1bfe'
            '8c7aec2b2d733e8f1fa6ea19ecc3acec13ff21f0c5355ec2127ae851e1cd6386'
            'baa2ee8c3a6970033f4441baf5674a7d0963fb396b73833873610cec32a1927b'
            '027f738605fd7e7a82f4911ae4f1d2124e5ee5977acaf49046d4ddd26c1ad84b'
            '48b82cd7c649f2cc5c663be4a14246f52dd3440fed27277986dcfc2803251a7d'
            'c5d8dc33fad2b015df36efe8fcb48f772c872b6495b1da30d31a3a76831123fd'
            'd02cad27606bf2b0044c320e1c948163a71b5b7038ab27fdca5ce950aec1da4b'
            '3da86a7c60526ddd199506436af36f06e43680ff42a0dfde74fcef127bc78049'
            '3848657e4599c4b80cc709e938936d30dd41059ec7d03a0dc717cf3e575da487'
            '43ac7da9ccaab6fe52f7501b5c93301c88dce269401c336ba494e41e4321d2ea'
            '1ac2820dbb05bcd2f87572bb8af8f10653280e8970cad3797a0f0737eff63fbc'
            'd3fefe51a9271e4ce8c69971247b3a1405048fefb3d433bbb3a1798f11906a92'
            '00dad8753fcf2c872fdc2df4276b8ae17ebd142afa1b52a745e29e68bd499e82'
            'ffa53a5f08531eacdf0b55afbaf8e4d48793c7f7b55dbe836557cdd58261cd2c'
            'f9319de53cafb9c333595769ee4344d09e50913ae76fa70c0f25315a80dfb692'
            '6ce6e027cd46589b9ea0bf6a4f38f80b01872dd2de243c2a75e9645ec3953075'
            'fcfa0e5e32026fea66085b988f3766e69185c19d62180273d56be1e5091b0cb9'
            '1494b977dce94f384f37855df3e1e38aa9412aa26329c49d18e9edd046734fe2'
            '84932c89ef5c6c88dc5f255625a25e7c3fcb072e80e8e89dbd3ef7a9d5e0b0f3'
            '01bddde017b56233e606262622bae13e3e68d7ec41f2a6426f41285ce6c6ca53'
            '24075073b6bd805bb695bf7ab2766483afe8bb0e21edca213e4bee6f0ede298c'
            '420f99e46988318716285111811c983aea31ebe7962ef91c95eef4d6606dc977'
            'c8ca35569a9542c32a2002d757a0f472a265ba7f0eb4eb6068a28d7f3664e870'
            '1b6f2387ff226eabba6f53e48aef92b02f6eec8f4e0a552f4fb26b08baad0747'
            '346802ec33f3a6926070482af52e327ebcb50226317068bc6efe84f96102d296'
            'f8bda8031aca72d050ae9161b30ce619b6dd59e799b61d7859e3c8e560ec9a21'
            '68860206302b330a20f87ae8aff8a0fc758f5220d719bc9c99cd7ca1cea9d4b1'
            '64523c861269271e389c3bcc309dc59f980708317e3af0de7438336ef3ae0347'
            'e4d000248b9145bc97263959f00f7c3f7af7053e95e319589e625220e8db072e'
            '829a2678458f78a60a4afbf088010fe6b420ff16ecec62496357c0bfd44aa08f'
            'b1baf7e6f15066f4a987efd40eba6e90dcbb1bd582ab199adc11ac62afa3259a'
            'cc7f559d421f91f2a44711104ffdab2b71942164b3e9018c39677c381117bcda'
            'e27d2587381604f2ba542aa52bb716f15b1d39c5b477df9abaffdf1d413fa794'
            'c5d90691dd9b6c993e4afecdce94a86517592ecc3db349dea2d0cad7ffc421e2'
            '9b0ad18fa4e6530a15d85ef8d2e51615c66fdad09ed0d08b16ea960321be964d'
            'd5578e33f40d70ee576d3091ae702d0b1e28bbbb22ded2616ab69e53008ba81e'
            '9ebb872ec1314e6d5344ea3ac4be9681fa8ba9dd3b716cebba3da70688fe5be9'
            '29e434eb538a1823f9f3da44d6e08cb1ad9874041a823e51da1d7b598482df27'
            '76670e8c9dcaeca29d4f57b50a0e7a79b544a586fd25db5472d36be36cc7ee31'
            '31e5b38273c8822f85b9d58f2abc63087923eb71872732d28496ccffb5a80a49'
            '61343b63e7259b347e777174b4c843682c57e6f3b9dbae9e2d8a402a76280970'
            'e89273d8c38d668d8eaebcb79f6037cea0d43b404862d7d2328f4dd1cdd70b40'
            '5cd2a90dc4983b0163967791d8724497a0246fd33916afa5abd2153fbb9fbdae'
            'a5844ad08e406815a814b572b11825ab892ce9ad4f2281d6c25ae1056914006e'
            'a8f8dc93d62e019c413559b4f87cc8a4921969e665605decac6fb84ff204708d'
            'f66737d46beff38f2310db360391b312060e55edafb192daa9864dd6b86a97a7'
            '06b7a1ce760efe761c06d3c4fb047996fcb263aa62cff48ec060e3bd6ae842df'
            'a31bfe8bf64a3b9f16d1b44bbceecb211733e372430df0d49dc73d79bf89aae0'
            '7b3ead94275faa18e28a469f7761a89f53dec9b375d8dcc26c542dbbaaeca582'
            'd5820ebca083687591712a48ddfde8f995c7b45705439ec15e6134da68be022a'
            '042104a5df3de1b23a3fa7e33619de5f41a3d7e5cd86cbebc7fb779ab1a603f9'
            'cf1106b9050a5723d07dfb8c05b91b1b719412e297cba82fb7e1495ff553f18e'
            '5a8886d8c10ed9917bf407889d2f02f01925e6f6d16093ff099b0edad6511404'
            '0e75bd6aaac3f3067f3726d82bb61b632a44489f62629d20801a5ed8d4dda6d1'
            'acf97c976d87cb3f3465c740bce46d7339d735ccbb7e3ed6fc7a7e362275c220'
            'e3cc09411dcb7b699885f921437b16195f62ba86ecd86bfe76c81099a49d459e'
            'f75ab62b79d15211cb121d3819dba0ba330dbbad79b7e851a2c8acbb026f3e61'
            'e4403d1ee09badb8cad9f045729d37825be695a2e59e041dba46f173860b9e33'
            'edb01cf2e47a57b3f479773c677fb25eb8c07556e3cf5ccc96de8f8be0074d10'
            '707ef19ae2dffa2f93ca5bb9756cd59fdfa23643b8d89791519264f9ae295e18'
            '0d275d561de981b4268b72b5fdc419f21ee0d8125685bfd49eefa1ddcfd0b10f'
            'cc2dbc628df7b0a13db55968dee8cc5d306fd65b8d10b089bfbfd2a1369877f0'
            'a42f34f13ffce959ef329f45ef96d923cfb0580aa49cb79d6d51c19419c316a1'
            '5e4db9b92e2b8291311387382d3569237a565351a0407b02df75c05780a03bc3'
            'fe70893809656434e30969f5da716e6c02de68b39879ca4ea2d34666cf668bea'
            '90c9a1b0be6b454a3e77c052d8f31d4bf108eee8e1b8b60929da17eea0660eff'
            '4ff3a28a0ff23a332f0ca236cf4bbd170e80c68af32c9f51726d3963a7471d4a'
            'ab552abbe09d7307d062aaa62050d5425a8869362b2beb422ad47aa54d17afe5'
            'f235097640e034328698250e69f00c32d47c68c4d9da858acb4a706ef4d41df8'
            '9f3f6d5e6e494be6ab4e51af59112b8319e5bc7e6c33addc82d9103dd73b52ac')
