pkgname=firefox-i18n
pkgver=55.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('bdd5df311229406ea79d06e1ddc01d5d91372b28f2e4fa973574801dec0f9d5a'
            '1acfadf83fa5b0018adc99f51a0c026d790a49aa14cacaa510798765395ab04b'
            '70000edf1905eeef9948d85df87bbf0a3fbcb598cdca71e879a7f1cb7059aa27'
            '745c2ca145a6b3dcf8bf1b6f3463a6d125a78decd9181dd505dcd69e61f4409d'
            '5a999ab131ea12cfea12fc60963d0754d0614ed627092650c1d6f13c950e8d6b'
            '4fb04aea869f24be9e1804ea59bd28149da4ee8222a4fc6713443686f0c6ed13'
            'a601b331d47cae90e2f94947bc5316c397e215e2dbf689eea4c039404697c0d6'
            '7720f94a0462299e8b3a4114645ff4f7084176070c7382b3fd11660919cbe2e9'
            'a2b24842157ec78825b2125b843872e86cb5e4c67cc68653d3450ce229ce21f4'
            '73d94136acfec6c41197f39eabcaf5f0b4aeab6a4ff1a0974fafae663f16bd2d'
            '2e79ab9b5d0c32af46f5f883d606e28fca21e6e2dd2881241060f38c47b12f09'
            '883b52139f7da6a15f2bfa3524eab2317808f15ca89d2c96c006432855a1aad1'
            'd4ed6bd2da0ab5a29b8a4f3330e6a79dd435c5925a989ab6f21b3fa0b492f7ac'
            '173d60a1d7eff81b95bbe545f762e18e025f6e70854c08b6598c5689d7b3415f'
            '9e22934d75c1076832f4d9ede7cf03e168412530337d38072072b427dcf5cce1'
            'a6496ef027ed954e9ab1436d4832794c2977091d790693d930c09b31a6fa3e3e'
            '000cbfa6294b597e2e5bb3eed5866539fff8a9035f5fe21878866be14c386328'
            '69ad4049ac0744b072f7bcfd1f59f3cc776dc3847f2231aa09b03828a6a1326f'
            '4564cbda474eb58595a164d0bb364678c5c59dbb7ef8e248fcceda62e8e2e0cb'
            '17797a6a523bfd08d905ccff9493bf184551762ad86f1232adc1df27727f2f25'
            '6e48418b8251189baa662323892c0ca71be87d22cd3e4b786557cecd813802ee'
            '7a5c8bff3b70cd26a7509c006ecdb78ae17299d397f71e1f550de40f0dbe0216'
            'e54e85cbec207b0797be2616509f164b84df6241fa793870669768775dba93a9'
            '39bea5332a5c63421393b020edd620285fcab3891259cb0d83e2512f457865b6'
            '3468f2e6702077b3bad88f304aac92ba5d8eac3069ca5a04af14034e2f800c34'
            '424ddabe862bebb25e3dc77c491fd6de733a8487b29e559a00bef7cd2a5d1fb4'
            'b19490d9364d2c1d1fbee7b5b49912704784a10d6fc4af2074e1a86987ab7cfa'
            '098ee2cb0d6a30578b8ec37403474225cf78579f1a840bb2e281c862a7859863'
            'd1d9b0cd012a14eb66c5e04d3425aca42dfb2a0f2c65c65420bea11324911be7'
            '448b054137d8508526ecb07d1e008fcc056afe43b0f908c40e7c876f1426ae86'
            '5d8a9f761da58f38a7ce24ed91eb29b8a3edb01f9b28194ff37c736b5e5c9944'
            'ad1f44bf300fbe9de7ac19f2ee66180d0dd4ac4f13807256a21a1fc90c402ee2'
            '14967d07f7382711e5ddf59e306c60f854f7c586b4ed4a785febf14561fb29e0'
            '932495d6dc777b4226c7c515adf24a7b86f85dff188301f955d5486f56e6faae'
            '7b04faece2c7c969f810ed879826e772ec3a92a7adc249d3a9ec7c00ee07fa03'
            '5d3e25113c6bff63b4932fae00d60fae69e827032aefd86d672d46479b27df38'
            '9dba21b4c4d924ae9ddd5909b70efb45e992186c7c13489bb812c841afe34ca8'
            'e3480cc1ec43d03154d88be88ede9f7da8aba131816463010a8fb91651252eba'
            'e1c912d9b5cc8cb50731d5cd2d3b1cd0abd99e797f4183c8c566f46e57a0455e'
            'a4012d67a27d4712420ae69c4c281f9e54665d0369808d636b298ef93aa96658'
            'fb6bb3fdfe58c5cdc6111f3e146a78ddeb21cc89be3a2b3676b598e3538e6cb2'
            '4252db2892bf0d33cc445e3f9435a5faa227b3b559ae9d31479c9de519752d7e'
            '424ff507192bf03558e2fdb5368d33ab589de78015da47b59ee7ad9a07d1998e'
            '6e6f12eabe3e915e7b96ddcda51c46ed11b335bcd559d31e67be2c6134ad2798'
            '3f5a24038cdd32cf92a085b0a3cc37aa9a6be1448d5167e71ba376384a8030d2'
            'c12cd00a5b434b854ee70ca7211bab793dc8d96b292faa0eac6a6f3c02634fe0'
            '4827e159ee00dc5d1d1a4acde319a977a36de1e2e449b94064fc7902b0b8067a'
            '37dde4ec90d61b33ecebd1d05c46faed2808d4de4a71ac0cab851782c955448d'
            'fc6b65831d9f858dc072933f514f2294b2bb0c47e2096eb242d6a97e33ace3d1'
            '25691b5559fb884930dced6424ebfafb037ac7559fc081bb0aac291ea65b4e75'
            '03518c20f5244596edda03a23d91f88124fb8b56c586674b19f22ca4d8064eeb'
            '7fddf4cfc3e00661deaa63f35f2305e5ad85e7d7ae7dbcbe905a76cdb0839220'
            '0727e2d58aa765f2554f9e503874b1c8ffd2e28b22c053e5cfa0551bf3d209bc'
            'd329c826bc8e721fc215e0d591850e4825c9d30ca395ea34edf04e50e72c5a8a'
            'afe418c591b987d0b25053f6c21f65a011209bb8e87c93c0bb6fa0828885c14f'
            'fa8584fdcdb0c33fc1123776d49456e66287f8425a9c14075740a6f61f0bcb81'
            '07b3a354bb7c79642a0c8fbd7d0d5daaf839d0dddcb3bed6d0ecec6ce993a2db'
            'c4ed2c20c81e3fdd4b1adfe7f455c3cfcca12c6bc383c0015d4452a0269e6d10'
            'b233cc0d8a082dbf227e994e919ac466adfa2c105067e433c291ad947cfe3ef2'
            '8f5d4dab121fb78c8af101c4767b2a28412c0f95432d1ae0ed669aadd45044dc'
            '8faf2c63aa9d5c9a5068bbade0ad89b4736e88987166d92b451c2ba80eab4db3'
            '3f445c3d7b610b8171b6289e7d622c19e84da8ad814afa8f6acdcb2ec91f6647'
            '5db177baabb54a9493e8d1cd15399e6ea8e7d5063bfc2d963e6396d294a425bf'
            'fac48a8ad3410085766443f53c6fccc5a07c091d3836dc13bd7da5b589262311'
            'ab98387f5ec8916f43401582a67409de45eb8bed00df7332d23df35ce452fb4b'
            '24467678d62afa2f55758e574480e5658098fcec84a737bd49b63bc4d7dce0b3'
            '84a627a6a734f1bed379e23e357ef9850f87b74f8cc63e53e6e280f83645b496'
            '92825f1120d83e7c0e1e4898b868f78a071d3120cc956a7259bdc66f6b8a09e9'
            '42c5c66204c0aeb02481c6d4ca6ece9ff8717cd69393371947b517f9d01277ef'
            'c52b5bfcc1e8bbf660888a69b33dba6579c9268dbd06633ac68df6865ba8f30d'
            '1cec28364f5a4f5bb54f87184bd9835e7b5e95586dfcaf618131fb7e9390dc7c'
            '809d3b5c7f67ba4ad6c1d551f7b58eac2bdac3a5ba5b2aa94909a9daebe10a4f'
            '717d2570a6ca06ba9b9660cb3986c02303229cf1012488f561f851a3278886b7'
            '60f0104dde4f94b9c6a331c3150b66fb074294452eb4527eec1772d2160abb51'
            '097ad5a07c9cc674aa3f57a52630598c70564c0fc6612ca527315ca5961cb98c'
            'daeee7596151a5b4e68a19eba23dffba276ca1fb505c29ffdd866a0adc875f59'
            '173d6a443c3cdd79c04c78e80a0d31780767436e0c30018017f2e98701d2b268'
            '2da30893b7e290af0941e671af81acfc62b4b08aeb621997d3e04a11f5adf6b6'
            '67c61d5c3103208391f728580b4e382f5961d538b08b228756ac3696e668f772'
            'c15ad44ec7ae9b351d6cb6207634be23e51aac57460b5cc4d1f35068419936fb'
            'c8bc9befb231e7ce2001ae205eb6f0b97408b70869c5020a5b34b210f7b27013'
            'fef687cb68d7074e9bf791cf324c3214339f0faf803dc88c17da229f3b2a1084'
            '013b22a9f2f0d1cd3fb4a0d4e96457869e111ae39a08ddadf33be833dfc3d207'
            '303ce82787bb570a738d977382c9939f2435b80d550797147ef99d8baa4ec04e'
            'df8e6f0e65fdce8227e903bf0581b04cb1ee33347bf58a461ef0f278cbd0e08b'
            '3371848c73e99130f4b165a865bd5f5f6413386f76127cea790a8f3e3001cc2e'
            '12693bc1a01fc0a8d2268b4abcb30699d0899a27eb20ea1b177421c191757a1e'
            '99de370ee03e361056c40458a0216a3ac076b856cd41729deafcf0f8a22c1798'
            '2823774a1b98c3ca86742b487d0a0d71b8091d17a5766d71921b1c44ff11f360'
            'b1a230c932c5e838d77b1b88cec2d0edf723cc13b313a72c1192cd9f155a259e'
            '1754a8390856c91ccaeabc58134481217598d6931757eb1be8befe0545181391'
            '5a2df76e8fc6a63dd2825bc15862ddda4476c5efcf0e35ad50c1630b07b00f94')
