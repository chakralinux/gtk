pkgname=firefox-i18n
pkgver=51.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('cce1169cd2e43d4a900089d046d773fa0c4bbac17beb2dc96a8f9b6a9608cb51'
            '47a25c0c8b05e1f055f0fbff40d752986e13e09662ff39ebdeaa434a498afe7f'
            '80c68168a4bb308537a8c6b1b361c6309294bee7c2c3659e4dd165e8607db895'
            '9c0f3fc6513328c52c12255b9e6fbf294c9a4b618ead1aa863e3731561508573'
            '04d63c68c8c9ea76dd16b7f91dd670e3fc26790f1da69f5fb2604df4e694d658'
            '85a841bf24c808ebe82d6a05880681840acb332c7952dd90d52a3d7f23446ac6'
            'e95436005ff7be17133ec8b8daca01b2095d178e63982e36be284aec1fe9752b'
            '1faf36335a2c41359c6933a946c62d7571a3c05fffcaccbafdbf1d1e1d2a1123'
            'ccb7fe17b598058ed3845ef9f8b3f829dca5d610386b893e0709b42a10d58cdc'
            'c97564843154f77d48a2192bd6c087c5ae6d6f2d88d7900416241dec28d21aa3'
            'c723c35987e3f28b60fa24303c7c3d28444bfe81674685a7e57cbc0fe7367851'
            '0b1532b4bceca1acba91678cf1cc9f1416e6276848f0cd03e9e1e5809a995fd6'
            '5a3728366741c07ea1c704fce2958e82da0e9f7e257cb8a1c593d0217780550c'
            '731f249a6d110a194ab9f754850ad8dceef6ae46cbbfc02db8678c87c68b45ce'
            'caf41329658a031311bb2f921d6d15097c13af487cd4657f9a98c82f6aa7c1ee'
            '9543aded46ca66dc9db749c96adf3810f60228a66c5281fe197eeff9f4f38b53'
            'ef6f0cf9f288282a5b8e1b417199567ed6d1def496d6fa0f80b6dc75a18e9542'
            '50681dfd99cb41c579f9f214d6e228de15e3727c7defca39cd23440dcc888deb'
            '840d7569139977523e072c223c37a52af5f04743e684c2471554f454692b2951'
            '67a41eac270b39e91cc03179a02f96096aca32e8821a901a7852a5e31d422ae5'
            '8f694c423856c3813609f8dfbecc0bd470d56f15369d1ba778709027ce5f3ad1'
            '30ea9d487162e9730e262b0bd66978bfd939893e18ac3a474b951cb115d77a7c'
            '520407b4f9aea94abfa5ee20b3c3fb3bc43a15e9b631e186f5bf08f33a25bc32'
            'f2f8a7213af1090913579a76f4a0a328dc5fd04160e4797451014304a2b5d89d'
            'e72eb74b03b4b5944240e8a708a5667cc24c7022a4cedbcf689683aae53a59bc'
            '3ca3c5f2e5d8ae20957e226ad8601f7a1517d393c44ef894eb28552aea4ade8f'
            'd725b96dd612a423917dd977d61fea9b938620bb1952b46818a37edcad831cf5'
            '20461e9b44f89efb419ced031549559a4baf126764e712384bd76dd4fe8c836c'
            '193574d4515edd4ceb3f98705edbfbb8921aebba57bccd85a47beddc89376b98'
            '6ed1a44705d1365a1cac7e2439538360d2ae9b7f81ffa50598529bc2cf7f32f5'
            '9bd3ff4e31835f5b54e5e4a33d8df0b378f18721746ad480bef70f14eedc9b42'
            'f321c07ab65b715cbd91b0dfd66e939f1f68dd036e312cb17be623176390e167'
            'e494be5daf1f937687f0d443d71c651c4ca3195bc33a971c67167951f9ebfe39'
            '18f45abb263205229fa4acdaf7106a5c548b6fe4f016331dd2b178c65bea0d96'
            'b369c74d05bd00739c415de19c2c8ee1f0934d0ba0ee33f5e9a869c724436095'
            'e89ff2e9f910b9866a744495447bf7b738bf5418978973642aff6cbb1d86be9c'
            '968e1007fb4bd12c8cc3ab14f0b594a6fa2f0dc750e5f41deee4e932654e72be'
            '792645455126f09bbd2ff50efee780e2a939c92153996e08534c3d7338245ea5'
            'c44cebd0d8cc428007ffc18a6636fc177cfaf527e2dd4472071b93fc896269ae'
            '30e2c18fe4d0670285697c50227f1cbe424a4943161e8c2792c9c2ead560dffd'
            '5bdeb789339fb8e7f93c246c57c185722094baade041c68c661c9c866d84d138'
            '39be839c69c369f55a5514d4984f4cb74a2876760998b8b5830b98a9045d55c5'
            'a22a694941c6f9a17a1e19577efbe16deb9654f73ce721e2a2581cf1375bff5d'
            '7a262c9d79c17b0fa2f8120196b1b116c3c59f6585457bf479d28b972a0b272c'
            '3554a35d4ef4b2292a275b4fcd18980b0f47851c26fa7a443d68fb2cebed1b0b'
            '9213e2b07dd2647635ad3ce47171302018f4be8a5d428a9c4239fcaa3b448d9e'
            '89cbec36b19b58ed7a2662d6fb91cc32c3e2bf572914965e19ca292e7d1074d4'
            '40f7114cc58753f42497b9e61c4312af9c5a39b56cd3b4a2a0b58eea7417a1be'
            'b30498ce154a816fa563b2ba73e35bcce15845f6cf840439363050a430952bf6'
            'fd8dc68c43cc22db71bfa7d9b0945489daff25bd8854d65c85676fbdba5fad9a'
            'e19bbf4e51d41d2720b79d3ef8519a0f3ea43d5726d3cf06dec5d926902b991a'
            '53fc61cb7f3fac96c08a5711129d0cfb221102451bf88f6328f3d8f9501b023b'
            '373b9195beb1768da7b6bff60df93e9a75e89017ab2ec60ef263d386195ff560'
            'd44cae72409d41db9c9e700f779b8eb6118162d1f455ee2192543c6034f80726'
            '89dfd7e286d55ae67b629d685c0515b72a64f3d2fdc987ab51eeea70f6289e08'
            '5049857df9be8842b15f260c4ffc3cc8c903e3de04bb46ead1494bcb7818d14b'
            '6d8117ee94cd4efc3d5dd4d40f7863bef1296b9546cb6406a06b1a8ed57ba10f'
            'ca7381d119bebe4532b7b312c0e28dec8b1adaf18f1b2976d14f1adf01f62b8e'
            '3d54c3704fcd0038410e40897e94a50beac9a8563ea12a5cad7f1a167a947115'
            '9e60eef11a52a35e3a346dcb9ff75d3c1afbd98164c191491e51446c950f0e1d'
            '00948266b2b65bc4a2aa06e59e75523da0a426d24a5885058a90028d3337c50a'
            '20a1c9c2c492befaa5124f22740d2bf70fb96ae3d68eb6e120976a4fd57152ba'
            '92f043b7a21c6ab66003dbfcfee829aae9bda650dfa0dab4605f97062dbf3559'
            '8a5d30aac4d196350214e0994d79b2a60014ae04d16f76a201f8bdce9df8dfe8'
            'fb13c012655ff626be607a6156e9c69293d559001e00ea490af671f74a2c0e24'
            'bdda9b3d3ce306c2d34ded9a58d4d7b1e40f336c1c911b1eb65fe3bb0a520ccd'
            'c903d4c833876927a27613047b4eb6dfd8ac8bf7cb0ee68b3faa29808972c241'
            'ff112b06b8021e8f33ccd062c7972ae3075fe2e4148c60b9431e71233ff9e1f5'
            'bac4366ba278684affbb9637ae800b672f9e83936943401154d4120843bbba13'
            '439c39797510cff25dfd312048b94a1205f6593fb74ebb084991ff1498cf9a24'
            '931277c1e2dcd772df768fb2f6d7afcf2a4bae671158c549c562b9a2a2f4a42c'
            '79aaaa16ba38e45d1946c8b89eecd64cc04094b73c708dd2065d56317c86378a'
            'c198e400cffa91f45f4f111c5418fbaf42eb54ff417f6e36b24c9974ed8a249a'
            '1068f80e03374c66adc2dbdafc85c0043ffd889c73e8484e1e13c47b7f5a8ca9'
            '3c407112dfcb5160bbc9e801caf889abe13f43d8b9e7d922ebe5ddb16c181406'
            '4c5be5ddfc6004c14ef65043128fa54aab38d7b1eaa85df272601eb0b45a6298'
            '22b30e5fcfaecee742f4b71cb0de4046ff5dc11ff7e0d2a2c8ecf71e4c6b81fd'
            'e673f76a228956247f039236449b0d6701e02aa3171c1fe634844b257bea5b96'
            'ab0188598eadf12128a425a7efee3e527be3a28466eda5e87ca82b8fce18078a'
            '10a13630a4e3b7334c5cf5668300fde6e02453483ebe34c3623ed88456593428'
            'c6fac6b836dc088e89495db771c308c0570861d92f6d30375ac697021bbfef34'
            'a1d73046fb9f3e8a937d813d50f3bdaf5c0d7b35c78105d51c42d22dcbe57a89'
            'ee4be3d8befe41667bffaed2672b7857d1866eef781ad0e06db378b398676225'
            '72ac9d18f1356975c3ac7b7c4d55e41379ba37096f7da51b167e2af760c3237e'
            'c91054c7885058b8f15cfb79c91408636bf07a09e68c7ef3f02d1fa070376f79'
            '10f7a98e9d23347fb37ef873383f40a3f5b8b46d1b0f0fbbfca914ae45fe2912'
            'e49bb0453bf4cfcd6c7a757b2fb53c46a12a86ef58a275224ced1aadf2874076'
            '7354073dcefa2eddcd1648b3c13e5f36f8433a941a6bd840d602a178f5a84c01'
            'f22f7b8d8e66f9d9b941a14b69dfb2aa37f05d7f4f2e05848b495ca9f7b27772'
            'f5f978a8a2517c3e42021f0a7d8a2c170f93490a62016ff195cf649c2a9e5fb0'
            'cf0668be58af6bdf07ada81600208bc5915091e0750740184f63040ac0ff52e4')
