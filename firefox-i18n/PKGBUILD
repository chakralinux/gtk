pkgname=firefox-i18n
pkgver=54.0.1
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('67d65abec0f11ebee2e44fc583e84903360c5261845c580b6d108c5d586441c1'
            '897904d2dea2a69784af0bc35261ae686eeb2239acfe10435f2f3ca9eec71e99'
            '33406f8ca1b8f799486dbb832d682fd3912fe1808d10077386d200986c97202b'
            '8ebfc3bfbfc9c5683cb377dd07a663bacadda29a652424c12ed790981907c6db'
            '03b7d6a9ef9deab792f615debce6de054cfda055d90e9379af785de9b57eff1a'
            'b5af3199c785c84a68939adb86cf1b5d6eb49fea3f2c366b62f9fb3ca06119d1'
            'ca14ddba489c918194762524ce171c60ab3f1b189acedef8f87dcf8b8caeb294'
            'f2836e798a280e1558197eb3464690cf0f6ecc859c8b162ef4c79efbfc7cda5b'
            'bce16768d2c2d6614c0d206195d66ce161b842c234707ed24c659f3021040769'
            'f219a66ec0e6de0c4febcaf30ef214f484ac5dbe4213e13003f944b10f8d9cdc'
            '8ee44ca20a7c04a07b743b97ac8d8b7ef0e7a0edd737043b12e1deb9e3c9127d'
            '850106988e084cf8343e1d0592f6e5967d008322fde8b6a726c60780dc43d6de'
            '564f73a4cf668a4259e33846f25310f3b623e9360e3267cb8a4194704c4b3ff5'
            '6003a07a51b4c4d501a6a93186a720fc334d49ec9d945cc4a9d8ab3c485508cd'
            'a377f784cb51767ead131ab3f5e0e0fc05ffff5f313a7587a56af969e5a79040'
            '149f36e437262bd4685cf1ae2ba0fd4b45438eb1d994f774d81487ef2af07575'
            '2296ec114ccaccc3d546869197babb202d9bdb201959ed78b242db9f77d48c6a'
            '6c621380ad6f672bf0d6f7e5285b86f3b07c31b1d5fde85835f455549d25180f'
            '0884aeb9c79e03634f564d291aa524e645ab26778e75460a47249d6b09e486e7'
            '68b0e6e579c7aaf74fa1f8f0e3e3a0ea5661f3d1d689f8a71af152ba212f1846'
            '14e0d08ce9fd79cd1b9ade2c19d92b255b758384c7e7e608d573beed36f639a3'
            'bb5c3d0a4cf9b342ab8682cda9ae2c227219451e958a506dde5ac4435390e250'
            '850b248111404b240af81bcf7a72194a78a98a0ddae2b093bd6ef2bca4839e77'
            '776e63f22033f0b62f86e0e964b6a753bd1a3444eeca2325ef85d44edf66385e'
            'd42f92929d1a878e867e583a47d080f394a8376d6da44deac08675b2ac4fad1d'
            '5838b3c75393190c2fd51bda8cc7c5847c8c73485019ea2a77ad95d816635307'
            '1f438d2708b15dc0ad0a861a619d7be7278d90530da05db79e671d487c204245'
            '985b7a708b9f145ec448258a1b041583f25dca92a142b8a54bdc4711cddc27e2'
            'cf7ce043c97772423d0bce53f9ec9a36db0a3d77bf448d845a9d0e2a5ee09ad8'
            'da5440fdccb946b9b10ce86ae9cb7dee6dee5333660cd6db82d983a0c3e3b13f'
            'd1dbc5b480279ec3c841905f40e16c0fd87dddc1c5e1faa3a6ffc2d3a3402524'
            '8122179d5fd77f12f566bf96aa0f19a6e290c1bac51298d758992fe89080c475'
            '5e303d75e4dbde71a692b0716efd509922e0e94aa5507d175951e227417d46f5'
            '8929d07a3a2cc5df7943522d5bebc4f64ab9a2a63e88778852c16b834f58d748'
            '48e38df0f20874b610059ba841509c3a5f13e84e1d8ebe04bc31f255905084dc'
            '66697b78dd9187060ce294ec684c5d34e785685af6ca807b6e1dd1372bc31e3b'
            '87302d3e8fc306b60ab7ba112187b68c98e69ff25966325495ab1b0da8dcb317'
            'fa524d341950d769b98dbd21259a5f63948a36946881f74aea831a3ba0788c92'
            '5ceb0534ef8534723b973491b5ea1320e62c4ebef0aafba2b94a3f20fb2a249a'
            'e45fe3b38be286026b2159dedcb6249756f67656b2695aa656fdb78318c3c71d'
            'c9d18fcfb0fa4492d0f76624cf7b105f92de1e64881b37eb3d125c8134dd6f6e'
            '4a8cca8f2b2416b5f332188e4fa0c3274e9548737c4b22a06d6a8b99a3e91a66'
            '8383c80e478813287d9ce4ac3ec997ccab6964c632848a6f32b0ba039c5f0dd4'
            'd3468313c78e145d036387745d9b7fb60b06c0e034df1ad837d4490e7cc3775c'
            '5cb7df255a449cc9f9b5e66c190e2a2bd5c13e4e057a7ec368006cde692b1619'
            'bb40bed9ccd0e355ce7f773eab1b021d4d88148bba07dd4f0ef18a016aa5e6b4'
            'f1f85952a97784f6d067108183a3c799abe53fe72753b039a4a9da655df7bc09'
            '2231b448ae465724c894bd494052927f754c78c9640d941fb9af747277d065a9'
            'ba6d886722b6535a92fe53ee628dd7cafbc49e2765b8fae698d09545549742fa'
            '7e2dc929a646450552b2984c26c6cf52991f4f11118c36cea4ea1f7b53ff07ad'
            '19b98c1c3c7618676095ed826f5f885989d538646c89163d6dbe600d298c2cfb'
            'a31baed39f1772ed46fc4a038c687a3946d8b29364115737c6c6bcf980b66f16'
            'a984093aef3bf7a31c43b931fe93607c550405add3aca4b655027ffca98a03c4'
            '406b07b99f3ee1d8efb0c61ff9b53527ce6941b6be1b037588c25d6ad9455e7a'
            '5e621f7a42ded0022e041f076d787ef9d7d69f9716fb214376f6d5f3dd51ef79'
            'c1868dc063721d80e5663ded1f81e3b7e9e60066ba14da0377860b118f8bb708'
            '1586991c999697d7aa236513a70e96b06001bcd0e897e6fb5db9c9d6ca12c994'
            'bd288ff5dfb9371c3d96f3e88802f10c8be541439303fc6fbecdc7f993a7a7d7'
            '1e0064adcdf206939e8a1ae67db789220c0531bfa53fca289ce721df0eaab9b2'
            '4b706bb5766f8dc9f448a7fa5454c9ef2c253e04cdbdcf9b88ebda10b552c516'
            'ad686ac341310db5aa11cad615a55ee239977de0a7a422bf12641e5388702059'
            'b6a356ac14c37c56236700ca19b0d4e538dd6d34d3f38fa274182cbb72693e88'
            'e24a7ddbd0c61bdccf899cc60f22d4aea5b84660eb6a5f60e38d8b6b6b8fcb29'
            'cd2310083a31a57f14ca1be18c24176c459cd1dcfc93060844cf0a0da1936918'
            '1d421ab64f90ba1efa58828c11d428c09c6c7244805fb60b0b7a8e5cd8322d90'
            'ac8f670bd5007f6c848dd85fa9d6bfd0a081684452e67094e74635f5bd821655'
            '64087d702af9de2a14b58a4392e8a6c9e1aed02b2064335cd14867e84c4a7cc0'
            '066b4e8faf10fc7f6efe596097540698ab12512f2520ad4efd1740561b71fda3'
            '005c7aefdfbd9de66cdd3b8076a57ad298825d8847351e470513fe25683b0286'
            '83aa38fbc462ab0a59fee7f38881b02118a8222964bdd6fe5c6d9855f5b937e5'
            '1396095d03a3ca18f71ce2579a56dd9f74600b96df12aeb13e2ada2859b6d6c0'
            '6ef8f46c9ec7d78e2a1acc75b6a48e35c800400da32572b5771ba8ba1a80f4a4'
            '7e61d331fa8d25ede28fde6488ccc5c6442fa3f885ab745eb2526f446d859b65'
            '7e02a7ea2b8a6780ec85b4f52606ee85a94c788339a1769d75e19a8042eb857b'
            'dd7add48f5f60933123019e061dd44fdb91a08ff0b8a602c3dd595d178cd7e1f'
            'fa6d6432fdd1da7d90fde5e91e72ae019ebc41e6420e561d2a1ebbd5e3c4ab9f'
            '0a84984bff08802d70dae2466135211faee21b1042b13bd4bd854cf7947a112b'
            'd16bbc6829623902657981edd4a8a497e991e9b1e780ee69a8963808abe81dba'
            '1999020fc0432fd1be3cfb150ca49cc710c61af92d1ca923900445ff33a5afcb'
            'a7197f8feb54d62084c1c831dfce63ead75ac797e161602afe7272a9284b96fd'
            '0010f3f33bc5a13f5b1560b3e4c4d2b1ea35fff9d4c7749665b707536ac641d3'
            '1a514ae48feff203788970e3568939db8f4c0ac28008626843be69a8be0cec35'
            '50f1f93dcf89f6e7850e85744888c0f445992cbf9ddc458b1395eaaa33e8cf5f'
            'ee141b8672739d6436441bd3eacfc48f54ebf01363e8ea00fbafa60f5813ecb9'
            '291a9f4fb3e906179181c6aed4c7a7d517efa55fd4effb5125782686f762622e'
            '3e598048d02b869590534b8432ec973a74e113c6cf557735b8785cf90fcb8c60'
            'e3255884c5a692dabbaade1266e66e696c449c38d1b61d1f50e9023c87b1f7a2'
            '08bb2d00a782dd341bfa02388f806aef60218f48dbc12f28a4362bb8a95efc44'
            '4fdd0146838132770524c92a8553bd9c9d96d3f372fdbd76a2bd6830a5441957'
            '59411482a0a1548d31650efd0f32ba61dfa3e1a158d91ddc2fe24e97ef8dc621'
            'cc97d1ba3273b3b20cf1257ac9b19af4059e95d646f8d8ea33907b984a868c2e'
            'd8de9652bb4c481ba73b40b39f21b5aa292b6bf47e4356d5514c82292ae93d70')
