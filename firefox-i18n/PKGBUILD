pkgname=firefox-i18n
pkgver=61.0.1
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'ne-NP  "Nepali"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('f8aa29279937f2b85ff6b556f8485aff66cb33bcb77aeacb25f3f24da8761b94'
            '72eadf0e209d6acb80eb20188214759c3f4586d7027d10e632e28afe766dd697'
            '65885255a29bd7a9148d6509b464557c627857c0ce234e58ed124e581be69cbd'
            'df2ded73065fe6d4153e68f2535095d6b2319425f96ef65f1b394e1e62704d70'
            '587dfdd1b61635d62b0fe98e6b9841526446fae17d4c22cdcb5f43f3a8b6aa29'
            '61a9be45da869bb775dc7992223b2385ff7b31cb1565d37455e539b3b2a1e118'
            'db51a68e63a98f792e2d6c51dae54394388e355c76b2db4dcad62173ab1d7cd6'
            'f40c6dcb1ddfba6143d5e399c53b9f15de5ce3d456de153d6f47e84b6e29ef4b'
            'b49dc3f4d0b1d4dd6cf8a35e54ee2904d25e60fe8a7fcdb7249da1c240384f1a'
            '72db839c149148596fae6521a6ab5e8da24389bf2c33adbd1af49ccb0bc1628f'
            '8e5f7dd9308388e6ae2b91f2f41eb2738e8397b8fe5a7debf4daabcfee745afa'
            '39a66dd4889d621a3218606df94cb5db35d7acd620f4482d24aa4fcd09868547'
            '7221153ee3306704b65cc304f997ab8500b7ffbd757524ed27d599ac67941369'
            '77f1393926b1172070d888895e83832ad7f10085bf8f1720926f0917e96b061b'
            '38bc5c44f924fb4ba72bba5c280a01d384ea2fec40fdac2c9c91cc44882334ae'
            'c21a3c0a786568326043b265ed73751822a4c4a2e317a5c752f7a2eafedd03e5'
            '0a8c8a1d03f3b9ee07cb1559f0a3f455b2de48667ab0c96c2d44be46c7e88c71'
            'fc433466a15ee5022ff006735d6c4d0e64db5f5ed40e2d96b9825b628474bc9e'
            'b1e7a35c74362a8e1568a2bd890805bbaf90398de7fa43f9f1ed204f95c7761d'
            'd451dd16eef20d623adeac1204597a3f679f3d3329d4fa9bfc84ae856d54fdd7'
            'c5160f007c0b21e7b0824e9540adb8e567113a82b7088c004301516280949d6e'
            'ddf8a86a3789ffb842992a3b03f859176032151afcb9c7d25f8e8a833d21ad37'
            '4da2d76ef3fb010016e9feb2e31bd9839976f4d78b22941b87ed9c78dc90bca7'
            '99afb2a2233ab60b1dd7244fcd3a989d6fc782484ca491634885f3729024d780'
            '4e3df961b9d1b417a1e26373c006167cb4b88ed38d40b88084490316fead6b36'
            '72c2b60f04c8ba8932e2336c4620264089be3a9c367ecf670f83059d396e606c'
            '97df3ea77ee91c8d235611199a4c9d9604f498e672afd0c9f2d978e156c6f534'
            '7dbf14b8cf427ee6f1cf7342ba4279b7b74b0bf67ae276243567ec6d67259c6c'
            '438ed3a2341b76690f64486220749d8705d606f3482d3cb840630b85c7f7c8ea'
            'ca8402c6261ac3ef84a40cfb044dd792f6e3156fa32594b4a1aa780b25246110'
            '679e681a45aee10babb42bc17f042d6db36f5c86e201a3a6b7df498367dfa081'
            'aec6e6e6d9cf63f0f442a5b4017e08e779ef8e4470bd2b5355a691d0a1648cb1'
            '913fa642c5e639d88f62228817b8388a8cf5b35f872d819e877fc8aa1e88d952'
            'f80bdcbe05908cc3e020badf951cbac7077cefcec0cbde5500279b52db970c3d'
            '67e72525d3f62af6922b211197c683fc3a7b4aea1590b3ac4e695c606e00a7ef'
            '63b2cd44385fd67c33569451479e987abdf69000aa3c529fbc615a8b4860a10c'
            'a431f97a0be7ddf55e5aafb6ebbbb018f851d192b2906b1c94ed8d15c9952fa4'
            '80c368669492be9d43057a453d76abb109e9049d66a1537ad6c198ef7128df64'
            '8ac85a9ef4f66ed865303b07832acbef78543a9659d55714662d9a405e6ca866'
            'dc197d2e36b4b263fd2d53420c3148f15880e6c9d83e1d1bfb6c2f4eb6b0da57'
            'feb10dd6133fbb800d8374973615d861be7aa39adfb68f41489b9af7ae1197ee'
            '2d317422b1d07bd2e402c5975d816973cf83d54210133c452aae2477dc2df25a'
            'cc01ed58c0fb904b03cdb52d7c68c9c72d6a5a502e82e9328cdea16dc73d8327'
            '5797a2956dfe1f825c1215bbcdf07261e7ea1ed68820494136dcd776c2ac9aca'
            'e8c293d3478d74b08c3ec9fe91d42b8b1f11041b12f12222e2b297b5ac59e5da'
            '314f7d2278696d4408511b89d58c2e21634ab20972bb43c59294617ccd4698d2'
            '011e69fe7bef67190032d4fe880078c28f65cdbf0279d2c67aceff7f6eefc63a'
            '144912537af9b915bf1c4fd3e250f4e9c97663993a50c661e99e5b0b3fba5969'
            'e5d24b72f564525c1c16fa0afab4d1f7181f8c528ce54a273e327408a816f825'
            'e912e49028fc7b6aeb41bf9ddd493fe51a73a70df0246bbddc460c3c423b9051'
            '698e4401376dff43e581c4b39c78e33d34c071ed7125eb9cb13b214d5957113d'
            'ba4cd5b33de94bd63a44900dd1b4e600f698536c3ad7c160bb0bdca15d0da8d5'
            'f06c156ed56fdec21c4fcea7c0a7c4922e9a130285594ab0baba217ddb03de29'
            '7e611518640496c610cb6c4ae99a74167d197bf0fc6f220283a479acaf092b99'
            '2e032d96638523dc8d81b2a6a1c97b87b1539992882a2c51c9efd4e9e9a40931'
            'cc3e91f4f9f97f6cac45cdb87cb46f5331e02ef4eb847865f1829bcaa8fb4cde'
            '8581b7b21b8917417a6d2dbe9daa45578dce72f842126e7770ec4d5432519779'
            '9ba4b83b8cca5ddf68acb07158b2d9c8da4b8cf7af1ae38b829858f52250e641'
            '089c431cb249357dd8fd260004a5db333c4ed8b951c704e9b53e278b325e035d'
            'cfbd69a1f2ee8cf493eb276b12915f680382659b7ba9b33d67213d79c30fee23'
            'c54a9c82969b6bb9207cea9b6d51d9432503c2079b1de8059506099a6d020462'
            '2de36772903ead68945cc96ae26e53049f8317261914ddbf8d41c083fe19a1fe'
            '494f0109dd099f9c036a568b69c6bab0365ace79ebda8b54d282c3ed4ccd9c2f'
            'a2a207c68ce44863c24866f78227e13ad8f6f193396f330ac9e080902211a4eb'
            '882058945f4080021e3ace83750cd6baf5f83b8b6e25e871b7807e91a64392fa'
            '064a22b8f32459a5bea33e2c111563af3052a651de8b0b56883ff12d418eb665'
            'abfdb1e9568c70bc29c6d2589f5d63c7b6bdad93de4bccfff2258c35d09684f7'
            '452840a94d33a73aac9c5e0eccc15af3d9bb7726a99aea85463461d586373fee'
            '2d8b26810018fab152bda181f772dfab023a433447baa350ef13854d035cf3c0'
            '60d4d215d9c7d1297e9faa26274d84a300b4b491e66a0405f27fb1fa04262dda'
            '831ce5a74e942be1cdbd87825f45dce4d155040d76432fd79f8c9f96af974149'
            '25d941668a2c779a2b9ed0ca188d238db9c0d36c1da1e4904804e77360bf0e83'
            '095ed971daeb1ec357efd3f90aed0a179112db76a2848b4eac53d41b542e9560'
            '34ff9d81d08d4f87095f3a9ec4c2193fe35277089faed11af29cd2dadf2b29fd'
            '9ff995f5e1a47ca2370b3c5bb862aeff9913254ed6395dd22e0062bb89f09545'
            '27241bda5688d3bbafb858b6dcc8de0e3da60779ef2752f1a990e2210689e3e9'
            'a81a26ecd8a266f769a58b68eb9436ad52439110d31e923dde0736b0b4719216'
            '243b2dd0d643732d6333f8c5ae9ed8f43b66c628c6ce56cbb15910cbfe38fa94'
            '490d44be540a91c113b7693741418624558be225e86f6e57ca85be60be64a8a5'
            '5892615f24844cead3e8be9fcfbd5d0d12a17bd38332ec4074220e277dd7e2b5'
            'ac3578f0da3652ade799d4d27149131d98cda2f170996307a16f8b1a0aec4de8'
            '7f6c5d87d1d3d8d2da062fd2c8f4266151a6a7b2fb44b41f65eb3f8bae2c3424'
            '12a903ece0fa039e8842af661dd48ffd55e5452647e6e17621193c5a4dd54f22'
            '21578e9403e6be0e31f4c1bdebf0480d3c0e6b0a18b8001a0fcd0c1842eda8ae'
            '80e3fa4e02f0cb475d458670513fb76c3096b104372a15bcb73b4ca3e39f823f'
            '423bcac37383969b7973bf3d2b9bf3048b0c2c31f384dc28743cb378ca609f61'
            '712e1eeae855d9399f447c6c09902d22a3a183a52acd96fdedf10389400fea60'
            'f1048af47de129e1f293e393f7d6adb6249f529ad043921bfceca36fa71dad9d'
            'eec198069f29d6ef58ef102cc6e2733d9e65e8b71dc94d9fde73a772582830ee'
            '516ab062c710e37367e3997842385b54a40fee10ada7b972d70b0c299daf1161'
            '62b2cee9a2c9e5caa156dde63903290ad79ad93bda1c13a73f53dcb09435da86'
            '745d6ee8697a115f1082067f2ae1a9b053aa8a300098a1e9016c8d72226e3d36'
            'b1750922c0f5139b829d6fc631fd3f94f9d2e655bae46d000a159b35fb6ada00')
