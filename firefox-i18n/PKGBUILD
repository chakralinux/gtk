pkgname=firefox-i18n
pkgver=50.1.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('f174eef05c650b1d49b2fbd5f9d41a3dd30ef3d11e282c4e15842cd586299977'
            '8149cc86fb7a94659156583bb7bcf75b4c4c6edc408ebc1ffbcb62e55f2e5b32'
            'd4f516c864af9530a0c282060e91871e031119c42f73096298c833328d097a2a'
            '84debd19c1c34d9cc8a49eda6758732e3f6aa14083f7db7e72b5acbaee9d1084'
            '2c87a5de2afbaa6c2f5daa29b1c2617c023468082562bb58de218fa6d271f198'
            '86fbf0721412f740af690a4a3333974cc050c724d247cfbdf9cef6a02969f6a9'
            '002a09062144b63623168dee54a1a283118451d34712a9d7689f72bf00b89958'
            'b826663a63d4bc7d844ef80a0033c5cc592150d106b68ab1646322a901f3b03a'
            'fbaab2316fd9b87ed2e449927045dbe7559443a571d9852d3db4c1cea33bf0ba'
            'f0aea3530dbe12951e7d68c8fd80747c335c7893d8fb3724a7077423bd151257'
            'fbd10e0fb39b9f4ab86e57a814ad4f92b4e442fbc7cf59ffde3fa5a3c4ef86f9'
            '407603c77e9e62f83098873c48923d07acd4a0787717f3419237e893e5439a1f'
            '3196ffca9f07cd9a2b3fe680ec8ea8e727e2896e2119cd1743d124611f29b75f'
            '8b46fc00853c5e4c519b4892ca49e2e7537c7b5bce4e202c66493d838c15b215'
            '3806ad9d555f1cd30bba7a0ce082015bba4d999e75368ac018b2ac318c3adf78'
            'f19a1dcc05f090ad6b8f59d00ebcdb43e3acd5b41400d85dcfd19e6b4621f694'
            'a551ef1fe08ef7ed091ee93f6a228dc29c2333d58dbe9c0e1907386185882d10'
            'c195833e183ae8615ac769b177b8e2736897823adb6cbcd058ebb3ebb6ba7090'
            '777322c63b3d8fcfa7690ebc14d66993e3cf9f314fd4b6b8b3656466320eaecc'
            '99f3109310e048c6e1d4b41dee9c15a2c603d6648ac085df6dda278853ee2910'
            '42e1a12e435c5a3a6304623f4cbc6d6a41d3a3628b04a30d38a5772c82663e0c'
            '358c173525aa27892352cd5a5a654b24fb5fa4e44ec46213727ce35805c5bce5'
            '38d1eccdbd5911867c5ec5ad9e6e7a076b1138d15c55373bee8dbf7756364c1d'
            '4551c6fda32cadbc6ea0246791734a889d207ab5ca3837ea9d800d3c6cbc6f46'
            'c8e9dc7b597b55cb7f9add8e0a370cfecd79ffc0a2a3582c9ecd00eb3ace69c3'
            'bd18f050d44bb5b550c3f788e058048e12bcc711bb16c6d40c0615117d786fe6'
            '55af42cb4d71b03117e4b187f1f7934786a06b36bedd275aaf869e08613a7a01'
            '487b9411645b07acd20d0379200b100f2966bb219f9d3b3db7db21dcfd3b635e'
            '26b0d323c87dba56a5a691f20fd45b3c16ca2124c823ef0d6b7be3d41946a660'
            'b8027aa1504af141e53c2c28b0e2eadfd79048f1bf71e01f7390fa7b74e57e0b'
            '415d50e796bbb6178aa1712e9b3bae1eafa7ab609459c113799d489c452ed034'
            'e23864745f14759e6fa6ef41f351c8239b18807b7eee267ec05a6e637a6f6b20'
            '8beb86bc0c55ba06e0dd2561efae6f7e40e791f9aaea04202ee38075d9149e09'
            '5615fb3949778f6b92f5e924ebfaf3b3264e376493c0551c47186117f4b05513'
            '9e178603df4a29ddd118ca9a2044afc0e4b9617b0a978e188823345c7765a099'
            '82af71a76faa04a4a896c8d810c91b94a424e81f0ced60ddb041c6248c4df5f0'
            'f7115ec8b8a2f3b42450c37ae598f29c93c78e6bb1964a95e9e0dd13a3d156cd'
            'a17f81b314764f9ff40978eca0e73c91a0d8664bf2db135da4e18eeabae9a115'
            '53ac41b028671e4d61606e02547d7956862c02939adda2c2c10dc528dbd367a3'
            'ed4bee54876daab3018c830e72218b811761fe56b7c8bd9489e377bc27a17810'
            '3ed02371b09f6505155653327a3dc088035bf7224c9d30bbb043ba8e89b095c1'
            '612912243d91c53c98094105103807564880c1cd773aef73d251109803696b27'
            '5428a9d758cc41cc1d55a0a39b5518760966445877c41b447536035badd7c8c4'
            '36b1e3f6d01039f6fe5096ebaff700807a01b883019b6d1e56d1853e6e36067a'
            '62cb7940d82d5d0768c07c37537e4e2ad55518571a8cad68b4b5ffe796c31bbf'
            '7ad01a26ac9cc8c92a53f1ac832169af595f81d358857c2c2ab42b48835c2c02'
            'da063de9b281b7165acb03f1e069043c04efee613d499a9bb948f53d214f2f27'
            '46c13cd03dbc8263e3acd85f7288e83a1eb28c907afe24cfb7f85a98f560670b'
            'c053c65111c89f0278745a0758e383f12a9a3569f2760c081b20b53d3c7815ad'
            'a4eb41da37ba9270ec0dea1cc3cb093d49c741f838a75e99abfc731b4540c899'
            '79db1a15810b4ef8a6b17e8a2587a855c9450b4658695e813e622df774eddc92'
            'b1f14cababa1e1aa9ee9bbfe32c0b5e775c88fefa5bbec16b840c5e548763cf8'
            'ce896046be3804c22b91909afb770c78cd0e9ceb47f43c9f825cc8afa30e7a01'
            'e829e8b0bb5e88b192331dd16cda3e5f268ef1379744490ff0851effaa169fe4'
            'fc356e7c95953c065c6212acb397fa8666f811466a95fca6dafa5dd8502a1527'
            '46849cde0fefc8c52e39d850956bf17f3923b354843cd6748c40e949cd664300'
            '23e14635749da1d4372f701b7a0463c2479af00dad71f8b0787a03f930848163'
            '4c915c55dc10c69155ebd8cc8d4f29ca64505c88854cf3b0fa38a0df9ad8f6eb'
            '0391f51020304834f15853a463bb322b9004be63a77f20eb8c28883a289e44d7'
            '4b963479d69eb173b0d27c7f33b69f76dcf862f8dcac3674f13ff5ae55c5f2c3'
            'f893352b3bd2690d212ebbe899d1f49aadefb28f8925b58ae9cc885d9e2b0d3c'
            '32f32f011fea42e1ebcfa0d09e16d8dd194bcc3dc5c299bb852a1cb101d8e326'
            'f7978a6c90b3e2b583361e9157d9e96a33046342bced89ea610c271fe48b816e'
            '5bf1f587aca3a4d539b268dfae2371681e26bc40a057cf59e55aaae30df23397'
            '629a993029c360b9de832d1ab3056681fd0b6fd3ee4d59da8d9f27357d25340a'
            '59c33772aaa69a33d4e22c8c6f4081bb981e4aa6395c3fa841fea2a8108b9997'
            'c2d32614c893f1c661f462d469bad7cca26bd21f6ad29a23d83b3a40b9deeadb'
            '1753a8172a460fa16b3e27646d7ac6e8a6435bf6c4c1030e00b9a2ea223965f9'
            'ea431d245512c187dbc7875205bc4ea74d9cb4508965e12f072d0a4d60e8ab2a'
            '619fd19c66cb8942c7644e3b8e73a79d1291c2b4f870049aa244efc95c2a7109'
            'adcda36b9d4a5eae1e51ff60bc4ae84ffac0e40a412dd26af22f3f855eaa8366'
            '1ae0a71fa56c63a80436f743167024d1fb75f5cc6205c1025c97a5483107e5bf'
            'e37e758cb444ec4f450c22036e361ed4cf1191f3ef92b6dc77de4791e92abe68'
            'fe3d99887b59f02c97c75c18d95f317366c9867643f049639b1d159b097882f5'
            '8cbd6ac4ec9cea4388bedf7a1d3c3ea7c446c7b5dd3d232219c6077ce7503c0d'
            'b1c3bcbf0644e0bca1306c32bece3c7185ac765ca84adc71c1285049db716331'
            '239fe21a406467c1fa81055476455a8200479502b0aeb0a15153c5723ee2f4e2'
            '2c45ef82be46ed67826f1fd0bd52344497fb1df06d12d120aff3d8eb6d6a6d5a'
            'd447f67f97e4000214b604ca74fa40cca72ba9aaa18a3115794d40210015fa61'
            'a7992ea00dab41ab938ce2334cf8ca65e057f390ca03a41a172c305c8a2b33b2'
            '53d3100bf50f2e3e3981cc73721a2174f093ee7a84b0d9f807f6783c7a3eb9b2'
            'f607a309101c5233fd5500f8ad057bf3ec982e2edeec0d16d67c53aff3e23782'
            '99041b6f2ddf5be833166ed7e2f98cf434a743b16390f2eca72633f37f368b5c'
            '3b5cef84030502e48c78c89d338bfa301a94960fb75ac3b5e88b57fe0ce5926c'
            'd457cdb9451b8d8a51e83e793609d1a06f511f6d161a6393b86bb5088730567c'
            '774cd91675ac7823a01fd19142a9e2a93e7a12130688ce23cd25a3f9945dad1b'
            '8c6cad7c1a05e273746bc097bfb6a67c251d6ee80c5503987cae8b9ae384a668'
            '2a304b633dc7a22bc0fa03af34b744d8ac71f8c52dd1c2d00585eff150e26f97'
            '3db2d5dc0a01beea975543f3ef93d90d312c1bc2b046f1e473198b7182ce7c0d'
            '63634135769d444f0c4a3adce73df4e63c490f146ea2748a7090578f3eb9fbd5')
