pkgname=firefox-i18n
pkgver=54.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('c9acb877bcc760a5965c89c4f0c9016be6f75819806255e93ee93960cd103294'
            '91f2bf1490717c2a5d1dd291449f1a94b7649f8207ce7e59c3d65bfc9b2c3291'
            '2b5d1ed68e28699801f565282c200285d3ca39cb02581f2ab16695a13a6cd24c'
            '4267c7ddf217b37783a448422a016a94de472306ce6f504728d81fe62a60da3e'
            '94469f88e07295f6c65801681ec6e3ef40ed4b4746d4e6d8064266c5bd24dab7'
            'c5399c4dde57466f9070967209ae9015d7eb68bd52240d8b3e1e64381665233b'
            'e0c81b9653cd6c4a1c5150f571e97c6f8974a9813fd0f88d351954f942dfd3cc'
            '709ac72f0e1a4ce7064d9fd692f7786159fac79323053a9d2b3e8cc31c97685d'
            '9187d929c6a499d081257f235a754002d129ecb99bdcce7f3255a16dacbbaacf'
            '2b4a9ac8c126365246f213c9ac8cadd7b27cf5f69bd420c22f5aa17a3a7f40e4'
            'f115f26b36fd094f089ff6f468946ce08b5cb359c74360871df616742537058c'
            'eba429e42d363083562f3e55e0a0038ed1019b99ac29fe87b6348bd01eb452ac'
            '502325d06b2048c87cf3e12ce5d81329b6526e8c740e4f51618e171a8eabb1ec'
            '8c7efc55b547c145b4d1604f8aa4fb91dafce54ccc2e70bee60eb0c38350238d'
            'a5f086d5e87c3ce70fc5fc2e32d5918191cadb511e3969d6c3c0e072b0e1fba8'
            'baf575fbcd617f8d228c6af4365b69ac20af09563c1a41b030f07467f5585666'
            'cef7998fd6e5b4689df97fc806ee5a8e3e25cb281ef9f51ae57a07f32d4b654c'
            'e60c0e002d9f10e43ed241d8cf11e1777754e45c7f9e503356b73307228b99b8'
            '791b7b977b49434d5bbb03be434b1ed0bb849c7db2283b5ffdad670cb2c2ba92'
            '79590a3b93ab1d0bc984fd9007c046bd1a77e4a6cc9987b66fd224df5e2df8ff'
            '0b03dac051a6a82165882106094e1bfa0ba9f6b31f17f033575dd9683cc032a9'
            'e469d40d4156b3a419993a3a835dbbee013ffd221b6297913000af55b109fef1'
            '8f4cae1a0161211b8fd86f2689ee2e2f165f2109f1e8ec3e217ae77ad268d339'
            'a5e08261a822418a2b0c9783c1f6e32fda77129a5d8ca825352ea14d6965852a'
            'ca261a0e992b7f78eb2c81bb5420ad134a977c4323ae1458bd0c768a587bacee'
            'ce9a4d8d0fd13ce97e43cb449489631d8ea23100a7a80ada3e8665f1794979c2'
            '7867d05cf066b674ebd6874dd7078d402a843a2472247b056377c9d262bae3e0'
            '27482bfed513a88edbc254561d617e1d01b21e7e45aa0983728127caf0b43647'
            '012e10f3626fbb33075f84abd02e62398ec710f1d0afc0e99d319bf0ebaccab2'
            '39c7346881d41daaee145dd8a62c57f1cdc49006c17eeb5d86e8d46f8631e60e'
            '6e1080b2cc92ee40530e1cc34ff2bf51bd88408029390917d7c3e1987e42eb23'
            '05330168aa57b91123d637e9934e59b7cd31dcc9b859572a18f5b9cf60e62fdb'
            'e0f19ec7ea6f95926aa19c88d35c3b683456920819cdf331a0a232e1acf276ec'
            '29720061754d14406970d851f9f05f94d49780543331e93832c11aac3c1728d7'
            'b0b6f101b9802d4626b2418c604e5bc18e86195025c40b82db682e585980ab1b'
            'f69343de2d7b858a7d31f7b6c0d44f2be126a7619027a9794db31c7c272344d4'
            'd74b433b7afc5753085ef978d2f1a507ed5e59db8a1dde8f4cc7b8fd56fddd4d'
            'b5a562d1c74ee53005ebe79110d08e4eb6090dddd71dd8d3de3d7325aca95ed1'
            'fcfdcc5b8e304fde08596294bb4f46ec61144bfd0de6469e1a3d52b4c9bb8e4f'
            '81f7e65e29ca71e2a24539de2eae1882eff8615c22282f0e99dc3d3beec37c1a'
            'a2f9b1be96e173a15b5bb69ea23745dad701b7d174d79cc208c10d8e9a5660fe'
            '0e4ff2ff52755d86babfdbe6bfe2b8cd00201f7f935d806df7eb9e8db5e441e1'
            '87fb311067e151dda744c0b3a86659ca52a8963b947d2454520f326540180802'
            '5e7625a371d40ad0fed7fafd5a16594433b5da7d0454f58cd158e786bea11fc7'
            '49bde05601045c3bb4f4f7e16787e42f570886d026c88c6edbcdc37338e4304c'
            '9c213b76ccc1f78d0fa30e68cce1589d7211bdfa3d5f65c7ed2e28c291b88d5b'
            'b9d8495a13bf759cc18ba77f79d21a94639ebd53ac0bc62ef21f2f8c26b287fa'
            'f3dd4ebc6525695037d84c391850ba986c0f4916b021c26ca6e1757fe1b7e609'
            '9b1472d8279bb771a96fa5be67b1e2e62ffcf8268a431052b2034b4f2eda518e'
            'e0764b44ed4d40a26f2734ab81b12e42d95fc3b890c7b821ec1b58af1ce7dc74'
            '90538108d4daea962ad22fd737f1ccbee0ca352a999dda2ee55ed4a2bd0c80bf'
            'cdab4fcfc3133048063b5df9a71f786a95a31c2203cff3330ca8bd00ac83b659'
            '28deb7187f216f2102d39efb4c1ae086bd1a7b193cddc0ac4e8eecf57836f7c6'
            'dfe9829a4e8cd317315e07a6b5d8838cb2c352be5a598954c4bf7ac358ad95b6'
            '39db584efc1f9eed5c97d0a58dd708afb43ad29fd7951db3eae4da342157ac7b'
            '1d2b7694f2ab080698a434afaa50e7714635635a02717159bf959ea75611210f'
            'e6d8e151a8e52aa0141fccce82afec2116b9539e15be6289143a99f0272043e3'
            '8849252ebaf1a65b935d99b6d936cf8b5a0919f7f10a864d94f8ac0d25a6cbf0'
            '09deea74e0003922a538ff6e8902476d9cec3ae23c156da9f4b6e6df5d430c5f'
            'b5c872888e96830739ecc2f5a2cbee90f92bc830535b1aa0fedf4856280fc2eb'
            'd6cfe83acb867d08243e0b121e3c9419a5c5db603957edb16c7483c1072dabd6'
            '3aa6339152c4b3d957697c46b827be27cb4a2ed2d1a01fb8bdb84d9533061014'
            'd09ee837e84bdeb2f3f035a66c5ac4261ac4feb70142e470ed57eb30c5217149'
            'ebe0edc215ad21f7c7bce9e603eaacf3b98607d0c5df6ace52b1411829516e8e'
            'a5f7115ee15e6796556369a525cedaf5407c0c90b7fe8f270eed53260b15a144'
            '3f067b8f7e8a12d1e7abac54e0b73f69aa3ad5d7bc5b267abc147d2f923e5103'
            'c6a8bc0cdc6079e82151d6ab00d5e15ab831fb9377c578cafc1e53f16434c275'
            '401be33bb3ce27206c2873e59dccae02bc6c8bd5650e101168eefacb8f7b620e'
            '8da4f7e6f9d54ef4743caa2a91f1ee5c3e2a5c4748655cfe7d10259ce03396b7'
            'd1bbb16c7c9cb04795cff09ef8c88c4368c9ba2a57bbbc29861eacb2868c25bc'
            'bb404da511ffc6544faa71f6f6350830e90d412daad435732769e02b7f4ddaa8'
            '1b1e9a345a73d8917262db39b842c5ce74c843b03663857ce44925ca407543b2'
            'eea66466e86c437d42fe72b3e9f61909f75f4906fd532af69de2bd93c3f45d27'
            '759cc553caa44364e8f406b3f2dde2c6b42cbcd6a7e5c38fba6570b6245e8151'
            '283c71ef3b4a3b5243551aef2f2ed9e54eec8bdfab5957457c5c31a8c378b6a7'
            '42a80fe5c54ba4b17d97e725e5e1588e79eb068d31b2b6c2a4b33e855ca620f8'
            '4e7a59c0ef5c25be59679114d3dc44c74ca8dff454b543a3dd21afe0964acadc'
            '34b7deadf5b205908110fee73f918bd97a82ab406de822fefa79f014dd81ece8'
            'd8714081ecc2321d56b6c49667895fc495a70493c68c296cab13598d636c6e5f'
            '0baa757e9ebbbefea335a1514e5103ef63f8bd46cf5935abc9ca6e5744c5cc18'
            '0b639fb9f17836c8bc8b72f48dd04e7fd69dbee4002c5fee3824ee267dc2ab92'
            'bb2ceb23e6ac7a8010cc2d5282af92e9f89a6d2ef6202355736cb3db562c1c56'
            '1d5579d9102bfedf571f3d08605b62b936c6651a025bbb45c86c124c2dd5e468'
            'e9a647d0d74bd6ece74e94a4c8177f4dd973a69338cd190d2d45b8375b7a5051'
            'a813d3c84a98b2fd97476887f2cc20fc2082bece77ec10fa1f435bbc78054df7'
            '34ea169a9ecd8f0671a69b51efb430be4398d2f71229137cda17f75b2b56dd79'
            '04a70e5d57af93f9ef2df6728099a4c4fce32cc75accda2f22df81d505eec55a'
            'e9a5f17cc64cd243dbc6fc232f2447bbb13f80796fe85a9093dbb1784e47ee06'
            '10d2ef4650197140711f1d746d94ee42033fbdb29dd74344185803a76ab86f63'
            '7bae00d5b9a66d43eddbfc093254184aab659d9743d38144db97edbebfb17346'
            '1fef5ff5cb7819883679c5414005c431c407c2f60f7d5c79a42be3cd6a2d216a'
            '6251613b221af8b2b8c74056391e588e777f6cb63da9d797c7aea2ece2e1caf3')
