pkgname=firefox-i18n
pkgver=55.0.3
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('11bb563b9c237b41beb2bd48711536a49acd22f8f59b3daa108a63fee287cc75'
            'eabe22943600090b1eb8fefd195fc90d9723f6f70ae35bf01ec7d9f2745ccda4'
            '1ddeed81215b461d452c665c76c71920b977ba63b8a51f63783a958a737874dc'
            '1054a5bf7c1858a5f1f1a11abde5068ba4161f8f00baf740802bd5aa3950e3aa'
            '76befd61150abf1fb574ef0e58581cbce01085e19cb67cd3611e64dd6ecee3f1'
            'c54496c8fb770f9847e8c98a1ec8045f51c639a1266a471b476d08937b7bdba2'
            'b66313c966a85380ebe161270354b071bec1d1f3ac4204b8238d57bbae9ae6f4'
            '312da59eab7ccb5d884c268c39d23c6644ca7686f53858300e90b4c30375284b'
            '8194f0f121747e841597e1be6dbca0387a2bedad9a98b389a59825187cb239c5'
            '491a4249285c985dc9a60bddd67df40a8472c200410d2249b0817a7935873082'
            'a41fcdc2dae37a6c09eb1c121bb740ab2e6d60686c4481bc54ed1c09746feb49'
            '33a3547639f689183cb6ac8456ca4718ed01a77081865fcf7c689acee361ff43'
            'eb4e7b4a243e0dd893bb64ad1775a2928bb92b9c78251a7f46ae680f9da84002'
            'e25fbe5da3ebe58b7c5f6784803af734b73de2dd50313a08760d3e09e3a703ff'
            '6ce8ad7aff160bfc1e2e036c963ab43a3dc996ef672a823014645ddb9e6f75de'
            '78bcf131bc3d56f6446add1cfeaec0a8a1b807ceaf7af6c101b283d157e51982'
            '335953ac50b2c7642dbb27375fd412c52a4a91d2df65d7ef45bfcb0bbd5b404b'
            '0f38bd5731c76a775de2a895375f7a506717eb521d066841b64acf7516d7a12b'
            '5883c2d06f858219a7ef26f49652211a25d8b7373b2a5b6065f818b5aa1c7588'
            'b178d560f668c81512a6ba76834caa14e4486ba79e1ad558c7b548bad77fd03a'
            'f57cda45b8c6e177bbc705fb5db21878d5297c57281c8fba810c6cbb6b095ae8'
            'fd626c65b7e3f482f08752671445fd7694d2193cd4a9c9c46012ab1ee35da266'
            'c9b8a5346791fe92de5a1ea40f2c85011b8f48478540dbb544063680e7ec7429'
            '9a6809ef91e599eedb90e3bac80ab70cefcfa0e9ad35144a267667a027afce69'
            '3da1ebfa455e311586f254e7c02ac1ca45b4a48025a77b7a366e4d9bef965f5b'
            '53b6f5f053646bc94ec4ab0a0e1273f1b01d7eae526bb296c577655192d77fe0'
            '1cd9f39757fb53635171bd7232b185d23933427a0930e04f02332bc569071a45'
            '05e6dd5d365e4cd3753e02e1dee716d155921a5188bb557d851cc75295260455'
            '7090dd2681c4ae3b3401ac7b8fb542f1eaa8bc9b94f651aeb364781e78a9aa0b'
            'e915be6df9ec44a40da8861de8ca22cf9011b73d0012645e5ab5c4c1f1dffe53'
            'edbf712032d534b052b9b4b934348ed410c0255fbffbbd6881f67b47e11332c0'
            '13029c83bec1f8a8a70b973167706d5b18ff90daa7d73ad6237689d94b8d457b'
            '0904b79fa6afc77cdc7b39e4d964307615cb77c089ca8b8308e1a77e7d41ffde'
            '83241f72f7537bd1676d2cb324755ecf0548ecd2137fe6db6d08dc83eeb21494'
            '41a12f51d9a2ab48fa76ebaeb2faf20faf510fe888a438b3da1dd08d2d7af6c5'
            'bf5adecbf01afbb805146198a3df4c0bf3b3b6a83ee3fd132734dbe5c49296ba'
            '8892372f6ce1c9d25b31a48f043ff5a066172b11a48508b8336ac9394eff38f3'
            '2b89e41951eb43f5dcd2d9b3009e64b27714bd60a49478a0cc962aee3512e455'
            'd96a56813987514e798a4cceff79361079294037ee3ef47cb729967971f82bb4'
            '9cb02df401fea791349e85a60f45095962ff999276dfd8237e5b13312039afb6'
            'e9f1bfc8362037b52a9c5b1882ea8bc88379032db9183a8a1caa17a9f219a77a'
            '21e4d109dadf7cf6d2c39d4dbc1416cefd67362c04c870c89f4054330719393c'
            '9414075f9b017968552f07ff5e57e480a79526b2eb0a89ccae8255e4d9748907'
            'e353487dfdbe4ad87601cb1aed763c3d43cae8d13ded5f5d60f88601fd8d1a4c'
            '9ae63beae2e9b40d0b34b46269f8c9ba245a36dc9f986942f8b45b36b7c959da'
            '07d398d58a9cb62e74d76a9bb0b24bcda3854d78adcd22cc185ef4e5224f3580'
            'bd933f4d1799faf594cad938eac6fe81597afd41f9e49bb4840645e959690380'
            '0f5e840b612d1f3677c17854035c66c64621bb762a25046fb60d269f5a37d0fe'
            '0602702b40e7b511993185c88d1e995c802bc1bf0650ec35f2da54df29373631'
            '3430f313f2b9fe1ae4ba595d9170d4631b5a0d8dc61141413fa4142ff1d62aca'
            '21d67d512fbd24cf3eb1fe70d2c95b6fbd267316af95a667025f574658c552e3'
            '31c53efcf3788fdda654bce095c9006abd83d0f5ad84d4acfbd4dacc2e9bfe59'
            '78f295833163af65f5f362eed898fa4a59530b81392e0e87de6d03272900da1e'
            'fc7de2275ecb1807fa7e26ea5ab7da44dfd1782aeac69c5594e6bc5c3d23dfdb'
            'b7e967b5be57d3178f400e72b56511663b2af157bf5d16e64842e4f93b808723'
            '31ea3e679b7ea266decab4286b44763d0955532432d19f66a237db7e8612d3ea'
            '1e5b47b0978e64f1e8530123df83912da3285d1997b6bdd1700cf4a19b79dc31'
            'a4ea2477cc8090e9e9ca86d7f1fda4ae661bc0146444d17eff52b02ef3e5764c'
            'a0697c67eb5ea5f355daec9c8d8a89413fb5b81912886e0bf84687db3095d860'
            '54c53ffd38b278272d8244c72aec41cb4f51730c7991ca2a501692b9fc1ee59e'
            '389c7c62134431b5acb5e834fdcea53ec4b5617db268ea40037101b1669bd78a'
            '282b48eeeda99b85a9611821e380066697188d5176e78a42596d230b4ab55a07'
            'a5dffbb5a047146dfb17bdf3d8ac5b2cb988e8eb962487a739a9c6bacc68a569'
            '1e60f8fb0576dd1e40ec00d2c2be8f1398643ae55020528997550b870e937601'
            '04e9087b338f1a15e468402a3842fb43e18f31914a06c04d2dced052c942c5aa'
            '156b3911791a38a389fb840b4e38c4ef2eca550431bd6413f752885a651b644b'
            '7973ee2f2d554744cd52473560bc96b3be7203e6c672dbbda4399b18877d3a52'
            'b8f78a24ed444bc62ec908aebc667d3120deca02e4a9d6c4af4642bc468ae360'
            'd0a6f5da70d474312a22f483ad4a0e050ee9e3f993d0a08b66aad7eb48b27f95'
            '5ac6316a3d0aac7e6882b87ad8d777104181dc1326ca0f77cd573d0d5a51497e'
            'ce6ced675369e88ad18dc7e4904794663ea004f223fbdce2f8ef33c2493cec12'
            '0993e9fb690eb9b35dc329e4b3b29dde020646fd8326ff0e9ecabd9697fe10db'
            '6eea2cbd54202098d0f4e3fd6758dc70fb8274621e8a9ad438f09dbf9e5510c2'
            '9de8622b7282f58d6e26b47015cf567e1a3d84852b9900cdd558fb9c2ed9f360'
            '1b1ecd8dc6eb61839a9d22a30ffdcf1b03dcf44a69147a52136a1f397225c8aa'
            '21c4913f69cad8778f8495bb5b25ba89b72d51ff422845fb5ff45669d2dd3277'
            'd45a008736c10bfd01cc64ba6d3b781726c160ae64bfdcf8d6dd96c244149f6a'
            'f6268d73e07852dc3cb8649586ee2a3e4ff7c526aaebe2850c2071b1280893ca'
            'bffe3f5da2fb13dbbdd1189a15a082e34fdee23814f942322e43406f96a6e31b'
            'b8793a357ae91c82129fae4d887eb17656de56ff991ac8d9d56bee7b5fb3eddc'
            '6b844f9cea4755687db8c8a0312fefd52c3022d6baf0de233c6363077d8ec286'
            '4017304e1f9bb42de6df619f19c93b6994b325c02ccf77575eb96688ed5a0b83'
            'a4040728b37c8992f142b09ca5c8519f479fa01625d545240ca9a7df430b8577'
            'b2dfe37a26f6e0622a6e494ac69f786528902ebbba1d332884e2235a5dff3340'
            '2347f484362aa6879dbe75c317a85ea87ef478710dc0da9e3bcdeb9df6b23332'
            '445680753bfa2c451162d4eaad402cc71be23f9a3bab8854a1a275b59016022b'
            '052fe99d1c0db8c4177780b7f45e8dfd70e7a7dc740e3a3bafa181c9e16e3bff'
            'ed20d4165971bf6af04a192ce18177bf76547149070a4733b6d435d8a911286e'
            '75b6cd8de9651a4083b955f38647f726b96c8b65e26a6cac875b1861e30829de'
            '6e4e9b8b7ff5d6632bf0780f75b2076ea3e3a21ee43b94c0a1d13a4b14691e50'
            'ae80886a59ffd4f042f65bb98f92c83ea8fe4fbb5b9d0a80351a327a06adf8b3'
            '76b346e74963722467bcabb6dc747b72aec627fd4081f073eed42f6639d193e3')
