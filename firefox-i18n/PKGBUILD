pkgname=firefox-i18n
pkgver=50.0.2
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('58157b8327ab137a285905dda60aad86449886ac37cb67fc8fe804c9b11ab22f'
            '9fd8179852e17fc57ff983e26324099a6a010ced055456f6f9a8474a93a94b59'
            '8e7cd05bf98d2375c5165021ef3d6ac715cd9d8418659850a96532bebdc95a02'
            '60acc90c19fc339389638e9f291ab13f49125ac34347a92a85d72b9a5bfc1848'
            '95c8615e5a9962cda9af39012c181b5e701f5c33381f2f308a91b51d84c0a38d'
            '16965ae7a6777af3d4f4345163df6a929f2a0e7bb6d10d5e96941042cb22a9ad'
            '2701a1ba8f09559868f710f57031f4ef178689f9f75f6ad3ce90186f38d1cbe3'
            'a2866426859288a261b19e3a97714a758fc4135e7476c9da0adf4872c192062a'
            'fcc12a4ca588afab3aaf9f241bb0e3a8431df132782b62787b491868975c86ce'
            '6708bfa7eda0fd92a1d1a5af19379f7040a60a0ac4900bb95cac9c2347c0f822'
            '69d107026ab0edbf4c8136fe1d0d74b5dca9c98e3fe09062c5d9262015a38ee5'
            '0129c01949ef6b5b57f5db979237760a6a43c04584457846574622f6c4886464'
            'fa03bc5b6a103b90c4f809ba84de06d5b50cbf926d2f299b30778525b6693638'
            '5702e85400a3239e4f188984ade2ac8999d2b2d9c821049452f764e49c5a627b'
            '657c1c6a39453bbfba84b9cd172735a67c23a1b30db555a525af8f7c32b9302e'
            '890ee277f615b3e9b97b96368b4d74ba2f245a1aea1bf0af53f653e707129aa8'
            '0256f75223f8f24897e38442d181c231041f4f9eda8a3758165f909ef17cc54a'
            'a05fd0822da2367b9d21f9efbbad3039d81f3086ac27aaab52176fa7b1ad0ecb'
            '2a9177073dd2ec77267a02f6d51d73df922cff98f036704e33754ba76ee67f15'
            'aba46ea7782636f4af19aa71eb85db4ec7a7c8fb1bac41ccf0523e0c43442941'
            '091501bc67f21cc9c4e818df165b70b06080ff17d2a4d13c1dcaedfb6a2bfc62'
            'ce2caee01214270ccf59a7643dfe8a05cb89be9c4b1d0891f4256bac5d641d23'
            '3213d608223da467ec5802594f4528aa685c90335f5772c7a2d4a7f130bd29c7'
            '82fa224b8995320534c21e84feaefe17f96ebb9efa313662519a67945deb27ef'
            '3e909518bd55609cae696814b43661ba7680ad5f3d16fb0a5509b8d6354b95f0'
            '6443331d7731e7464d15854234eb1fd1f2560b60b3cbd3789e00fad5d35da9a6'
            '7366981ab8c0ae77e565af1fb05557a9a0576e247d43323463a62e8b1cf07169'
            'bf428f51d7931e1985d98d8383a5a82ae362fac03beb04abb3c563407ac2eef3'
            'e794e872d20b08e97844a640f85b7c71150ad219a0018862aa9f5b13aee37b85'
            'b491ace9957a2ac9d1a30ebe93bcd7d0a85dc3f108ce6c61c861a4dead098032'
            '9d0e23465a3553ae5bf18bf805abcb882c1b96dd306fb816973fc1f5000f4463'
            '1a2ae869e7cd5f740534257bf7b19a0dcbcb10f5d221e425fb0128898d06c64b'
            'efc2e8cdcbb434224b6bf46e8d0c8dd747d94277d2c43690dc22c60a82cf243c'
            '57ab60f1f7ea70fedb521c01372f746b3e4c2849ee8797103c78e5037ca71915'
            '765a0f33f77012981da907f0f1498cc98757b0d4aa90ea99889438a864f8a85b'
            'd506ae627bbb9c99184cc4412156408a3ed63990df9a6a5cd5c650655f9e773c'
            '9e394ae38fdb5455042bdd11e41b7237e4de4589e8cb970c965e644171adfd85'
            '12a899eb132d4b9f120fdd148b6ae972dc5fd702f70f4c5d06587878392659b6'
            '4776cabb5f69f802f99ec3913d69c0f3526b7d68f721fa87bdef8dceb38dddb5'
            'e9178cd8588f4c69ec71081e93b4a9dcc4f82c06c1b589edf720468765f23a87'
            '766c8322cb17cc69b539493a11d6d651701e1029734cbdb02f44f6656ca9d041'
            'abbbce5f6bea1f65f2d79d9dea6e715520fb666005654231026311817da26bed'
            '808b43c1f111182398dabb02771fa4ab8303fc9ff7537cc751aaf9abf06d4898'
            '109766584738cac6e167b0826982ba54dfbd0bd146fa0114937f47c3e5139d48'
            '4f3abe542acd8e5a6500593043908aac23cedcd17a78e232e68c1768bc6ee1a8'
            '728fd9f172e2674cbe9e8c6ec388323dca4681cbba3dd19422df1f0de9ec7f6c'
            '98973ad294cc1f00dbe3423ad85a3a1cb98b145d10f4852a5075159bc2b67692'
            '250ecd282a6163a5706798cf67faed580141c4915f6ab47ee01378afad26c280'
            '2e62c3d6418f9e913341c978cce13bbc212bca17bd357dd40b4efd1c25500b04'
            '250a8eef90bd346a4a514918030baffdc7110d85ecd9cab6c8ada01f2ecb2227'
            'd061de40e18abdc7423b08ee0117160bce1e4991bf864d8c54fa12149e50dffa'
            '0aba03c04c5bf04ab31293c785888600bbdeacbccfb934acdf426e4a4b914095'
            '960d6c601055348b970e32fd8bb5fd9ff23a98d0905957ac3f8614e052ae128c'
            'bdfeec479bc3952f20323e775cb2543aead18e368cde6079f647f55fb3c44987'
            'c40d491231c5aa377b244119151a0e4abea0123da902c51d760c271ac680c52d'
            '74e7c1a5d77e965ef2a5ba7f11503c79c75c35ff90d952d5865ddca163ac4622'
            'dc7c7ce4d82024b2ba5578ca61319060af9746a07813528a92916dfd42e0c2b5'
            '9396ca6faa78e424189a5ad288b9c4a5fef81cee5e9e295e4aeab46650a2dd07'
            '2c453feb4f5d6777936d5bfd896c190c538005e23b21046aade1054c0abf040e'
            'c7a77b4fa74d7f70ad247f11a19adc0b407ac267c1f92907c289d0cb89ca83a8'
            'ec224b4d9f6a75a437bfee5c064ecdfe0422af035ac4b3703348978ca0064310'
            'ce2080101db05cb601133abd106cf013b00740633c87dfccd32f4ec24ae29e72'
            '9162173d244f50c13e41cdaf8f3bf9e359c09a336707ee938a90961db1a26b3b'
            'aac3ceca482c0b64b51f10ade03111cec4bcd5b32465c69879242bfd706c1b93'
            'b5e76ccedadaa9d8e5d6c98ce06726766a103d45607168a49a8dd6673fe3e841'
            '036741e75707a7d8735a0cf4705a80aae39ad8e829f6461661b73eda8eb82110'
            'd90f2553f1cff21f0c937181e275b9d822777e6ef934044022cf533b8aa21fa5'
            '227da5f832964cb241d829170ac7e36a72f9ff49f622f2be486daa960e898727'
            '7c370413e8a3aa53ce564695ce4c9d0052b6bcb4a57b0c78817137fa24c97aba'
            '864e9bd07838c3e587f51725a3d6a585bfe263ef92bcf48a54afb360b6b0100b'
            '43e926e99fb43bf9a31564a860e947052ba9ad6e987e278d31be1dbc55b061ef'
            'a71688ac5b37910061a9443723a97f27dc98b3f64d3347c6c8f8d50a9bc7b8f6'
            '5f8356f7e89b8d7b2417fb9e962dcc7cc5deb979dbc9af352217a880814088dc'
            '6e5ff4791db4a46691ae2a90cd161148e05423af4f98b9a22dfb2a713ac8caf4'
            '2215dbd8fa84a2c7352e4eb0c6f19afb1e71d9beac97e27e70469d3779b14745'
            '9babd7446dd3fcd54b021d21be7adb08751e46845dca5450acf3e49ec3870f1e'
            '8a3024275f7e109a3631a3b37865fe08f2a3524aa2aa8e5ef4ec1292a7de051a'
            '43d0818b9a643cccafb6daea8f637dfce1acf780828a68bc607a95f7e6a3d61f'
            'bffbe21f0dff2285bdf694bb032bfa8c6e9192d34d164c64955a6d1b9ab7a391'
            '41c49395758ab693b986032485845514d94ab9c1cb3c038aaa6a8d178cac3896'
            '12b5c1648d6fa3de8f48dbba42c7e929398251964903a15d55ee23d2ad88b06f'
            'eef954cac3bf723313b9755bcf0798ee26497b2af67b5084a57b081018200ba9'
            'f3be68034bc2653761722ffbfd555b1a25a588e89a680464619146d3ceab1692'
            '94ba3c0782ba544adb9ea43418ab37aec9bddfe88756bcd569a80c930a7955fb'
            '7063f550156fb6e81dd333c0a46c1f6ba2e5fdb2ac3240e172b9520d9711c9ef'
            '88e6515ea968257d3954fbdee938e79cdf8aecd15f4d66cb4ce5b434e2738cce'
            '202e2becba9727a3b9ca9a92b9e89df92e680a9b86320df2824740081c54fba9'
            '052642985b347f38f3f5e15e7f3c97b80921ce117fe04345f5dd07c8566e8140'
            '4385174ad5f2779da54a7b8fee4ba17b4fab2a864e532bb2e8164e43a4be11f3'
            '7eb918f592c353f8be4274a36a646c4108156f414b83c35ae27b5f3869df4c92')
