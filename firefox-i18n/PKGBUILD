pkgname=firefox-i18n
pkgver=57.0.3
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('d3325ab269f729295672de97afbe5242f4c05c8e4765a3c7731b0d47f14fe0c9'
            '2c46eaf8ff2dc3d0e48f5dac00cdb045b6b0ba89e4ea94a31dec1170daa12c94'
            '98c02e2b448e334834dee9595e44d81651b4cf55ed91ffbe1139c501a727f07a'
            'ba34970512969662322216ae649942f9b45fcb6e0a72f5250baf1018f2314018'
            '720ce7832035e22a9c65b0079810985e0edc9603c9e8b0bc1c6fd0bd04a38885'
            '824125398c53be07411c3f2736fa1a3191da7248643ff9316e73b1091033dd93'
            'fa1ca72953c36c730ee49bb02cea4a03771faa580b020c07477bb2f5132d6b21'
            '772e69fe49596c880b5cc58d5619ec0890091d6dad57c9842137c99de83d182d'
            '03fbc27e4291edcb4b1c8f74ac6adf589011a4ea0318e6e84e955deaf5e448d8'
            '008ffd3c232be86738c235375abb92e17dd5d620a24ef11542109beb161ec78b'
            'e166d218e8616e040667ed22cc408b2d7458ea3d674389bfdb47c95a25f1d9d3'
            '985a7e273b7b8a7b53625f05d74677cc112cb286d5548990adc2b2029e47ddd7'
            'd72c6696e876786f5338cc5d360d020e52bcd8849a0792781528d42dc6b72b44'
            'fb0b9d9e95491f345f88b94e112e68365d17a840de346107077c405322a2dd7f'
            '55f1e0abf85cc02064fb049721848e25aa367438aa78ffc09c495ccfb9def417'
            '0f7888dc2321e747f6020f5c488fcddc177d70b11570a16191ea178e7af7e1fd'
            '33698b2c33b7832a951c483fcf03ddc46912dc9c664342c7bd9d42413ec463f1'
            '0c8d7c03fdd4e2aea100a8289f646e834a81949bccf0c88d8d213e547163f36c'
            '084c22eff6ba944d87b11b918bb2d109deda54a73612bd3e88972b4d9f918a40'
            '4a9ec509ade38d36d4c710586637866d1ea6a59277083955c1d5bc10a9057b2c'
            '79fec5b89df10b6c93b3fe297f8297b1c16848d2ba232e9c92a177ed6f1d2fa2'
            'c2d009efde1ddb62073b17f6f17a6f8635271847dab9b4c0051f72dc843536bc'
            '9ff10e2a90ee6a7d8f8e8ca40467db3ec97dc9d1a829588e4619c6fc445e50df'
            '0fb8fa0850be66fe28cc96fc28168950833848114606f1184680bd98112de8b5'
            'f93c007e7618703d611fe35b5859659404cbe0032570c7593f3df7d8e9c2a77a'
            'e1c63618de1297217802375ba117afc6320ba968ae8ea1bf6fabf6bbf10e0fb1'
            '6786ef15a0bf2ea932f2f11f6a68d7496172846ccfb5aa585538a9eabb726eb5'
            '565bccd2bbf90c16c59fe05e3545892e00c6cd77ab237d2a775883011a7e1185'
            'ae529a5243409137173aafd5036dfcd835889cfd579d7ee86102ac39acd020cd'
            'c5cabe690c3e0f3ab4b1cfc2530b5bdf3ef5430a586ad22ed72767513e3f451c'
            'cb5e6651adad8d5788258cb3fbaa3cdd300768e558ec45ff831dfda35fc790ab'
            'be5d3ef789b426f07a4e9d59e731fffa48a3111bde82afc8ce8d34709f5107ed'
            '0501195b55753938e2ba833d5ca899156b01602643c94b2b8cb6ab17724ad0bf'
            '478f9f2d6ab8861a2175609e126b3e3ba5fcf407b638a08a5e9e91897ed478ab'
            'dfa09e4a8150270cca0214b50199c37cba84c864d3ac8d08eef45e5f6e495f45'
            'bf80580b3ab8e42c448ace13e64d5587471e05bc310baa511e51ddd9c3a31c90'
            'caf1f525764881a4bd4af38ef0de180b7f7225a6b8ecc398a5547717e3103a3c'
            '84c2863201885ef91fd7cff6a28c52b1d97d055f35fb3468b731c80c9b56d873'
            'd142e203a972902b38b792c9f096960290b45fecc5e9f11dd3f9c3291d2ca1e6'
            '85552aa0acd6cc788fa86d53e0c06b4114d20bf6c59458fcf84fff8c8658406a'
            'cc1aac2bb4dba583c7d027f1f2f3d8a7a1477f02331900865361b96ae531521e'
            'd748e08ae3d8ba2d19f7f937e8fbabbbd53ae66441b1c8e6ade83d8214c4118b'
            'd7f5ca5f905c6a7a3003c49db277a08cf9d2697c0c2b66d4bdad8a6f5bbab8ad'
            '42721289c286d5d702ae1df3bffd61ba64d45e9a188678a1d5020632d8997d8b'
            'c03d25889aec19bfaa744020bd3380d899bad819229aec65ee7fb17ade43d46e'
            'c0159dfda70eb0b0fc1ff6f3d938e000e224946656a0c950881cbcb5690d3ebf'
            'b2192898d210b21ccb31e678603b75ed2efe94b4e849f9e9a2bd914a60975092'
            'db941c866d1c10deb5b5e246d338ca2d7f3157890209081d507f99d657b65e8e'
            '8e80f63a8c1a8d5d1955bf1f6e045e616a0fbaf58627b0806303903d534462c6'
            'abac50c14436aa8f10eeb56db3db56623efcac152c13c6cd8a4c29f70cc2c11a'
            'c184ead4b11a3c93dffc72f6c5412d0dfbfe042876d9e7f50801e9c8541e0c9c'
            'fad1040c58b52c4f474ecfe093a8c4e71d4402c2d3608ff325e67c4a981905be'
            '9c72e808482f9141dae24239082d159f195ee2b7ba669719deb3eaedbad28af0'
            'bee55e148f8bc6170c2c65f48c5af3860da2336575089c0fdcf80e19e24553b7'
            '2af6de4a79eeb578eb9adddf5e8dff8aadbfda79602d90ef2fc18a9ad7841775'
            'e2c479fb467b0f7c618dadc75badf7d91eca4add09552a4f6984052b346e719a'
            'bd52567a4ce6c8fd59ed9fd76fd9d5162a78b32a3105c92e97240f6c0c24ee56'
            '4d3acb25f9c417ce218cf255e2a870eda54df120e1f7163f3a1fb6d48719c8d3'
            'd869925a2a08bf0b967c8c75229f84db65084923c8b905bb04515f1f71c427db'
            '49bd7931ec3291ce54da208e2e016e38963e2999c5c487fe59f656269c0df8f0'
            'a8770c94362020a6f5b96949e2d0113cf66c206ee3583873329d4a6bb2e68aaf'
            '56e1bd5b29a06aad04ec6f710c8e1646cab97634fe6c7bf69b2648fb08d8f4a2'
            'dc321d8fb69513cd83d28f576d6cf965fe1c43ecba08cddeff8b5ae1b626ed11'
            '8939e7d5e7f417a13fba8579a373485f00b457fd1c0b57b94a3628e3600aebfe'
            '75f10b310e1e9eb50c35de1d6b768fc8f98cb7866fdf1b7df36dce3e8dc2dbd4'
            '5039fc9657f5ca042ef411080a9d1cab877b97ce26885b03d9ddff4f0ea64ff0'
            'a4455055b8bc601ba0bb372119b40f5a5700ad0f482aefc5369280b0b57952c3'
            '1130b9ecb2458fba49192ae2fc30754d040bb9d139fff5422057f049263fcce7'
            '485bbc398f31abdd0476211fdb2489723eb54068271722c440162aa30dde4144'
            'ddb9461e0499290155f17800338c7736ff7b96c28331fe2bbaa2ed475419606f'
            '60d80204077d8f8cfcb1691662fe948694c3f50f941b7886bf35b8fd252ba00f'
            '13c4c805ecc752c348873f5a863e72f339d931c439da7da7770e733f0938515a'
            '00c13a289635ebe81a18a8b031072e25cc4ece3b0403b5bd5c52c3f843580f44'
            'dc00253d8e6cb3f9fc0d768ef02db046e11d4cba2bcff70f809f8d114099d084'
            '0d081bfc3e310c18da871e093d280a3cab4877e32cec2296ca43db0e58d9efdc'
            '06583db83412d6d5d3a5c2650ab207e26a56af654c020d34bc0232f6a1b8e31f'
            'a2472175866b83ad07134701f9d93a4a84c051da2759be236c677f05d19efbf9'
            'e0faa0c9528b799f8438b5eb3a945c191914c09f97423b2736bf6dac25c2e489'
            '59126ba9a2db1a1f9bafb21b6edcfc5a52052885fcbdedd5a4838d8842c6f469'
            '367b8045f0552f22a2859b0742d710807aba1213fd9c149751b8f4d5e5c53400'
            '374102f9e3ff79828dfc88cd07064487a84750677f132dd9f744b242d7c36bb6'
            'b1b14dbc58da71910029702c8d76b272e97efe6101da066543a58457edb38842'
            'e351f5b2491b8eded58037f0c60b84f8b95b2799109f982b891b9e4cdb65c7e9'
            '0cdf9315fcf998e8a438f9685977809f14db1342284ef2ac0d8461269d7887bf'
            '13ff1fcdd2d86eeb4b20661fa94010e37e6039f44cb83c4e5b0379f512a5184c'
            'f9f8ce6a920f711c78518cb5a9c885b99b9127f7c49893d6df6b34af7e2e0141'
            'cb10a8945fb7df7e94164182b156f7a636b4036250c1881772ab07aed4f81a82'
            '1d5129bda07c6ec01d6f987c2141ea4e258d04e49830967f138197f49ed844ca'
            '9624ae6eebf1793a5ccc126d5b34bc47a4b64a3114532f98dae36ce3c28ff894'
            '5fed3ff21e6544a5d4451bc98dd7ebfd57ad70665567bbe0ad4b4c4d37e8ed26'
            '29c1a21741d710b854192f38ae9e7f63b4f506b3e5f250cd2385927b48383c72'
            'd733930e67aa70e8fc26126010ffa7c1850f2995bcbfcdf4a2969ef7912e0aab')
