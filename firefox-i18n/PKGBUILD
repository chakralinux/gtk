pkgname=firefox-i18n
pkgver=50.0.1
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('a26ffb69f0c5d52f8bb8c2a61fc13f691ce13e4544aa90769f6d667ae186a425'
            '576c2f3e9470b8db23bbe684ee6aa1d62d042dad4cd389f0c08b27353438914f'
            '2540b9643359d6aa57f961dd85413eba0750f9ab27dff40b946b745da53dfd80'
            '2f3e8bec0436ab334e4cb644181c2face1aa680617f92f2d1bd81d808e58e91b'
            '1a19646215ea6026db0c0afacf73d77070f9afee9e67fbfce13214b8dba686c3'
            '616ccf7763482b08d0337847500cc7c719101015f71453723920ca7e03bc9c0a'
            '96d8b7a222243c9dc6c4aa46efc9dd1d54712ebd7ee8cf7188701b7175b376ea'
            '5a10e1172b3614631c054a831a8d6a8bd5b0caa79028c242f85f022c01151659'
            'ae76670bffae1dcda02f6f923a0278b11a373356a0396096b074b3e7353dceda'
            '42c5c110f01a0956dd658892c70182682a6a8aa5832d7024f9d4d82ec525ef62'
            'aee1d0a6da4f4b14bd4fbbfe5b0f736952907c165cde72778351d6e4ff4b4597'
            '9d65048521c3e098cf99749bf038141d70eb49c63d8b0ab7d91dfe3a102fae84'
            'f99bccc8d225b645c5432c023e9ab23798376b8f03118a33481574c49f65ffed'
            'a207615d35fa6d5a5e36491c5c875759ac8bcf5c4dde04413348b4dbf2bea3b1'
            '6a5321c549ecc23ac89b67e45931bd268aeb6b439691c69af0351243b7476a02'
            'e9ed3d26f59395a5c56efd09cda7cb9538f9a94cb3e4de6bdc9d7171db1d30fa'
            '6adb2d7ef5a1d0a0903f56f357aaa60a6c8b1767abf0c7d18350ae7db48db277'
            'd40d7ecba20a5cf28ba9334a02bc4d46db2cda065d2f0b891020a2130d33d31c'
            'a0e25811183762288e10bf403ac68b474f5bf37a337691061b5f9b6534ea4b68'
            '5c5809a5864cd33686db6c5a81a2d199dfe13d0b0a978197d7b053f722ab38a1'
            'dac3fba7e0f4b36a5a2aefbf1cda40f0ec63a654891e4e5439b896394ab590df'
            '6b63d994d03919e6732a7894178a9d06c52d89c83b40471cfb40779863f3bfa9'
            '71b6e195d53cc166b34c45ec4b7feb7059c656ab0dcf185f845c26e36b795699'
            'de29e841f67c6a4109993309b55fbdf1873c49ad688b73cb32512e19ea9d30df'
            '12a5bd0b8448a5334e7ada7547e5605d14355f96506032d566a265e12866b5dd'
            '7f119b75cb4a5ba32e476f5688c4b1de209692a867778d44a9fc45be8dc1c77e'
            '975d67533e701fa75346d0a04ffc47f9a49cec2d40d72526b5902dca93c7ccff'
            'c14d58b7e6c212c4ef8e7719598d7f7cfa42f28b98fe2b717af77c3106e7e2f9'
            'b58c88eaedf0954fd4ff7909a2fd6fe668b7dc9d1cf1aba40691fd94232608aa'
            '36b0ea2e9b615a755429f3f3717443ade3ea404fd552992794bcced28485f9b0'
            'b7c5550a75076c87bc2068a3168e394072786c676551e12a959da233198f4fd8'
            'c7fdaac3a12392da9202b9d2551ff71c05100dc46ff189a060be2cc56d233412'
            '9abb41a0e4bc76601fe6f523720ae02499f9145be41fcb587846f0a9866d0163'
            '6953b2513342ac23354965a251cfdf55d9b1d6b7067a5ec54a003d85f48916cf'
            'dd6458a66c6e8d9ebadde8c36c606ca704830d529b55e099933060a15b1a052d'
            '94ea12a67690698baf3313b449a036f5dbdbdd4d5ec309a43ca07274dadf7876'
            '1fe95f3c74f27c60963f81234900eab5f314826ad6baa9b21ff5dfe094123968'
            '9b1e15f452fcc79ed15e7b925ec6cb55662c609b07330f55cf603c709b350fb0'
            'ea1f1e46f135c44857fc567db6b595142f4acd01e9f5f4dfa40ef4a81fd8e9d7'
            '7210055744371211acb7cdf7206f54521d5e3d605242e7ff39505bec82ca645c'
            'f345b9606d3bb33fb5394cedae86734a76dc92dde45e146a17321c07234fc039'
            'ec7c6017c5d3d681e204c1d7e141348fdc6846cf9012f2e992b59653bec14d59'
            '59899b850a2fc53060bc612a62916b933b7beeca01160e2d2d0eac9c8450618f'
            'b183c80e53ef8375278848cb245aed792ee01cc5b80455c2306ecb1fb41900c0'
            'f50fa7541b6b3994d56267d1d4846ba32eab533f0e4d0c442b426bcb3874b5b7'
            'c28ca0ae39ac6cb65a58a3c322c8fb1be9808eee1af6b28a1d0cf1eceee0d9c5'
            'ede3171a3d7a0d998ce7317f3242138d2473500b952b32252df324d6918b76cf'
            '008f254deb4addeb71bcab855d1a29af24b44fb10ed24316c0f3f2ebe3c3469a'
            '3a7b78ad3351da318df1bb185609ed9a5cb6f7ebee191f20eacbbe762c86ed73'
            '8964a3fb0d5d6ca68f0ca7fa963c102b168ed34ca58e50bce560b000ce15226e'
            '3ab1ad31a9dd79cf91555bcc2010e308f99f0ce52c12dab31854662b8f94a8cc'
            '68f31368dad1ab0ea69281b0e5cae34db185807a5b011eff0e8e55cfa3d724fd'
            '2af2644731a6c749d2d1b0ab67572013284fa4e6743e8c24dfda45a38b6f620b'
            'fc92850c6c159710ee98643cfaefdc8091357c029e75ce96215176e24c719071'
            '7d4fa5ca8591a606b90287798144b05ca38a91066f18d8515fed7117f4795331'
            '4d2e8350df82d9bf1084abb5238c4088fe0103c44e035604c2d754a1d056f4bc'
            'ca2ea3e46d95e8ee04524db586c4534cbeed641353b4ea5c20979616da413eca'
            'c8a69d511c54490dddc4c86e19448cb224a58b38ea3e9e98a133dd784e53f724'
            '0e2141696b4b5ed9e366fc055741c4ec4a9e7cf4301e46b611f51699afdc8508'
            'd6543fe190c58942924eb1c0f388fb63d1c48c8672f0b1fd2438d6d8e937eb3a'
            '80f9ec1740c9163474b0c902082be59f5a946843e0f465420d25e6646a4d8534'
            'aff2537576767a081d69a8f401cdc2b18473003f50fcc2e4448ffaad94827dc6'
            'e6945cd0bc17330bb22df2fe5e3056f8d79659997d10b9d930b947812327f103'
            'ad0f2e43500644ed5881325847b245ce163690b7c17ff3e4edde6b3c0bbd3933'
            '0c88e311d8615e7d86e747316f1e72b4eec70aff01ab7a71487ba64c92601b06'
            '0239834884f8e4c712e6fb6cf5e5e84a7bc3a21f89c246661313e593649d5058'
            '5e3374f94d1d44337ec06a9c9d6e63f15cdb721d697b944bdb8450937dd73591'
            'f66d004e689fec1521be55a0086970a0adc34db83f7bcb2ceac3d7b79c5b78d0'
            '3e8ceb526263571379d934ed5ca1c9a85155ecde565df1934fa46cb2806d17e7'
            'd578ae8f8f2ed71ee5aaa49846e2b69f1be5d579755ba8c5c71cfa5165f36108'
            '5aff3c3b7de3521176ec6fde67a9ac32dc64876f10eff5b5bb4a5e052d6cda34'
            '671a71434d4ee5338868a1512958d4673cfd710ab979ffc886c927f44a58b2c9'
            '60f165b414ed365acaf624568e8d5872242d51fa27e895ab0d540147c6f9af9a'
            '4dd8f2cd28dc8db2540f3add5b44712d86e0f1f280166be2dee44a743bcb2f41'
            'eab6e622b031880a432907d8443b40037c70c6fe3c82b770895c5d40eab0d46c'
            '06a80e2cb06d3bf5199d6d06d63f4e402d3a9c352b384e9ff3952c38fb4b4b34'
            'fbda825bb4d4ad68db600de5d4e6db9eeda03e8a3696e84e80043b1835c50f8a'
            '4c8a1e507dc43b3d15cefe97d12cb6cec38b66cf604ad39a5537a809e8c56262'
            '68f33d3fbc8fc77d57af7c13333928779fc028bf0a170cf8d24e2ce7b7d1bc95'
            '40e3f3c651cc6488b2bb9ab3f3564cc562b2058b4e7c6a8a8ee6fde97d4168b4'
            'ee44c8bc8533582c2780c2b18edaf821ef98011322d298f1f21f96c18f31afca'
            '6dc1c167f8d15f1cd42e5cf3f6fa63aae9cde4c24338d6e31c1f24004e5d41af'
            '09f45cb20d98f9b24635c2635f1f091bb8fe42a061d569837e5ff51df19ba5e2'
            '573c27db1ef90ba1c3323c5c59fe053f8e90b746e297f8d418cfbd73c1f0eccd'
            '7306bd14814b618957ce3254b3540e07d73daa449658dabbb95057a6d7cde1e9'
            '731f1f052abebedfdcc23a34bd3c37a0d331021c13275ed36cccb29104aee012'
            '32c5b6d73643dc192d727f1378d0682f6286ede9efac981a7b431b2816a2e7b8'
            'c8e36e03e880c1a4c529cf73f85bc4c22a30ffcb8e0a98d11acc796d72fd9611'
            '4c020b31b1e2e7cccc889c31e23a3ae8287c93fa4796f0bb4186f1f03805b0ad'
            '5c1ab1462355238706ee98e13e0c098b94d620650c1782fe4577c70e92d732c5')
