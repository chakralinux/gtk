pkgname=firefox-i18n
pkgver=50.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('ba85bf51cc82cac695be7ffa329dc989913beedeac1934a644e2b003e8937799'
            '173a6d46aa8da6418e7725b7764411fc2561e4fe6e384b669b1a597ad3519933'
            '84a606bdd7c6218fc36175c7287e620d149f2605c9d217af4c853f4a967b0dbe'
            'ea0a59391f5037981027e5fe10a35be234c614f26fced35c2e49a68baef8c74a'
            '4be88b7d5246856ae211a9588dbba9123418d6d10bef06bad65ecc933a278460'
            '93cc9678aca9c9b44b5be2e108f399eb41597419178d25ace12b3d0e3ff1ac3a'
            '6b7ed0371b6dcd659ff5491e101b07b8cb2cc07edd907e213f62bb53d36983d3'
            '8ed5bd31b5327278e24b5e85fdca9553734f840902d4cff0b29cb62787117709'
            '3306a9f372c70452bf2f86715f19ef6f91d6ca913d235cdae737275530f09757'
            '419ce07731515c635679c9d1a00e41ed859a76964a9cce75a60f71eeaaff2520'
            '5cd37d9b90522f107d7d1aa4ced274e02a8bd39966b6f08b310eecb428437d78'
            'dba98a623c39a84251a1ebf1587a955491520fc6b46b62ad01f0856d46c58c30'
            'd9cc96e26374ac571c9008af7fc167e65f526b77644fab2cbb3182f53c6c065f'
            '0d5398fd11105813c51e2eaa8b6893783161ced5cf99df5bbd975c0b0001adb7'
            '92821c6133094e75a1122d86c4846577c5050b5145682e9bcc11be32a47cfd41'
            '93bdc6f1e8d59b176e7c31b8201ccdeff1799500cc79a09c041756699a5864bc'
            '167f25166e777cc4632206e6fe1b3d046db6f5d4f3d7e985124eaf82a9d1a834'
            '2d039cd15bf43abc2a5282f00d15677dc18654c8add0d882b847587e05808284'
            '18d132693af9db47315ec066f605c295630d0637d76d3d34430c24c30db04b84'
            'eb9bbcff1ac62df16669eb451000d33cb457c7d3e8ae1c6cb93006dbf05886c6'
            '48990ad51151cfc62d7879cbbda9084c9ed8f20fe63a4ec98297a5f7c1c13767'
            '688672910787610d016b74ea5b0f7bf00c916ae5756554283bcab6ffece27981'
            '4efd6bd81353caacc714c675926d46eb671a003efef8db43c44f06713b18b629'
            '33f0979b775526d15e80b1c47b0fc412a2b67f77047f0ea3ddef75172532adeb'
            'acb5c55e6c671bf13de568eb80ef1a52235b2ca81d25d3e3d84338bac95e910e'
            '74de2574ceffac667455bb666889a74c09d9c4d23ca9e6c612aaf371968ede6c'
            '0f768a9522234ae3459b65b977d561c8f32492adeec452bf3dd8850bff65d765'
            '42bc15fc3b74d6f3d259f2e246a75ea89c7ac70f7b7acddc44c2142968aa6a23'
            'c2424fee5cccdcaf51f3d45fc48c86b41fe8fdaf59c1d918889db64eccef4ec4'
            '60110b152229f2dde4a5b0b7b09e2d416ff6cc18d77b18b6e931a3315f2c837b'
            '12a57fc32c95a95405e632d87a6c360ccacc40e6067283c9b15937e5ddb75db4'
            '5e79b2352287dfb9d4632aae7e26f7c97bbd42c54e60015b7382711339808af1'
            'ccee9f4c5c1df089367388b04b1bd3d086e7725cb4f77f2c042f66d7fa2c8c2f'
            'f7d05cb879066952f0e4eb2f94d51baa4125a18639cef6a7b9589a1c4152303c'
            '72dedaea986ef326dd2b10ca1506a4516863f9cf641cd50742c7fbe0de9a4b6b'
            'ef28d1e6dd29a20bc2169ab904a8546a99d02d0ac40dbfda867badb4bf0f72ec'
            '70c6466a36ff13fcafac556fac926cd2568156be9a5375c29e3689a441f6e294'
            'a605bd1ea7e2f854307682ebedac13dd1087662570e45d92e8596f41356ee016'
            'a036cb36742e63fcd3ca452429b6e5dfda3dd58b89200ef098d5febb18247de4'
            'b9fe83e23a43de1163ebabf7ecdf2393d830abe5428e30e11972c90fe086bf1e'
            '9e0599349275521162268d59dd993073aa13adfba034c991c296c528ea2b16ba'
            '8d932fbc58d24e9f5b15da26f557d48a9b3e34192d7a49ed449e0cd2a4f48f47'
            'f1f9e371651fcaf4824708f03602fd5557388b77fff54e1434435388950f2771'
            'baac0d13a5e58a3e5114392f5f220b8fe8be7dc24ad56298bed545ab115e458c'
            '575b7fdcb67cf4ab3fe7151bf929cfef969d85cb6022b0ceb4e7c0316cb41a1c'
            '241688301771b1c0041a348ba1e0ed45a2be2d1ae6d94fd7c2600b6f12648efe'
            '8fa524210018b2a4eebf0d19bf297084e668c03b32d8359cdeb2fa3dd66ff797'
            'cfb957f5995c4f215a4c8e2f4ba92a57792039a3f313e58025f4f7b4691e3fdc'
            '69dd0897b52933faf55f42f279602de5564306135566fcc73170cf413123816c'
            '3072dc6f0ca236206fb4286c3a80676e9d46d54c0ff48dfe46ef141008e58cb8'
            'cf3b2ccc02ef4502545958f5e0a436e87f64d7f8999cdfa31e59bff875adc93a'
            '1363d1ba274c080fe1f875e5722acd93377c4759c4e44a5295638b0a4e373584'
            '0b8effccd954a98e47ca67eb3555281cdf9f8d24e78a8698c51fd291859df255'
            '2b80f22ab006bb93095f7f6db02033d7f849dc99924d952dc662c82f593a73de'
            'eb10d4a2f6d42b60a8503f3539f9da4f250f94ac48240b2792dcc2814daaf453'
            '9c155ad663d435fb14caf13e1f6ec8c9aa43afa1551d2ea2066e7df8ce9f55de'
            '08663f10b54c885e3e9155eb034842e4cfc4f4d7e6ba8789719d382e2bb96d4d'
            '831e9e1e3cd17b1826705aada0ed9f4ef33be400230a554ec1e62dc177128ee1'
            'bf5aba7929b3a69db8af6f7c9ac309517337c432bb7f4fa926872f5ccbd3ad2d'
            'd446a8a67d3ea6b00ef5f76503b586b4f30683723d6fee4fa1086dd71fc620d8'
            'e156d3c299938abd4e0ee778126c258d0827c810289ec1f13c844f6baddb75aa'
            '28a7915b4b5bc1fa8fb5a8178755ae2114b171a45ad7e7677f0de75711c076b1'
            '71e30b9507cb3509324b5613ed179b16ee2d835b3603496f39a27d7e8b600191'
            '17cfa0a84cf87ecd1a69d64a5019ab88398ac4435cbbbc818bce0b1af58d2c78'
            'b25c832423becfbcce19e4817d0733e0a4880fc083608a7c5af3922673737fe8'
            '3a64eea206300fd28bc446cf7869ee4f3400f1b3fe7f68646b99a9c6425c9645'
            'f2405ace4b246a9c2ddcd1a2acc819fdd4b0027810231bd04bef72585f478421'
            'bd16ba9019245a1397cd949707e51b0b1565354dc6e0d8601e590b900932e647'
            'b32d3012b80b6981e0e01e1addfd38795d558453cfea6d0392e0742107e87b38'
            '3de2295eabdf1a9a5ea34166e4d50fa717a84eddb9bd7c77261b89a49294e027'
            '2d80afb71807ebe38c95dbc6f4a37f78c0b75ec382abdd192af5d7ab69abf210'
            '8ce88da921c1f809dc7d18e8d45fa1a9a28e39beeaa458f8d60242bde277e9c0'
            'e317f95b5bda4e00ba01eaf3c43a394e68286d117430eb777c3bc2d303b6da24'
            'b82de7c817f61855ac0832dc8e1a4b953dcb5f52a4545042c50d0a61d17f1033'
            '3be6e99ddb39524aabc464366f122e014cdf065d12acb62dc8b00b80e95f953d'
            'db09f861378b76f7ae56353bce4aca0e9eedd362cace72116752056c1c679c3e'
            'dbf9aca6cc42290c30e4110a2ea364ffe49239ead2ab79b1112c89d20f9dbb48'
            '0c68e46be55dff74d3d95492fd35d880548e76eed8a5cef66c5ed0520ff12005'
            '917f53247068b15e78ebbf3225a09a072cbcabb148f88a251e20b4766c576bf6'
            '79178eb2a1fde49ee98443f6dec5bb48136cd3f8a2a9e91f1c24ad9d55e8dce5'
            'f03413659c80e0a733083aa056c4e353ea727ea32128c613e830861dde187aa6'
            '1cee2fb2a54a30e0bf10ddeb3abd3a53293f04dfe3e96856a02f5b7eb6180bc6'
            'd5d809885d46316bfc0df486f0a93c6885865088b3532664c6a09a78ccbccfe2'
            'bf29e8fed29610716ed4c57b42a649486dbae94381fdb2adfb3907e0c089e674'
            'ada0caa9298712f05bb40f220e7acdda09992fc35fd4c72c705ae1b07832a0c5'
            '9fc7d22843e6ab2591f7839682b998730d440d3a676bf9a562d2d395d30f77ec'
            '7c1f17c05726bc8193fe8fa2acfa94cb0aca23f9f9fe69c49c444883843b0c04'
            'c6f0a07a6780f261ea937bfbc5bc7fc28c7e778187ba575ffded4e8e03d723df'
            '413fd299deea906395d70a5a93af62154e740244d71d12c59f730d866b008f5c'
            '2efe56a8af94cfa55f72297484dabd2cf2c742c39ba240c61fa8f69d44412c88')
