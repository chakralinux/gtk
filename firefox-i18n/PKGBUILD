pkgname=firefox-i18n
pkgver=57.0.1
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'my     "Burmese"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('23449794ff0e205dd7807e52af2bd458a9e47880637a3d3314b91ec1bbe3d98c'
            'dcf0c6f8399cc344af9b82c4a0577a3de0f89b69900a00aea0222eaccaeefc6a'
            '5a1cfdf729625150b2e998c541758d69dcf6800d2a0c566542c27afc26533e42'
            'eca0ab16032c1d311797c9f28ac23f1a6bd28a45b8c76cf90e80a124134dba0f'
            '44e5db2d34cde3e7a5ac5943536c88ff951c1791800cb3f05780d8fd43332a29'
            '97128bdb6d278c9e285556ef7dcc70779c5e53789ac272e0924fd87e498c53b7'
            '6b87b1dd796a66b182dbf163d8a997fa8cb4859239c3a45ee505244fb368f2eb'
            'b2b8b2628b1d27d9ea4c2f8d4d50e3a1c92c1869effb903923342480474d9630'
            'e5535f67b981f3e3a4774f02e3882c9ce6f5e18ee420fcffd03c247ceaaf6308'
            'c47a25939ad1784c0b378dc3c08feb8c5fdb913ab2003742691044c95d693feb'
            '998bcaed3fd4c0267f4b694ee9abb2c85f98c125f1669e12d56ab59ef1f3ca2e'
            'ccda8ff3cbc2f8ed558a47ba06389d9a9915bb033426b6a12188a2c7d9634326'
            '4436bcf3ab99b377c4042a4c217d712988478294212e691d57d9c01c4b57be5b'
            'bce7ba848a718b8d0663652ae3fdf55d633e7141037c20a6b6b609a712270a0c'
            '62870573cdbe75195f72614a8f7e4b07ee697a74d0d7a0c431110046bfe78c0b'
            '58398ab3299bd4bd560b8d2f8c5e194927529da89166ab2c4a32f5e512072a4b'
            '2354a4c6274659c70a3c7531cba1641c8fabc7eb62e860e007d7be85762d2d92'
            '5c57a38da9f551a9be9741a118a1092c606b11383139607775e44c7da27debb9'
            '3e47b747fcc9b0517d6cecfbfb015558b82c644d4d23df9849e9c71875a2ef79'
            '06826c752ef6bf3a50e580ba77dd047c47eb6fc71b48fa3ed7288ab2c6b86191'
            'ee2b92634aa6fb274c2c958d3d032bdf4ca9a7cece9737cf891c6642feb46c61'
            '1c090de3691debb556768f66805917553862c716007e8152ec1bf9558b2e3ce3'
            '874d8c10ec2bb9e92916cdb64626c63482e36e08524131542fe7ad9f80f57202'
            '7ed1d2dd07d9163be684e13814f12fb68af6b9679d13c996d640c4ef907da580'
            'ad3abbd845e338e188ae7e05ff91293a8f57b5620bebe1b7ad4627c7bfffd320'
            '393a3cfd2ab382014debe9a6527d8dc00b4e987744effcb5f2f6f67957004dde'
            'ed685179c98fcebaecfc29fcd60eb8919712bc05077e3cd491d204609199a8dd'
            '381b77cb3b4756aade94a8c9821356b6a04b2d1135d82bf189b95a4b8dcfc3e8'
            '8d3600a3fbef164c373941339f217f920aa93583dcb4156104f992afe0de6514'
            'd5ac06c1de58650fd475253bdd2cb440c370c18196b198c35065fa8a9f027902'
            'dc36aa6b0c3e524a9bd9504e556bd904edefe719cce7b129820963e219215535'
            '3fa3f4dcdb4124e375b6d00f8f4e0e3dfd9ddd733e339ef6a342687ecfe40731'
            'ec7dee8010141a0eb0f2dd887ca1f3cee6ee2fe1a0244e6de16e46409fba6452'
            'bd5cc153d689d37633dd45fea86886d6b7ed123ae2cd7d95841eca1528d4cb26'
            '0822b480e9e2443a2d059cf31cbceb83eebff1d19160c8986c9296b2f32ffa2e'
            'edb563595195fc6c421d63c66a92b99ec3b230471df4db2d43a64d0c37fc86fe'
            '27802a7355069b6010dc580481c09f63306ace3ceb8557f37a112e5f98f2ed96'
            '5b2fd8b0ffe15a3320a4c768c7267825bd575dcb4b02139f461a8933d935e11b'
            'e8a01029f93f316657fa2f7b68accd98b72f088485363ccc85b5a888b1a0ba71'
            'f6b118c26b0ba8039281e81f101db84d2d4c4455fdffdf4f72cd1d41057dce1c'
            '0a3200b8b742ffd2eb6b5df5a8af7044d11a2d8dd788d1236dd28032d54acfdf'
            'e5ee0eba7802e41e2ba32adb87d5352af18bfdf954e7f1f08b2405eddf8628c2'
            '76b4948b44da2a452918f83471449e23dff4b06be2ea6260dbaff5485d77ed98'
            'b0a1c974e9d51a40698858abb2f2c107b256eb4720040a9f3cf9bccb0b003d39'
            'b8692eddf653a0729c200e8c65cd8fa4b5e40af53b8ffe16a883956f8d868cb9'
            '1d8937c02dab5a081ef0b0d87ae478b6f4fb7182c890fe7d884cead3e7544ee8'
            '1aa6dcace91361aa92964f34b3e546a3764d311a381a7813e6c186c63e5f3ed5'
            '9a17e36d09ff87b602b7daa4a37d642b489df69050f9c43ec558acba3beeab46'
            '03c7c6d0effb764ad441c3255660e4f12b87b7284218faed5de5c787c233aaad'
            '15fa0a80e63c25638d7985287121399b85a456dd209385e82a45a68bb2ea55d3'
            'debc3614a350f77358ab5cfcf6aa13fc789abaee9a8258e419cc188badb2f6e0'
            'ce79ac981eb427bca722ba1cfae1705f328eaff6cc57e3667eaf517339cf92b2'
            '84f2ac426048a913b9cc15ecdce9f4814308da1a3d771c7ae0b0a32f27d982ba'
            '979d93f800a7dcdd9726a746b9e1eb0707eda3d13dece5ec578c761b685c9914'
            'd5243cdcd52c2b1dc82c0e4780166e2d174ad4d3c1446daa076fe5266186630d'
            'dcb7d7c6cb12209a0b82de98e48e33dd762264d414150098abdb351c6bbdab42'
            '3a015bf49c92df2a311d0c80c3dc14e32b53687e9d7e5636bbdc7736bb73bfa7'
            '435480f4afafe0211cfc314f9d79aa7487847a632909347e71df726211de130d'
            '1dabde202597a5c5d868c6e9543ffb10b6b30bdd1a7a7d1dc805812b7347c941'
            'eb0037c5c4e47a6138f361b6737fbc57e21ef0ec9ab6567a105579eae33e32e2'
            'df6aa54fc987305fc4c62833bd1f95e7cf2b44fa924b13d79b7d3ef4c39e8131'
            'e7a624606622582cb714066fad7f9c5989bf29e6dc40e2de4b9108bb67f16481'
            '6f7f0ea963f348eb62dadfdcec3cf0d3dcb5fc598dfade7281ad9b98f0aaaeb1'
            '2097541b6c4337977c94afe73a940c9efab8eba1237b8c8e8abe4294ff6fd907'
            '33849337fd01110f2348cd610accdbe07dc6496c4a8457a803626a0a2e5f4c89'
            'd2f2267e775f49d82ad0ce92576b207ece350e87b8f9978f69cf140179892894'
            'baf5ea04b5c0340bc737a7219968244230a105f44695709f2701f4df323f7c1d'
            '802aed09cbbe0dedec9e1c7cf5d5b678c098508ad691db952d6a5fc23d2efd9c'
            '5639662a8dbee09356472b6607e66459cfc1e1205e770a387fdfde3f39dfb539'
            '912692f1f4be5591590c1525438e252620beae64a8508fafbeb04bbb12a3432e'
            '6d9b7651de05d463cd76099e5af5046c6e95f68fce60d1b4f580409af684d90c'
            '70b032e83325c33a92cd7ac1aaf95a02b62d08eb96497fcf26e62bf78822ae93'
            'd6b021fdc4174117ad445fadba4f312d234afef59b1adee8578a788f27a38b5d'
            'a2abd277dd434b39359c54b24e0e73b14045774a6770b800c329c4ff1ddfd3df'
            '74acbdce8b2aa358afc49755fa2793b15000248a753f2bf7105ca090d74d46d8'
            'a1c1d4359a0f58fdf2964a009e9bd7ec1ed0dcc2e7286c013b4d6656d99dd7ed'
            '467f0bd8a9026e14c87e8b5365ab5306ffd9582fa09268cee281ac8527875d3a'
            '09c0513e2bacd1bc729ed20e9552254aa2fa1d6b13c4e2029f75dfc20ecda341'
            '2470ab9a4f8f433e3c8dc7bf772586fe9883ab5571dd153099cfcfd74e54c0ac'
            '4789ff607a2515274bbeb945e251f7cad7d48a770e10d23059d4b2159a7086fe'
            '0c08a84ef400033c05aa4f01bbe089a4e37f9d8dd5776c2b2f768a336caa0ed6'
            'f9e38845299ce0a5eb3986620ead77676df82e0e1e704b63960ed6bc06960785'
            'a4f0906297c30f5646049683d3fc4d687a8b2a08122eb2b5ec09298e5a6aaef0'
            'dbdc46f26b9edf7505ee33d93d7bd81c623793251bc2828b19ec4e5d5e2998d5'
            'fad9dcdb3fdf613ea70c3a412521460be868ff38bbc557fe5f20a01a0b8f5f4c'
            'e0223d8263369a5d388c9517fe373e6621a4f4d243a33fa96ce70fd5eedd4a4d'
            'db043d95e2f06c642d53eb75b35a8ed7a7f43ead9cb49e47df60cc14eb0778e1'
            'c1142cce6923f8623e3b71c712d524bb39750f7a0c2c4a5386fc9298f4f98b6c'
            '0056d13eb20f56973280ec8b4ea47da36455be39b5a574b337970606a58b0298'
            '966f56eeceec23b3371ab4ab12aafb8dcd609617e28917de216802aa9148f520'
            '35e179f912fec78d49108077bbe8ddfd4cc9d0237c521b035beeac66248a7543'
            '1c8a4b2c4b2ae732b45e55480040aaf960d8a88b3f7bbcea4d83eb63c8beb482')
