pkgname=firefox-i18n
pkgver=49.0
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('afc5caa10ed0740a19ab340e18049b43f92cf8e2cdd18a236e63d63a402aeced'
            '05accd94b63a7c722e48af6eca8886b86160907619c94b671db9d6ff4fe0bab9'
            '4b316a58dedaa2e6a7c4ee2764f2fce6a9f9a18874c0dd0333489f2afd23898c'
            '8231d959e78fb0de4e55b577c19eae386262264968c5fd2529714b923c5fa954'
            '53244c64cd87a1075d87bf5d55700039c5790be3e6651f5f048d0f59798f0b57'
            '385e65c16ce2e67a74e19c49e992f74fd02a5503acd5407109bd72eb5492828e'
            '577433f105f05bf59f9a4cf76813d6421864e76d3bd5eb39fdedfb9a8240dae6'
            'e92530dbc5f27895a4ecaa4c908a1acd2aef58a51013fdd39390fc6376b607ae'
            '1cd2337a385df3f8f8afe434ea76bec34ae324fe63667aeaaae8f7949e4c18fe'
            '720dba366ce89b3190ed5ac953deb8825d3c213f66a7bfc321096a574b87e437'
            'fb4b5486ac735daf005cd564dcd0d2e68573d3d3f0ae4c00a2cb54cfcb71e13d'
            'b9a7dedf5309f0c0f824fe9195badbee9c357b0cbd86a5f3cd5d0714edcebc62'
            '249fe7d0ff9a4e09bc2b381359bc6f4896f319ab9c3c9bf17ec8a69968fc74cb'
            'a051f598cabdcb8fe57e1073bace0558780cb038c172f6b4604fdf11b35ad6f5'
            'a97ddf293a2041ed22816ffb61ce7cd4ae1b6a1d3aac114324db42dd17ba19ca'
            '331bb3090ba781d3e7416a4c0705ac1c307c0807c8fccc53bd9d32b6a4df6378'
            '8dcc736a44d2b8e11088c75282727cc293dcece4dc1eb8e7eaccfac9628b4114'
            '301374d50f70fbc05622cc3ece3de8e3a5f83ccb1f0dc91bddb47e95f80eee0d'
            'e3b4a9612af6c8c250b42dfc3187be826e631bc7523f032ee0173199cf92009b'
            '49ec78c2c75fc00896f074a87e2dbcb193ab925d377c99c569e3ef8cd2b67939'
            '78ef103c7d16bcdf7e2d88c80835472cb4089a80d6e6c6d7696d4749d3f6a210'
            '5d5750b9af6adafba4c584c747b3226a34e2b93948afb2aa3ac021ed8fd622b2'
            '917c4e166386991f970edd6178f43b1519551c767fdb480ac9ec392349d28005'
            '310953826673f85e936bd9f175f7bc234a27b5b1dc47eed41eaa8b7358c5847d'
            '9eec295b64feae234957e65257a1f8f81fc3c401dd810f37636a8aee30180375'
            'f559416fc021b23c8f2cf91be09f76e2d440e9bd464c16fdbf03454f662ab9b4'
            '2073b096a0bceb7dc858f368a6109f0893ef726cb287cbd4e339a7de2f27adb6'
            '1824b9340fa34fcc51cb37eccef6baf95a9b17d162fcbbaa4b09cf3099737d85'
            '2af103dccc54c5ad001f566396ab10c565158b48c231f2ab616ccbe8bdeb56e1'
            '4dcd5f4a607c4deaf21080be9df4714a8d5bcd1d72f81e0d6093ce446fa14b39'
            '5bbc4df15b54e3a82898088047c16f36f599437643eb37dc55ef7c7f2361e62d'
            'd441269f6b92c9f2883239f0544333deb269126c88ca5183621add2ae86b74d2'
            '60f39cfd2448e55c42839698beb312c9489b57979dfbbf46d1eb5f8e7b56f2cc'
            '53040b27427bd8584c9f0c5b266b00dd456c06b08489738cd258097eefbf2021'
            'c031bc7beae3997aa4bdfe51636437148468f73d001b257789096d98d405a1ce'
            'd7890eaba084018f0b74425b5531ac4a609e30bf21d6809e148889df17246233'
            '55d52d30c6225c59757e087ed5444ee6e05220774cc752a0d9ab095a019d91fe'
            '8f2779ea73722708ea94e192688caaa7ce52309cc90ba10eeca2a7742f91b260'
            '8f950609fa27c3ea7746db8c4a1ad6c6bcaed20e62a52e0abdd914f1c43811a2'
            '0f17cb90c9d10afd3da4cf897cf95ba81d76eff582b6d8e87fbb3379246a649f'
            'f6b9ff4bf64f4c1460688ae123c7f3ae02cf0c7acd524d9435cf937732cfff31'
            '5b5e04a71243e0ae54f5d9ce63cdf7041ab92d14691a10db613b66fa8f0fad7d'
            '133b3fbe58877388fa8a36166a4d4cb350de27d68ad7fde170eec38858d18742'
            '5423702977394fa052396d78ff8aafa7283739bbd0334e0f212676ec9c0606fb'
            'fb90de384c837611f712d6dfe6141becfdd920d16e74338fa90691a2eeaf0be0'
            '54f173cded78180f4decfc9a8c7d064c11b0c378e787cef43ee105a9ecbb726f'
            '30ea2135ca5cf0f04b950b2388d1119fa7fe80eb39ee26b35907b016f7ca9421'
            '0abbf18617a99beff0aa534dd877c758a690549ba08743cf33b432987bd3341d'
            '078c8692b3f759e278d26ce4ff2c174706eef60a80b6cce0eb12749739b9b40b'
            '22c15e7d8bd0e04ea4d84bdd1b576bd01e2e358e6363ff8e3c33f7c5dfbcdfab'
            '01d15b99e56b4ef3a6f2998969861ce539bbbe91330a9f4c413c36076ffef5e0'
            'fa3d3f7883073fdd16ec456e50525a2c275c4db06520db32ddd9c05142c81d55'
            '97bf2f61f8eab257633108980fb364af728ed12da6d266487ac82081db476ca1'
            '4c34eeb364a8479aa3be12850514e5d5b90d0021dfc748aefdd56b914e61678e'
            'aa23eb5e2368a5ec6b2c734ceffbc6fc816691a9654304ec54de976979c452be'
            '0abc5bb73a73fc453649fe0d81d02cd7eccb7854eebd75234b66573e36673630'
            'd667d5e91339bc802de98817631235cf5b1e2107f20581508534bc772c50fcbf'
            '4ef2bf9df0769af536fe996176638bbfafcdbc431a39c04ea93693d5cb250e37'
            '662820afc2f2e7719355d5b9ffbf3fb7284f6f3ce81e78be0fe3c8e99d287158'
            '1514a4a4cf1f1665599276ba89b0854a360c50dbabab04515134768687c1438a'
            'fb871635224a452e1f34ecf3fe4fba772d137c667e6b817436656888fa713329'
            'beee8ec41034f4655f0d2430d454dadef2a75151a3261a941aeb4e8bad651f3e'
            '272aa0282244856592daf24641070e5a41b376b2ffcef309ba15cb70b0f644ff'
            '32567eaa933557ee540ed5597c6e2fd1f0055aa229f88a31293fd63373e5f248'
            '691fbd734d6bef4e71f7c5e67db15c84c0d0eec0d73cbdf7abd338bc5fda19d4'
            '9be4fc12dc81c37ea356e915cdd6abd0e05aec77ae13e129d1732dc9802d474a'
            'a34c6538939c70200f8c22ef8dd35190e2d047a25b24443f6c2cf556fc640456'
            '0d47972a77fb726e5f3f485b6a13e611d593bb573e84d4e3a17d1ffa8b5e24c9'
            'a7eaf9a6f383b6de2c99240061c6eeaebd0577ce80c441cae4f69179555f5a16'
            '5c98abc56fc841a0a4b6be807ee80e82413b9a8d8ea7b87ccc0d62e1043c01af'
            '33199d0adaf9676d222e0f1efa2c8a9bb9ad3ea1ebf6d23e0ad60baf798e111b'
            'd62ccbb6d79a8a6510bcf9ab4b92fd22f40b23883a98acdebf6551df475962d5'
            'e528e4e6278e05dd244777426cf4f6ab3fa0b2e80b427c881336fba5343f46de'
            '171323c575ced51f608bdd2694c4ddfc7706c5dd615a8363c5368f3f692f409c'
            'dfcf033e277ac8cc206e9a7cfd7d02ef683943c0f8e14d59c7424118dd25b10e'
            '96ffdd8ec04cea9122d814040381abb92d89dcc8e4c032e10fa1c92f851bb627'
            '06885563fcf8291a93e98dd17d8d8f0cd2833c292e38b315c0171a3023d8f013'
            '432ee550b4d05749300574542f2a8c709e4ef42eb8d530fa71aa3dc246c159c6'
            '76663dd89f356208ab8ef6848b1121cececacdad3ef069c67af230b4c7729f8d'
            '0cc13c3c1a07fd4c70e1e919a1df89dd2189280e3819627d66685d791ff7313c'
            '3ed1b3c6542b3eb806ea121e280a48c5f05888c113fcceabe0b88a6a341c73c8'
            '10334b4524106511e019b2a2684a358d89dd70ebec24d5557fa546a0e6aced7c'
            '371a28d4f9e78473fdde16f5f4078c9772497f1a13988ebba2fabcf29d41d63e'
            '998a249dda2bb31770f21264a47e7ac2f292ce2e630b754668bdf8537b8abc01'
            'b1518368c8354ed130e3836f764fd8d9ac6cb70da6169ec321ec32f671ba53e7'
            'f3bba512e97022d8beb0f4a6eea7fb2493065ceee278b754d3fe8fef0a2ae03e'
            'f698e8073b4ba13e4da2a3daa6151531f79e2484704e286de43877b5676d9a90'
            '06067966090035742bcdb526a2cb7b2b4bc311c0bd5fa6020025d4f679153a36'
            '973839f8f762db3050b705a4351d4c601779f1789efaac139b514268dffe9163'
            '2d03aab448e104a6d28eb7b0cbbc111b1f5d5c10a9eca0f185b1cac141126cc3')
