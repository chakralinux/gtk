pkgname=firefox-i18n
pkgver=51.0.1
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ka     "Georgian"'
  'kab    "Kabyle"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('0628d0515250f57161f9fbcc70a0be35572b7453f27d1165deeabe8efae24e8f'
            '575085ce9f1c4031dbe5969cdefc1dd3fc81a215984b10ec488849735d613be7'
            '6268f367d5dc9a3745b1b2a03a424c3b0b7cf4e09c553a86805a10def4d02d24'
            '3e840abe28c565ba6fb214356bbbbbd170cb8e737326365386174ed6c209787b'
            '0272850a7404c65fc18f1a5348aba0bac2a3979ff701d11fd64fd17edc57add6'
            '41576fb3c5c04a3502fea8e0f66f12803839b9a118ddf4b73eb451cc4515a768'
            'b3a8e38d7cf2ed0d99e076d5d041fa30176b092c217a96395a38c4e8f16182d5'
            '5c31c1c7118abef8fc99d76f8fe42eea040b7c6aa2941c7868ce0e77720123fa'
            '2fb92cc4d7c82b0f348abdce56817c3064b59207ed74cf3cd49b8c519db333f5'
            'e81cbeccc6f35e609586536497235d9f2f0d68aab7a31c0a790ec4161a8670db'
            '320b70ec97d6ce0aa87799766f3a423ed1b3b2d95ee31b148233830d12505995'
            'e771812823d94aff2f89acac2d7545174e12016338602e5d8b32033baee27792'
            '3450fe8240ccfa3a244e984a9bb8b83b9300fcb2c5f1382aa2b6608cf808b53c'
            '7f7be83f906f89fb1c3605f8b986ec49c828dc54c416e1d795e443069e70f1a0'
            '2b648600bfc4e90cc63ba77f09eb698d9f779182cd260533162d738e4d2b6fa0'
            'a96bd358b28d42c73b289217868d7331c50709ceeb22eb6eb96b617ba6bc0205'
            'dc5655de1c65eca20f275bff35fc26906cfe38d7664513e234de7a051695ce8d'
            'b36d7832a876d1619bac646ee077028a0ef375c4c6a0b3ff50b81f0c9e507505'
            '1c2fe62f1aeaa5506e6b5aa101f9d00fb597cf58c2ea4453745381baa54ac6fb'
            '550de1211fd4bae2d814d492015933a7401501cb56e40751552194a1022860f0'
            '90cda569cdadb6a37333ca822339eb6b8cec7a762f220367079b35f369e4755f'
            'c32ccf19c94d5c3c953e962185c51248e1fbe87d97856ea15c86d12d7729de0c'
            '621715960d2ea321b81428ec9cc22e431980db48437e26b46c8c39a1a8001c3a'
            '78db8dd653bbfffe15c655402a790ba36c64c089d235b4e995f202c25c92765b'
            '084959bd485842cfb2c86676ac0e82c1b952957d6d5e9edae63c6da11c0d2a77'
            'c434c922f9e44033830f8631c0fd589300af235b30657d28b30af861a25193b3'
            '68c5e5a0110ed68135ce42ef4bb31d5b8a397fd4ff6a43486347dc021a2dd03b'
            'dea32627b9f1bc0a0c67078cb15486e6328452cf5bec66a910163a05bd24f782'
            '53597d5e632dfaabcb0a9a8adc45e87403b1198418ef0e9c2a4fe0c0bd4ada05'
            'a2493f3bc86e08cc0be56442f87c4a115822c01db265c9a367491f68d5a0c8a5'
            '1abcc6d99a3e86b07a41cafd03e9b35acb1a25ce878ea35b016d88b693371968'
            '6cdbbac2c7422b8691ad9fd42bd529d9cdf30675e795a35ff9dc8b761124c9e2'
            '85d48106e8d29fdcf50e55396bf4cfd891f4a247c930d2999a859a3d1fbd10a0'
            '1154daa81c30ec5b0e8cf504edc9ff980fd3b02760392dd3873f69062e024cc7'
            'dc1d5468f4185e38d04c89cc0067a3799ded093f60b0896a5e65aa630240c87f'
            '9fbee09c0094ee722cc26a3dee55aea2324965838da4affe30fc84afb6672f55'
            'f7fe0836fe19bb7ff3772592955edc0e4f84cb918fae7805e04e3e80f197edfc'
            'e942e80d1aff71d3886f1f20c188424f6ca24c2e1a1fb48ffcbec1a0202c74b4'
            '8886b5d8995511b2386b288fc09a5b90f41fb1daae17c239eb149a3f602dd129'
            'adcbcc66cfc42713287628d8f80471c41d40d44b39fde9c568014a49bce7ff87'
            '0ef2b4908f13d877cdd6604acc1c1b8fb7b60244f558b07001faa67b923d1d64'
            'b6008b3a176e9a61f3d775e21a539d80d3ae5136d22076d182fe0dcd24aa1981'
            'ddd302d7b356a04a7894a1c1ab63c35b395d01d022a2f7fd54ff08537b0e4051'
            '5370b1944332a14142d35418158127af311291ea8691bcea3b59dc80435a024c'
            '6d6316757d063fb36a45f54c1426d22960f16cdc177919096343008789444de4'
            'f72e1ac377e4319b5a43eabf912a51b072ae85cd68bc36d56428db79f3be4046'
            '8196693d0840e7902b981ef206b792971ceb5353a3ac113917d5c255401d16db'
            '4d7ccbcbd4c19015300eb052ac17c4b56c6a1986908ba87009c824ce7b892453'
            '2077447aea1c846d5df5128c7863cb3ce2015293bb844204906aea0a0eed5ca6'
            'f36bfe066b9523a10d838f76295eebf48d5463b760b8d6677f3432831c030294'
            '92ead7a7a5fc84c1f858452ed45ab0fd21eee60cace60f42c63ae7076cab8623'
            'cc8720a461fe30f6c96f880afd0c457c59cf7b06d81c0da949cb4b3904607b9d'
            '6e42b55f3ec11d8996c1975caa4ae5ccb419b1106fd0f47c618f55714d71d8f3'
            '235155e7251c0c96a2b988176b6550ccea7d89d7801f77139edca3211e086d50'
            'a19df693b0f1be6c89e8c0c675a337a917b740e3128790237746376d8995e278'
            '838b57a2a140f3063157da89545ac083bbf9c13dbb53d862091ab18b75e0849b'
            'd2209399e2cdfd2b595588473f02734cc43f6b0077573005afcdb473706c8da6'
            '1b0b1bbec0b319600598c675c4f56004f8491fd468e3a8b1b9ff48cc471b46c2'
            '309a1618acda0c6d470dadc4d74a967591ec86eb371e0d85cf569f71150638ea'
            '0da7ca53584b2e94846c65ea170d0aa251ca78b06c053d6fba453bb82aebd61b'
            '870d0d4ad817fc36f7ff3fa329abbf28a78a1adabb3ca5588b07281c4d45dcfd'
            '03904dfce3509513d79c4b3a459ee3345c1dec7d9a8bb130c6460b083e8e32f0'
            '76e6bef2d9fbe37140271086ab56f5f6cf2a549462ce8ddb9d5a73dc19632841'
            '665ea04eac0a6e432faca4b16b46a7b0dcc0267b287804933c94ad3ad4373d0a'
            '7cb881ac319686759eea6edafb7c7efbb2a3d991d0caee06d224cb11836695c2'
            'c3da5ba6047142226a711c5762ebfc285ee1e2470607bd1e659e32826c03d11b'
            '9f986f6e821942c67970d62525e6b97fae3917681d4d3907de92f393b4fff0a0'
            '5e041953b02701a6ffcbff49d0e11a02bc2f487bd1083dfb08974a7c58633eb6'
            '39adc23ec8262427b074434e8a9fe4d1beddacfd3f211b0519b4aa289821c780'
            '4b5b5c24792328972ff5553993b20302a3591b2b7af84b3f4a09aea02905f0a5'
            '231010dc31d98ebeed0a040dd7125990caf2b7dfc2a1cc609b2ff21a6e77e0ed'
            '1b008d56b6c5715d7e15705b7f441b46960d10c2fb42c0e9795835d8c1b01b48'
            '6d9eac90768049081ddd320890a005b963a3d73c03a173e2f4f6caf4159106f6'
            'c89988b3ebefde60191e33f363683857a6f1d7e980d313a567e857bf95d6d532'
            'aee6809591d9c993be831001d152e38d2fd40a288b19776c9e89f37880ed5583'
            'a8216c2e609c1c2f0f97b5b0645d1ebef69448f3951fd55535762228d07c9384'
            'f18abf08ea35a015b52ffffaa419174c89f60f14716029b6350dea18b499df58'
            '951ef2be96b96ef38a972514c045c8bb2be0b1c731e33fe298242f7cc70d7dde'
            'a413921576a01b4d200005a6909b76eb8c036c486c7dea753e8c4d127b00764a'
            'd877231c40fc4e48eb8b4a00abdc4721a32ccecd045a197088166be14c332844'
            '56c28c78ac668d48f2c64f8d3f09d45da20aeaaf62d4795c2e1223da3976f4a6'
            '8184bcc428e9bb9ad6adbb30c3051b6fb27babea57a190e3c88582788d8234ab'
            '1eb5acb74f9eccbcfcd7dcb242258fc8e81532219e08486b2f874b0313639b1c'
            '55617db3d665129b6bf35a26898bf92057ac274c86016e8411c2a54c3730649e'
            'b34b8f4e7c70d664dded579b50c9cc15ce65f9cd5cde54908df3498aa0ff3f9f'
            'f06a28759711bc777f375c89b7d89e4a1857d086ac6f56525c10ad5e7427d58e'
            'a3da7b7f60c35f3be11669f1bd48242702bc967749ea55154ecd5c036462b980'
            'c07c7a1f12e0b47bf9383def491e159553d74c3af4c4682752dbeee7a9bf61a0'
            '2d3339edd74ddff727b4619500df5b363b6719d0cb747107ecfa80b2c9ef33e7'
            '83e8f503a30b8817293f587d763dd5bbe13a2a28a5df1082ea748ff77e50b17e'
            '3cdb053ec936ceb311a2a74b27d9badcc8797ef900a0c0cd5610f3b7cab95fd1')
