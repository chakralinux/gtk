pkgname=firefox-i18n
pkgver=49.0.1
pkgrel=1
pkgdesc="Language pack for Firefox"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("firefox-kde=$pkgver")
makedepends=('zip' 'unzip')

_languages=(
  'ach    "Acholi"'
  'af     "Afrikaans"'
  'an     "Aragonese"'
  'ar     "Arabic"'
  'as     "Assamese"'
  'ast    "Asturian"'
  'az     "Azerbaijani"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'bn-IN  "Bengali (India)"'
  'br     "Breton"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'en-ZA  "English (South African)"'
  'eo     "Esperanto"'
  'es-AR  "Spanish (Argentina)"'
  'es-CL  "Spanish (Chile)"'
  'es-ES  "Spanish (Spain)"'
  'es-MX  "Spanish (Mexico)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Persian"'
  'ff     "Fulah"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'gn     "Guarani"'
  'gu-IN  "Gujarati (India)"'
  'he     "Hebrew"'
  'hi-IN  "Hindi (India)"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'kn     "Kannada"'
  'ko     "Korean"'
  'lij    "Ligurian"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mai    "Maithili"'
  'mk     "Macedonian"'
  'ml     "Malayalam"'
  'mr     "Marathi"'
  'ms     "Malay"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'or     "Oriya"'
  'pa-IN  "Punjabi (India)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'son    "Songhai"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta     "Tamil"'
  'te     "Telugu"'
  'th     "Thai"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'uz     "Uzbek"'
  'vi     "Vietnamese"'
  'xh     "Xhosa"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

pkgname=('firefox-i18n')
source=()
_url=https://download-installer.cdn.mozilla.net/pub/firefox/releases/${pkgver}/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=firefox-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("firefox-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_firefox-i18n() {
  pkgdesc="Transition package to split build"
  depends=("firefox-kde=${pkgver}" "firefox-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Firefox"
  provides=("firefox-langpack=${pkgver}")
  conflicts=("firefox-i18n<31.0")
  install -Dm644 firefox-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/firefox/browser/extensions/langpack-$1@firefox.mozilla.org.xpi"
}

sha256sums=('1edee92d26ca386f32e317f410ddc9792e927c3e86aee065b3c848562c3f517a'
            '64cd3c1830af1994c7eeda7a0b8c8d68153680a4aa00e80eca9d3db8c7752692'
            'd1ff03f6faeef0d7bb0f379a07ec49a98bd27b90fc1d5b05233ca2269069d90a'
            '882f596e478f7812d65a7ad0c158e17acddf61074516d4040ff6bdded3dcba0e'
            'c3d93cee6b66c43d1f69cab14d81685c811d424ff7ef8e38ff0462e391daf78a'
            'f3c42385c80906c3f9b45d15e14a818ad1c2c9097b155f16327f81896c91ffc1'
            'c183377e07a26152e82713c4d8206c6ef3c6e7c33a6b7f809a585e9caf865302'
            'a6e84b46f5969d2f265a71dfbfd017602f09facedf20914dc8d6ba40f8488713'
            '60b6d68bb8b71c320d919fdeecee8a3964ff4ecc58f49101812fdc00dc214b57'
            '400269c08c496a0fcaf8af3f265cf1e54c3a30f45fae4feefa26316bfe95f755'
            '5b5d9796d429f13e05a3e58c9046db6fd514c1fa11ef65964d515e1c32aad672'
            'e79ddd547b28694132300782e0798e74967b8dc75839d6ce8fcbb2aab0c65919'
            'e65cefbfed55160680781c3260701d1ea98b46e7eba627e4523ab0458628e791'
            '41a6e74b868cf1ae6cd6049fb4a0bfe1c01655bf7b3841c8c0f95efedc55efd9'
            '392a8c78c4135175281b8670aa7875961bae0fe8aab4eb60a35bd045d7d15b86'
            'c830c008c9c8e39b4b072d67cc3c5a3854e84f6e03b123db8b6a291ff1020bb1'
            '9d43d4b530ae0c9e1070cf77fd9ff36f938b343bf132b90964dd7f84edfd620e'
            '7f3c9969fd5bcf20b12442ebec6e0dd77724e512b1d7ef6cf4f3510601503882'
            'e4472f9aea6e843be02a5a68a319dd5de277d285dafb12ef98609cd2799f8f57'
            'ecc2c33e6f2761158654a9177b8dd0cb5e9cc5c6e46f69d28809fd9a8dd5208c'
            '899dca03abec14dbd8f852585c16d397b61933d3db80a9932df51782d4033fd8'
            '9f99b192424cb6bc67bda6641c8eb80fcfcf6c736a0d40bc9656dd024f25c51c'
            'fab717fa12b486c39c33f50295a2f26d9f9966525b407f784f5e871e08d1a9c0'
            '2a5062328b5ec158f11d029e07d68676fb1287d4f441fd9975277f0d80dcac60'
            '23212ec63d93192ac3af8c4be357c4bbd846174910f1ab972ee3a970f7394067'
            '4e678f8aca77505ccae19eb2bda66bfdde33701b5707d21d78b2ea36522f03f9'
            '97080414fdb347fa25d5be3e3358a91a68fa86f273b1c49870fb089f92b29b29'
            '3bdfe034d3daab4df322bca3b66b33a38209d3ceadd589cdf0164a91767162a6'
            '5d552480bef50a82b811478676e0a11d0b64d00d875bd16839f7e8fdfede54ed'
            '12fffc4644538d4a27b0b7cc14581ee8ec71513180ddc13875125cfdb7f2fc6c'
            '6c82d98d1309be9980ba973b833ddde7c11961734479adef223470877b79cc28'
            '33802991b65c665723c2e4395351b214565b4a02a13c0fd1e1b7df73a512c7e5'
            '172275e5f0610258beeb12b33e13211aa4b8cd9d9871d00c0bd0d6b284969ba4'
            '300b7234b81a3c5cd7132ecd878179debab71224935be6c0ad56a3cc51cac868'
            '0fea3875a6d4d36e9b76633a932f8e19510478b6c2e022b731b64d5cff5eb499'
            'b0db7f04d946fe07e980ca120ab641734e237af334713bc8bc73c0b6b19e1143'
            '6a9304921bd8c81359d0a8acab07b5de35d6975407801b765c7cc75d89465c1a'
            '3890b84434f0e878cd56d3d6bc719f6b87acfce802329687c0a8ac0e4bd53f20'
            'e9158b0d550fcb06f31901d5a7a70b33760b89bc53fe0874b6917cd7076dd7f9'
            '24f3d8147fbb69d3125b67014c0e09a8fdf131cb0d7b5b036539ef06db796355'
            'd18a20a34eaacc819929e28e4ec85aba46979a4224c97a463a73c33f07f05101'
            '5c8a72d2731c9ed5e2187d75158923b318e26187beb4d74be3d57482a2b3b9c8'
            '03b2bd9c1d81182c2e94328b63eb95b85e2a7e1c092861fc1e9cf780838f0d41'
            '79fc5f77425311c1ae9bd24b097b6d7f220b3bf3c62f194c2820d16cc58e6cfd'
            'c1ae87c608cb29c5ae4cb4a4f0b1ae8806cf03e5ce1b930f415ba8314f2fe424'
            '3a29fed257072e99a9c4f498e2c76367f306c52da6c79ef2710058688491831f'
            '6ac6f60bf6e5755ab538d3d3993a33e2489821784b2e5eea343b1e9b25bb3b59'
            '7de09a6b5c1ca1e292fc2d4810f0bb044e7cc40140f2026985bce6999eff62c2'
            '36d8120391ad2de54cc4958c779d1abfbf420caebbee01240007350f67167d75'
            '29f2243ca9c9de7fa0e6698cc696a2a8ec1398007ddb885cf0074a47eed46432'
            'bebe6bef2bf95b3822be9ddccfd41f903162bcfc22d40423bfc6cac709166436'
            '87561164f87e59727b84741225ffdbf9680be3a952484a729540b8a10b502802'
            '2a55de4485927749945f0f716609dbfc6755b425a62ec39e3dcf54486e0f949a'
            '4f320ebab9c9275c738b5c32a590817e12b46721078e9253c3cacc8283452beb'
            '72a55797a100184a5794f39adece7b1a729e2a6916b3053ebc10bb38fee01b4b'
            'ff31360924fcc8dda27a75469be5a9d986802db4a230580cfb4458e7caf0fb1a'
            '3780ecfd7c3f2c4bbfb938a505699d343d39f3472b7358dc5318643fe50e6b57'
            'e166721c240934bd1b7f6e57faf2b06a69bfd530bb69ca0302d41e35eb720964'
            '6967801b53dc09d033db8fabc31a4a4bfcb3a48832e9b4ea5d824f9aa0b8fadc'
            '763a72910b84d6c15f7dc937c91f01185f6d192798eac0b49bb0047b2a642f8b'
            '4d07e7d6079b87984617ce174fe08535b473d77ba3bd510ab41b322979afc24f'
            '896c2bee8f3a28605f57452c96b02a3e45bc84f37521999a306d165f5ee1477d'
            'b35f8e8e7826b2cfbf8b041b6e01d420064541937bd62d7d11046f31431cd1ca'
            'eb65d5fe1dd009f48adcc918b315d10a0cc69629ccfbb92106a54ab523dba3f4'
            '8df57773901b7031a4b4a0da0db3d081b41659939df76fdace1cea0546c5a81b'
            '2ade80cf2e65e0e9db4910cebb6b45cc4426ffb9f6b0d4fd4db97b2c19ca892b'
            'b4db9eef2f421b473c424e474cba979745877954f040fee65ca6bcf4f91aaf93'
            '93fbb87e9119c5fa4af5de33739954b4ec9db14c1b6cc95a62878e8b7518a1e6'
            'f23346959d9111b368ff0686a322f64ff8e6a1e05427f1bd41cde441cea9bd2f'
            '19fec696b74a47507c6fb2dcd78ee26186853d90be4f085bb97e10f04c7a57e0'
            '0637cc95441eb1a7ecc4ed8e63730cdcf0869141f03349a4b1059173889d33f2'
            '46fcbe893f61e314a6ad9add99bed027c76ca5732d1da6d15279b73b414afd2e'
            '1f2d1b586f37369cb2cd918b0c34f05d89cc886591585d77e3dff6a0ae8f6421'
            'bfa5103bb1f9dbe0217e3320926dbac322a9383bdc6cc585a07c4108c95ee33a'
            'f4bd77d8a9ae0397b991ee4def761b878e61f37691b3b772b2b7d23414e99141'
            'ebc8a49f5198c1cfb8be17664f638f4c3d1881ce49dc3e6b3e55f51237151d1d'
            'd9b0548a89cf70895248d1716098ed5cb30f7e7445148eef10f95e6734c31d19'
            '45ee9a532d6ba7fded7568e75d7ebd1b604b177280919af0cf5a064c7fb7f43d'
            'fc303af6dbb79a27124ab7167348912afe4925637ea15ee6ca4f95fa8b2cf784'
            'dc518c17242928860fe44e7fcedeae3f1f554255f12192f462322fbb88d61ca8'
            '99cf687600103b65cf82e796c1b956fa1845c66adfcc2282ce6cd3ddbc6e8ccf'
            'a6ed713497fd4e3b5284fe14667b33e5028ae7f97f18488d100dbfe3b6f70d5e'
            '849297300bbaea6daf2cbc5ad115182e57dafa919645a0d1f396fa8d93d5b5fd'
            'e8255b71eb53eba58c266bd8885d7de5883bff30ad4cd4bad7561834e3ec9851'
            '770d21ddcec84dcd6c97139a35e389ac716233ba0649944469c25b8c58c1ffbd'
            'e91d74a33c33e660ab7a114c07086d1cc56f3dc57e3ae052b6b8761a2453bff0'
            'dd7af4e70c830b33a0a650e5fc81d46706c9c93dad74c658df803f392e1a0789'
            '272a68d7d9d884f00e3ff0fa86d2aa274367ffe32182152cf454e77b3c118e46'
            'd3778a89397a8e6f2a12aa70b236fe86f81f11c83a489dd94a16bfae795104d7'
            '15c9296f49050dc79a3c258ce265d4a3e0cf0807407c322aa040602a05c8ae6a')
