pkgname=thunderbird-i18n
pkgver=60.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('65b5c4968adbc74de6b19c19b046a4449b57dd1a5d2380ef0fd001a8f7ae1706b9586a36fa90df5a958516e41c11603fcbb226a32066ec8c59daf4fd84512307'
            '8830c55c0326a8bd96296a828abed3af49e35f8cc86c067d5754b6ceb150aff5a820b081c7bcdcacb3d1b5e7bb8298e3fa93c71bf18a441d91224325d3d771d7'
            'fea89794b650f0973a3024b021c794a4970ce515a8d900269b644c6f9b5d256780a3e783f01e0154f9fd71c643f0c8b5cdf8a12309e4a6990d7a12d895d52bc5'
            '1c837c032142366bd3b61646b911399a1a4276819b673f7e9e2091364c666b56fb1c19c968b61ad22109ff088b1c5c8c60887debcdb24414a80fc1f5edba89ac'
            '2ff958c727b235841cb456bed1c7e5e9448051962671c2b90e8da3412b1fe668d4f40f4191966709d9fb2b973c371685827feb51eafda251277e83796b2375d2'
            '1b8978e20aa0d3376cca840a56af86cf129c614ee20a0ad7812d0e4df0db55135aad27afdcae90382b76dff5aa8dbc62b7c0f5cddfbcd3212cbd0277393bd30b'
            '928f446dd26468c5051d1a86fb0f25e0b9973113d0cccbecac134c8196afe6cffe831b813eb4a9ee586d9f1d59222b11dfa6d0aeae804167bfe244ca04e11f50'
            '76cd5b2e895e057e1c90388742bdc810760a40e4f3307ae29074d382d131c03d5dce980dfeada4e168f6b7f417c0386089e6a36e3dfad39df8c4ce601179cf5c'
            '1e2135460fba7bf378589e41095386016264d3ee6c01bb69ba16ab5117f2c5293739a7271a242f3e5d0a703fd96c0366981a98815c15bb213e5936cc8bd85877'
            '660e0dd5898800f02d73e5d81a825f9f98b5aeb9c5d2fcb5eeffcb51f00511bf07b03404c598e524e99ca20f4fa67d0ba9a56f26baa870662078a2679339c61e'
            '9c641f489eda016d19a05149fe9310808f61caf431a30805e0f8694e36c7e225755b14fad2ee810c9b7738625fddd1a914d9e370b00460bb55d5e01d3f861367'
            '7b8fa73b90f90f47c077025f375106f94e92007f90ebfb95052ec9e24eacab5ad5c25d9c14d36265fb048a3fbc665db3529cdef0adca7e417f2fd89450dc4043'
            '1754cfff41e75dbed4d3959f3ded34561740211245e51f71c9b37d081ce320e447cd191bc61711c67ecfa2ee11dc440c309a74159af878bb724be8c1c5afe33d'
            'b0e5b1b1d7e5b9db05a43769381cbc5fa91454c18d4ea93926d46b6527dd248890685eacbab583dfabc0d92cc15be5772b81944d123eb486464696cccb8d58ab'
            'ad70cea4a517a9bda6defc8249626d191f1808c56bd87fcd5b2de48e920036d877382ee90519245ba6d35e3a35ca46f7d97313b344624d200d4873d924c81cc9'
            'a1ea537935074f0da50b2e2c4a7bb703c09e00277a9b113fca639528429a80f49407e3e59ecb02f110f07347ae0d4798ebe506b405dc142f25c86641c5a4a330'
            '7ee1e2ddbd8612f888128fad15ada13e388e53a15fb9f2be36f49cea8911dbe683493167057e254bcb48f3025a3f8bb23a6815a1fc76f2f9a6c3fe9e275ad931'
            '0d9085bab6276f2a1d182c2958f0e4f510c2a644c4e0a837723d34a1403bac412cf941d60d3b4bbf6d3f637c0a9103b6b8941a4c463252d8b2db9a127df7d577'
            '70d0d56b76f76e2a047ee2744929b5d1488d433b7e13ab7a7ab8e40792fe72aa597c009ac7ce784b1c931f731337f163edb1ff3da11bf04693e527478bba6cd0'
            '140b4af105d97bc2ef275c4b9bd67445d990809a5c3d47d6048f1c3da5676cfda7d9fc26c181161319cd3626e5c37daca612697a45629fa7d49d4679029d3896'
            '0f0fa8aa7f4eb5769373abd19540c7685330597bd4bf5171467050fc54a4b57e8b3a21f57d2028484c23713874663da650f86026c0afb8439f9cc9061c59265c'
            '865aa811f236fbaba0105e54f3602c9f9c234f4781955bdccc5cec3f3333f6caec088faa12bc6f45327a2bc677ec071ff01845134110549f7683bde9143f24a5'
            'c6ac9f0826cd55fe30aa76eb99dc8b493449d7dfd4525a60f1be6fc941dc9e83f8b0b2ed329ca49fe8cf572c75d3fbd2cf4f2b1bf56fdc7db5579e6e68547028'
            '60aef3b77628fcd706834b9b41417151e6a2f2b990fbbba9d7d5f9f1c1c69314983477b77af90df6cd974baccf853eb39a3adb70950b92436c97a05974fa9d59'
            'e6809cb21956b8ce29f2115af6b52820d492c6a2ad889889dd8392aec418d7865541cbda2ba6ef662b30d5508a5e480f98f10957c2377c221185b17b3dee31f7'
            '4d82710a207ddd7e6487ab62fbe7bed87ad883c6854c924bc393e5d1e08581cbf9e5565f24f9b6ecfe74bef703a5a7dfc4f3074ac5805a5b5780f990051f1434'
            '0297900694aca45287419c1f4fdb4b32454ce7b23f4aa98cd9c593288d87e40d9571114488b95eb4d6d7c776f925f13f4812e7c5664c2558334d318e76d185d4'
            '3db5bbf02f02d7d3a312cb6a52ede51be4c7e21324363289cc5514b7440996b6209f3c28d9deb8389d3348f7d4251b0865ede77f6fd71fc06b46c56cfc8c57d0'
            '5b2e65c1c7e840a2c247ba76add9a81e90971db080bc78c589a0de04e8a631ba54cde456ae533cae77dc8af414c6af29bf9de0d9adddcb835eb4f831423aee51'
            'd9bff313e3858ea483b3d94271f8084e4047e67512777fc6c0d4f68f080f7cc30316cc005ba88314ee2badd094f10c32fe390aff4f0d215101dfea1945d730e7'
            '56e2c8322cda216c4a35f87e1b86bd544d36bc1c4e53dc8871e3b2954e1d8c7fd25e0d188c21fef53e8845bfc9f18b0c3e1bfaf8924008226e02c30e19713794'
            '24cd8af5e8ea6e82bba10ec64f24cede41724e68a110200e767967e7ebd8ad0e212a9eb26a19a50020c4c30eb5bde686752c8c7304c8917e22f355df1eacb6ff'
            'ea6d7819a6f64c2b59977b8f05e13690ce9d115fb3fb5cac8bdb96795903480b9efdcd495594f33149cb62333a7a919052ab86d21f38550b315b1019338c53f2'
            'f4a388a8dc19c73c209bee107f664013851fc58610cd4903a9aa37228fa7c52cd7e78edd69da7e78ab7c745567311e4b3e0696db57442468f07d9bd002b019ca'
            'dcf16a022204bb628b6bebce1e54239f7298664dab901f3f09c81427187293cdcdfd0965ac4ce2ad807829d81e334059afe903f2a1bf4ceabc7c3abe14d48bdc'
            '58a157b886bbe12ed4eb4d0d3cfbb57af1007bab9dfdad2d3640323e0f730d4267245f1fcb61259a3f34382989ba0b52baba2de287db23a982f91ebcc218e9ea'
            'c3145fb0f7a83b67ea4c195823b08db5ad4ad1a41c36c53c7ab7339c337d161739c72e98f1aeb6a60641f220b6ad8e20b8fb9141740102a6da7bb7677a7f9df0'
            '5188a0fa1102bc0fc92970a4986de731deaca358abebb92c1ae153d6a2db2193578c3d6d533b48490e1efe2d51652db5aed2401ad4a2a6186b319251afec78c5'
            '66ce0bdfbeca840a39a78b5be56be56684bec409509d543b42b98e775012c1e620e640867163473e5725fb8f16d95c73146120d6089b9a7a68fde22265a4241d'
            'ae9d59d1e30858560c134b7a82d2e5550a66ea6f0b131688e55a7b29646e5df74f10d9e2e4e55a241dabfc52c2314385d357b192b4fb7cc86a86969cb1ebf37c'
            'fb155832962516b396ac7574515c9223622601efc0a73e75aff20efb76d1aef6d44918bb24314f6f6e0b45ee826e12920a749f94b805739d7bc7e0310a8bef83'
            '5275940a30aaf27ad865536dbaf6a5767dea3a15bff0fda3dd985744329eed0493900ec80b1f3e79188619ca833cdb82cf3ebc9a535121c2ef8b4020027b2f50'
            'a22b87e1af96945415f20319f62146bb951d2dac4562fa8565ae9d88679900e08b4a5c4acf6d31d51dde76f8d09d6823f78b2ffeab775cdc7b98a08b57b862f7'
            '789a276141cf1d24262545c68bc6e629018cbf468079e308c4cc1a7c5c935765558076e9cd3ee6a3c8b4d4b592c4f9113197d204ed47a67aa27798deb5a27353'
            '044e35df54b825b611292945f6521edcbea2d830a3ebc4c5ed34acaa7e38f0d5abef7b2b5c8f48caad27290875c6116daed6564877057a760ec30bd859f5dd94'
            'c2cbeb52a110704e8f656eb38572582546aeeb624d61c730ad9ad11cde4d520b5e3e90f35ff11a8b8b628441f010f0acb3735c89e39cc31dcc0d25cfa5a9ab32'
            'e9c2084a18dce2c14e8e136595f8a4af2e9704b8ad38f5879f9423994c24ef72bc01f122a816f4c7f8987527ad8ca381e47e5f0d4407f5305e49c0ddc50820f1'
            '8c99569c8cbe7c2a258852ddf7142de5ed39fd88c34c7669ed153bb040f480a67a50258a8acb893270410628929fe82a66d70a284c3791512a498df9b9f54a49'
            '4aff9dc2c786973500d1588aed10a5dab33e1184b429b11ca283a8ce2ccab695b256f4d1045a4b4ca51868e6575c3dddf5765c42a31097857034ca331c695be7'
            '44ed559d71bb9d58b431f985fe7348539c63534aa0449ba66d523c40c361135cfb2bf6de165984183f9795ff7a30123b07fe32d6cec9c55c0b00f9dd8277b59a'
            'c20bd3ec5c9d5d6a3d0d0f692aba85fd652fd96e635764af2e19040336d56c0eb419a8943941c45fe12fe105ba8eda1bee7c8f65c1297d48cc9e3f4d89a5d222'
            'cefbab9e1755a276948fe07c702c9da9726bd5f247493b8c40cda00ab0fbe822f5baeec38df3d00866de40396581cbda47053d3bb4d89d5a34ef1d4d86e3bfa4'
            'c7d156ea524ead3ac75dd367f71779a178d2594d37c6ca2fa9e2715810289d07ed170fd49653735a07695ea474791fe26980fcd9fa1e2ec19f97a015199340c1'
            '759cdf2b1e53597bc3273d97ff119cce4519936ed9424060c857349f701e7a94519a43c1899d4e3e20482b3a4a8eb4c4dba9d09ca6e74422fcf07420b1b0c3a4'
            '8ec61caa32a6f90f2b553dfde6ca0dbbebeb517db827193d73b0c492c6a1bcdd152fbbecbcf501a95ec62bf2ed01d926274f4f69a49ecccfbe401bc1d34f941e')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
