pkgname=thunderbird-i18n
pkgver=52.0.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('df14c5ba01b5da131ed7de0f1d9dc0d91f8b903a4727dbc8e32778e5a1ab3d6aa8beb08a9b07cd007a44f1cd98decb42df7009d52b50b966a0e206aaa0b54799'
            '55da6014124ca3a45e6e37ec3fe17086537969c354de9d2301d9f70212b00aeffd0efe05d5a32959fe293b608c7c395859c8ef11e0505ce4e01596b966b63ad9'
            '666b4ff1cd504e32457cc1011472b41734218111969ee3fcaffacac10bb9435120ac5b282beea54f816da04ddce925b771b5275b4aa3b6bd61724c6472d9fe66'
            '6a459b895ed16168d38d76c4c014ee53861cf3b957dd0ad2cdd059ae28eab6deed07116a24a836affcfc549d995599fc58e7ab2a776c6eac0a45fe95fb790bcc'
            '8155d8606e8ad42574271c0229e993591f717b4bc9168f2f47add3355e61e93a1e9640b6070e92fc03fb96efc07a9aad979fd5c7c4ea194a134357228ac22263'
            '39db62168b19040c92e936953d46f7216239a227f0666db88cf5b422c4e4de5f7b0e21d090c387c5fe39da4e7ab4d7642c345ec7080d5c32be5ca6e95a3dd8c7'
            '16ea45023b9b196b716f4473cd6365cd060c21c4cc7d4d89959b4ccadf16127f7bedf50a02d6afb2b02c2d0172c80a350d244ea85446ced0e6c271fd1e6465c4'
            '0112d7d90052be7b0a9182d909ae1ba7f50a688973d12b61e4aadcb3e37274e28e89db0158f86bcd162f19474799af27a5e6c4b39e7a43fdd8ed21e935ef1fd5'
            '8c36094b38123869160904d6c3a6658e186baa92314ad7c11f0a0ecf328b380488ab12f4e0d3034bb07d1c2446d52472b862b3c5727906a6821518c7e2bed016'
            '9770c8e529f3847c81a8ba0fa377ef2f9e80908d6b703a66bacc0b90b0f7fe79048bdf3a1ad59abd43407f42f509f0c2aa640f289cbc640b2cfab09bdc2b667d'
            'a8d10d4796246383716a2e43cc363d7a782f9ad1e45418abbdacb75f6e2c4433d7fdd9003133f6a43860ad08ed7434d3cfeaaa40a2498da02cc036f9fc37237d'
            '97adb81d0e584fc36b8b0b14648ff5a1d93214b1455bfbcd735c1915963d32586601a851910129ec82d5a06b38ac5b9409c01d2fb33c8747a56ab3385e59938c'
            '5544262cf11357a797fb25f884109660bd0c92ff081b0cf64dbeddc4b1d4d413f44e0e3f70c3e7e664ccb236a5cc59b0b0eccb3b95ebd37b29b3b8f587e15735'
            '240dc3afa6ffed2a552185caf749c7787426e7ae6ca359caf72b454818de48aa8b9aea280e659e2a93a92bf31898bb29cac2aa090aa4da1625a78301d3dcce37'
            '913e114d4324da70648a73655fff89b83c7c821540081f795010531a7929046c7e1f25d5a96e3b691481dc83edfca2a49eff1f6f9ac465c089e0554191cee678'
            '6ce28820976af7822f83d590584df948c080bf0256bfc6573d305fa243f292536c86a661d54f7cae3cd745f862a145576b275c8d207044a9733951f730d4d634'
            '12f50776c2be8dfe38d70691a7dbc1c0214062925f4db69ea8d87e7057685f5eda079bf2defe5842cbe9082fd3e09b35f4cdaa6594b3dbe2bfea16803d72bdd0'
            '032566e0191280ae6e8111030a20fdd6d0495d4275088681a9b4aabe4e1f4da68a447146c9f97bdf2a69c7d7ef229875f93b3cf156d540df8fedc9552629c1d2'
            '8c04aaa522d4b0337c15cfc5518919ab37bc1f9f5a6e125efdb97a9d7bf871c2922b0f788823c3605287e17610664cbd1760fee7c0df706c1cf1e04d6aa1acac'
            '9abd346536470ab8073ee30c06be12c41dee0297d12edb2c3caaf98972d44850203d15da1fe7b42eb776b277acbd45e5aa61f30e80f7f5de85f22a17df3983ab'
            'edaecdc38ec76c5189d3ab721fdc8c1fc571607efc1656f2f50fffd0007f35403c99ac0ac2932d64d7c5e4acdd636ea5d2b811e7c02a7eff4c603f3071099c1d'
            '9241990c1e5243cd92d5d7c222ab3fb8db6a1c0537d307f3c7cb19034169a9de106daf467ba07f33b1f39af83005ca12b437bed7e26eaebfa94723bb1f6b7e67'
            'f1ff966bea26da33467d3745fe798b4e0b9ce935c235c16af0742d3e0e529974fbc499853a10f8912910c2eee4c982a4064b2311e1d4d39b38720c7ba8f49260'
            'df53486ce4eb35d1b46c8b96adf35b333ec2f1bf8d7174e70f5abe376c6b3196aa9634ec94bbbecbae78886d181192b6f6637a5bf921eb098186a7c205e68740'
            'b25b4b1ad31aa42d9004cdbea38dd5782e4145c6cb9991b4b34a66c9beb5639e431cf84fdca8691b01a7e1747cd3c59ea7f6655ca52a66bc4fab6617c5dee3eb'
            '735569f9bfc1f908a934d0edbe54f98ba1202a18193ed615a4d29d61cb4558fd2cd3da61e7cff2c4a3c4ba18e4b6a98b9c606476bf25ebdf9cee74a93937969f'
            '967f479160e69beea3eed516b3824ea09f281f6a8d68182635a00e2bb1bf7202c5fc92df6ee00e106e8f5a6cc441d0b2a65b8a5f1cae57da1db8c06f7453e827'
            '51db720d560e912bc0b49d7c462d735a51336879516e1315b2a54160de64aab316a2739bb54acb60c12c21660be4f77a081d91911d13b76ad9c02af4e0546f86'
            '6ec41e1c5c1a5aeb3d861984fb62f143513d295d39f79e247fb330a705bf80fc68df7c94307a29674dd7560844179776cec4585d8d1161114208d12527300bd8'
            'ac1a0c79db2a803fc83431952834a0c41ad0a47feb07237fdc03122903ae95f36b9c19392d5810c2c391647219e13ff999de3df4eca4a5a12b58eb0097c7fb6f'
            '8363b322d8371723808a93a525173dc08bbbf705ad02f0e7894d4da72b62da0cebdf6377198fe0da70757b0fe4883383190094dbb2059850877c5aebc592f345'
            '2fa1d7cba33852337353cf1890620d4bf1f49ac9929e3acf239a4679fcceef27f20940d20698aedf1541af79077931d691a915846c6897beef71a6625f1bf1f8'
            '4990bf8323f6cbd3ff8ee38cae01f987e26e732ab78957630021016b7aedcec0ce7c1dad66064aac384c48114767976f8fe2af58a8b1852f0097328693933b04'
            'c4341d7abd7cb003bfe30be1e15faf7d0c3bfdd9c2d8c95dbaa40248d49e245359ea5721ed59a224380b783027f63221b3e0221e115b6d2dcf58c7d67be3cc0a'
            '6aa9c4107d9ed48534593136731fe1b036ffa6f838ddc1e023a85e651f8bbb74af358b975d874b74521a4e76cb9e18dd5875594fb20562cd37716384f6dc91a4'
            '3c5c1df5c6d475ea262a537b00f6ba1fe02e754c496edc7656501af74287e806f20e30f33cf7c763ee7267668c7e50ad2dd6c01baebcb640ae6c4785e62f45ae'
            'c888ff985531aa03d92ef60b382d709be0a228a670aec0773e8f6e2096916b0308025f1e04a0ddc1181e982838e6ba292d66044e7137937f1740f25b72de36c8'
            'f6ab8c19432c7e8d3cbdd68824de08bc24ecfa60ebf9753358ca7e54937887fea5da5bd7edfd92f569d5685eba0ed026f5ef5a38aaf514853cba247d43293f73'
            'cf8817624396055aee586c29f6d3b1aef323c33c15bc65c79e8779d1c32c62f04018dce87b352a9d11318753e23266a981506120af4e3746fdd8d484fcf2b9d3'
            'cf9b031700598efdd026497d44332a23b5d50c7d19f631c1d64b9db94081770555bb04ec1c981840f3cfa40f9e00220e99bcfba1960dbfd4680b0ed8385211fc'
            'd41ed9fd80c21940b084fc3d54bca58f9b6180db7347c1f7bbdd16296f246c3363498229e262a18f257d64dd3658a31dd2f0b0ba00f6e8e73bdd13fd242f9183'
            '6001db79f0c3b3af6c8fc58c6a1b5681653470294ee1e8c2ddad7302277915aa28a9fc89d806ba721c81338b7393cddb25e3fae85bf4e804ca33e6f88dfe9293'
            '91d92b294ed9e57715a841f0561f8bb058db68b3506e10ecc88610c48baf987bab3e662e62281124bf64fd7ee47bacb318ca75ef93dab55d8587dd949120d75b'
            '17b876bc9761b9f55afd8872e7f8557acab7aa9e3939e5993486d0681e34c224289e909d1aa80724755356e13dbf4f1c0628bf0d4640355e4fa3c13cb99a2084'
            '60059ab7e97d30843ac8acc4a5e333c304629ef953676cf5c2355dce125e5242e77a12499780d85a55bb29680ed7818ac596e6e8b4f9de3024aabd61d636cbc7'
            '2e3c8485e7eeb8bc72ce5d2d68d6ef02ed33558cbd1e512c4ecbbbdc067ee212565afb23a6548259768e4822b4876f7fdae7ce838d7361f990631a474592e265'
            '6250e627d68ac4e3cace3a43b449d3dc6c31ed42426d471e4d9acc8baa49628740384dee6517abb70dd3347f4de4818d276488f18bed089c0b5ca23e7fd8487d'
            '23d21b9a75984205e5f62f6ebebd7db5a969ffbbbc941267531287f72f78df8fe66179990405683857e92e402eef5481661eb2f29199fda8ba37653eedec929e'
            '2dd9e248fb594dc7aba29369fed3297bac4acad24a1e35ab5d898a1f8e7c45282b701ab6be0ed13d9e0b28230b81259ae3e2d464f90d2ae063aba726df4be3d4'
            '91833ebf4561921165da7848230c33d49efcad5347b394bd1d411d2cb133c9bc8a2390f430e21aaeb16d44a000a7cf21f6e35af415f2768725359f9aa4fbac94'
            '932b0e7671f3a3f4ee4b547b7ae61a0990b3e433efb8790f24ee00cc5f35ca0a7951dbb70de1573b1ddafce2034c2de4c233112e5fa2d3d4b68b00d29c6f94f9'
            'bb21cc22fe90062447bc672a89e354063c62db618b163490c7d7d22538b35aa6d93657356eb63449ac6e3ddbebb3e902680b932d2796da1306f72f8f94bf5fdd'
            'de1e834f32190240481862b19895bf1b20e35d926774db66a1c91920e5cfa4c197af9019afe423bb5e5a83e0a9d68cf6a28fce3d304d88e9a4a76dd51829c620'
            '7a664fe474b68b2b62c90f7f42733495ec3d5fe2e0dcfd2ce157d27f3a3eeba512347fe88e842827604573f864b2c7ff3b17576b63780b0e1bea103d00570726'
            '27a973ba7d237afcf81d5e3414598a875ca5697dcfa882b52359a7708ef0144095897fd9540d365db6657b5c6dab2021e7bc4bebb49121d6f09c366c331f5ee4')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
