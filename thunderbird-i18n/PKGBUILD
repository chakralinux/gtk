pkgname=thunderbird-i18n
pkgver=45.7.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('9ebd183f57686315567689d04772e957087ef2af40583f5e86396bc882a17ec449663106ac970972088e2ab881c6b23a81bb1e822f268bc2ecbb1c0129be74f9'
            'f3723dbb88fbd98841a4eca908488cf3e4816f4197ee1bc631e0c588796615c5665b4544584b9945ed7a6a2d97b1be534f297bc06d86d07eb0a61a8ed697d3fc'
            '786c9a003244eac5f18419ce2fb506fa18ac0cf483e6740c666e21edf22bef9eea66f94f7a77a4533d5653328857cf12f584ba15b7466f1798af0489fec46dcd'
            '99bce5f9bd6bd8096f096b34f2a7ac961ac67cd8fb36e498bc7b086ef24e163947f9ee58fa1d4111e68c46e01e6ffaf4eff69b7bbd8fcea504787013c92181aa'
            '04a96f25ba6692dbe5124ad1f90d9a316c1d54f26fde65a56fa53cbf66a6f2bfbafea56951c4f23bafb0cad0c19947b7999f8884167c6c1026213de79a455663'
            '9a9276bd71e58b710a2171a8305cb5ab35fd6c7897d771bf5df8800688df89f9cb0696c24806dcb6686034d1001d41b8cf63cc39ae8f4829beda49ac80885af8'
            'caee18553aaf2712e81e934b758e034d1dc6e095e179a915ab145e44504794593192e58d89b528e9b56e7ac6795b03e32db282dbe4faebc27bcd163990c0a886'
            '8cf41ee0271ab5bab51e33732b507bdcd5a2074f86c787c33ea9145514b9c66c37aa86f7173f934d74e03e31ec0eb1d815e1a755f2fb6429146a09f8900bf50f'
            'fcc4e75dcad5ec07c989d98c27940184bbbdfbb1bb4a5eb9e241b2a78a2ae38ae0ecbcc6f4f87e5e3d44aa7c9ba0209a8783489aef327076d48e9a110b2dc15a'
            '494498cd29fafda9bb33d9889d2f1d4a6b265a9bd0c9a57018d107028675cca3588fb811b8a5ece7573e2ea8d733c59a825391b65540d821cb93c47820f7c2f9'
            '18ecd191902a12dbbc3965035e21e69f0b7d66c0508f16f8fe861b83932ef0ff918f6d1c38c66c2063db1eacff596414ba2a748d7b9def400b30dd31ca5ac129'
            '7b2b5c9a488b2ad4ddfc2158d28da0a1888c489e88e25d54e234ee44e1415212559a8fd8bd9f4e0b432888691347d7fcb6d0eb1ca0fda1d68b593828096cf7b2'
            '35c41e324ab855f86231dbd2116dc808d220f89b2beb2830c73b7ab05c9480fc964032c4e024e17962d906bbae1dd691dfd6f513f974a20a49f3a1615b656642'
            'a73bb664123afd102b3125af1d4e2c98265a6f61811eb1b11825ed219346b7574eca0bdc0e9182d6469337b38d099ba800ad88aac462039b4367ca58e93780ff'
            '2090f6a4fbca8643a6c6dd40d3aeee1e9ceb0e8ea2863c1f44a30d1e024c6178229b70fcf550078c4c51e3b328ddb7e094add6bc5735c3dbd96b54e0254b8096'
            'e85071b57f9fafcd039081957a9a02a1a70817dfe18b8e46dff2f494e0869e9c95ce809730ba0dec86c9be3fd26e2a510299f9ed19fbf2c652c0cf94b45590b9'
            '9efa86bfc9c1e4b0a51fb3167e8a3462fda4e27cd26208b9654f0601276010ff21c011181db5ad6f440213e5c41f2ef71c2161e6e5620b32e939d58a99780de1'
            'a629dd0362945172be6e059c474b2254ac953f588537637b4acce421d25d18e3ab471ecad72d9853d56c12d1d5b5c468828cb5f0aff466b3531ca2d09552b7c3'
            '1967c5c25f009bd49ad06b6f05a0b091911ef1b9236cc469c50d3654cb2e5a7628f6ab382432aaac6541cbcc9cb32a057153b35b3e0f9333fd7529d37f9f3d68'
            'ce72561bcea67601f9f86a4fe28f3a910d56f97e779f289eb92492db91feb5f7f6b87d4af45727e5c4da4a1e290e1a82f41ee5a8ad9e3f30e96aa9132aa4cc31'
            '5ab4e0c5ce94f60cc64b968be2af2438ae7bc956b93530b479b0968947a9a2de52f884e9cb4f6480f8b81b9ee28095843e58f815c6291c77eceb6c6b9fd3e2d4'
            '64930b8a607b20da6ada7390dc608f4eb926b062f8d5dc56bf3f7e6322197ba654e154b4b5b50b4ece8a4008c53a043b1fdbca54bbbdd53a510a033ad0b7c84f'
            '66b8ad2478edb1b198e54913cece849afb4e815e92f315ceafe4c2f6b29a796cf9489b47e172fe763e79c931dbf945227830dad8dd5400ddfea4ea66027b68c1'
            '5cc651cb3b5b7d8d9c055d285b6a68ae2e3fbe2ea7a2105c8eceb21c1cd0c2ae34e7a2a2c02454c4cbd97c92f6eb5b56d963dd286f7abd118aed4accfc69f458'
            '58fa96bef8df65408b6ea07cf937d2a0101cca2275ed19f5da32525d042564053084a3e96063b6ecf46579fe915b6be5011018988c465ebc0da90a47ddff560f'
            'e972036417be996d1a480bf8c43b02983168a8a344e88b0b09954f02346e978fc6ae2307be41dfdeaeba971790e5ac9e02aab607adb304e135082d9ef0d695d8'
            '000bcc1479df08b82fb6351f664885cc0170ad17e3ff2b7efe3a00040e4015b5ed0abd12ad64400be54535edea2cbcbeadfea3ce7dc4582aba99891acfa6794e'
            '7e741eba011383f294c792044b5b9e86d0880ccb5215a3262da92acf1f1efe49f34e25ab022ff410547a187c0f119e1b29b8708603393b6e7b6887c319e9bfc1'
            'e7a4afe822a85f715806ed678099088104db2033dbb04c0b0b8783985560e90f30e3c02dc139d8ddecba402a6754829a08b131fc3d909744a1eb4c7d4161a702'
            '4d1c8a2c114d1d0126c613dba73b9ab188996fe16e392dea7d491bc79d9e97204fe54f16ca8f18fdf469f645ecb810b3c4a0ccfdb937c889d20d78768ba906a0'
            '8da033f31c55a7162f7341738f67ac80353d629b547d8db60c1b585d61923617eafb1b5693820dca2525cab1509502b7e295c19d6a2733fefcbc3cbd774780b2'
            '12b972b589f4f16fcc46b60897aace4f6ee6708279b3fd545c70fbd9ff95fa3785fc0d9e788839ecbd4951338dd98ebdeb496526a2eab98346d92ccd9f8f76f5'
            'd03d90ef369cea4f169322a8df15ff6b1e7931a64556f11608584670279b425446834955ee04b44d5498014bf4a00bc9b6c65f1050da8c7342a67b99f232ca91'
            '0d5d89fa74944a51e0d6d16111101d78e191f2864e74db9e94afecd35b6d076d54d7b734c420cdb583f26ffd38a1eb8101b9926a502d6591990e3e61b3a46b27'
            'ad9d6b8f5cc5d28e0da075751b34238d466a57ad1df980d43796a62ad73ae9b154bbd4afc55466af83fdedeb0fb1ba8a18b7f019e5a8730b19ca970c4cb588e7'
            'c18723767d8a15916661fafa8dbf98515f7525b03ef42de70c48575707ad5c0d973e486e61ef9734d7d452dc1e06125eb79fb1bc6d7cad01fc9628b34b3feee0'
            'a52006fe6c1d9542ebac3dfd4aacacbcffec927c39cd95ff1045b5800613b31ac84e50e79506798b340e3919c642b957cfa5446cffd85473aea404d079535fed'
            '9045a5704c9dc709989324f539a5c642caca62b1e5a59c8e0abc27ac6027a51dc7b42afe1cac28d7362c587712c145fadf0f99d1e2cda60dc5fec084663a6252'
            '09a4e28a28afc994d8774250dabbd8768142e2f31302df6b8a65454b770fa4df2dedd2a28a9bebe702f90f0b13979ad23c09fd76c3a18000703de8c3d8463577'
            'c391ead188a364ff0b93a28fdcdb845137dfb3e9e707d73b762a5c70529b4f1097d76e2662e495d598deddee78c4f1d80a3fe472cd237cc4512f1e16d4bb66e0'
            'd7e1604b4337541d20c24bb1b914264e684d190d049e65678d33be3df36a2693d8d5626cd210094681b2e7b9e0c6de30a56e5f20ea1cc82d79da4fa62a956e38'
            '0942e7819a4ba8472d946e0fee797e44b197c03b9da8c2a9f902df756841460613a1665dfe4f689e9e73e3c6a232860ff74468be90649d6c39e6c4fbeb2d12a4'
            '5cb2a2d93f7f692c52ea905479ab1d5f3f394b48fe7ff4f41a5ee1b0defd4be30ef724e59c93640e2111d5987e9980839800c20eb2ef62c4b7fbc948d5de0189'
            'ec3a06a5d49b34432cf160c1f6abf80cccadd58138c6d41bc6fdc7d58797583756df7aad5c10247711dea2b5b020ecca4e77ab48fb4a2efd181dd9abce3a3d86'
            '5cb075ccaba80bd69df1ef2160e6fa264b2303e13f72bf997c41379e526276e2f9981cc3d79fbbe261710f064bfe5629f1c3378424d0341c8b00e762d6c1a927'
            'ee4b0329326402d54e9307494f43adc22d8a7f8759fdced64cb9972bc614110912e2ba689baec24efd5d28b9e0044eb22bfe83895afff1e6e8c8c9dd33a1a48a'
            'f839c28a7716be8cfe43e5ec23d40dd8da4af53c675c1e222b97a53018b6759bfb91e225439e61f513243c6bc68a99d66e75145fb39c293736d6d183239b3b55'
            'cfff090cc6e6b177e8a41df9ba880565916af92775fdaa80d2727e9a30ded68c6e3c1434eb4bb9dc45b8b996fc6db0565bd374e0ab50a07cf9dd08467772b71d'
            '93f5cdc60c0c39b522ba3c28dd4381e67b34adf4dc17655a8cba0ba9280204ec5185f2d66d8d553a447387915876bdca313828b443797aa98da1ca3047fc4a7e'
            'e70593efda42e30bdc44ce4bab1bc77bad655a87fb3b1f5df1da0d3b92ded581485d5b11d0df0e4053b40c46b35cb67251ace83e3130a936cc0d8ea457eb21bc'
            '01217be38c97a40017b54efe64f63ece5b72185cf33e3d1b3e14c3fec6a8691c62aa605fc243073ece2c333a52a2a48c04b56cfbf90f2be8a94371fb41c409c7'
            'cb3424ff306bbd6a84c77dc1b87a98c06ec5c2e4ff995ef3b97aff63d3562aacb1963d36bd96a0c5b02e7cbbb6c79ab0c6dd7bdb06e39d2255055afafda35ee2'
            '3a075481b3cb2c8cd4a077d1cebcf158485b0092520c3938f6ce5a07e5fc061061945f190b15b5d118da236c793e5484fa1efdd87ea1ff8d38f90ec81d657be4'
            '323009c5882deed87d7a91ad590ba62f534b3c12a893e4d8263048595b2fdd9b524c02ca2017979da46b475169f5cbdddfc135d1a429c96e09b9402b13c6dfdb'
            '716e2bf2c28a64ff0248fe8e1ad008752194fa00d2586e05e1389a179116cc215e97496c22b5201e07dae44130c1e50ce20da573417c037bfb7e1803f46c35d7')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
