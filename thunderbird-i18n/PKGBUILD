pkgname=thunderbird-i18n
pkgver=45.7.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('5a96206f4f0ad0f85aa9141390c9799256c3a93d6548a649fa5a8eacc7a5423fe7dcb54cb2a5834be1c2b4087c6601b791332fa1d8bf41166bb3f601cb3d66f2'
            '54b5d3140fa407e35ca324f7c3b6802543f0f87c52782a7a66d375cd11bf7fd755de79df6098ccb457ec9309247b6f9ae0a5f58f41f6047ac8c4c8c711627a57'
            'dade7f2ac3d997b745c1556d8a5c73a79fb2cb0169aba3d9fe4249286220f7e6b54a7feb5877d9f14bdb77ba8e3c5a2d6d653f16779c0e628a0bafb18dc1dbb3'
            '0afc823f18f57ed2adb3e153999bce89ebf512a907c22c52fde6a7707fab2f3d4c0d456b36ee883511ada05b4ee468b0b180b90750227acee71da47f58a497fd'
            'a176a458ad0ea3d5447ea60cb554f8a5d2158c6224afa3b4c2f238e1fa55db9b96fe84433b6723f3a1dc73702447c5c129fca100d7bb9ac3a22a076df91824eb'
            '5aeaf3359e1f88d5a7ddf19df0cde007320c279b850933c930340a0bed5a054c21fbab07975403ec9068c5db5c7b1922443cd79d5d48e1d0d1dcac4bf30b7fdb'
            'eadadeb70ecbdaf2782f76577e11c4dd3a955d209bd180f12c9235d4574031f2a24f9142e29ca450e64e0e39d0206af120fabcb6fefa3e7ea583e4375da17451'
            '094506ffd7c2900c0abc9628d2cb3e980431c67b8545b72e84ed5977c270ca2969572040b5f22321e84aa24582c2b2ffab90b7970a0389868d3e62c53af57785'
            'bca2f569eb4a3ca22f3bed502b66a4e4fb6b461b1e1b5d35cd01d311057bb038bfca52f590c560ee2e9bb3f274c9151b82609dfe96c42216e8e4989452bcef1a'
            '82f78c4e7eaf7556e0e8f7450e8a4f11144d9d5ed4a0f6bfbfad8e7bc257524338c5ee20097cdb8e21b76e957f235df95c37c4008e634869dde26202cf365d84'
            '0a54cc8de70c45665033e08455956142e24263ea08849b5a9d5087ea41e2546c960b5d671f2e21bcfab16681a92a64c3eb27c81ed75df792bc8d70097c6c2689'
            '1a3fa43370a0260f866a8736c4706102add7c9d53ae350e131e395b7fae22db68ef7ab9d2f762c8cff02a7587d980ddb442381376897fa78f03e242dcf67920a'
            '0867aee01af061c78d840d87f5e509d98a977f06f8abb9a87e996c5fa355dc147e8a2bef8a7fb27c73efe4fdb574fa67f58c6ab456ed869349b991ca684a31bb'
            'e26b7a11b2089192df345175e1daa61f11ac070b3ff054b5cea1583e31b53215edb7189f7c6e31cde19022696388991299e2d77a8020fd78514091393f731581'
            'e0f8e3bce998d97e2660c8a5803de3b995f8238c4f5dcdbabce377594628e4e11819b6b21ccf3b593f8925e9fd0389898287ae4752a35894c3f747122e824f56'
            'f4005df63644dfdfa25c3f5e8a9ca4309ab4533f3868aaaf8eb72f94713d18af3ab076bef10dba227462d20aeaa18407ff497cbcb6ad7176e5db95198335fcb9'
            'e7660ad50f9d82750139f464c05f5a0246b5379535ec44eea3a06d0296ff4095c8fa67151699204e1ba0256ab1d5d96c5f312cfc05881e1cc59dc2da66f85982'
            '86c7893b602f4d461ca28431000f23030729054ad859efdf38b51d6d56c8eef63d29765706e2e5210043de012b68a4f13d6f40f63363582ec52383fa06e72ccc'
            '04a02a44b824c39eed1c3b8cbd45f7a18c0e7b616f502d4d1eea01ded1b847e4995d26f50192c2e53f2585cb300c68e90f2eafc72e43a7decfb90758ec5efeef'
            '18ad3d822b1ea8b9dd277d50a2b7ff408d07206a38be381e71fcfcf3d3b473da9ed0da914c33cc70748235eac9ee61627ebb240b5cbda582f3fd2cd9e831de1f'
            'ff8921b3fded9758e1a26ed40ff26e1206866cd2faeb72ae958a68056a6a45b5ff1ffcb63778816110bb2adcd7836138a0df8d096a6205f5e0072621d6c70f60'
            '882d190fef6a1ccf7bdd89c67628e7798c3c5611cb2e5bc3b3202caadb1923d985adcad809e3809fa645dc6cb968b5564e576c0db58b97856e9257abde6177e3'
            'c7a815158c55c4a915f6a5c7fc3eb06ed0b3e49372973d950fde427d46c55636f6b0c5c62da8d04dc23c68b7500d0e50763a9d19661f0141ad5f43d7f80130c5'
            '26afad70602e15a168d86ce0a16687703a833d1f53220fd895dd8ae33894d2b66bcbe32b668b8e8c7b6783f38b37a27360950bcef33aad3827b049fc399bcd70'
            '1511ee83ce7c8c3d2dbe1683d362d3a5765c9d4d8452f4d03ba6674468308fca89983f52641369e2c83cb1b5ca10489db52dbac4533002fba41e7a870faae346'
            '46095049189dcb205bdfc650063da924d91dfafa9e2422034c270525d0f5d51c59fce3b92e849bddeabf40fd23327e813a1712f319edaffa21560b3f637a81e0'
            '4f1c8b8a16ae085bb86ea023e22b6d8eeb21c72c831827927d88d67dbec74a4317c96f81497be145c9699fc59fb3967361c9eb94deb488a572fda2bf71190654'
            '894ada8af60db65dda00d6b06afbe9ef6b5a4f471a480ce3501cb95379b91528d66f15e2eadb7d1345dd9cd6b8f7f4b163f857e8cd46381da85ff68c03f53f1f'
            '89b6a53b041a6524ee727489cf13b5b77146a36b112a77ed21a93ded186b231b55ad174825947808645d9855123658956e49d99f94eeef2bbcdaff0d90b5258e'
            '73dd8f500a47e0abc6c810a7856e719880d1eac078a166ee8ae827570ada59a6a83e1ff539a43a71d1c130e66858a9094a37b975ee281f4300bee44bdd3e724f'
            '9c50f7ce81466aab091d8f65cc0066be6cf614f18996301e7f0bfba9c7c3096f0cd45a918222c76e4ae30bce8a3ca28c89b703f1a819f8f5de6fc9c1f0d0de14'
            '73013f9aca65f23ea54555aa9b6465870fcd3acd47acc049a93a3d269d1ce005b1c5a8437a83bdebe27693fd85c43129478909c82c137e97e49b678ffcef8685'
            '58ce6611ce084fb21438c124cca7156dc61db212cb641b271b16513e5e42450058edd8686a37683e61a95adfdfef5be77adf7875b167229f41bc4e92d7508879'
            '88e69f0b9d91f46a8c4a58a9d130e4039634da19e1934a2c7f7332bfaa2839e8f67cb5a4660070fbee459780e7890bba05b78eafd3de62c54c1dc009cfc8f8c6'
            '1ccb6928010278e8c00fd5f77a6186e9fd7947ac08b1e3facae829319c6f25530372f03a1d1d97afaf4193b3fc61371b42bcbeee9a7c6fa98c9cf586a04fe019'
            '145c982ce4c6c8879a263a70dd7e7a4f5c902153327e673f92440f2e1b79e4082d75be091a97778451a5f3034c7ff778a64d175f87d24b3cfb461b2fd40d78e2'
            'c70b89c315df2178a0b21ab76993144a44cd96b20960c15e19739cfc9e40420e9a2a0c0638e6ed9aa4d0ae535afbbdd5d2247d7f00a7b58504e563028a4d3c0d'
            '45f2e7814617fb67584c1cbb6c7bbd7ad2866454f4b36f4d9822852daf56a5a0fe0b8fcbbf1c7f89279c06aff6af060731ce418bb0b5dcceb3bf843ed6ef2771'
            '6943c8faab9f51684a6618802143002fe500c05d885a31c14fd9feb08c8c413ef6798cb79ac54d2c9e0fd424b27ac1e14cdbc5359a4c852a8dd3c6200a6c7592'
            '432ac66229bf78418bf3ca8762a9b6e0a1f543e56c5ec11a874559b73ad8c3d9c059bf9a5cc3b3d733ac40833071a38d3ffa11aacb68fa190734b3c85fbfecc8'
            '70a2ee5553812fc4ac2f08b2c19eb9a90a5c92be451e49392a052608ae59b61035c8438a0656ffde3bf5dde4aba0e06ce92684f2944db8dc7792889b05aec9f6'
            '8937e43bfa3171c42f2dc5b5724d87995c8366b58a69360eb8aa0004244fdfe01b5a6bcfb7ad85667099211323d035fd1f0cf77c064fac02db3ff731bb95fa2f'
            '6536a629f3c30830c86b7e3e598e805b4bdae3b5e160f489bd431dcf718ecb2fa796cc4f36146e8524e9e181264e316e35c810a289ce13edea83c3d22c63b7a4'
            'fa4daf1afc7a80b7a0cbfc26733f731b5a2897c9d8df204e183ee8677a789ce921322c7dcf09f0d3e77a1b045dbcc117e3648047a589d7b7d05ebe5bf59d7b43'
            '7a4c2ad467bcae42a89f02003358934cfd0a4dce1acef4c8712ac91b3f0f961428ebb6b9fd806e8134e4b9673ca7939a8892bd0d9681e431f7b8d2c9c13490af'
            '8fd31e3d3473cf8dc9ac09a89cdc513c419d590992f8647b7deade1787b56519b6b1f14df54ae51aa3512ea6c12c9a01b43861744767532667d32576923f33d3'
            '3fa30abfccd946980ca4a205b876f1be7a671378fcf19c700ca793ad1cbe9bfe6709be621a6008e6cc096a81606fa5afec29ef299b4b324407e0f6fb50d32835'
            'd522ef159b428f2fa9dc76b947a91c6f6cbca4831542d823ed089ba0d0cf65dee7a0ce0b1c22cbf92aeaddbd0e472f9cd5b87998741b50830eed323f56925f7f'
            'b648960ede48239ee86e483116a8be2ae5c78bad27cb2ce8b0b4e2a75b20f9d4f1d3029b03c107df8bff7cd0d90b281492496cd376bfb02e7f39a8ba8197d653'
            '06d6fd69e118d9abce6021e61cf0e21118afb25675073b7af6fa7ad84c05a3ca942ced68bd8deeec8b4d2d2f355fdb28f14ae22675418bdab12ebbbfc05b43b4'
            '2cc25e0418281bf2f26e2c252eee2c2df0f0d00ea26b7cbafa1de716c65449c741165074bcc70770f94233946172f083babc011a7360e8b82e6adfaa986d65f5'
            '45e7575c1c88dcaa40c159748f4804dda1ca49dc9a4e130142d5a5384fcc7e4be517a92a0e34ae904135608019313bc4c1d824b6ddf4a836dc4ef93a33f4fc91'
            'aa506f2b118e7ccc5df0f9133f2de0347c716da2f1c776e4b8595ed6767a1343be9dca399a7832d5f22251cc472368db18b238141230fccd9f2e1b383657c362'
            '6c7bca994437d9fc3e3186ac1fbd4e7eb7d8a0e9257d54a0dd812ae0cc49e200066f5b4fdecff189e4fc3e1948290a1ace5b6d53df4385094a73c31aa6574e57'
            'a37c073a77a46a16eccdd6536db195bd00eb9973d0307c021dbf89d24e4c79f12b556967bb1a35bc5a5660fd30e2f8682248aab02ddde26700261bb642b5f496')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
