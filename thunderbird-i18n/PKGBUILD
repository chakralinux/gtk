pkgname=thunderbird-i18n
pkgver=38.1.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
md5sums=('3e37f70ab3467ebe4b1304c590be9d78'
         '02233534a53550d86cfb9e5338e3acfc'
         'db93eac183ca49f35c3b1d251c05e05e'
         '670a0eb395f5578825b6281df291418d'
         '6860a16915693947400391c20de596c3'
         '61aff2efffacbece4f7413d3ea38c781'
         'fee8132186225123130940bae96ffab2'
         'ffcdeb7733d0d88ba73c6b0a9843e2de'
         '70ec88bc302b2291173edf6adb9b4ae3'
         '3a3edee353cffe03626ff63230e676d7'
         'a4ba3e6b27ae64e5c2df11f40bd807d3'
         '6c17d2bf5998f11ea7dd1eb7ff809255'
         'e23cb844174d51e1d4c2f29c5ef51ca6'
         'eea230f8ce8f3e00bf027992826fce14'
         '9bbcd1314f15998d20b7b9bf82e43927'
         'f796ffbf5bc4b8406b07d9b5627b080e'
         'e6535e64cd48ced38b6fabf69683dbcf'
         '15e90370f75a3d68ca7761eb6c9dd642'
         'ba502232a88768270b914d7af1448a27'
         '1a4902823a6afb4d5fec602df5fb4c11'
         'af0da2aecffc491fe01de8cc0d803353'
         'cddea11dbefff0a5f56f016e16c8c2c3'
         '11176c97bc2f4a58af5d0c3f72f125fd'
         '698519dde310b06b89dd6f117dc0b16c'
         '7988a5ab61192388ec5379837813ee55'
         'f24cf89e782355476c6e0533c0db6172'
         'aea31e07c8e2d0de347275c5631b7e88'
         '75870a487195b5b3a7cd182611965e7d'
         '5c55bbd450be4c3550d37aaaee09f02d'
         '07b2317ef95142593a046156e1223486'
         '42e13e6dd7f4fe31566d5639199c6e4b'
         'ae1b1bc94a3476d2b64cf334da1ad858'
         'bc396d9b47763b162dcc53fad6fc759a'
         'd2d85531444ef7aaa1b4172456b6dc17'
         'a91ee8bf60363a310bf2d761f6a2ee3c'
         '4b07c728fe63e06af4a7cc83b641bcdd'
         '2c28901f6ddf3cee69feaa0718113ec4'
         'c69e2e514ccbb24d047efe8ffd8cad30'
         'cc39944d6b32618ab6dea89185b28dc4'
         '1d238b017200714168c2789afe099ade'
         '154088327204dd5e0aa37daf4f38da95'
         'b417040efdcadbcbb53546402a9fc5c5'
         'a03fe1d7a67a67c5c413ff1921d7969b'
         '78f2aca1bfd9166934cbb71784a4e2f4'
         'e039fd7c79e706b2eb9ec1faeb1423b6'
         'f968ad9686d4af8366ea22532d459c0e'
         'c8334674ca388203a1a29fefff164498'
         '44cd39dd52888e5937f32f56f0ae8ac8'
         '7d402d8ea6a0903257f929f7e0e8579c'
         '7395a80664b781e36a02a46c1444ea96'
         '4034dd1310756d7d825c58e073705a8a'
         '0fccded36c0446143cb311ab8c162a97'
         '9eb5452031b0adf37c000e58b740c4f8'
         '4ff98b90e1f62ed7f73d1b72965c58f0'
         'e29d516bec6d58ffecdf056dded6f573')


pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
