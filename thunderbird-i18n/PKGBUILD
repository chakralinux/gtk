pkgname=thunderbird-i18n
pkgver=45.4.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('8c27334e4fbf573eb31410b412fc16d8dd1aa56a4a9e0a7eaa2e55aa3678a2f98f60b30fbb72b384a6a804d75972e4ca1e078e673f5eb8eea04013bf714e38fe'
            'd7497c8030324c4286263ba6c19c592ab30eeb4532a08958fa07f9d61a90e2dda319529c443cbbeba9dd436d2290114bd5aa08125c0503d1a1866e124553d4b2'
            'bd236f78a2448788e6cbdfe18cb57573e18ebb86e0086db1ebb01e1c9a3f5c93ce135a39b6e0c9b33f0ed185e80a3b7ede7a98a2295e872864ff5ab890355364'
            'f1ff590a3a9f64ceca07d74de398e776c458d548873f780135001181cc112202097b5d34e88cf7c7d18b5e458d985d4184ec0a9fb9ec61ed8c9862be52a40a34'
            '264f5a9b34ad9e12b4f2bc2019d78d1429c07eb6cdec60a70c5ae83b81554acaf00a673afedcc83c149e323365cf51df35f082004993644d3c0785c5199043b6'
            '595f0e93c668abbefa2f3d259181a363dac3a4787d71a5da35f7c4cbf750cee15e0ac7276b201ff1e363b9dbe8094338b13784a50865c05b3aa0e08abacbfa88'
            '373a17904b11064e507b1ddef1b89d9bc1ddef9a5b9d0a16dd4094d87f112db38b55d90416d891e9d585648cce46c3d27f9d1a987859f4b0fc20c3953d9300ec'
            '7ddc7b7de82fe916e4c3888fc3400414dfc21d5f3190de2c035809e494b7ce1ba64d16bff19b9f021c175ff87eae265edc131725b3c585a5e4d59cba345c42b8'
            'e8dada2025788a0f439e5ef3aa5136392b9066cebbf67a2878362e9868c15f405a569d83a3d7bc59664909019055c857dab29a4a18246efbcdd6d47b0e8ea488'
            '6a9ace591d4d9f21137c151ea1decdd2aaedef29f8f57b209fbd7029df981ded0397ffa6e99851e781410fedb90fde010ad6cf02674211d95ad0934716c2b78a'
            'e3858463f4defc9aa7bfa7215aa9e25fb3a4eb75ed6fafdd6c44bb3c775653209f2921a52acbd4e3bcaa6824e8e4615619729d10f4bc5fc45026c55e6907c05b'
            '036831c511b80b63422776e92762ee21532063b8a48dfecdf9e8c399cdfa25f43e3ab2f7570bc067dbc07022b40eeec46b789bfef08309565408cb12af94293c'
            '851aaff8e36960fb522ac123979a945ad3d765636f1aea70a146e7f8d1b9f92c4a108a51ea3cceb6dcf64e47ca36f9ed45f3d4ad1ad62bf844a9625eae01a527'
            'b507f7e45556df78dece20c2159dc6ce3df0a823a82157e66b8f7a5b18b2b5a014f816f8a52d7af7555af3637d00e42184596bb9edc8af6290023928a2d50045'
            '5d09e83f12f81dec1e76dbb73b566e0402e1327241d8b5aa1a9109179fd5058e5958ed8bd161d1ed88e91f33dd03398d974ace26b1548d1cb3bcf6282dbfc987'
            'f61a47328acdcb5cf7c440b0dc1b5a811a8a172b40264463de056f65ca1f59a4d9f14d997ffa394c5aed494fcf21e09dac0c5f944ba1cd29d557498ad88169ef'
            '8afdccd41bcca3f9b96a8e5bf66b750b7dc55237704f49921fb15910e230613c0ca785f3443a12e3c12e85a2e35004d0bdd7806e6765e69dc28e93e724c36721'
            '40ec0abaeb7541fce4328ab7bb5dd30c94f2dc8d64b8133c5fbb362d86b36f583e524caa8d2d2334a0266cae1d19812cba8bd46b643c2e15a7d11bf0850d4228'
            '70064b499e9acf37d6fde2ce0323de19f65dd972aa4e589d4632dba8b68dcf2f3a3941fb05c0a776aeddbc196a6d7df17ed18a2f05ba97af4d5907707b06f8c4'
            '841d6916fc859be626edf06715f94381e46857184996855bad7bd7e81efb84dedc895d6ac3164b713f30d010f9584d9d61ab1feabdd1e1d131d226eb707f3589'
            '4a71874900906285cc47ff28df998002118b053a4be1d9d0099b00c53630a7310e1426b74e7424e3c3caddba1d574f84cfffb2c0fba556fdc709ffb8a54a4b2c'
            'd37e1afe65491d5578b60d937b7a858cd8779cbeaa586803234b7a29ebf41a5a7f705ba4f04c6ecaaf1593b3561b4246d71ee83d9699f691caf717a48afb0ef7'
            '9f28b5d46c4d997973b3b4e93cccfd604087a2b62a6b2759f6024a8b1f5f7b81dc51f5eed753cb7f9acfb23483ea5e228bfc884f6160e3b3282c84368efe3c09'
            'e62d835a4ccd7bca2eed4f5b46378c2214bb3a9a6d32492b77f59de8431a20d6d2c752a5103d42fcf33a131b2d0ab0849de71bc4a827da0c81aac3c607364130'
            'f89df8b547cd3d4127e647549576cd29363cdbcdd4457b5b8f1468e8e154cf8743f0749364a0d633f3eb3452a4e2b03d5044b960c8997d1cbfbf9cde73b99cdb'
            'b8cb794db48570e776f04336dfe7637a419867f009f7a711c8c803379e77ae53e70f90dd14f34246c221ff43df00ddee1e06c522b6275ca8167f34e1975265a4'
            'dcc5e9fca05b9849863771bb6193a4b58fc2edcb9d3369feae4adf5c5be24cffd8aad69001b91419d84427dc9a4a3c8ddfeea56eb033dff7998f6d19858c6440'
            '5029359631ef0980f57bd360d307bc7f5faf88ee6446882ad66f3ab4faf3536ea0661333724e6c259106eefa71e742de9ad3520d486ab75f69ef55a55b870b62'
            'a2b72163b927a99504f9164cb3d0b7c51f0c6caad257576e69f51010d6ac513ae71142beddb320807fc94c18fa947e9a721fff505563b5c7f7d29cdcb13f1828'
            'b6e682c4cb8b56769b00e335f2ca815bd9ecfad2428060f1f6cff1e4f6f6f9ff8dc79cbf5f9e9477a9567ecb81a7bea431be801be257f682a16a02e7755c162f'
            'd9c71969131e28d7d612b70acd0475d8a7c3d3a48eb230278361fc80a7ad91f5b75730685c9b1c727b253549a76100fa4bcc157e2abd7a2714a25e3ac80e73e3'
            '0a6ed50ed53e719b21fdc16559f9c6b0242752e26829d5eb0ca8ba14523f099c0d070eab6ea4af6193cef3d3de13bfb4f6dae86839b5d53d2715e15f510e0559'
            '095e5c4ecdd437e657ca1856f7fe6e5654c1280ff6ef51d66cdf72851044c9d82d9d2f652a2b3b3ae11db70f291a786e9b48da46c932515d7bfcb6df4ec05d7d'
            '1bc7b732fcb4574a8a1de8b849904f04dd7494bdbf74e8462812f34326539af56f39381aea9de0f188e79518978ed050bbb66b38130b0f8e900c9da5997fa06a'
            'f36deb5a12b255f6bc69f043bfcf846a1d23ea4c55d79079f64b8837896240a547976ec708a99570681c9f878bb6cf4961a38d962ab2bf05356265e7a037bad7'
            '532d5700e135a8746c605ae100238a27ffaa5cc55e766f8440d6fbfc0fd33e536b5fa4a1e866ec9df4c4c5b60da4e883cf6dd0d0a0882a64b41148f77aebbc47'
            '2f09934739165c4714323132c44d7127ce67c31b2209d37b2f794cf1038ebb1dff7cbd1e41cba0a0e7d2a914339d5216151c7660ebac7c9347b7aab474dd9ee6'
            'e2127274f7613968c4b24c9d4fbd0d44b29dabff2498c41c51647cd0c95e47a897ddd07bf6085c05058247d2457a34494126cf13cc849fe2aa43b6cb24edd707'
            'a9a33138f89fad6d7bdb3db71497c39992da866710141e18db281a8ccba00e052a5c490d5a791c227902b35c395175426505972cf6584ceaa39160137def5d28'
            '7a9d500facf05b1918f3a2a04de2bbc788ae1689e1f348dd6fc5c9cb69c26847bc3612fe4bc6008f4b87c928500d8f2bc19f0ec174fe12fe9d7e8dfc6e0a28c2'
            'b69e51de8f8f9051c57410720e22c13da3fb1e724e8872214ca0ee3a28d7446ad5813486ef6310fa3f5d7f1c774f27dd861eb7e97c6692e7008ae6c612de99f9'
            '904292bcc2f0acdd332b8bf389451a21d684e75a654cc35cd4d4be76a41417ce336735f9bfc3eacbe4f7f20f3de1db7411243d24d9af71a3c12d1060252e4e21'
            '2ff043cf364f7b2874953236134a282e901b505a2124d99919c91e0b6684079c3f4c0e2b905d28bc8379361e07d65504a8adfb5d9261a2bae49c2c8b2a0b0556'
            '83f572af7d6f16b8b3f4f4d6c4369067b3780ef9f8b9dee12523e62143bba1213475861b9fb7bfbabb6aa674b740fad74b4e954c63d0b3f13e02b08b0b82c52a'
            'cd2d3defe66604bcaa5c6b40d48e5d3fca71e0632830465d123fca521cf3c8adfc4b937e8b27355fe888188363f9e856e5e9f66aeac321567e3040e653faf698'
            '5dbeb963f3fc02924ebb05f8119b3f41df82b8bdfdb0738a74b25d8fe95e1403279b1fc52329e20c1666444600757ede8fc8e0563fa4f6b93797ad560b2f6822'
            '3d7330872b4c9e265d582bb9b58d7b7740d18185d8bbac13631cac36e40c27321f505a4d9ae5ff4cb4ce3cdca9924a9e16cb3021e04c9190eea95ceba211832d'
            '4f0014a95b3c29ef4c56d0d2af7ff2336defe799a404cc4847c04fcf855cd270034dddedef61825bd2aacbf02a09338df90fc92b612a3b1ffb4e2eec02c12c81'
            '6805d95faba6a1a725bc340b437c3e6a5cdad5b733481a9f4a0c62510b49b62054c692391dbb2758e27a72a6080eccd5783b7388df5b0cb5ff02798778152c78'
            'b1f49b2c66157807ca656a717ef62d47ecec375108d4a9b3f3f309e1ff10fd798a9ee77f49ee4d73e871335947aa4c666dc5e73b3482d18534ac26062c2a6481'
            'fe2d4cb5e5f017b2c30551c2a02a40c7965551cdb6b53873c222758442679c4c7593209b8a9a03ddea331f53aa9ee3f53a3b48fdcc817cc68eaa167bfff9d9dd'
            '1b961362f5b51dcfd027df1c05867f02d1bd527eb4a0212cd982d956364d4eb09209d28287c1d45360c3610b52c55d679fdddfcf49e72e8aa8d5d1c8116a17bf'
            'f33e5225e13f98c6150c1dc68a447ea68730186aaa639ed417cf95e118b6f97469cb623389df43e89bf2c3eaef6e1c439a9225436b82e82db095f32d0f18055f'
            'a2e371bd81a6c02aa80ef7bf3bc9dba6c40a7b5ba0fd0bdf04a689ad97debac42e7a88406f3501d8bdddf1c689085838884ab92cb13cee3c6add4735b7f29098'
            '7cd3dfae653d40a78be654028542fa1c5166eafc2ff8e7b0dbdb6c6a6c8a34948751ceda0e22d3657484a9d2f320e1a2f325a0b09c40bc9045b7f53d93d027cf')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
