pkgname=thunderbird-i18n
pkgver=52.2.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('a6287ef448ca3da6448c5fc96a04ef544b0e16a44feb91cce2d02cb4127d1ddba1887034f7d71516122a4b59733a0b8d206c137aaf8b3e195a9ddaab20031730'
            '27ce23ab1293d270fc6368b2921e6efea4a79a9d6b20db0ab368bce0aeb23f5bf2356326259fbeceef1d69095e58ed77781729ed9f0297fec440a254f5340c51'
            '2cfc0da3da47951535fb3257a01a463a87d0878d13a054bc208b65f6385439b5312e258a9ec0feedec655184c77555a2e5776179defed8a5075b77ca755b8802'
            '2cde9fd6ada2a57d26b0da4d4b05513d1e8cbb4817112bd65743a69bc7447f414ac370b6b0a48e433ee4234e7d8bd0d67d8d9ca16ac20d7ebd2f33f4c8a2055d'
            '267c6ab6ea4d148796c3912285e5c99b567ea7336c3fe35a54705a93e2bfcd61a2ec8c16d213e5382c563dbf8f9f63e1a6a7ddf68022511aae7d8f69fddc0aad'
            'fbada6902991ec65ca9f1c110aa33bdeffe27c2b73c29efa1c1a0061b88758206bfc4fcea3096c7c0a021106e78c7bbd0f4a7f2bcb7ad5bafb1e1f8d30e5a3ff'
            '3c5a519f5fa7af5f549b4572c65ba26df120151c5526575f34d05360ac8adfab0d6770763810554682486251b2b579579598f6bb404f37475349bc4f79806ca2'
            '1fec932e4de5af6daf5beceb86d111eb6fd31b2e80627470789767cba3f14aaa0fccb595f733011522467608a64b75d66498b07b42b9cb418ca277cbe9c068d9'
            'e210cde6b1ea6c1ed98b37482587d499d700ed41915b4d96b10d34a1fa86b8f001d629c5c62746de57908edc18945559dabab2d330b468db0400e387f26c660f'
            'b0aed89758107085f8de8df3ad6df2e3afd3e8756d10e63bb8adf2c0d36f29388bea5729408ee9b9ea4debeee254cf0b8f414d1e89f2fb77bb2433ce84047458'
            '244385d8e0e81603527cdf8c9f0c70cfae2b2f94d4928db49aa8c90bb889187110432fe977f25541e09dbe4668d83875cc3c5c8bb639a2c9a16507296ebdfbeb'
            '82a35937c8de8683e8c22f028d78785738d2712cb17c344916e82bb1a072ba146bee286d0d179054b66374a780573c119e6191815ffad762c0a26112d357ce2c'
            'b4159e085803cd80c42bf45b6932d900c71cde01ee4e4a090641a2c25ead9a787687f956afea8e2f494e383c753179d601f3ad829e04566bb654bf24d7ca4634'
            '56b4154a3c9ab07c625fba602e72d33587891ae345e653815deb63196e403f4c55dc013b0b8c16efee46bec36712973a91ba0c33d0839b332e4229f15b5f3f46'
            'e73f96685aedebb2d9a1ebd1e2a353db3f0da6ca0f658fa17ce7adb5a69bf1fa551727907b81a2fbe926b65dfa0036f5ae2b000b09fd3ac4b87ce4b8bc25c2af'
            'c863d48d7c332a6ed511810edd8ef91308f90d0540d239f4b85cbd9751adeeadf3bf28a1160e910706adbe823310a4352b275532da4ecc9fda38a211f1bf63c7'
            'c611135ad185cb571936aa8d475d9bdcfbc13fcd248b0e01c5f59c0868307b5e15e130d4be0c592f12a37c0295edd6c737ed33c632c2181bffd522b8be7db186'
            'e8ef1d216ff09b2c156c38262d8dd2b0fd94f2468dced3fd579d3dbdbdd0e7e48b1843bdfc886337e5220f9dc2b203875bfb66496663d2f17eebddf45ca3a259'
            'f67565fbcc37b637a2ea22598bf17fe8c8db49fb1083b0f033087563e91e685a52849c9003a408c07471efcb24e35791ebef03e858dbda3b073b5d6954c03159'
            '2389dd562c57d21b7a877d13d6b833bc8e3995d3caacd396a6da6833c48eb725e668270def0ef2a70a1aba71244cbccb12605f0a5639d24ac82ac98d87c52a71'
            '63a909dd889cb9e50680c26a095a9129367aae719a9dbe3810c4d0de6de9d1325b0feed5bf5c03b900088c77b4507b15088d07995dcbd48293757810c0ae0f73'
            '4503207b71bad5dc363ba3fa218c134406a9b8c7d3bf34a40a49fd1ae3f984655eefc992a92b96a25e26c1bf7bf61cae6f4526fc735fe564a13d25fc177331d2'
            '867babfe1a1c0efe48944003aaa3970dac086d123980ad9ab1c63124e0e5a84524659e3f95c4a3af9f311ad103a4666f5f1e9408235dbd516f8de5dfc8fa9e9a'
            '7e84d47798d8708ff51306b739aa0993608cb2405e30c0a8d5e1dbb8199077317ddbc7e5f32324130f2fe028a5b37b56f760a713d9a3ab7b9085ce35ba3971a7'
            '92594703b3b50e35539b40b61025938d134c5d74b436923eaaa3b82cd6df8149d5c50553bb61ff39a7a31a1e407842416c241058065ce69e1fb854f7d0fbdddf'
            'e7df7b15e199ba28d143b5329c6bae3444d23bbd6ba8e25f8d2150d1aa041b091df7fcfed2fe9d32f64dbc0f58e20fe198c67305c91734d88546c7c14abdd439'
            'f1a8c9942e2137cfe9cbec430fe511ab043117d59ce30ba21a4688df70e4d3345d04e97da3dddd1d87b891a5a8bf22742da5206cd1fcd44bb65670938478592f'
            'c8976edf37a4d8a18c96acd4e7b1f43650d09f3ec9cd29a76793be139e39283ecbcd2885c0fb1eb2841f3749201120d877af9d16d4e193895819420e48b63f86'
            'a54f3398fa7477d07263a26fa35c2f7a0e8f1f805dab1691d8b77a8e2caf19551def2932eea24207e9c19b8556c6a559f566ce12b953360792129da2bbf570a1'
            '9ac424a2f14e55d2768b05a155bfd8d55d1699960658180003d5399b13d6167ddb7d2cba2b4b313e344ad61314076b5eaed45c641c123f5d9c1d791cbab714f3'
            'f8feaf9e121849d2ac634ad2b2b29406974123d78cdebf5b10be571f51920b7b5acceb624fd7c4c9908a36a322211d3425bbd80366845691ad0486f613fc7fbd'
            'd573cbb1351bfca26b4b4ea98cfe7f9826f7c36501e8a08b1b405cece06a19f661e54985381aee7b8c0308475222bea247f2ae27818bf9184ede9346080b8594'
            '7f4a738c0ba298f472d2846132bf00ab1ac0f387740aff78ee7440f9ae32d530b92118727a1f411ebbc1a0b5c297dee418068e3c8de27bbc6863cd12cdc18f94'
            '0dc2b1627e5cbd1a8f8311466d41155ce1d1d2d46379a771611b36a94535586e280653666d768b4337b4b10b88ca38c7d52d31746b98d67101069cca26a0f3ef'
            '18f99eb73cc976fd7e00641cd51fe04a6e95ccd9bedac670364cff6a41ec5cd25c790fa9b94bb7b3c95a07f6e1ac498829687a1034aedb4e0f0f63e737daf332'
            '23ce777d84661480bca8c3b6a4abca04f64f6c66e3920b70705bd62aedcf99aa84b087381af898723da357d0f5e7d544b7a8d42334f89e78db93a7fde014737e'
            '8865c91767ff2f498388d3258951c254a17ce6cb32404f3588da2878832bffbcd1e7dbd91decabe230887b7bc4317087624cb5983de94401b9620a2f1a90b79b'
            '0f5566137427c2ba5b51f0005a09cfa26188efa8a1e189f8074c3ad30b0512525530ce80836054b98cb33210a657afb83850ad740202d831a6c89194f197265c'
            '9b1e4c4edbd665ae5e42f580471d032a22715108ca30ec66ce8cb28799751a8b5b88dd9cf5f2b9e0456478313bf0da11deb4e71bf9336d4323f79659d9a189a3'
            '83c22077c77db57df96e84b73c4001005d5adcedc919ba2219ec2794b5f25d1223216c9aae9c8dcdbf5d8eef0a326110ecbb91b55cce3ae5853429e03754f386'
            '4eaa385e99f11662546805c44e9f983e1d0cc3a0cd5591c5600dc85b5a035c0012540bdfeb8e4469159ac5b2a9311172fcf2bd5b9710630c453c4563c6f90f33'
            'ae5a089051daceddf7043b770c844219d160cc643e61ecc2597eb620ced95372e6e4a7c208cdb48a2729cb4bc1a67c2792f897c6d7f915e4848b0feac6ede07f'
            '8fe70188b4cddca4abe6a649ed6b6077bb9ebf3619a357b562e199be5e0fcd30981f2fc8b32b214d8f6be366f9e03c7ec24aa9e692d5d6b4a05f31c0cc1baeef'
            '7f176d66542a06d1d08bbbd777bf9e32c8fabba43459652781fab5fd98cf1206cda28ea519d6d737233adaa3c37e453984b332f6522b15642830037c7c206a6f'
            'd02c567f477c605fe3dbfc12bc1557e3aa6f5151a482b78c08f781f07ebbbcb8faba49f94758eab738614f75b85ff4cef4653956cffca0f331c2cf9df520c04a'
            'ee2a87f1c54e7440a6f06446d488a8c105110c12c086b1d196bafb930bc9c77f442053703458711321120bbd81ed844067cd0b62bc5a10c56ca7e32a87049393'
            '961f5d8bdd3740d61eb1299bc56e3c6a2ee3ea3875859e1586385b205ed45561d23a46e31c448f48de7b440483594af8d51b0b55f6949c1851b510b39c62d691'
            'e1d52f4c4c15b338a22fa01fa76a5e657883517b4b9a343869d197fb28b2fe4518f1a81f38c0204004614f97840c6f14304460d265a1994ac387cd6ab8abe034'
            'a88142765df5e68672e38929493a458e80f5d39061b625c6f02651ccc262b6990e29c10ef287f4decab476545f5fd2ec713f108e8d44c5cb20ddc400fd6a2a40'
            'a90805cd252ba101da3da979b485f260b2997106c6f8e7908a1366d0d2a49372a95cf3e42dde4a339e0845900e15b0b717bb38a84a9cece470352be201a283e7'
            'd5da902b48d4274f503ba14f2e6ac1e8c066612ceb2c727ecb62dc8fc3e82362f52582b12c944a22d0b4b7f4098a0bc1d0ebf41fc2acfe62b480d92fe05c4493'
            'b48f6325c34750afdc9eb2464b1be2a06613f0e2da2793ea65601fe5b2ff17a23fa07d2b25df72269fbd8bbd64f00e3684022e67127f6bb0e18a6c26b8d77e86'
            'fa4338f4f5830c1b9af37b3a6b6113b0527e50c6daba7952dd8a73c562dee4e6947427dcd4add4139e139d95645e05471f85aa556e7b49e9fbd6b77094c61a07'
            '37f6bc2b6677dd8144c1e393a558954f3cec27c312718bdc1eee86ee1f6e663c8bfa33112981cfa23dd3a852e66f828290579edcd9379803db753c7b7d8e4bd5'
            '7c14a9fed640e16df0e67e71fc80e9f3a7de245a6d51c0ee4759c431d7b37a4f113b589b93c59a740425433cbd02d8e26db84df929b4e1544659add6b6a9f8d4')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
