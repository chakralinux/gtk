pkgname=thunderbird-i18n
pkgver=45.1.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('63e12aca319f37aa8b810f2043ce8c83f2bf51b5c71b9207a99768e247ff5a26bb6f8786b94db0370db9ce54986511da682c9288147d9d3c835efaaa52a9cf7e'
            '0859ff4544ba5bf91556d6ee996d9f548c8535482768bbb9949a6a519374671e11eeeed9efe72e9eba033d45f52442e68659c74f90d36a0cc0e0be8f74ce0f84'
            'b22f66af38a688a75d37a71f2978c83a92def6ba3368de1cb18ca19b1329f49e443705c9a950d6a2e52102895801e442363285c68e51ab613343f0aa02f6d926'
            '58e9e958a755e824ea5d1a83c4d6b5f41c63ca4be7b02939b19ab4aac33bb927c6561286351e441a693896186fd95058f3ef04a6ff14f7564f17f76d1740e744'
            '829894d61d4218fe192aa3257a1551a069329a3317d3fed061e4bce26ca7312764e5596de313765115ea53a169b2785e219011625ec710ac52578959adc0796d'
            '07e941b17e0f65b001df8d58f7ad11d939be1543505fd37d8c26ddad95db5753bbd406c1b39e749689e50a89ccc6fcb72684f60a0f4566f17d7b8d8540c9ea2d'
            '6b53787fcc4263c50b9939e6f0198f8fa7d93cae622993263a72d3db52f1ae3248c486bd1a72b1d58247f6e2a0b962e8e038251d16c86fa4625d487b180cdd0a'
            'a0472c6c17eb505f683a38d8b0574c0dd17f4603cc030de3b5eee1127d0be37fe03cb121d78a3f28e3e7f882f1f2f6e56d59ae3e2f0e5a32dad0487e5451889b'
            '44a91fdf87b236dea22408a4263a945f82519fb0a6f33bac95fcda073ccadbdedb40ec06111c9da399e3a500586d85f0968b5f7b250b1e1728e77d6bf3a970ad'
            '61d2710cd6017e8df7b90c492c5891a1784a76dcf13e46667c0bfb00a28a79621c4f6a6d9ce7688f810d31e1ba79102524955a613a3ca165eedc70317b209f7b'
            'ac195110b0881de0c91c4a5cb0df8d100f475ff5cb965b49ec61c892565cee3b36f3bc2ed5e09fe512ccaaa59a5007fc0e34344971d9efa17dd7456a0ae848c9'
            '82ec9d55ee930320235353da467bf24a2f6206ddc6d3941451bff717328bbc015d5a0f479ffdf4e9247c4b7ecbd6c510cb81a8375ae76c7601dfe51b0eca7885'
            '7fda12bd269042fc404471ed34735749c208f033da1c0f135a6b74f405da062a174f470457304401ca86cf6dd62f804874e37263ba6a14c7535039ab747e246e'
            '40ed8d9f1f6c5a65cd8c9484f973535ca7ef1c08357dc76fc3a443179ff97ddf9ba531e2b3e00cefd5796047830c55e7489c8a81bc326b7d841eb5edc4734c83'
            'ebc99c65eb767efa5967c570c314a90128d5ce5382c86358a9bfeb6ba6b1c5030f4719e3b8ca19cdc1950690136a28f6d7dab861e8aa3b018cc8cf751c75ba23'
            '6dd4a86d3f7c567f6a8bf0d68b3f89d2087979d5407d80c7144cda26dfdbe097405be07cc8a38f3e091a5725c7df88c63615eda7996366cab5e72532a24fc13b'
            '6a03355a51280d3cb9fa3ee0ffe8b96d125c4f6cacaef1263502ffb53665bd8d2f8c5c7541bc71e99ba2d4ccc0daf837ba6cf6a26ef3d1ca57d8208b2852c952'
            '0d6636481be368433790b074a272f83084d7399f7e4cacbd20fa8d1bc7b9d28947b87181e86d340912c7b8a21612151f28bec3ab64335171203fe38b93b09594'
            '9ee745854ff54d3df4285652205d3f9d72579ba249504c21722173cdcee266b01738f707e08c2275667494a6b643eee40df79d708e3d9e9d5c6c03c9f2f6964c'
            'a5169ff139bf36a81d6346115f2d2a1f9f0496004b5fbba6df846c9e6c930796730ca90ff78ec6827a47c43dfd740c1e72cf0609d2cc863f776970b6821d584c'
            '99055a046365d807a9f7bafed8d4927c7f532a5e936151bba3e631919ea31c8e2c6f9d82a3486b31006a18acac56d4173ce5edbfde4aec147c195876e66f27af'
            '6a34a079fd4ee40a1c473b68c810afa1191830211bc5e9cc037715fd732accbd938136349dd31dc4c8d9f13a123658f8ee2e4e4d17776c8b92ee8bf67f0a14cf'
            'b24ff715b70ac6c1aadf7cae827b9d6c45a5cb8027ae7005f90743b2a236c9e9546ed92dee1e9d24fbe2abc6d64ba72ecfb6d6741fb42f3bfb09e1ab647bb23b'
            '20fb0240216c6294a05acb38c8a58daa3385d790481d4d24575f495e89a7f04776c4a9839fd926c6f772b3cc8cfab5715aa47118bef3da145c4320d277cffd5c'
            'a784f5ab2ff3cd9dd0de13e9e725e65b01543a1422ef375e1d0442d48b943f6174041f3662f801fab4ced22d631ba208207d0ee3945440b42b9ddc786df507b1'
            '10e4363da2f6c1ae16dd90cef8ff312dde7ebdc9969ad3bc82ba6e4a6b1b47ec31ff5a233dd5eeef14769975472d08920e869511c7b45a1a44836ae77024209d'
            '94a1998039e9b5464b9a1b31853a7e377fb602d5b73f0de9ed45120b2d21750e720851e5ee960ec2059ea841fbb245642c4afd3c835252aa8eb4fedfec695cea'
            '20ad5fe29f1cd58650053b0ddf29ce2d11b6023fc1b8621eb832c0f53b686bb0ad818357cf6117f96885d77a42964d8e251159c9ee60e223cf6b0246d18c5108'
            'fb634641bc212457ed8762a605c56a45b42889dfd0aeefa0ccdd6992c18772e90facaf3b3cdb62c6000e15295f1095ddea5555adbd884175a07e801f8c40817a'
            '300e1ce89092c55624a596d4d2066c73a803e59e607295c5671f7274d971766c61db29c96f97fa9a7d43789483bc077d94cdd5cc319bf45e8ef8d096bccb1913'
            '1815752355a68fe497065d4d38020c46e060897dca2b4bf0291b5841ec7f7e7e008d8e8734ba5975c49880c21029ce509ce8b4fe1672a2922e3c47ccb374d959'
            '2ed9bd188dc689538572357acc3f212574c8717a2d3242690b955995b54ca510ac18988034a74c9af510453d0d510ed050a16421fac8930fd4f327585be6302e'
            '17b50125527881a1e2aaa7630588d947c8c146f38f4c9c35015589165cd69a30f798dc395f98f43ee2c5844d24ef8cb8ddfa3fd497cf7f6d2acfb246f18223a4'
            'bb95c2663dd3140923e6396628257ba7f743cfd4aaced81b80c0a71d19ebd756e1e37dd978036a2452184f1090381257ffc580d01ce2ed760e8878ab1a7e9890'
            'aeeaf7bc14d628370fff20306500447c478ff8608ae342177119bbbc8e09555206d583a2c92fd15f0c164d06759d7c6cebb97054257be1c952a50eefdeda1ab0'
            '5a170757193622a3f6e7e7e4dcb1d4121756562a62b7110c928557acf6aeabefeefbeaaeaca4d23667ebe006556b472b4ee4af12f5a04b4e5daf183aaba6c8e3'
            '3ae57aed907e2b5d444b6c25fd48711672f020c62e7acffcd95e0a9905f257d34bcb6a55ed522b5511344aa01ca05ff177cde25d98d0b2d68be248ef47bd233d'
            '9723c03109e9c0a79912391869a34f1f510418ad697d26c32b6f3380b765c9d67f10a493de7ff2ef34facf1520ae6c53940e7a878d803a83d097024594a3d532'
            'bf4295eb907ccaa098420de2cc4f5b7536f7c60aabc0584a4522605aeb8f642dfe1c03787d0fc0302150ec6940db497672fd4951c2c3e6f751d032bc097d4bd0'
            '2d3b37f1467f81920dc5a7b6078dd749e54f70da4c08b900f1ebf822372906b45c21c10af0278009914c674a56f35924e8ce4c9e1dca17230f0a56d2ad6dee53'
            '9cd35a7f548a4e4f1c1e0ac32438895d90318520ba4894205b3529f472a99ca819e829bcf4cc0bba3f438b39beef3020aaca7d575f5b628fee2b164ed3322cf8'
            '40a52d5e47aec070ba88d7d0ca85df440ffda72abb446a0eb724bf56a5b3aaec4f15284b5dfa914809d3535d33823f94ecb571200a2c220132eed6eb89ed9b28'
            '21648a1e10a4db536b421dddacce579face0a20b94d27d148d8095e365cc5d00da72e4a8328bed668d403130ac1789391de231424b2132e462823b4a4c7e401e'
            '43e54b74a8a85d9d562b3f547873db40afcb7a7d46dcb0d0916006c1cdb94175935e98cdad6c55e1fb417bee53635eeb073eb863aac26f7025460caaa42bccbd'
            'd82f619d2c14470e4b697dea46d8cafd71c53a6562e503ac9aafb70b253434658822c54f97f30bc62fb00946f4bbf9d890c1da8030802db8546fd558039a8b88'
            '4a3646583ed8b7b41d481f4cf94ebbf5daf89c82f9d38130bb3173feae0e0d910ba5c7d71c38c230ce531cd7561271c8e14850437d5568ac5b5dc8130c9a3d28'
            'c74768d6de198a3a7b2fdc0eaad7f2bd32a58a160ced0b0504f3d81776ca8cb72cd842151af7f8f197b166dd101c004d637fb1929fad445161948ad769efb757'
            '74124d3f20417c47d81bcf7514e98b8401a8d9871c53c00976a2ca9790bc8c5fb565923170d4671d9be2652e5f281bee0fbbc1a870fc807f48765e79e1d27e11'
            'a1f1a46217fe57eb50f472b7d92115c1a3d13e1962c9bd449ca44c0c533462e017a2108867068eac443466d2dbc19b7b7a5325dfb8c1178024fdb859df03ca5b'
            'fbe78a7470c6780f350bdad770723b77b0401591565a2663c2b6a18e7f1d6b69ec6e4d1a10e45622a11ecd29c258f3abe3110cb94db540a93d3773f72fdba025'
            'a770f3059eca7b7dbdb980ad024a6c0881e02d825c386cd77d6ef8f9dadf753d7211832bd1b24b3b8c9cf70839cb570bdf9a6fdd99f492dc5b6c3ec553f4bb2c'
            'a43c90314e5d2a048a16587d5158f35ccdca33ff3de9dd06b62a82686671826e68383cde68bf670638398c40682ec1c9c598c9ea1d9e3a7a89989b90f8ca46d9'
            '2291039d5f30be25d3aa298c2b5b1d1d18654a5b900103d60e11829a59a4cfa179dc3fca790c937bec774d19e90f9f61d843628a31a143f3bbf15e773cde7f57'
            'fe17ee9226c341fca987216914fdea747d0a93e46ccd8aacbeb6b1c6b8dce2d7e5898bdfc5282467e8123c79b9311d417cf4c833e1b07955e625302d210e2a76'
            'bbb73c4ccca064fad34d594d76b74e6951aff23c38178f25f113301c7fadda9cba8f95b70e293cccf17f5355d9b1d5ea04b405f7b96c70001ed8d32a12324bde')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
