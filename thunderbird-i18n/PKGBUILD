pkgname=thunderbird-i18n
pkgver=45.2.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('94c0d79cc278a9763577efdee9a8505d52f9b62d6ca2b3ca0c015cdf7c831cf5d757f9900c0da767c809396687bdad280086275de616a8073f0aedce4910b197'
            '0c19326eb1c27e12bbc3d01dccc35f84b74c6fa736368ae87a329d56684b5b530ff7d7fa79fa5983f460d7a69af97afe10980cd557454b634525f297fb9cd755'
            '56a404e755afc964d960f61279b329216aea2523158c3250bf8bcd0b8e110659b2a148f80953607e96134e11509b0a60dfd878f73df0f90826a0061db56fc693'
            'a3b7b9a3671439124c3dc40d2f714a158006e77a40c532d7f09d383b6886c7dbbd3d516ad328722b0861b34c4484803b216ac5f66d28216dd25be5c441f123e0'
            'bef0108ea06ba28a001c6314222ec4f6f2885c5d28fbc11b4848ab3920f73ec277a029ab2b3dfc57e91a1487d212ff6480a9b2ca4c10a696c64ecc37d4a558b8'
            'c63b4a4bcf9b40112df34a5208715de39c4f43b39397d31e58f9a0c4cb1ff5cc8111491398dc7765bf77efab0693e027207ff66dfcfd148ee02ca028f0828c02'
            'ce53e3a9ba620d065b718b2318de4932a78f090a92159c8701129de2bdeec39572eec792ae49eb60771bf8eb71f0d23158499abcd36e1f3a2e91ba7d5676b4a7'
            '31466d9fd3861c3e2b61a7c1b1c4d8e4d6480441376c058fdac08b4ab0643419bc8a2a372fcf439fa876153d93587135f12f961c485bf020ffd1a4b67b4c8d57'
            '9628f4d2a691d46c6b8989c400f62c4846fb2f08e3b767e0a12b1b1de90863364b9223bcdada4f04d6b7efb42ced052cccff4022149e82c5104990fe542560b0'
            '6b805eee9d64614c6c2561de8d5255b6a3d2b780592d7b457fcfd7703309bf3e1cf0115d0862722725dd74f61f4f7a1a3c4aa5833e0f4ed2b2843b74e347b475'
            '136e8d7b632102d03e694efe56ac09120561efad753f8c844b967e0ff4131d5114119c209b1e76a26d73950628ccbed27ddc4ed59f3f5a3fc8d5f37626db6253'
            '005a345dc51907cc94f396a0fbdfde2006f0bd5e9db9fc1243009550bbfef72302caa09161b2fcaf41459038d4a538f7b9089f791afa18ea25cf49de2ed14b86'
            '2a74b876f0313aaa84bd1fd4cc23cafc8027e0f534425ac74a338a499032a5b0cdbe93cee390280608a30dddddddfb0c88323d52e4e88a0c6084ca158eac5f19'
            'eb999df62d67dcdffdae538ab2fd8daa266ea3760d29ead230aa3639ca29df0d19b1e3a53e422d2999a86aab9adbbfccd11583ec3da9c4dbab1d95d63c31a986'
            'a32af4ac2fe17c7cb2499e2b225445eea513888824e588beb04800176e7d324486571d7a1794b2f2c8ba91eb775824a93b8d0e2f635df93c5cba75a2d09f289c'
            'ef5f771069316aa7e23ff5f39ada03896fc7bce4105d4f14037f935aa2f661dd48e735d1f624355a6219c5843be498f309f1d80d314065202c7a5e1e6d3366e0'
            '344b000872537ba329dfc0b944d325bceb324af581152293deff58146b9a5d7f4c4c407a879ddf70defc45f118c795e9a86057be8388894c611d28f01969a622'
            'bb5c9da53d9d630f8a0be0113489df714b36518e0c77420270347970682ecc74e3c9c82a57aeff39945473a16d784f052899c3f275ba0644d51c6c8eb064c89d'
            '458635798cbf3e402b9ee4334ade9cf51b4fe7c9e6f688d4eb0d7776786181ea409f8f4f309dc3227f29041e53e62a3caced9f1a4dd72661352ec61cd7dbd27d'
            'acf4bc09dc3761e6026eaba4454c6eba2da843ccc1520b9dc75990da9d9420d7feaee01337c80ee73849b6ad88d8d92a3e3b200d91637a9ad141a2847bd874f0'
            'bd8839d50e140680507e377cafd9d6091af3c09e90801238d4bb4247c3cacdf6696962c4b821bdf2dc9afc774d48b412dcd7a933b405c597e9d7e1abae8efccd'
            'd952fa2c691d7527376a3c369e7239c27b338cb337f2f9a870dc8b8838d763895d841794bde32754e890499b2bfad63e63ba907a5f7254ecae631fa2e923f330'
            '16eba16d7f9ead8440a600fb0ee013c2ceb7ee06250fa17f4b7d15885d3fb52ccaed35af8a4f772a9818b8f4754487956a9660d56bc0f7279698e8eb79d73f38'
            'ad0ccda1f9e6bc879f5070bb0d2751d1d465cfeeb9b8b1ef92500a527e138ce357dfebf6aa7a04321943e9266e8b8689afbb68da17b50071978e981cb49554db'
            '4818c015cfde81532e6810d984d50f57382abdf6305ce4660ce1252ef9f52a8c049f7912984a2fcde34532d7143d08fd59e9002a4be45fe6c19e229f19754471'
            '837b391f713289632eac23e3599f5040b18d94c64ccfc18cc2b7a2760a64aa3fb36e9c16f6b7c493ddef2092c9a536683aed5604067ab4fca390f75b4f99a5a8'
            '82cb17272cf40312b6670357d9571f18ed937e87e5d5f3143923d072e5bd53b33e9cf4ad11603ef67f649ab28879dd467caa1e16631f388ef4bbf578aba23656'
            '1c8c02f8a27bd06511755db3c9dc34c10bf58384112882831c9c3fa5da6748e67d3ec042e7d62b339656644f8f0230459f65df59b4e49aac7088b41c707e017a'
            'd4308c1597b6b3bcfbcac5ca9ea4e9b6c4cdba576dad6acbbd50c41ba8c6a0057de7eed3d6254ac90eef395c025ef2e790022e72ebfcb0b5ca1bc77617884fd1'
            'c4af6fcf654e30ac9585e3317a7c6ea426f1c469ccb3820f1b0a4bdd4ff787d69946527b34f49abc1b982d19e95c5ad2da8ced85dfafedace3cc4e7ae72f8ce9'
            '1646395ee321e936a83d57f18d6868c36f972387d06822d843d37d1c4a5c0bc7e80bc42f8b4030f59dd4abcd5a8a0001c12d21ec010b4ce673650c62659b5ad7'
            'f60d77f8753c1f33c2d11b6552046883d250e4a37713f030ffff9e19da6f7770c3e6b7754008aee6c743d28ab9842140f47534f0c3c2533183407ddc07f9c89c'
            'd1600d5b651704367fcdf15cc7bc475268da6501cc7d6fb12fc54597bac0b49886f082912f058fe0a5ca989f995b19c722ca7e187c382d1bdb9b230b82475e81'
            'd661f172acb9d829ce4d465d57badf9f5575c2bd4d8617cda08d6182ec551ce6bff82dd5df2b72ad006adbb8499962acfbd23f9ccf922aa40c595062a925d270'
            '93d5af03854c000b0b8c8c91df4b4cebbd4b39095a83e3dbeae2ad8a6775182d32c1753a03a385c83129eab1002b75d92c4bc889bf95c433d0da06792dc919e2'
            'a100a6166476cd733980dcd0da150d9891005cc7c992c56f6d80bbece88f6e163a54be6afe0353f85dd2e5afa383995488c35e918a0ec98a445e40c406f4a74d'
            '3afb23e020fe1e29d2af245a8dda77b8c5d25045c4ce174c30872b69c28566e31c810f12e03b40446d49ea7042246b5d7cb43bf97f90f72858c83f63f138198a'
            '28b43c37dbbbba6b249a37f3e877584e94f7478c5184e386695b7cf1df28c10d68ba00da983bc410e4689aa3e116c5176c02259ffd2f17397f81dd46d285a54f'
            '991f14e965e8036070946ece314b1856067aaab900beca8c89cae2296282331253402545be16b9c4704d7b9dbee50fcaacb801e6417e7242ff34d2c705f2d93a'
            '15ca9cc7151e9724edc9932fc9e79e88bb0a13c7e2db6a4a49653449b743ddc4b1879f0d5355314162898723dee20a7e4a39bf9db0ca25ca799ea25e49abd72c'
            '6dbf87c6ad146fa6e565ba67daa384feab2ef7ba89319c932a9523591c1721dbc1a38188576a7e7f4f5871a5e8c4d4a37380f0a0fea7f674403cb4f1ae895177'
            'e2ba927b31a91e450d9ccee07da3313dbd0c35699843689fafcffd55a087377c56db29d10c7dcbe56e51709147bc2261dcd9353adc1e6c71e83f7c61ec453792'
            '584af4c68906573c352330848049a4ca3a143797ad2c813d31cece69463b2de6d762d3663f080fe61e18dac30eeecd14f6620e2020abfeb219b76af314744e3e'
            '369c4a3e520ee9bd0b24caabc42549dcfff0146f8b0480788d4b4d1747e5ca4407fdf0967b0d572064a98286bbfd05e8a60b6761eff80d6650261dd795d2d8f4'
            'c9ee1e950a2641684a2437b44ce1e32640064b41ba4c84ccaf260b5f642243e26585847d42061bc87ae0c0cac4355bb39781b30e9dd340128e8eea5dcf53a652'
            'cb8dddb9edf82ee869c5a82e628cb18e782028e62275571a54708804a54ef9a04c44253e16945961cc563ee976a71eb6ea7b3635e20cd4cb44ca9e479678a7c6'
            '97a849cc46523b927412ed6f55fc306a62514871f6803bc995bb35c81dc135c7f739e2d16c812dd137be32e1d1365169420075813967d23ae844c0bd4c5df036'
            'ca50f9e0a02b0f93419a5360e11dd4433052d18ae55c984850b8428816a2deb3d9aae4f430387313d5573f151cb834bf7ca3c61557b4cf9ce87654b77a5ba8de'
            '971a86449229c4c657d5339364e4417475cf2bac83377fdcf8dd43e1316a2c1908edaa2a2176f09163fb15b0b236b48c067fd7d39047a5f004500d3b5df42c56'
            'b5d17d17f6da303de520614019371bfae8252a3d9976f04acd62356ed0bf30acb9dbdc3c0fea2bca0182c5245ae1720e87ce18d68b0bf31ec9d07e1b4be53a48'
            'e64dddd58efdab4b2d6803f8caf702780aab7f5af2e9ba5618b46deca185cdb274cfe0d73f8a38e10343ef7089003286ccd4065c21d8e90b45a0bbd10da3fc58'
            '59df17733cd19374adee98a215962f097cb4ab945c32d325cb0d120cec307740e0703084560d3591dd1b97c7d49be7ccf00571facffbafc8eeb92dbd601af8a3'
            '43ff6cfd76cc81dcf5bb61a9f9feb03277ea1f7e4061e504d09eeb32bd0fe4a563fdf1f89572ba3311ad81fc209b7e395f34dc3d3891775cb28ff70ccaef0859'
            '1347097bda7b89b87e9923313b9b09e905273185373ee600581bdf8c96497778e2ae39545dd8a6ef88af38b30e1ce5bd1bd6eaa3d1b27eb82bc34530397de16f'
            '81b5408b60822da17fc4359b45414a9ac1dc529787c8fa87bb60ed576d36ebb9fb9f303e42d0f82ce44fbdcc15d976f48cbf9f10d77fb5408ec576251a57893d')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
