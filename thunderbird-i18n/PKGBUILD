pkgname=thunderbird-i18n
pkgver=38.4.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
md5sums=('c04cec6eab27b1b68c7e96ec0fe7ae3c'
         '0a4b635707489a91fbdfe9bdf14029da'
         'c0f5337838c01c672cee8f52b18a1d6d'
         '11e9c2c27e00888e5f94425bbe0c74aa'
         'b2f57e5462f1453c1a838858f4c3e48b'
         '66826527b06b738ca03a1ea426366cf1'
         'b1bb6c70b799c743dfc7c8baa420a74b'
         '4ef79fe56d168aa3e9aa73c908a690ff'
         'ca60a1f725c560208630f0fa9221d93f'
         '663714cf7a61d81522c3323d69f5eb4a'
         'eb9b9be6025b98257f277293113b7304'
         'b69de4145ca8317674ebba17146b7269'
         '48fc738d2e31ea84a110baba6c949324'
         '268456c19db5d64ba06d0af889ed7cbe'
         'fff3e0bd75bd2a97a410abc1a4808c60'
         'cdeadd4f5ecd5d28bc91fbc2b7fe3df4'
         'ae58f96caf148273ea3dc8b586797fbe'
         '5c82a093cbf64e340044fd2261292057'
         'f1822437463fc8b815a64d514d601b9e'
         'aaadd6bc1d7aecc2f5ea4a3bfe21dd34'
         '4c273db4b65bb4ee586713809299272e'
         'fe9ef5e766fce809b153ca9b429b62e6'
         'b6f0d0aebcd678730c02172dce6f9a30'
         '083563e3136294b47ca1b03127ba6edc'
         'b37435c833af91a7da7a9eb90238724c'
         '0f19d4070ba94288bfe50a60e317ae1c'
         'a39dd090c50acb499dfe67dd6db968b1'
         '995d09c372a27fcdf9784a858675b32a'
         'd1fb326f8ffec52a6791296d5f4ad9ab'
         '790ffa9190c4aded773ad6b81b1efe55'
         '3e99a2f2aca6a2684af27a5303ee51ff'
         '23231c7ee5224735d9a2e2fe06c138b0'
         '46381e407c9b039693b01e0708cae233'
         'd1e7c0016d8f4f6ed8c717dff2a9bc9f'
         'b67a1c25c760278225950d238fcadb12'
         '4449750e599551971ec847ea09f8c293'
         'facabf272724ba7b39084194be60c350'
         '8da6208d0a260e6bce236b6c9d66d9a8'
         'ae96b5a5f95250d2fde33cc9b04bb07a'
         'e64822e77cf44d208b3873a57d764aec'
         '15c4d3adb159e018d5bdd7a619f2ba55'
         '3074e16aff65629752050ddf9c360f25'
         'a4808e18403c712d8bfac2d6a2372b75'
         '97f6432ce5553d1c9b7026d801489df1'
         '1fd6a8763e7f66c10847667675b07562'
         'cc1ee94e251812591f3f4e52c6461630'
         'fb66e660b033618510236b7da07858ed'
         '7935a4ae700fce55b45db713053faded'
         '775a2b90838b148f6ce2363efdca7932'
         'a5008c40e78e2f25c0b4c93252f22018'
         '4b1cab7cb6ba6ee40bbb3072d9158e7b'
         'f949e757334814198b59e530ac24120b'
         'beb80a6aa372a3ecaa5b4425cd7a1c5e'
         'b8af4c80f816cd49dd7ad2224ff1c6ac'
         '4f6bd3bcfa06c7053aa1d9a1ac15fd76')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
