pkgname=thunderbird-i18n
pkgver=45.8.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('95adc2355a27d916f96c43bee0d4527990a1eba8cee9e4f85cd6da9202ea0ff4fb89fde127abce03962e185b272f5bbd1d8cfb032f6f32c7895bf3dde8d35a2c'
            'eccf877f29099445ef59c833929a50df7424aa475b1ceb432d6c10b28c71b4e25d840a4fedb1afb3106896da0afeb47a3af1b763553dc6ae40f7bda5b0d65040'
            '76c758a68685f974d174f5787b72e5f1955ba9be00c305e2e1b1adaeb17e4e7bc765d1263d6395cb89656112c936618d84cb80a7dc860684d49a4677638eef56'
            '519c1b0555c0bc8e53e28f50fe14c7b5ecd563ab6b6cd1c30886f9d3d7982fe3fd1712c9ea8ca34d2d59dc63ef62fe69bbaf4610c2d25987e4545d82fa611f50'
            'de6f8090ebe80131e0d5aeef66287290a6292a12abaa00138d6c7683b8b7d3f619f0b731bc7f45ccabbb670c699404c2c1d606adc6b307c70370224fdd214aeb'
            '8914cb4869e984ee1207165b5a8ec7fffb822312714dff20e6d1084fad81f596eb310643a34b166dca84739d69a3e8b86ccee2ec0b9dcefe1d6ae39f45ca4f99'
            '44382e8fb0070dceffeaeff0b78b415da5ff092f3ed50a6a7af67b847ba83245bfa3a37dbbeccaf856fa42de36887b02cf0e2628933e5819e65b8a3d8c856e29'
            '3c5df605e47145db9687e23fc4b455ce8b8d0e50eb16a8b96e3acd47e7d483721f425cb496e32a211b34d982b4932469da4b4b7cb0ba0a53865aaa5deacacb12'
            '876953576532dd644a1b649c317d29fe9ac89113d9d7ecd8b1ad990f762806e9d90a6b1165041b66b71af288240e7ba7c580b8c3e61572bcb88f7e87810b8a96'
            '73416783898e78d25b716ea36f3d1ae00145eeaf29373fe0c54f1286c229dc791b0d2fad0841049275fa6e078e5ec483fa8ec6acf0ff64f08a54af8cd4d54e23'
            '152191eb7008afbd1f7e0c7440643a02d9ff2e1c8fd129322fd928e38acc48e675e0859baa22d53ea36264104e34192ee5533f81ffbd49493b4c1da14b408e97'
            '44438fef8e21c2ab6e1e2ca2558172bb6c30b254f78955e148b5f9d28ef52189573f54a89cecae2cf547606b12497bd36ca007312722069324dc1d9cbe05c1b0'
            '9dfe6b810fab005a78f6f8c7d9d4125c0cf263e67f9b9668b452386e91eb92b68ceb58b51e51e12e6b28cf6fe0b47fa7a625583a0183bb6e5bba3a36fb1fb335'
            '60ca7f034f06fda50f90dbbfa7c3d27f54d4eb03cfb570a45e0b3fa2fe59ecb9fbc085ac76fe869f6405538ab28ab0fced785887e190f490f961be60d71fb9b2'
            '08163aefe5686aac1b6b628e5c887d9113a7dcfe8aececbb1861c8c334421816426d234821df34ad6b0e5c79f2b029414b73701c762b0b0b1d272e7ac427c880'
            '60f69efc44018896f608d11c781a9cd45ab340157d2209ac7741fc0f6346df45fea94a5df0617153cb85fbbd44cd13dfe55adc49a095e0518445fa0ee8dca101'
            'b33276a681c4c668c5b177ae2d06f47f4e2d92f46d0b878bd16b66ffe941fd777b42291d218040822056c107978a8695e1ba8d901dd5372f4a6dd8cbd0b3e284'
            'ecec81fe3b2ca83951e7e464cbc06519b812dc0e6baf7896bc7c89166f839f41a1a707ab16509307141beeeca875522e46d7e97543e5a39f2b42163da0f9ef81'
            '380aa558c6d248928b7f8cd4d045f6f0e2aeb09700db0a9061a233a935a56f809a14402be561f5d8363c934a4fbbb457c82182a2807da9cf348dc2eb38b60f75'
            '9789b24e38aa03240f2e4c3330ec201467b87552fdb94ac1d931d9e3dccba61bf899bf12bbb8a8dc251a787b220056e424597933ca0e9b84e20f40d3dc7422d6'
            'e3bfe8e7a7dd016a017340d390a8f6f3b62da749995c282da5b0d410b379cc5e2c28e1ed521ad83244c1c75d06839d2d4a1fc88a1d645b40855bdf193392eb68'
            '143e3d210684d35af8bd544259d379a312b9d1c8f06c08021620b1d7d5c929b7e2a90dc16b6248c7162e43e7f86de03530bf357dedd693a0309e3264ab37afde'
            'fa533ab715c01d0a4913d09c49db1c95aa1a228bfe260ae7c8d2bb152988719e1b7693f09fac73afe146a726ef5d390b1fa4d194038ae4fa1d0e551d848cbd8d'
            'e634831c0d51e82eeafc2e7234da5a3b62b66b2ff17585565ad1a0549b04f334375b05e04a5540723eb2754dd0032ea7f33b15c288600d1587e0bfd699256030'
            '56161baa7dedd371337b9f49eaafcc72f8ce7f46d72ab1984e27fa8f1ecd442806680752c6d6932a192ac8ac989f514821772c4c5f2db7f55b10bfd14c3f6839'
            '13deed772fc4ed049342a8ef0be185c28a4b18fed9f145badc8d2c619ba316bdba5bcb10e700aad178b7dcc7f223a62c65489b6001b122667e2ac272b43e6994'
            '6444329ff8c906a55b3d2f085a0d8480278761469523225af5f2b02bd167c6ddf6d157aa6d3269ac3a828cc78e6202297cd26e80bce07fd8f87a9fa78e1ff50f'
            '1453f13ae056524bdbfc08d67b44c615d394225d9786b53814b033ce51b8aa4f743e383bb7c754cf12ca61652fbb201670636b2ef324386f47437474074f32a8'
            'f87a537337c651c45f3a9eda2278288ed591539adb1ffe291d8406007502011c5c043e44664b3c93c12036224d3a182c6d0204af06966d32e963db147c64e78f'
            'a2d055136a1c455ba9abfae7dd9d50295ab67e9983f99829652083087bcac14d61e239e92bdaefba3ed4023f51bc1c2e81ebc19d22f90868ec9e11315e8f14d1'
            '45150b526c159cf7d968fd800e552be4c9df2e735ea023ebbb08457d50cebfa5c8f611db0bfe8f43aeb4b1b3d671b4ae20b2722669f6798b4d6d7db4e25cfc9a'
            '244d7bdc081992362eabb550cd4e1b592d491368ab52b76c0fee6996d52c69b48c3f832dbd3a1f32096e335f8cc7d9bbfeb1c118dba95a9e42502b0d4967dcd3'
            '6d91630b764291191506059019583c07512b1e9182dd9707f6bf8d2b98aba76bb25568699e76c96ddadb969e5312a78635ff0069e75c2d900ede70e71a1c8190'
            '00747dc8fca7ddae2d2fee76c1f0bbd6285063f673a3a71c825d86b34d5491f5937e70eee5e9aaa35a9a6b90ff148acfbb34227811f87697ad959601775bb612'
            '3f6a9c793f263b5cfb00587e42bba85f330fb39b5021ad80471b959280e32513e7f232cbf80366259dfe7119ac7098585c7d213ae62d74a23e84b8f81718a7c5'
            'df073f95c78beb20778082edeb05b9e741e7bda12085b239e8108a6f02e5e453306e016c9f82bd9c866ef4bb3a9decd4697e52f0ed2a1591471da16de8129d56'
            '9e3bb9ee4d43de1ac1635b646db460562d4c243ee62770edb162d029b7bc0ad02d5ce8d72398bd679375c4116a9f3ed2983558521443b433ec69cf3865207393'
            '779542856f803d0a1873187bee0e60be263300b99aa7b68f081bbd5e269403b90e573f344b3e3a4797b13b796ed8c77e862159e112a6c7bf27f74339d991acfb'
            'c94a56740e41d6aab5bfaec4003ff929b0792193a30107bc60c5a333ef6a07d02f728f6310ccafc88e32735d6d9214ef41041492831f4b16c491d5b8d009b7f9'
            '17655a5c35757cbc073253b70114c0b724be62df88158dd2e06455ef62d25d54a96bfb4cfa0616548d6c0d4889c28f1e83de5fb29f068fb0c5de068db78368d1'
            'e2434f123d5cb49b9654bae9951d75ce9b08d2666299d0e8a89c0d3c64746136c6ea4c6a45b18b637c3ab7c4d38a9256794d532b3173074918b486d2e38f1b9d'
            'd2243647e029c79151de4457c054a1bbb956eac1701a9ef005a1e64a7126ae4f954d09457c28e9d97321675f4d85bac2164210fb14ca8035f9a986ab9e40f206'
            '1186beffbfab301e97a232861e6d38bb772a26642eea1b9b7362eb51df661d1963784023fd7c22b70c858280769f268024dad5aa51a70763bc28854ed1af73a2'
            '92096b1d049ba69b0b03de843479b4cd4574f2d1a64582d109329d787d59b6bac97817098a4b1c91e82b55066f761978e1145685b307ebc122ea3db756757756'
            '7b91748d06716f3a4baab8d2f2f28d71bd8c878143848d89238559e8a1301c0af8deebeb0158b53da2fcda8fa6a6afc9c58061912a0170ea8de475d25e7b3391'
            '54f97cddca0d5674ff3338f098fab1f2f5fea07c25acb906fb8c850eb102c8e4205b834c48f1711fe8b658d3980634159b3280d9e6912393b568a81c3f676865'
            'dfc9b4da397f7c3a95ec3abdd0632ceaa75de12caf1bdfb5201e4067cb249ab58531f1ab641470d08f3372068cb46734d2a55ab4cccc69706ea439139c07de2b'
            'e58e73f3e3143144e48a4431fb4d0089b5232a78b6d2dd50711ed681379522c72d93f005d5bf1c428c99c43f697b22886e351e32faff61a56f27caaa6ac6f955'
            'c35417bf7149cb943f438273fa8b1ba4cbc6399022f7575613318e8440feb4d2fc48eb9fe4d0d3d5fbb52982147f776133aebdcf31ebc9d4bce5d1690da62930'
            'cc4d57b0f2eeae5a6da6389e95f570a4b1ab0259c4784fff6ef6c371c5527459d0c3703bc75427fae593c60eda92e8c20854bacfc87d0b7d7eb81b0ab1e1f5f8'
            '5a09443dd76e6d46e495a29205131971791e099dab2edbf62104d851efe9adf403e1a69da10804302a858d1b70dfc7c6e8ede36bb3587a550065fe4244a7a306'
            '0ab41507494de563e9c1acac7dd97efb566393b1a8cbbddc4e9f473a0d85b816d46bfb24d5c85f6943df7bf59c49d3715baa9209f4e9338407d2d765d1293da0'
            '8b25e83624ea59a231af846e4d9baa6d7640c26d70b6e259731f7871af594435d18dd55da1341045b81fc53eb4e9427b5b968d12d6699816911e687a16dcc51e'
            '346e15d8bec51831c2205a653e84735abfdbc6db1266a8545d138ed11f492d58f3529fc15870eac3c7c28cc60300de2fde85b6927338a2c8fb03ca90449f8a81'
            '0b473f3eadbcc63225c5f2b90d6be26d79a139aa72120d45dcfad4a22a20309f11c4565e72bbe9281f0ea0fe508173e046d3f747975f1619f6717835361ab70f')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
