pkgname=thunderbird-i18n
pkgver=60.3.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('6932419ec7cb0f8fbccbdda0fe67e9965115f6a4926e195ba3afa3f12335888f2bd48d05513f22a3e8619b854e54d914e4d3a267fc327f85de1b5e707af00c7d'
            '343d427a37b2d07620f25853c29879542fa8b14d894509fdfefde3367066c9de425d59e8880a27cc1ab602d26b3f2cb70f61cf29afc4756974c630b302e7612c'
            '59f307f3c18a03867dbab677ebf33ec3d1ee6efbf863189faee77eab0f674c4d365b5a59e121c57de748dd245b16d7daa08a30aa7efd03a820e8ee3e07eabda0'
            '7b7de7e21d8e4b56add402ce3323ed23ee62118f9eb95b7d179007c9c235ee136430163a667dcc7bf0d52da06cafe716aa719aedbcb0a09f19bbce31c7c69d79'
            '7b298b4fecd3d7955e477fa104ffa37b479e594312f4d709f348257abc56e7e34c5e09ab900cfb4873deddeff0005a59be647217203639db675eb1c3e2035a74'
            '18950a7eeda7043fa75a00b01ba7a311a94990c3e4eb940ddd2543eeaddae69f66909ffbf69a6aa60f07fc194c8f80ed7c275838772dc930c08eb385916e4ca6'
            '6345b32778357514998da218a6316ef13fd865f5f66d95c6294ff524ff05e527c88d8a9ee57ff30d7aa0fa792f093dd91fea4814e8fdc8c93275f37db97cfab3'
            '5d50dd9662d4cd0e19c8217e7dd615b39cbe1ee6b7c7e1f07e62c583f276b93317bef3a02b883bafec5b9f5e469c1afe895b6027c822087727dadeaeb0620c3d'
            '8a66cf19804a0fd4631410ddc0014e80fc1a14e071a0b1a9f924f661dedd0d0c29fb5ff920476a5c552f20e7895b43b7b3079905a1eaf037371434be32901301'
            'dab05f2a3fe8c7a71737673346c2e8c1b0008fd50396c79ddf4508dbd5e0cbcb1fc25dcb2ee80818930403e909c882e3fec2e30ec43218e22dfb27a185c2e712'
            'f59e7c3a15f0e6966e766b8be59642085eead97cf1164a82b4bdee4e7c02c3f5ae17d3d4078c66ac970be495ce7d2d6c7891493c9852c1d542ee385aa00916e8'
            'dc9ed1a02f6be1a2bed694dcf640ec9c844258465b101fbc3f72b5aff207acf7e381e927164babe7bc42d56ac5a1d21ec37ac986fd89a1740315de427838499e'
            '995880e9cd7b9d19eb2f49603b1ec12024b6480c120700664b7c39f69d9ab65cee66d71cda7822f7b89af830e50d05cfc949b5ca727a841f2eff93bc5d717f09'
            '1061da7340d5e637ff11177dcdbb892fccd4aec725687122afc7296a4ee6f8e5867b26a33bf7c1f6e9d503152b8ecf8a037426ed4ae95a9c24b9ad11ff56a77b'
            'd54b8fadcd09062b9425a4182d9c3d73b36eabfa3aef266d0c957a1504e40f812cff7e030025f9c790ad70ad8dd9722470640d971dd46c6dbbfdc338656cf1f5'
            '016b37c37b183110994f6773f052f32ec7c2273ec4dec3c163698c63259c6c598881538854e8fb87d14f484f4343b8c002231cbe5c16f042aa044fda3721cb5f'
            '913fb983712509f6505e57724d83c96c1b8ed792b54dae752a879b7c5a73924c1f2069e5ffbb3078df3848b991fe85594676827f9278e04f5c96aa5cfda65150'
            '58869e82bbfdb75514ae69d9a1aa8e9d201cdadd5a0395c837e4ac5aa59397af2d5d23011a21604642da97eac51df6bc886c6ff8ef1010715440281694dbb5c0'
            '23a0999f735e7025638948821c6b1e81e49de137bd065201c6827cfeca7897376fdbea0c4186afadba5b003404568a3dc94407704cec37ca07f18e718743c9f5'
            'f4bce13a94a41ecea894824bb8d7337fcc577ebafe38d36e28ae3c80c7ed5f6629c0f8effe635db870a94d4300431922639d1785bb4c340eabf3935daed43101'
            '20d9aca573925218da4e642a223d0d7efd240406dce82e19a48348d1d3a20fdcd765d3a2a12a437c9460e5bbde1c3790275ad8a3c83eefb5cb0dfe2d7570bf07'
            '93b18694599682cdc8ff0970ac53db5cf986c2b52a0e416d5092b210c902cffeb76c569c032fb22517831bd3fecbbbd7aae6a37bb73d942c2dd029417ebf57ef'
            '646e943a1c34fc981bb4d3dcc7816c5f7158640fee3780fc9ebd74cd04ef20389f8204aa1035f591fa542ef94feb07d6c32dcf4cfb57e66bced36deeba065757'
            'a335f0ce5c68c4955cfbfff3a0eda380056ae8948249e8ccec275dec769b0b4e9d202b9a36090a194fe6ffed53c7c2c2860e3c6b20871446bfef8d827a620878'
            '1f2b41730ef284c77f96c96c45044130772e9ce90b62236112ec2082505c64126c7a8899437ab0067ae417e57c5e3981e17442024be763d1d1b3c9991d46c455'
            'a4569b63cc59b588a66942754f442a888cb62e1398c594d35ae2ccf1514102e91da1667b7d7442cfe88e5d5dbc042f903c7255131a3014ce13febb78df4e66a3'
            '57deb3acb995394e7cf7eb9e4d9f7bb7c5ad4c4496d80711477a997b4a6b6b61c4f8f5719d842024c7f12b8ada103db14ffa6e79d0eb865417f9c74cfb937b95'
            'c14e46bd4a712184d1d1200fca949e14f501f647503cfab06ec6a595d67c7206897ad829ac122e35394fb01a67e0a9cc550e4f78d430587d7b1a11ee8b3a2aa6'
            'd987ebb5f92580b0a302c97ea41c72b08a757abb56efd942cc619dc2c63dab4a1bbae1c607691ea1e703c91b9a50a6b95dc8f462062c14af68edb9df084f09c2'
            'd29cf498c93caf663b6a122eb4222770c9189538a05d25154f7ffea8abe7910bef67d4cd127ca4ce5ea734121b0e30ccecb17cfb09216dc08135206bdb000abe'
            '6054826bb5229447ffaf1493a50b3c91a060475be4097a7078b22487427d0f3308052a39672075874a3a5a0807145279c1824b71f6177f84a60a527a68c5e745'
            '1ebbc15393fc1fa20811128529d7c06e6f1209bedd3938fb384a51e480a41a18b6f5216ee33b5c893ad261f262d8822116bfa30bd1cd276cc7c166aaa063d44b'
            'f722be3614b0959e6a7c38559831b11d7853d60ee6d38e15de5cca41e374afd3e0d18bfd694b9dba77222aa80fbacfa4c4e439dd6099f73e05f2ff21248206b2'
            'bec729a8e0fd687a7856aaf4b4b28c71f1bfb37925f467911ae4d4a2c3c5e07728b544d24a68c70f49669f063480e05c81513e05cfb449b1be997b709d9c1eed'
            '297389087145c47e2058d69dc1ace3462095fb743b41bf543248de0223e11f553f18a9533dd8d8e1f31afb7c6d471e160b6e1a87cf9d7e71e35e5c7b513b8fd4'
            'fe3466ef765e8d8eb38a965be389f342fe5cb987f6ffa2cf637c1ac0c6fc99159add1f34ae412e44203bafe0456902dd49cf012408905426dac53e0bc4842694'
            'bfe44f9256889cce538d1e2590643a62f8586a0044ca572ef159dedfacb16b0ec548b3b99819bf4586bfbe2a2baf1e234be9d2ef1b67abf3e0ce8ec8e6e66b9e'
            'e8985dda7b190df20f597c6dd69c7d5f6237dff560df4da021a519217cf88869fbaca21d54d46ddf26b19356e3819227422c61ed555bb67f04a47a85696970f5'
            '9c0f449fa299afc8953f1fea90eaa7f73580ac77799b6a113705a8ce37bd84a11bc144718067f96a636cdc5f0311186628c20eb207fe1bb9070dd54e488e7ef0'
            '76f3e8d336b49a8d8f9808babff1a47f4590043ed694755d76543f96a2ea51aedaa0940a27a09d8180be48f0b1af03f170aad39696625acb6dbc2c16ae5fd10e'
            '1a01d0f8340960056c703831437e5f091efb036a30e5c5f0afa9f6bc2acc723058c24c794d306bf39b2128402f42fdec7793f0cabf19b4eedb904a12ef6a42b3'
            '78a78209854a9cd1af31f23549d13995d7d8c37a54cc0d9612c068609a3d8a9dc1379823a2e7e933a7cc5a30581904e846b1e1bea30988ab7594672e5aa18877'
            'a1b23ea4d2c82258f78b935282cbd0ddee5f7a0fb40e8ce35e214983014daf5a86ec7f2e84991ddc0af664fce46fd0f440369addfccf4db401ec55cf00c12538'
            '3add489c3bb3247c6b5813bdc35bb2f9194c135a01778714373c0624839feef95b7e2dcbac9bf12983bb4801a1069fcf8627f66f7fc42822ae8c44302789e0b8'
            '7ab63b568e2b2d7eee4e54c448bc71552ce5d25e2fffe888c28e250675a5af090697e67a2ff4458f4aefaf2f5333ddcf1e1931fcf11726b59aa34d130fe97a6c'
            'b4fe94a47e62b5494a2b087a5d6d8da5b7834b5dcc17656822b7ec9e7b31f2096f9c54fe78c30c8a67ae3c3841ab21151d5b40e4c4435f70a1fe7eb601f764e7'
            '5ab9e6fe5fd3f333e08491d65dad88a0f60b6986afaa1ab9de66b570a285551b3a3553fab4210427992a56dcc21b8390b8a5a83e5acaeb650dcbe45b73e72c9c'
            '555d1fbd2207ec3265dda2d0574ccf102c4c1b694fc728bb9f555d57b8f919e2815d47751fb29dc9edae88412655dad524a75a13cc4c252cccf527bb6b2750f7'
            '8d48cc484afb39dcfcb7ee13d00b0d5e43c66c1fece166de4590c5ad5beeec6d279044443c7f648d51abf6cf11498b96a234fe9fc01c13f85f8a8f83b12b95c9'
            '590c6e68b7cc9bbfbee5bd068f7b24b4ce0bb177e5cbe986533b928e0620cc81c28a404992bee9f9be41c09fba2f5b825e916f88a19a6a79a91aa7e2cdcdf0ab'
            '3043d174f0664ed85bcbfe3752e1d37fb84c70ba94b99383cb64f0e472c4200a6c035e01d9d38f066895e449ce5a9d0368be70677ad8de8ed46ee39e801f22c2'
            '85ed2b3a82b64f58bdf8dbaa1dffd5906907068b566118eeff6cb70354bcdc03963caf1cfbf51db8e99e1277de320eb7b0474fa9e72ea4a6819ace52717fc21c'
            '2e2708f3d7d69856c5516740dba243b83ae05fafb7412e3973ea1331449e31a6577a575f84552f7fbcfa8fccb454b06b0dcca35f45399b6475a6da53395a9570'
            '7da02ae8830126da7646c4379ecac20123a7f9f2f9c0e72581800a5673332c8664eda1d8b2bf906fa452bee8a10413191272caf17ac6d07a2f1fd8bb5502ff3a'
            '337aa9e5dcb9aef0cdb44d9d24c9eafb89b2e3bd13881b445ab5a49e4adfc47136b7180009998fbc61a7e8140683fa0bff571bf6970f944d841e6fca1aa1bbaf')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
