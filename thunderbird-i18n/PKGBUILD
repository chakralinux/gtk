pkgname=thunderbird-i18n
pkgver=60.4.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('034bcaffa5508e7e694c79af323b76069024fb4c079d4dc059f1a1677d57584e7110717f43e1dc236f0416f8bd6d2eab9862b16acdb8580e6b9bc32d8dec07de'
            'd1aacf71fc00b7102535d7cbca950119a9dd1d2bb9c0249caae0673cbca0bff7d5623e529a0383f2a15fd13b8a8f21df30cdfedcc1f1aa463afa5af087f8e540'
            'ab3a4709752bea109cff96538114349f627ad80482c1f3cb704e5672793a5d3ab1d0e993c471dfbda7508b417813c1174631d019abd181b0f9ddd624a46c8813'
            'b14b71416b12c868c7e00556e2824e03b4f5f4116890f393dd470d7cab880db31754306205f2d232d787b1f2af824de800049b5f1c66389ef1577ca6cf093e3b'
            'c1f2c5c00d4809f4bf05e0fd78bda28e56549b348537643d43733318b868f6e41b601483182fc133e7d3163cb68b1abc77373ff0f86ce410969afd2c6f0ea861'
            '4b840ad4bd73438210c913bef50159c374b259bf152df76aacf02c5bf39c4b8ef6b8b7ab95516a5570b401c1c394327a373b422c6fc5cf4b111493150b011755'
            '9116c265f70d8bad365adf78f68e4a115679c2d6665eb3c6da33c40f0caaf38ed0c2765e7b46ba02241f46789027a865b83364eca10a058b9e61fdd4204a0d55'
            '05c734de29575709e6593ac76d1d83b9e0eef3432a0bae3048dd65fa90447bb18e9f962df48319e3090f507285d986c7c467395d93a9626ea7016f10ef56c367'
            'e829291e564be8468ff4bd0ac6e13ca00fa3f585504ae938451e2befa9a11821c1e408379a608b41d172fd1675adb9678d70d601d06d8183b2c88a855e188c5d'
            '8f8cfd0a0911167efdbe28d476ff1b4673acec456f3e6ad862921a781ec5f85cfdb8aa16ea0129d4f7b2cdd7c1c648602a46b3f52b1106d422be553e65543693'
            '33666db00ee647028c43cb61f2c16b2c172076d6b79c123a1cf51345453a253ed3323dad6487e257b47778a7c64fff2425bddac2a2ef1da2148c79f83de8b791'
            'b487cabae6abeb3ed2affd4ef8b7b9c964a911cfb35c6883e1dc21f1e020afe43320ceae24a7bec3e60935d2570c0fd0e91629a20f01f930b18c5f20d00e1247'
            '2898aeace25cacbb71b43c0544d2faab2d0183b150b3f445ecc4f3319593dc8b7b984baebea8cd42df006a6b6226a819eb9d579ee95a0738b9e38c6cba3326f4'
            '5a7383b1b453364ac8a5fe8095923a81150fb3faff5de3091a36d1db7ef23955a824c2ca2cbfcbca3ff6cbefab29e341ceeb05d0c95dd40ecaa2800a9a67930c'
            'a2b0b43fd5d62b6ee1e1b3e35f376700ddffb764fd0cfda94bb0785e5fdb9bdc66ce9dfc2955fa6e97830519619724192f38fb0e6577cec24aa1e14e4819c11e'
            '45eb7f9490269a8f37b31a2c99db0aac28a776fc1648002fc5c6dd5d7684844f24a10b69b9933cce173118d11d50d4f6fc2d63b687f29813ff1936944ada7a87'
            'ae456fe106f1d9814c917b371a326b063f516b571c24d8d84cdb58b0e8e0bc3d809aa627c5da3db9921d60e5484d68529f1c92a7c9f38dc8aa1ec313bb186766'
            '9a55bd3cad62d8389a3afe1f32504e29ceb5540b55d5d390464b9c8fc354c9d2ded52da299a2ce91790ae9d8470709c25b490a05a2636720e0e7e1ca311a4d19'
            'dda652a4df97390ae8e96461aa76c91f3b839ecf2598e3142aa300b49e5b1d7dad69d2cf749c4721329044abef41dc33046c420a3011e250a94af9ce5807ac83'
            '36aad0d328f5bfbeb283cca76535e593ebd81e16024406a52501d15f11f312446bd0f7ed11931046e68f85d90b597d02a3c61c6d0c7c166cf485ab94a72cae74'
            'd92fc16fc0a7fe75591f38cb732d7f63cd03c1aab012e490178a57710fe3a2fd5a893281969960d82ae76e185816c69d5685831572d352c1f9ae418ab010b0f9'
            '155b53cb481fffb83d1b6e5142be1eb70d622d3484dd0be2a48f6a604681627dbcc74dfe1cc8ed803a8d20c94411323b59731782bcaf4234c7768a5700bc866f'
            '926db1e0e2c3f8b77c297d2f71c73f6b74b0ef14b2fa866ff2411ada6dc342be21618ce628a4aff4cbc7370fea670e528a21640175fa70420dd6ad43fcd53517'
            'db40f8c9a22d3bfbf91b9e8c540ca20c27bf44bd3c7bf7c46abf63bbf8558a6a5a9a7785338325249a3aa07ffa10ada47e1558cf18af0f32268d643a99e2c26c'
            'd0aa6c1b600b86d9ab01be40ed3ce686451b51fadeb2f472e06a6a4293335a6954b3004f86b2cd26f4ee18545eeb55a8d91f19a413be7025654c4b1c8988ec12'
            'e90314ad479582436d6f18a5da0a3c2e40ac01df3c2df4caa0caf35c4846be15184de3a7295531c0bf80c67bcd5cdcef029d776d4a51ab33916047991e1c13e0'
            'e522d1d4878f188e7abd18c958f648e4a7ae7aca81a734751b593269f67105d3004c08f182a5fd37247c497ac4ce7f227831c10c48e78278c5d414f1bd004872'
            '1e3907a339a14794bb87c9b1ebb564d85eb148124490a9501cae98b41f894d2492bc9e3f16f98d57393b9fa18ef2e376e7c10818a4ea1f25af2850dd6655c126'
            'a13e420df7016d4bfba2f3ea4c8ebda92447c53473dbb25111aa65ee54dba669d4b316a4a5764d45e094a5ec25b6a323d33226199e0a1f11ba55f92606858668'
            '24c22e167acf30a3a488fd7b20196f5f0941116efcdc0aeb101e48ee8b3d5c0ea4bef423dc6782c85b45417f83758bb3ed92bd44f2ec611405cc29e406015b1a'
            '9e194e7259a700c1742053c726f25a917fefc45073b274560a0b361c0c5a542b3a51e979c194dee82bec661e30488de3bc6843e6808673b871376fe4d5fe7c7d'
            '3c15bac4fcc6e6e2b0f5c524f72b6d76964c6ba96f0e1d4526edb69e27bce719af7d9a18cf140da8ba61e1de2aca57e7bbaa95025a59a09a1dd73bdeefd54e69'
            '6d2aa08482b1b5395ec86c3355a367d311466ba308b9f4d4273b7b9bd0789988e712921f969ffb6cf30eb2036a11868d407e5a37725aa3ab7bca32077fdeff96'
            '71a1d39b626c7a360070adc749639500f924209862e333cb9b176d86bf6a0c12561487fe2a041d77d9d224b5fb897fd8acf3b95968a947a4ffdcf4b2759c0c5a'
            '296d8e6ac5a903e54186bc080763022d836591e96128d9b7ef19338f84bf2a321bb599e86dba42f1da969e64032ca00c9b8b573108ee4d552cd9c3b557569c24'
            '8b21902dad6769a0e5b9794a5b7abbb95657295fa03b909b4964a0545499991a5d8b959eabd2cffdeb84bcb661ba7ba735d3b37db20ba1da93c8c6eeb239d5e8'
            'c613e9f5fd6e0f746f7d4d05d23151a3edd8f2f284cfb6942465febd0fd19cd7b2be8f7cdf4347739ee37764adad2df07def31b01ccdfcd0f5c5c0cbf09c5f45'
            '6f47ef0518e4518e471565ffde297af0b916584847d02f008a1398fb0cdb1ff52d8c5ce82623fd0328307d2f6c4e055d5f10677ddaa89d231219ab22fe0f8b3f'
            '63e4829b50da8f77e1cfd52af55bf0a62db654ff1a884faa1e07cd93adbd497d52055a668c1c13916d2ee7dd2b9409544b3abec0e89192a4ecc3865f202c9b42'
            'a217722e15170c5bc96a6eb0f0d8a9ec155f21c896dee641cba02fa5683670770b884c0c5dfc2b6fdb8138c5bd9d346bbfb663e41f2f7b52d7314540df9c53c7'
            'b03e5b4eeeb39ece0bf7b060a2abda8ac90ac7ef541bcf754024ee48e0606877ce6be88ccf41eaef64ad78b77fed44919d9a70318e71f2e1228defcbfebc0652'
            'cca060bba2ee99004408bc29cb78ae5999dec217699124a04b419ed05082c9daa99516478f5c339211113662bc1b76e0c8bddfbb6ac399011736bd03f99deabf'
            '6d8626bbac58c668496f4f888d8cb56ad4baa2ece46bd6f7f2ee4d812eefad042dbc5ad21b0e2523e23f2210406a538a3b3da7d90001233d355f6c1968285d28'
            '7763c755278d74edc01b6dac685dcbdf71def72f39b3d6cf43d710d6ffbd642d40efc788359570a7b4aacbee5bc08ee189a5c1a3a46c6c28d8d5596fc1df580d'
            '04003ae1082b20ae69a1dc216fb7a0a620939a619158d78e60e7192ec3cde6c653d1349bf9244d20c213a371926614f4d42cbd2fe209fe9ebcf54b95076181cb'
            'af3b6ac24e5dc8ab1d7845cc309cc5aa91cfbd0afc48415db3d2e010457a893b02e34b24b55e914fac9d1a68ff65c7bf3662aa3c7d67034a42422a697106fdd1'
            '2262ddf7374baf721e6fc656eed57257c8b688feb27a677fba58833ee3fbd7e7913b78e57fca68215927856a5e496ea70ab86d3e1ede0ddafdeb7fac41b6a78b'
            'b7739661c0f5f08ed323cc259cb4f4c0eee44e0283898c8dedaaa2416621dff82d8099509ea9445a5455935e277dc171d332bb7e702a85d8a938235562c28e8b'
            'b79fb4646c2a605c0ee49b6d86fa461d77fe4ea7bfaf000cd92aae102d1bfc7394d49797d5bb5f9f4476c17482c8bdc78598160b280c52f9b7b878cbcb035918'
            '662c342d1bd529c9627392cae518ef6f629b82e375dc39cec7438088e5fd75cdd0c4df71850bc2b8e48bff1d50e2a96817e23a62f374295bca063b76261b5650'
            'b3256a8ce7f9c2046aa33a6ad2e3b70d35da9e2926d281e13166ca470a9a0f27baaa0d7f26dc6a565630a6333427871e5b46fe3fa985e4af4274a8e5cee0d810'
            '617b04ca327454c9936fb2293cb7975a9439ee7308dcbf7d83643beeb88f04787e420e86d8c981ee09df57b577ca3baa10b2608c93119deef6ac07b78e52f943'
            'e4a12334e86fb3a6930716d306d1f7535ead42b93fcde31b226746fb04239cbb88fba81b06d1756583975628d2478629d68e977ef6c355ca3f3e0d8a6d341d23'
            '25d996d302a32eb837345626a848d83c4a7c59f2d0a21b08c6a67e34e71b51d975553c7845f4f9a1a344d9a958045ed06349a55d86536aad9621d0b5662a23bb'
            '6c78a9c4f336e8ae322690ed06179195c2d230faaa0e7406c23008402e9c6a6df414ac103563d82cbecbdbbadbfc91e6694d0966206c54c4767a24a4cf4a8849')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
