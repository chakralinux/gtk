pkgname=thunderbird-i18n
pkgver=52.5.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('2d9b168f14fac07d66c7d889b3d28061f5f85eb6c60d1f8650382cbca3749bc3b77cae67ad707f6c4bbcb956eb2003abac5734040b289a50ed21fecd3d2ad12f'
            'e4955ea38a41126f5304431f0eaaf06a01a7f186b9ac52867ce2df098b5ea761c97c8be4ebebd4cb6598bf7dd6aeded6b257dac1ce27dda8b719877a275e7ffb'
            'da8eb62a4a1704c0f14e8043fb4663db706292c15c3a89b770ac7cab7dff606faf285454ed49cbfdc3ca92c7b10f07a477fd7036d740ac2e18d35ce0e50dbf76'
            '019326e813f76d38504f9c327569302eac6b58117ad08075394e4bc12b5cf0f576fea9a0755c233ad27c3cc566670dbec9e70dafa6ae2c7d919741909494008e'
            'fc11e8b4519f05864690ea7315f13261e263277c656ef34b1c882fd66f9a3664c15cb2f26bc99eefa23ebce6e4052aa749072780e35b8163a0c4308145c8530d'
            'ffb5192d90927506c4c83669729b4e459c555f272881383a6f8f479b7285815bc11ee7dd7eb5fba8332e02ae8e4632a212832ebc183fc47258dfadf7bb5668fa'
            'd9cb6e643eed8c110df555fc9e5b5b8b8b07d1dbd189fe4a9e5b82b2c0d334fe15e45000e321efa12571df440fc484587fe676d645081643b7a6d6e178db33bb'
            '954301323aa6c393c99bb92a1a220bc2045047c435b4a52fa5df437c8a6f3a679d1dc58f3550f727e2c3f917a447776d9bb39961254cc297bdc87be344a27c0d'
            'f1a1c53a74b015f6af4bc76036fd6f91da3623b134d9cdbc400af4eff89a1413e03875cb6f527e61715954f8aff7a0ccb70ebda9d87ccecf5e6ec156a7bb2226'
            '65cc8af943713e0131878226d3ebf0e5f27aea3a3305c3d48605522bf31ab091662838009db444671da4aab7c404c1ddf03326c5111e786bf30d8ce2aee230b0'
            '67b0c8c3e3db77350c41150fb9ea0c9093949bbc6cdfe3a3e9091248b323cc9b727091f6448f822121fa37679b08332bcc254f92654876ebf587b9a0cbfc5190'
            '8174909a2a4f4a504663242120762b24598c8e2163f283c8552f9a605919aebe8a4fa44759d70a98701d2c5b09edaeba41974c0698dc0a04e2fe36f78a3c9a65'
            'ae3be44135d5262646ea929403d9cff68032fff067aec2c3b92710fd7046fca604f693f9d30475a34d1fd6cfbba10ca48e677c498ea80437aeb4a1b2fdc227e1'
            'c4a71393007c324f2af25a0f9d896373f4d0146e6e62a5e1a724a3f6318188fc3136c436d3271047469234a3c85367a8bb9d3814a040b828d0ef6598f87f24d6'
            'dbd1f45f5d4bdf5dd2e43330bf75fdba5b7e30f20e55aa1755038a06be7c3a417aea15105b449f35a5283922c5e8af970af607a23563f1a81c98ad2402082b4c'
            'ac4d5583068b2c5887e0bec86354c821153c57b56004e61654f6b6afdfad7fdde21ac01491b6f2afceaa347093ffdf6fa87e8954670210a070872121fbc3fadd'
            '6ad3f52d2c0bf10dc73c9d8eab08eb2a1df655e4061f0d27f8f8b7335c3c59041f2af3c90ad1bbac04491c1633a58e597b3754788905f82959467c74b6423f1c'
            '4de837d8651c302e0ad4f0243e791ed396d5ed9842128fc45d13b1fb128fc94bd070ed526c08781cca49a2f72d8b77f30a0caee82fc39c7fba56d4ee0f712fd6'
            '3d2df00ec8bc2ea92da1a2d820c15f34beecdb5a16aec9c8a3bae78e4c5e6d4ce50702f107eb626f83ec145df1387e4a2890b3de2e809a46299c566806ac9d63'
            '7831392bbb24a84cbe32e7f1142f0e4d5e880ff3a23110a48de97b4b121f02a141a6d5baaa4e13c40195703a47c49cf08a61490c10dc6a0b6da22e9e4955151c'
            '8186daf635e3a6afe3ba3986cf4b7bf12f8e8ddab399fdd14c4a2efa591e059cfeac529b8f4f67f2f4b93d4625705c4cad9abec99bfe6a4058dadd64cd350f76'
            'dc9bd843f352e5915305a70767caefda7c6127316fe36bbd8af2c49262d05dfbb5b12f3d2b0c0e9b5421e858b467da0ef64e93814b020ee82507186e1124eefc'
            'f15f80d5119465fab34c2a316ac5d8f12430f30237d8fc0efedb27cce289ed4d4bd369bc741c9e5759633c2d8972477c5a74d0f07249460496aaec4b6ef8fc9e'
            '1c20c22f5af002807a376ceb7ce0171889310c95c668c3258188d38d0800f2879295d9c02196f2e2d500b79a3e504b96f124b320bc9d8c39fbe1c7ca241cbab4'
            '67ce0be04b6def4fd8623ebbaa39ba52efdbed423656c2f0d701b93ea6f0460a3987454a4f964000a58af30f322f907bf552af50426cfbc9a4fd5c01c7261570'
            '68e9d71884e35668d96d858a3dc6182239858504107c3eb1fa0713fd131744f64fc5d6535b45e5c93dee38669d660d17007c5cf714fc8b929c5294c8d84ed68e'
            '6d86a09a2ffd163d72e692563815210bd6fdbce1b9966f2747bb4e8c1c41fae148c6f281e3d0fbded28cc774e1a50fddbe6faf47be7cf8e66c622329c826fbd0'
            '5a575ed2d2d16c3e3cd90b750f6d979549003af602ff42ae9bcb22a6a007fb9fbc4ec5bac8ce8c164c02c8468b4a6158901a25f906d9c3cae3a0c498c18d94a5'
            '5a956004611f04ca3206047c18dc0dbe7be718e14c6781de32274ec9535dfde049e9fa994b6820422af066057e0a5f7ed649957f79f77531f9f54f0503f9d0e6'
            '3dd6fffded6b28fbf604d8ee4ab30dddd1428d5656a50a16480de3bad7284a5035239ddf32373a319fbe7eb02086e16b767fb648148ecaa46bbe3f6f2bbe2677'
            'f70eb783c9a3271f89e009b60af7db1635e91225756034d85fef1887f3fcf1a4692526ba28ab6b5b6af2c297875251323746e86fe1ba2c76d8e9efc9105dd8c3'
            '77403ecfb6b94449da8ed64605275bb22252f322b04d2be41359885a06c4ba2c8a45a441f4d8a5fc0abd1b1441830a54131f0cfa38828327f8ab3e162491a950'
            'e023acf509b5340bc5de83c02b9742d4035612092638ab707a9cf4a024478c6790e921bfa121d5c34a047384cb368a39424224459a070eae419c2337eb2c5de3'
            '10c924c9d2e72857a6a6adb144603b0f93658bc17f4ed704f2e162ae9417ba29291ac3cdbfe7ab2f6e505057202fcdfff56e5162e1ef749ec36bd37eacf3420e'
            'f2a67dba86f3828ccb232429f5c4b0e32dad05b8c302d1350fd1a159d6a5772a46ea459a86f6c31b830e1a70eff7c2a6125aa389a66854e07fab8e90cc1a81c7'
            '7366eb30267d55de6a064d56013335e95d80aa59d11f4637d56332977b204f2ab5f11b0072d1eb8b8f25837b2dcd3638e8b8615d2cdb1abd6df073a739b7b654'
            '2889eefa4a415568277ef91ad83aeed37813647b4562a2b53c4ec3495a4fb9ee9eb71d91a1769ca2a989a8c81770109d69af7de588fa95d1f99b45c8e81bbf3a'
            '53f4286d772af127f9233885d02c9e893ec6429410a9d1a6a49180a67586a8ff7c2463b51f8fd8e8c73e5ec366a2212755e9499e5f902be3dd00c0d7d1458405'
            '83389cd51ba83640a5006aace0aaa42bab3b80fafbb35d78e04b214bd74761dd12611410e6427feab832977934d216fee9521c971bf63463d99a2042a73f69f5'
            '2814cfc4a2a931aaf0915e85423acf2cf9fb775d56c85c768d35861fdfb1a0c9e3487501956c701ea357c11f6fecf8e2e62553d886e92eb395a1ee2f585faccf'
            'a9156db559979faf61066c2ce86587ad9379150973604080833674186a68361db8ca0bd47226dd11533fa82a79339b39a169b07635d5518f3d78e8ed001b1e7a'
            '983f71665dc67a71eef5b18824234de16fca3ba9eb53dd646f81a85e75ff4669ee92e5204a757d9b128acb8672e79e1c9f29b00964d4cbcb786045577a2cad52'
            'aac29ddf8f0570107123625345ae2924e5b37a5b14bc03f36e97c19ef942c2ac363635109fd81fee5de6c26630d12626f6816bc6496b8a86aa8cff4553da9185'
            'a5f65bc7c54a4b364590085689da6c0ab726017fc00a5cebbbdf9e6396888dda8666823f371d7ff9850c571951acffba7d7a4d3583f350dd50ef739ef74777de'
            '1705819cff08feaa188d605d886e167c26a03599fc71929358e1a6b9b66fb48c27546541194691bbbbcdabc81238ba3f002448fe0e50bc1b50ce1173b8edeea8'
            '2e2700a1d926d353649c5e6edcceb722d8a5f4d1153f1d950390729565cf3e53539cfcd17793c3720c247ddd43d5f540a7cc3ecedacd15f7fd6e60a5b03c74d7'
            '64c060517aae4a6cd7faecf682a1ddc44efbb5861aa32f215936e04e6f0338acd985b09166d2827844a6582b651dfb3f5a13981e702d19bca550064319259c15'
            '0e440a6311024aecfd01b95a3fd0973e38e52784df18d8d7dbeccd447116d0f2b84c72152ee7d93083e2dbc5ee4acd9902d7a5ea00c1030552f14bccc10f337f'
            'a1cbbb81b7802c540669d36f2899d486f99343172a52e3ea8519a7b701604309b232b696428284495cefbb97d9781ee5e39c0a45df8826d6e25e841c536025bc'
            'a2724e8f4bab87a5d0b183f7002121ed343902ad1b6bf0e2b2f11f4997db726858170ec231ae6c087437580c0cf21cd4bd36f2bbb66b2f61b5d152fa2e53a192'
            '89ea2799d3b327287ea31f15ac2cd6296ce41096ae940648d248856dd77631a1f8a32c2df16800203191181f526f9f8c12311f722e16fe0daedb2efc03108a42'
            '44a7b86ba202d70f69b874a7a76de0e68e13e1d9e40d82a3763032860f16494a74ba722186c881a71ed27334d32b03c0f1321e71520a7d4a1a208d09e2abc7db'
            'b7d12eabd2cd1c722d5a906f361d695503571181bac1b26206da6c6464ad77e7eba5ff368944a48968fd1899957556a35103376854336d29230a670a15e07a36'
            '2d120f19d57f486228862f434e3aff63e2213547fcc4e5ff3ecccfc9bc18e6bd3aa223e999965923879d0d943360b17247ad94946afc7a962d37a6d380548673'
            '19218e384e84fdf8cdc00fa8acce1a70f53b5c2ee6df58b9a1001bcfb2b77ceb031148c2b95063dca8a95157718de10c1315811f7b9b6bd36f4e7a24e548eba8')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
