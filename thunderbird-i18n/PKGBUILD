pkgname=thunderbird-i18n
pkgver=38.7.2
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('ae91869c5d426d1d65d55676bbf7a656b234e57bd283c1f90f7fa804426f69f314d67132825aaa507e6dc4e912e558ee8893d9c5051d4c47ed01ec715136e0e1'
            '7b656e9bf0e4c4cd7149490da42beaad8ad21f6c8d6e3614fcc7470b6d799308352028b992c6323d665608fecc489ce5bf7265599fbc7f0f352a8623ee4b3ba5'
            '386c9ca4aab3daa98a167be87fbc1d39e4eabac89f15bdba4ad497600a9593cb7bcd96f82e1628aa3e77eae410fe4bc3c1a5452e1965e1abc58dcf4ec4885929'
            '838b93f2efc71e650064f3775686f90edf469828d79d1d4d7f5a9c588f6252f63d83eb8329879111a0eb14f076decfcbc235e13f077dd634069d2a1dd3d9fbf4'
            '5da86eeca73ebbfa62d44a21239476a31e8582f23072e0539e8dec61c690c7e4013088a7de2b98a887e46d5abcdc3c9c98e672cf4f87d37ce56c3fc088307a6a'
            'd107102130fa7bfde5b96729aedbf8e789060c38f4ef6abdaf56b5e75d65bd0ff3c19852413fc4bba594efda57cf77cd451407e7259a77f4d77f419fe4581574'
            'db34b48f822adfaa72cc06d98ad990c8455803992d44114c3a507b3b53d7d65174edc4ddb5d2ee0c0039ca79a8c3e725f1fcfd359593fe375d0a3167199c95e8'
            '8a977c5567474a8151e46b88cea19389d9761dd0265c18121091a1203c75feecc9ffe7a28614b9d7d2a034ee9a9657de9667560d1d61f9499c8956b00e96c8ea'
            'd6a0c09fc6640ddcfa33777ba105742f3db8cb1800f1b38cb28ac102d0b7aaa389ea8c6d3d7f7c2db8787fc7923afda7646e792aedd235402b3638db19e5c7bd'
            '0be9780316c1e66832ea0b7ad13519fea4aaa140e591044a8a9833922ab9c7730ecb62d86864bbcb22438f110a60173412bac8902cf33ca4019c5a2fceaf3c93'
            'd2461e69c2355a42402d5b027903cec1e9bf337bee10e4f40809d0201390872dc4c1232b7969064d296d4da8b413913b85da699ea3244d7dfef365a6f221ad38'
            '86b76e79c35c13dfffc22f1fcc3b66cedfccf0147e5a7f85dae65af226e13582ce92b6689a273ea76ac9ffd05ef2693516668ca7f014232c78561b5f970b254e'
            '20ce61f3a550bccd7c7801dd8e1fe24f59abd76e9b85b6a146d36979e1600e9350a4bac77851751a8b3ec05608584ed836ef23f60b625f2a0b23322a053a77a8'
            'cee3804a1545505ede7316b1254887c08928bd06a047a0db26b06a383c124db279f49eefea487c557b8597d095a1e965bcf64244617c366cdc62a0f5a1aa70f1'
            '01cc41cc35bb2833eb13f8c1e71b8c92fd8cb3f1a8e3aeca6c4719160a133658f5fc374ad9db0237c8c2b7f2c4bd74ff16ef2ab898afc6d6028ec38b47cc10e2'
            'a38d906cee7cf52b2da21053c2f43acfe52ccf028fa43cff9262278137fa59ca3c9f954377a6675a88ba0d979d7ef280418275babff97f724e9b0cf988475894'
            '95e65bc8e904de3d503ac7a692097afad09497ba27ecfce6b95650ac33c24c813046da68553278410b9211c8ec35a573d71c567a61230f287b82a4ad3548b327'
            '7ed01a7f0c393a86fec458640a6005db75d4befd37f56d9651c1dc3aed03b3f6f292c2a22d1c677b1e14b547f105654569a85c3bc1e72776c66877d78b0cb77c'
            'b6a696161eb5c3770f729e67dcdfe3f7decdcfa423b4d99e660f6beb77aecc0b60261bc75f94570e30caa7fa70277945e91c6ae79777adc325d30b834281e1a8'
            '10da3c5da70118998504ac8df69fa7cff0f05f2cd91a95eb20ba38310a143f65f36559712162396d7edbbb98c8b05edd20822b1571a6f1c8173730bfd41f4a72'
            'd8d30e01e3b422cdaf9a76f91e9ae76485a79cee050945769d60aee9064db29b80c16f3d0d96a4573f5c01d0846da724ded0c223f790485bf5fdbf0208777946'
            '89ca9c90625dc2d1fde11d2899b72a21ac2c2a1d108ea33de92f323de909f08ab05da6d2b76d56082b4932aeb4d2f7d57e466c023c7e7c0002d54b93a0c1f7f6'
            'df03bed54cd3f633352558c0315bff0d6a1bb064c382d936c0fad9f6255c9c099f398b729775ee7a8766b17f69c75e9c342a0287a33e89f0eaade2fd6b17f7af'
            '0753d60d999f6c8f2687e65fa4c7c4e62a40b70193bd4e6f434c9e5effb8b9c6c8a4908e4ce57d72bc4ac176fc417c0a0d843ee1d6fe4e2167aca37cc2df1426'
            '3341020f8a712c1392868aab006bc353d16e83d336830c415b5491d5a5fc24cd193832a570ce3759f9d2eb856e7f849ddf5da65b5b460d6ecd557cf577b0942e'
            '4b2099b70bb43edc46972cd523863e8fee7291786811c1a9451086b451d3e3b561bda389cb507b394d28bb42b738160966a0e01f04128bc93fbba87a75550485'
            '32ddf268e11c68cb7a21472e2ab8ae393d2898bc5db4db85c5640f28e24f60862e5d41e1d21f5463a5df15e9cfbc46d363f444f283061d3e38d944e61cdff40d'
            '86f707461e00ac52b3b401e9d622ba2cb6cff195fdc633a16951d2590f9a519d789affd097d36b0e4b0be9ff82952c2a07a383e6b344438c86bfc981e23c420d'
            '48aa6022f9dce64482227f5700cca89bc14476f64b32a71d4d28d554e97436a15de5d7b2b03fede6d4261ff7af9e204772cc8091415c939c9733f6045fe4c785'
            'cfb5cf03a9f1572ce2d7e359555b970e125ff280e9f2469037f28e64c930a3b0eef485f618aab72dab4c19aeb16b60f11bc98050890a8efbc73b013a01397b68'
            '4fefe32cc36e5e1addb99845e0eb4ec8e46be30812c33f2c72ec5389a1adebab525eee60106a9d2c602588a9112b4c878687fd72e305f994e428c9a16247444f'
            'aa9f55bc628c405f717fa264bdb7437ee407826fca9846e8bba5a63c758c2a4a74730746ed4a6d4f928b03ec26ab8da0f94c87489a59fb43626eeb5613263e63'
            '79682d31bec71e127ce0d2cd79a0851d706a601dab42236e5f837be323e87d5adde090a9d22bb5df2978880efaf068537f6ecb8470f2a06be83f27eafe71a53e'
            'd835927cba46727f7373b0a61b5c304c5b5270b7dbb033af7358eb82d54bf6134d5cfc19172acad529076ca4927ca85ed20c4e9441172a89630c38ce87f1d9a9'
            'e83f5ee492be61c74c4e7ed9c52bd3302efbc57bee5043554a3e90bb08cb781a07658925aaa0afc017b749e7b5aa743ed4d17db85d1a68b3a5241b83670c9407'
            '64c5ff0186d21c2ae07153ecadb9c209e5520de070d20106844f24c24d40a8477e6c8083aa867b24be835e079d27bf124f575fe79e3c82f98e6582607f405305'
            'e689f72d40ca7eb87090f0a0fad527f431322ca3105e64f1596c4d6180e5d93fc1ea7432758e80e4661d32ef1f15c8e1b385a32d0566f053bd5f8e2535f3bcc0'
            '25305e2fa0781f73ef6cd53f6b0f0f7b709e6c6837b9e9400f5ef977593bc2baaad73cbf6a2bfe575b8670bb20f9e09edcc4ba0bd2c88c8e2712b4c99f7349c7'
            '1066ef0e296beddfb53f93fb7b2266cc8560949105fb0d96091b9f78a97648881fd3dbfc466669c7f86626b86f7fb5319620e7aa294f4ca7da8d1907ea58efbd'
            '02162350c3721817b24a207cc8654d11871283d96671b3c37245ad6e1bba440d5254e214e6151118fd6ab0003c1ee1fb9e22d4a0e297975176bb3bb50c75e6a8'
            '7a8b255a740b1a2f297d1ca8f04b9d87d14f72efc2d382ac5521c16d64e42edcacc28af0549488b8abb0ab2a14a20b761288d05af0867c5f9746588a291c6247'
            '9fc79c95b1e00d0a476c38532f8bcabdcf850f8be72fb4bb3832af49fd1c944a4a63b3eee582be2e4e6345e90c5aeca2d2de1f3f4087dc588c8ce835f2525dd9'
            '442e1ee9b300b315570266a05846ac9879a5c7d43acb4403d314bf732cca3ca7676d5752df24f9e03cf27c917a16738b93d1b06487adbd8ca72b65683699562d'
            'bbabba49b55631ac58339641393a535dbcc8a6cd4735d203bb043c99d9ef6fdf54233d513962c4c47e94a801418bf107ebcce38db067b669cd3d5db4b45e5374'
            '9739ea74b978c9e8e8541d1fc93eac2840d79884211d628821515888e070bdf3f30a170c9cdfeb35c7987111de900e5b34b62d41a38d0f9ada8d029726761001'
            '6a68008c80da4bbdbbb38533cc6b49a0ecdc2b938d75713e3ab921f5c72d524ceac89e874e4c0ab908caae75bb348c70ef7d5bd3ee9836f7437a73b11e41ad53'
            '4ebd0d3ee8dc12c7259279abac6c9a0e990098b3ab8d44f102f41639590166c585ddc583bf5c26bd5c81419822b4566afb451ef55f8713ad8ea6162767c7250a'
            'a5aa729550b1ecd02548fedfcba062d6596c1849684942e8647cb4a712284cec703e04b7f5956c62361bb3a56a16fdc56f45cb365de17b5240092969ce2d0f56'
            'f6cbe180ad70553a110cef43907dfa57364c59bd03e34f30aab15f93089cfe8c26ece1b8ba9cfb57cbe9f731a1947ae4012487e0d817263e01411872e89f88d8'
            'b586a4c6aa963331e63f444f64fa16a622fead7ddb831deaf15bdeb361bb466acb559c9ccab213f9f46c1215a45f7df2b90a5ad53defda557f0490d9b2724d22'
            'a49f8ec61be8f51919ffd4c859182aaa8b269b0b9c65088ffee417d17ecd022ff5252fe23b847ef93cf331ece1639a99a9ca3b986cf973244db65e396e50335f'
            'ca724be1d0e9b4411a3ef2e0ec447483600f309e08d1268a7f3e8f381ad23208a02835ad04d95882da7f08018f33c8e1c22948717175aa2bd6aecd77aa007ffb'
            '603f203ce6072172927b731b62b8d5d3756b501d0393677047bc01a4a40fec6224f5d9975e15e4ccd32b4f7c5c6ba6d64dc93bd2307196c92b14ce1cb1a84c6c'
            '97c5797aef366225ec7353cfd5b528808c3ffc3ca21db15cd2a6b2dcedcca014d9137c106fcf105cf7000fdac658784ee4c011a6ab279221289e6c554d5a5f02'
            '4aec7cd6fd4ae6c24505ac8336eccae423e37ac56cdcd95e96d019bd8cab2e0623967b8cdb59d7c759ebeb4eb3238a0ee21e2ad0f9d6e9761344653a14027439')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
