pkgname=thunderbird-i18n
pkgver=38.5.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('edfe7095aeafe4689b6b20370b5fbaeada51c8bfce7b99b347d027d2eef726b5882f95043d79bcc20484afe43294878be6a1636bea94126c68504d802c77b0d4'
            'b8cb68d38587db4bde487a1ac7b664b8fffb9444036ef2ceffe1a32dec095125b0c39216f42ef412a12f1e9c843f27605117704147e52f1d1ccc6af7450d41e9'
            '68f61152a646f5a276ee114c0a5a72a9473cf45a11b37cb38691da6856abdaca9502d21cf19c2ec78a4842d62dd532e3d1c87b40e1e566b2a6a8cdca7f6e8556'
            'af8500fdcc4ff8653755cf17ed89bbf4b85c0d2e4419a3edec2b4d3917290f2d39fcb41cbb5692a4431b02398903487487f6ba76c87d00e7ebd04cd491a78cb6'
            'dbcf46ff9c38eb8acc98c1b2f4b59159ec221c199e0c9395872bf5d3e00e944e2bb2f76adc07499887ae501f2467af6e0e7ddb48292d44973bc046869d209aca'
            '5c9efc1787133ca31e231eae8fbbd3ed784954b6d0cca2c974f858a1b552883d51d2c9fa9a129eb4d913dcf1ac4db579bdc87110aec36d8a19e4868c81d8396f'
            'f0bd30babd2198a5041c08f7ab444a97191f09391ea772f458d7d4904e0d04243da01857e0854986b24b74bb87ab3ab0c01e11c720c29400a71d571a01aba700'
            '4321efe812d130f479b84887838170ad83f216e1da3a6758733ffea122c5388e58c1404482fac2d0307279d7ab82838cf23f1198422c3e12636c187bb747159a'
            '702cde6294c5b7a44c18788163676057e4957b9df57b3ca0aafbc11a998c13cd927d556e583fc20d8f49ec2d7bb38562b1132442e0aa5a020cb982843a144249'
            '33b00118617747863a6115eb2eb110e6557c6d1ceb8e71636d5925294f48b7627cc31ee38fe64411319d1204df33dd4fcd9bd0ebc087f8ebfae8977ebbc697c8'
            'f92c5b1164effd5277a1bcf72741037d8d0f8297e5c10e14e4367d9918f696356ddf3aca14e08e87896605e82a70ed8bf902fd8afa89575eb67dc8b602ce9a92'
            '3ff332bd4e7669e4836d2af413865ea49f2500386af1dc2741d679164c77e0b6fa3805463db921188ccfb155ced92655db2ecd6b05fdd4b2d2a5b66939fa9f42'
            '3dc6e7d3320e8fcef929fd42837b822b0ec429cc61114b252ddc32c0d57305f921534b2d29b0fcde5ac11967744f5b9575786ea545effed8b3ef2e4059b160a9'
            '1915f7e90d189bb6b546d5bf104da10ea41cc4b688e45f9e6e0f4fd6dfbabd62b1d97e35e6f6363f937673fefe90310f8f5caa2e1e9a9e62719b21a76c4f692f'
            '5a098ea8687c9a40c90849a234571ccfaed692e4543224ab1ce849aad306a32f4a490b51d855779c8087e4c3f2814b9bbd574f70ba6bc947d47a7be00a2af6b4'
            '2f79ffb8c7c43fc90a5bfe4ad1309ba90596152f76c9705cd456e8f1e0c653a4e2423968f4645ac71cf11692b4b4267af08d09017ab96fb4f6c527da2997e6b9'
            'f83503125e63937462e1942afbde18750bbb69719a5eeb7f04c66f034371a9a1422f8050d3bb7cda3f00b73cae4d1db27a5619270c218b93ab4cb49e93ccff1f'
            '0c8b3f48961b0fd96ba03ba182e084df770e380ec1fef645825baa7702add3ebdc5f9f926d4203b9c8bbfdba0a01596b390e2b809c4cf0848e9939124ec88e69'
            '07c32612470689dae69d3626245de327106f0fb9ba9b237db3db409075a630f83bd2b8dc0f57827cb1b95cdd7153add4d700ce02c813467d8af2ab00c5692202'
            '2e3a5ed3a7a06970d238ab41b069dc01ec4763b099320c14b722fb1ff643115f9a2eabdecd92a8fb501401865696621caab0c1970a0659417971c6adf1d527af'
            'c49a9e9403a93e823add907ca42cd956594e2a2e3f8167c4450cd0ca46872279aafb3571c15b8f8ac6ec1dffd012da7d0a3a63306ae48a66a1ef8c38d372d4a7'
            'e1260119a42853b21f9500b9f079643cde5dfbcf79196b45db9212432147892cbbcf3f0a2e5555faa41c749bd4dd41572cf97e083e2f8db026867ad053cf1e88'
            '11b779b59fe1fdea2570b4abc2f7093413579c24bc0163944a0002f7d7aa18761aa9caa8de14dffd1972c69ee5039e3632c75b97f876b6264570e4e6d680b905'
            'fd37f31677170f3bb41a48f6ca167535d19340bd9a9fb94d0d2d4644c5dee3ff8207bd83ed9efa254fa147275282bf00290adf77c3ec4b19f28858af88fdf957'
            '9ce39decf6549fca045845faf0bfd41c716d51c831a28295f21a1fb5a2afa65f16f010a24bc5f53761996da029587fc2b47691e3dbe2e892f19c9aea5a98016b'
            'e7067fd333223b237c6f434750eadddf31e27692d12547b72183d24e273ccbf27acd2a3ad2593c2e07408fa2e9b8fb60800f6e52d25c9714b224e2a40b8f9cc2'
            '94d2dec05aac7805d1fb306089b82d9550d0d48ec1da7957b25d443c7a28e5023072c97d6f1cfb2b81623d6d5078661badf995fd25f251e1b0b06f35cd9aeac3'
            '744c94d1a3c4f2c82949b32e76dcf68fd12446cd24e986224c00eee876b707670b4dc3ebb63d60c32656604ca11c6bc6ca3fdc51f38770e46e896f52d5b34209'
            '03cc4927542d7016c5105b7f29169bbbda2b2bc22ed95510407744de3efc98f13464897f6c250a98a166460a8c0217a0cad9187bfa847d2f645250d131c18a26'
            'ef569c3695f85f0fa95bd59bff405db47e959c3e089cef398f9e43a3cbade920347f0392d61d930444b9f84177fbd04ea6217ab8cb2cb54c79b42d9bcd3a02a8'
            'c8e9a741e91251605eda9e363d66edf5bf8d583e876b2f02fd307cdb261d5e55148cd6f2d067c8397fef8f359798fb50ca987a3a681b5c03eb17adf78aff5cf7'
            '9fd6cbb3b2fb5261f01b9297449806feb4dc9a60b4a4df53c4fa9d7c5c7c3a6dbd89b1845f65e9267b42e18b9cd4baf301870e29c838753be11757aa474fe7bf'
            '8423b3bc745940df72e9a34c30a7944343204b6e54cfd5f4048ef35b3cb9fce84ec953df85cfd264a363dc7e9ec170be40583e153d8e2918d975e736e75be34c'
            'd77290794f3db91b7856d331deb7839cb3c6ab66f9b08ac826683826c00421c4addfa90e8bcf4a3618d44d352378f1fc35819f7f0cca2eb2b5653374c6567f9d'
            'd357088ad8f65d668f3782a7f3a93795ae75b39bc96cec1dd40e5cbcf5000c5c6f0352eae6ce17275c142812645971709798e21bc11c1f2bc4e9069d039e4e0a'
            'eb2ad35d3abd185f51820c49bd93129f3447bfd47f7bfe908ad2eecabe9f4f8d14acc26c9f7649ab423641f93d414c3c48b8a8526a0cfb560dc38b56a04e2310'
            '5a92895cd8d2407f2744c342a8ad0d71ab66501d3ae1b583f1cd390af2387feacb1b1752c778c8a21a9f8e28a9c826ab4ef50015fce7e28bc9976ce756eafa5e'
            '29c92a3ddffa974112c60f93ef0ea17578a79ccbe101ce6b6d6075b515ce13f02afd6de261767b21e913afa95a3072f60e6704258f578dd3889fae4b24579d82'
            '29f23001c294cad88637a29fd97c640f6751c6070baa3d4721ede9d23059ddeb376d7f091bd786bdde90e920f0251e53eb4c1b8f9edfaa0db1dbeb63c42677b1'
            'f5007c9918a4576b21021f12e3ffc91155a1252378273a1d62c410ef448ace2a3b3ed1ac95563338f269baf8483d00ef32f75460b4701e7f6454453f4b9fddef'
            'fb85ea3d79a93190a97ba83b61f059569354ec14b3fc86290aabe8c3c0804588f7f34762729d0686c1354c2c5bdd19d56b6047436fcc134a8e85bf637b3a4f43'
            'fe48a247903a470441e973314713cabc9d28504c24eef952faacc32a1ac5b75984e20a28e96f27a5d2a67ef5b1fedbc65e7df1cecd3c71827f8e6613913ea87c'
            'f6e6fe1b19dc47496b6bda56601b46c8edd10c95cbdc67190a376e66f5e652866915b047d2c90550431dd1716d327dad924b31690696f806ac4ba6d5721e8b61'
            '0dc7bea7a6387a0bd0db11b59f552b23d55f870fe2cc5c3b2f1ece1c319cf7031b83f2e5a608eb72f608bbe7b77753cf8cb2e222bef94028bd373fdfef6a92a8'
            '04da26eec9862dbd3eae10321ad56700502ab5fb18f88db881fe8dfcab245ea4169abc9d50876ff1a61323d0e146591c21595ce4f51c4399ea44d1d6b16c35b4'
            '84f545e0ab5ed2e5f466dd3baca988401dae38779a690288be3ae56f8954d4ff5aa746164abfd00e8420072240a44652244cade2979383f2abd346cbd84e7cf1'
            'b5c22934fec0edf84c2ceaa3ee4aff3e8e5c966230d8258bcc7f16178aea34c1836a77d2cbcac059b368ebee3fb883530b4a684fd161aa32696d1f0fa4784b3b'
            'e75ef39e2ca21171e319d435f95073f7bf6ea3ae584835ba01ad78dda2fae888c3a325bae563236328b331bea49a0c6ea9831efe349f7d8870e7df01141f782b'
            '860b7f76c9b2523c6fa639078457bb682c4c892383c74a30f6468b7dbd0d9a1fdc9134d917f69f0340d130c9919a22eceba8b4d6f9db2f4934284a7f374b640c'
            '45e172ed85cd03b802fdcce8ec7d4808e994c028909a0afcc879d16d980747dc0451af4e79d356df405840ecb0e1f8d5da96484da70bc47f55f9398ad3f69643'
            'a4ddea10ab97ed42ba7588dcc63a4ed1aa2dce53549ffd5723cc8aa39af259f28d7f265c7b6812e385b8531f9c25596b8f6ce24904605cd3d82f872f197c1607'
            'b0928cfb448d3083a7a12f41af5ac81fcedaccf0344d75a8e85dd41818b9ebdc5d0cda55650612ec4f45e8bf158fb402d08e4c8b6bd0726d9f500527fe672b66'
            '8aeaa85cda93ed340dce2098fa4af1bbec6f376da03e57043ad16b88ad8ddac0ee70ece8cd515f3bcb242568cde6a5e02dd310ae5bfe825404974fb4151e4d8e'
            '442929afd5a976578c1ad08e7db5e13420534051080c84e4748a243916dd8444b5fe90b04a3f8b301ed7a75f4b0a9945f2eb6ea622566bc66e921e5c36fb6d05'
            '9073e2b774a0a19e09200439f6702bdf9bf994e812a8a25dc49f97984997d658f454417318f42d7512a6336a26b9a825590b559e73ef9ac44a0f645e9710cdcf')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
