pkgname=thunderbird-i18n
pkgver=31.6.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
md5sums=('504307a825f021e95de6d91770663a2a'
         '995b4a45c2574deb2bfdf97fc0120a33'
         '950d3058049a4111197644072de4d742'
         '5f2e1d71cdba0cafc55412b285ba41ce'
         'a1023940a0bba888d43742770b62f31b'
         'f91080f45778fd17ba75eedb0becf5bd'
         '29755f299a6cd3ff0ed1e09a7fddf546'
         'd95e2b5db359e297d0aab7ba6a0ab658'
         'df5108970b7e67a2d44658f446ded997'
         'd1deb9b8b99c7bfdc1e8a76fcc213d20'
         '5a1e5e88c471fb26a19bd6c6ecead0bb'
         'fb40ceb0b81125c0fdbca93d574a775e'
         '57bfbb8755b3331fab7b3dab9d27f6c5'
         'ab2875e07f2c58c7ddf30e0817f1f40f'
         'cb24f5bbc891f86c2a8d60acff893873'
         'bc3cbc0b2f4e0990208a971755fd06d6'
         'c7bf2ecd024de3b10e8a234225af15eb'
         'a881ffb60c34829a703175b33aa938ac'
         '1eba146606cf96395aef39ed00731df5'
         '6329101096b4bd4f0dce67c0cdffbbb1'
         'b3cdbc7e9e8aa7a13f816086dcd4f37d'
         '097d1ec26b8819884f6128ef3e64a3b2'
         '98be72fbb210f1697da4197f5a968276'
         'd1342cd99199f44fc29fc74232468c97'
         'ff2342396d1047b592603c37cc2bdd76'
         '8d3310505746925847a6ce37e71b8c0c'
         '1d04a7ac9a93b3e663fa6682dcdfb654'
         '682e18352ac8dd7ee7c57583cc2d7042'
         '16723743aa368f26fcdffd72303c76e2'
         'cab4365bcba4405479cf1a75409feb95'
         '8194a65355af904059d8b18c26bcb8cb'
         'fd7310854ec5b9cceff176c657d99bbe'
         'fab03baadd3e4421c1ad06cd5cd07b88'
         '0bfec51d35c86bd6f4a57549d796bca1'
         '621f1fbb712721e670f5ce893b0a1fc5'
         '72abbbb2b6634d5b570c04e926f55a8e'
         '67f5e8a7b24d1c63009298bc82985763'
         'ea493d235e74509c65167feed85eda1d'
         '63d00da0cb0b111e477f74b6e2ac6423'
         '432f2727e81bb6a3ecce675194c70821'
         '032757e2e74bf084ab56a588b129c3f2'
         'a1007b5374e70ea3545442bdeb2a6969'
         'd0cb110550dbdb654efb8568466a7e18'
         'c1886a0318074e596344e8a8de927064'
         '8a8700d0eccb94e53a21286f2d7314f8'
         '4deab3aff430025d5a6798c9b05739b1'
         'c66d571e11aceb379316680c8cd3dcc3'
         'a051aab001f016ce50bace38fe677e99'
         'e6c2b39c6d43ae9370266cd7f5b80897'
         'ee72c2dc175792021ca0f2778efac523'
         'f2f55bceb4ddbbd020213a85a4db607d'
         '908cd03150b1bb6d312242209cc6f112'
         'd583bcd0bc260789efabdc0bf6044b10'
         '15ae287526bf03425435ee0ae7ce8826'
         'fe7192b5b277f2f4f85031dcb86ac32a')


pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
