pkgname=thunderbird-i18n
pkgver=31.5.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
md5sums=('8d77c203ce2b15f312fe3e4ebffb4303'
         '6f2eeec2d6ed0224826c7ae140e1cdb8'
         '924d458b94e0477055584de3d20826d7'
         '4901dcbac08eeaa3bb2ea8b520d182b1'
         '6150bc718742b819854e7aae46661249'
         '93489debc25349669400e3f900915940'
         '26b31c8efc06b3dddbd2fc665fb0b56d'
         '2026c20e8c9a5922e0c9e77c89ba958c'
         'b1cc6e2d58ab0d76c66514d390e0e708'
         '218e116f0e100685c57148b8fde38366'
         'a4e4caf8af743a9f378766647a5e7481'
         'ce47aba8d9c2ae4207dc7f84ad32157c'
         '72fdfc5f1c2526ef69008dc56a851eb9'
         '8547b2fd0e60e445d75769d788b8fba6'
         'b702c093b3071c91d416c14d27ed31b2'
         '81807193be389a4b2cbe9d2ebbca0a96'
         '2a82e864079f8faeefd08b152394bc4b'
         '655470f848fc30902984280c816219a3'
         '9c354371a71dc48d8cd701589d9aaf12'
         'a484653ffadbc42b4d71fd9c504a77f9'
         '9f490655c7201457e3615beb5aefa5a5'
         '51a64294342aa6796e4c59cd907228a5'
         '783161919c6208d002985e10246c237b'
         '733081c849d88c25c90cdedcae9729fb'
         'c982a1e5b1a642ed151ab62d670afc53'
         'c5f446a22abbb26ad441a7eddcd8e35c'
         'da35b1ce41e984aec43e5a0dc0f55e5b'
         '4f60b34a0217bdcad077f59b359f33e6'
         '40e2a94617c7806000a4a44212593f63'
         'a4d7ffd58ed4590b5054222025f7a254'
         '504694e374e3d2e9c5304461c011a688'
         '3a9f610ee0ce7dfee90e1f4fd66b44dd'
         '114adbde234a7ed7cbfd802ac50444c8'
         'da9aa9ae3d1771de72de9aa1405716bc'
         '48afdd08d326e938a1e01f35b38f0ff3'
         'a32d8102f0d6a3bffba0f852263c00f9'
         '95051e18443a3b5e74e08bf4a4de41b3'
         '671f89ce131936d24aae4fa456182c46'
         '1db8fdf78d35072db1f050e7b8ed3877'
         '9f35141c7998dd71c90ed31b8ce0f10d'
         'a5a1ff999aa51ec3fb42cfed9af2c440'
         '5c68fdb6c330e9f8997845f1fd8d92f4'
         '73ebc3056cd33bd3d818d66f61ea86db'
         'd52f3bf7b246c0fc89b315beba9790de'
         '63319dff1e443cde37366b42b95ca855'
         '8464cf578c36610d8b4b8b59bd576181'
         '195cade59468961986779fe00f4f46ce'
         'f6f7b8853a944f4cd4be2f4366b26df9'
         '0e79944e03136fd748de0b1eaa842e11'
         '437369632d0a6722acc8dfcc6d733f03'
         '993c1c0b4a3ae8168cd659fff30f0540'
         'bb34f72b50b0f44dabce7e9352c940d7'
         'da5aade40bc1ffb80c05e65b93c5e34b'
         '813a4c1dcbd66be9affb26c304400555'
         '435e83b20d9bce12a83fd86f02336f24')


pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
