pkgname=thunderbird-i18n
pkgver=52.2.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('09a02ef659b8bda73b8ead897c4486a83af514a1d304805bc8220c39b3af375798d93ba711bcf5507c133c612fef57cab9c87226ef542b6309e13f8e75b7ee4c'
            '65f55004c8debca434bb19a6cc89b1961a75d763afb6f7cb32aa7015e61141ea0942330be76c6c072801e92903222c9ce912bbc9248b3fd4a670a44bfbd8d9c5'
            '1ff7f6eeb3f32f4d0718a15b2d188ae04d26c67746a6bf974992fa7b964832610a3c3cc62bbd4f89cda2e3fb4cf15f958b5871b61b7a4e0c496269a798750a9f'
            'b86c23f51fa0d1a304ee8fded82e5dc18c93c3fb4fb544bdd1d2ea2a0a56234f4d447d9de9f2701223ffbba9f91d4bf009870e92ce3fc8e18d636e55a06518ab'
            'a309172f6f0984f753df30b9790449981876f07a959a949d67e87573f1a62b63ad9e5d5c8859486cd43fbef6a2be3966b19fd9c1f182f73c43f60e64e1d3ea3b'
            '4ddbe4e8d5c886a291afee82992f4e8ef1c62d209e49c683c1c1cb8592f74e56d502b1968237a98e366b3a4623cadce63ac992a409759602c5ed18da8742f68b'
            '210e6af2dd6fa89148dae25f157b27f125f61f2a1b999afc4f155023cdf860be828b98a979037bae94858cc1cfaf130e9570460bd9180b4ba720efecb9c93b68'
            'a42ee84170798dc6df51edea15915aa5480012a91a58428b6acf7fedae18ac166bef4a3ec5c40c1fdfc8df9ded725e475d7eb4eb9addd3b7a6082cf443badbbc'
            '758071e2a56bcaac0202f37332792d6e6d0380e9771bbfc343926edac7855de0a3337256e6c906e6465cefac560275bd47848d583ce12e0c5fca255c85e5a782'
            '4f7f2f7c75aec17ad66c2328e0d03de2fc85f74c49a7703800f86cff32b78f0d45a152d3cee9d75b26583cb0f552f02cb64f0a24186c1c50ce950813db5f4e16'
            '4af0b69ac700bf2f5f859206a4309d4fd1f34d849b43605b45bf89bebfb5ad764fe986dcbdc5bec8a64c8e9b912df8fa78209cf13aa452b44ecb677cd3920167'
            '01bd0aa54530eda4841d0d1766d0869fd2457caf5e1537968e06f2e84d112cc0bdb91fa51d2623f5b43e767b7d44d208881d6de0d256728e64bae6808de19797'
            'a71d149c2d9c7dcc6a1c3be855b560438c7c8d695bff4204e21e1c489ea6fcfe630d2b550b2b02f1f303fc81ac889d1053c0c42ebdcf8dd6de96e97e61120287'
            '26a8e4e554581b815789f91d743533731339c8ba749b4564b689152d0eb30bcac7592f26750a7cadeef1da448dfd8e706e73c415a9de5bc34e0de83536f9fb50'
            '80f127cb505b816a0e617215932ce2ba632be0b0f291f0d93a5faaa6c9096ebd8e3a0e6e2b5bba4c98373338454ecf252e64c7ac9cbd2485db92bb72e072afeb'
            '9374e8a5aab5e1742dc1eecec748c103c5b822277ef64aec6ecf438f1251989bf2929911f5376f79695a1e493fa1bbf13404aacc7931be60c26c106e29d59df1'
            'f0559b09d4bb97163c457215107e048ff3cc52c1c95615eb67bcd45e6f27751701f5527f90916273cab873944957698b7bca27700a96419a4993a35b24526814'
            '25a6e45640681ef78fba01148ec6382f19a9118a88ecc177847232020fa30f7fc72d435d7c7cd3ee59ade4c3e5ebd29ce64e2109828dc4ca5df1c171526f7188'
            '2d35e7ae40a816c129b75a69f38aba73fd6ada80f6edba083577bce979143609056e1e0a9063b3dd03711957d561b034d6fb7724c36d9e901efddce643bfc87c'
            'e114bd53414c95f62518af2b5b7b3bafcecc5bb622996e849d7ae22447d47d834b9f5ffcd1311cbe39f6139c645ce097574733997dffa6c2de4fbd8a7f6ac483'
            '22068c9eed3a10baf8c7da19d5943c652d44bf924f55ff5f45d7405322bd22d659e4752b3ed0e3ad08c5ac1709a8a111202a4a78ac6c0d2509021ff6ce47a3a3'
            'be5d3e590cd48a7342abb7d8b8adf074e692dc2ee99575dcd48408493c7fccb7d1fddf650d1f2f40aa0fb8406937deab5f3302839459cd48b6558ca7a1b27ea7'
            'c85b878c74132c899eee4504fe0026c420ea812e1e3b4ccfba57cbdf700462591daa2f66d751860cbbe1a8bcd4b1494fb533a1d77261f94f1f59a2eb5ac055b6'
            '5bc0da1e8ffcc544b30763025f9087b6158e2a903bbfcf1ee8f379cfb61987b76872ea2e217f630d8cde117abb6717b1f4bcdd63cf3618296295a9beb5aee210'
            '2f319ea12e77e9351a52ad05a065d5ec3aeb54cfe9a60602d59fe39dbad1f1ab7a1a13bfe4de50faf616a2e332e2469cfc15e2fcc7e19f0edfc6b9075b198ab4'
            'a84ab304bf00f924bb45c8312a00c064e481542eac334d93eb81cd1bfef881a8bd2f96ca41f41770c1ca0e9bb56378e8bbcc1c99c50d920912695888b9ed7723'
            '2ca91023549e26f383f3bbcd30b4cf35ff5d88aed2e4b1dbf285b36942d42be8cf4c3eb37b8b4c2f91ae8b68bace21958006743c51748c650ed1a6910e8b1fed'
            'a7fbc76b7bd5594cdd96b64c01e09d4e436ef7f727cf5a7084f44717c72c9a4808f758dcbb6d182ba92721e93c93c8b9211f0b5580d7352127feb84592cf71e4'
            '18333b098425e66c7d83b12162753c3d9af2e1b45e85585f2bc95386516607d3ab6d97210cc5e920fe80f4a95590b3930abc81bc67837c80e6a7fa750442e982'
            '40458b1691fb43bb30f58dc835b7e1888680bcad4b024bd44ce5d8726dbeddf42912961c6a3954b24703c41ed456514af99ca70efabf451d445a8ee96228b905'
            'c6628c01d3232a2ecd25f6003a3e26379fe89dfa202e28d145a1dcc4907b6612633db6ddd46f01163021f1aafeb555f04b3b5c16c8d65b8d725e7e3d91b6d08a'
            'dbe9e28bb4cfca4a52a6be1cfda1a7fefc07d44a753db9e984d1f274d372c166f1d4f99cf5b1c3465b3fd2d69439ba37d8e84f55e4dc0b3ba5dd8e53eca68573'
            '0e4ba216bb7b4a1dd12d1de488a30ae2b5559875c4bd844b670f37caf039eb292ea00d0889ab4b34373c10879a47f3965f3181ac3ea6f68f404872632c9c6f20'
            'c1a81d4ca4ebc97cd6cc80055a6164b9e11256d7f0ccdacc5507007837d814bd078a5c794ab2ad1985824328537787f748d074d210d7149f6d3cd8c842ad8269'
            '0059bd6b887f54d74c3193f30c0a77921ee21c127e35c38bcff9f0bb04ab2efa09e2337c23de4fe753b87b8e4aaa2e65ca8ce318b05aa0f65b1d1dd0cf03541e'
            '2ee6c05bd9dbb7f58bfdbd662d15b93ca1b001df39f3a960a92445bbb13ac7ca1760fd1143d38f7c356c191f1515d8ed0faa91b56e5bda6ddfba17e43c12da15'
            '200f10414438755c5a5c8d0451bcc650af656d0b6c51badfe83acd7329fb344637b4bf51192b823f23637ae5437fa58360882ab93cf9218230b73f2a278cf7a6'
            '98099e7d84a6cc5f12bd4748345f75c79bc37562e27d8e555882c61d9c14e3fd6e8fe94fd34fb7d9dcc2cc0acc630ef5577d90ce926cd95423d3b2cfedb2b496'
            '912b41981c2482dfe477cada344d20811d7948d28fb39552cf695dd3e5abfd68564fd866a1cb6fe669a58743e92d4a02da91ebc326beb5b23ce2dada8d6b528d'
            '65c2d39d656fc29fa99f0d9a26f53cb2524c0c4df19b3ed5a444cd28e134c82d6406433d38489efe8dad0083ff9cf09ef9c8826c9a5f5275b242639a143d99fc'
            '5f18c2c12d9a381468be5b791f3787554944cc6e6896a9394f776e54beb728415c8bc625f2f895c98c55810646b8208129367265e16a9d78d6a12ad68ce4c64d'
            'b41a34475cbef8dc4b0b7cc220ae7baaf8c155984fa6880f1874bde7f545a17c085d4dd855d84b82db055e35be723045f99a588afa4dada678c00e42250880ae'
            '30059b50d0dda443ecc1ecfa566392d73dc1794dcfdfb9bb302ff88adeccdbdfe4173d7faa4535b03437d196efeed5ed627b8d96a2145e0cc798c17462abc08d'
            'aa49eae0ccdf8ff6ff6f4a459b7b98f41a0631de34e4b24b7eb564d61e41cf9bdfe0fbb1ef53f9e6232d8745c594bc4a858b6829134830cba8be9bdf944d594a'
            '10c61e35e77c2f1cb71619aebe7e5fd1d573fffa0f978b5d04ac6270dc69358e6f3975c64695ddc204a69dabe090433c666f6d64d859d987b6933dc863a998b5'
            'e374544f96df75b060d21321f21dbc40b277b172d16e1633e838c0c252c3d50b1ab57e0ba23d0eea357327dcd4dfae6d18a0d9b2058272752d82f23c3e1f328e'
            'f4c26dcef08bdcf493fbb7609bbff034b437312896805cb18deaee6014bb2f17b5393c36c8b9c9859c25f5179ea9ab3bfeb6787bb71d2e0222abbe8a2995ffc1'
            '89cacf96d959c06e20dbdff8925054ad649017c2b5ce37a275a545d8e9915686a210401786c83d38c3394bf7e32f530df109a7e4be98887ed89ca8ba12ba906b'
            '9438dd655bbf28dd2460c344f75535afdab4e8bc7b8d4487c8a37d51f54f2df2291a5fe59371b960ebc1c5c309c1736b0558ce16c03223dfc19ca7f712fd48d9'
            '9d6f1fbb48eee1408c746add706563fd54c42b2846405ed37a7f605240c0618668139b58a06f9faa3efec26966ad30ef293c7d3929c94d8d8b3aa5bf914d8f94'
            '7459748a7b08324c377457e1eb585c7cb9a49c7efb9ff39270d0dd4afad1fc223083eadaa7d2a4efba9ba8d3e52febfa62564505e2586ad94a28b86cd39fcf7c'
            '7e4a13f2a8c71dfb277663d84fb74f23da8faa5104d758bd828ae5b79a8128674efcac0e34e6191c65ad0ddf4b5e62ce3fd3293183dc0ee7b5b26bdafb9ca06f'
            '1f611c17d9ea4d0f39ad888365f2b5d6f85db96110c20afb376c0031283a53084fc68461b7b5849026d24bdf40b50bdc2d34d625f6b23b52d9135a78049947a9'
            'ce4bf6f280b6dac98b904347d180af3c1a97faf447c6d8e4ac237e9a8cbc3af5fa966af10b4edc8e851c7f8a91f071e35f44b9abb3fce83b57a838de742a5565'
            '8e00f57f4132278d5fcee22cbc0df8fed8b5c3a34b3c711f461b4b6f708aaec4f5d87a68490aefb40255789b69d5a0dbbaae54ac30e472bf6802ef6c56dd007b')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
