pkgname=thunderbird-i18n
pkgver=52.6.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('6d9be27bc7fd08b5ffff5d68b07eba1791db4d18af06e2fadf4ed252934cc610954b85fdfc5fca5366d15444a6f693f60fcd7f466ed5cf23881c586f214d15e3'
            '7838b5195baa3bd0c46ac4a81e8ebb9a4e113062fc217a619a41300795abecf277de7e0898a58f52575d37ca7fef841a2f27ce6ced90cc508fdebe9a40381d3a'
            '914968e2fe7dc279deaf0e30d676ab7f028953aff890153bdc2f2b07cb47f9225c4f9bcf9ffafa44f8b289f29f1132466b443cb976deba6021cadf9a9ae1a59e'
            '60e85b6c842a779668b1ba3c73a6fb2254846db7fbf37fbe06fbfe71b65deade435f45511b43920a293ab9d4d32276809196169a7513a7a982fd904c3671c5b9'
            'd4576943e7ab07973e9384c287840d7ae0d70a5d30f57f6dd0ee2e050a78eabc74db4ca2c1473ebce981af8cba903c65f349e523585d5fcf63f1dc4c22220a6d'
            '2620ad382f20d84073e1f2a6e21dff2ddd722d4d17ef14e57ffeb2efe2359b6767dc418c81e250864db73d204326ae61ed5550d65b557c503f01c57cc780778a'
            '0cd3b488b3af4b30304d892544d605d992ece56909290571e097c832c572a883de7664a451b631b71e561e75b4fa2fee07efb75400d90a75007d96d20b13fab2'
            'ea681ffcb8ed9c7b8b251f42614283852319d62a5fea537f4df43978deb63b221669253a59110eb86320dd7923be1d7d79d85f87c4256c79d2d4ef40db833035'
            '8de93f940992627068a68d2d817c1bca290b056eddfc04a01662eed23e370f4275f5cdb8ed26b25fa549eef2046c1022b6caa2391a0728dff3a296cc70904e99'
            '6fc5b497e6973a1cec843f169ca6c5fb3d603d04c9692e4b9184b9832f59178b70098a25eca1c5b01972158cdf6fbe357de170b14baac5d1e9e71a90b60fd881'
            '1ca3ee4e427afd5ac154345286866ac65b2c440bf3466f33355ff38d3a41c67fed79aa7e5fc5468c3093ab67af2d15305dc30e85661649e7195f2a3d22901107'
            '7f004fb258387491462cc8affa1881c4f6f4ee54cfb17ad582282639001f1a92b907ff03ab033016e3644d84a33994276d30e02ed5f95de10a1ea2b7d6b69c7d'
            '2815ec6a08d511746920d4641d9d17ad7c9ab9eb4cd39674b9d78d747aa34675787791178e9539a8cc982913d05d659763203f6d19fbbeaf83c3b691e58aab9f'
            '26bff59fe4b7bc3f95f2344b46964c1708ac4bba8a33934c5e0fcb0b80eeb3ccdd5ba1d51d46dbf6e04c123c96ab5a3f211f5bd1628e8703b7c85b48e603bc02'
            '806d6406eb3b4fa25fa7998c08df2a7a0083039f9bc6d81d4598104ac40df6a0f726786f0b6d8562036d9cec80677f49a0b24b3ff555488831cfcf51993a84e7'
            '5a988745c130c3769b4737aaefc4b2f63109247930a9cd2a2dc17f1a6ed1d447d65f3001ede0e59d8aaf8a837c879b766d100c3d38845a8fd1433224b5d9bc07'
            '2e0a903c0fc67f7d983f902492d0ae003263299d3b0d1b0367d87c52d4a7097d23a3c02bbd8373922e2840cc8f6b1319d715b970a40ac074040a7931ceba0fd8'
            'fdb318318ac43718cd5bbef635c551f59d0f9e2a6870b500e0c311385d6a06aec93cf9fe52abb14f62bfdf46bf272f29624debd239f66d2f946f76b14da5c531'
            '825ec9456a742f5de38ef419c52f5d76166b407828a70dd409e3ab6b12548a354995bc66dffa9b7637873be34b7713413125e6b821a20100db7c0b91e7ddfc4c'
            '41947057c4766808b835c3cff0b23095b574ce39355d29842d45556841b9d1ec759bc3711ea0be9365b1e504a42522c260e232c014b987ea0abb6b94a184bdd5'
            '6ce943e5459f282f5d235a931c0990c1a5759844f5e92695538260e68d3dd2b6b6d8e69631bcfa5f39281390847b68a2a87163410b427a0252cb11c6c2f0c2cb'
            '4c644b45350b4af2b1bb8199837d6a91116382b9729d2292eb1ec4f624dbaa6dda81cfc2e6dd2a384fcaabb6b15b6fc9b797b18022c8590faa4b3f320903953a'
            '4436881aacb13edd33f76519311b4612d41211c1e73d2a4467ceb9e06b15df746baaf26210de44cea164e062fdb6a7109000a7f03c7d5b32a8d2bcda4c515a60'
            'c8ab390f6cd96197c22d119f8c1695db0bf12721049caeefd3cbe8724030ff79efd8a9417902222b93424d49c8f7296dbf28b601c814346bb4d4971e5f229ee0'
            '4b302ea73ac48c4568b71099fb70090952392244a18662d529fce46e0d56c47ab327ace2efdce55b8fdef1b58653594c74a33ec51a94f05923f055d8b14c3f4c'
            'f521f9f299eed773387da148621d65d8157cb2ec5f12452b7a1017a0dce4f16ae3438e002b1706d8d6d11979df3fa5d2251a9e8390f6ee537fc29f4224eccb87'
            '616d40f68b8eec6427ed32d81b632783e0297a4f0e65b018069479d7761658de50e72653ac9d6456db0252f4102fff39cb3d921ce4aa7a9684267cdf711501ae'
            '9eb15d63f23742e9952c5a1021c55cd107ec33777bec4ec79aba81b7b840fbbb3610faffed2fed3929eb43de8b9453dad863ecee2dd1ee823e87a7eef5392e9f'
            '89b0e6add3d81637b457d52c92d75c165bde42ecfe5807b088c8e1c9fbc41239a9cf57d9c19503df9ae3287a65f7fd4c2a69b41e732b81049fa695831b595505'
            '22f5bd6348e3e497ea9b51d0b13455dc77b33b5d4d3f291368b003d7632a0ce12f57bb9cf77f14eafd06d5640434116903d2c89a001a3ca164964a7d632386a9'
            'df48e054195d50e50bb25c0b315c4a9b47856552555bc8277338daf238e435ce66ae5689f86657f4344326cbf272c4b947687ae8d745cfef25a5c0b41dfaa24b'
            '92a73716e619b3fc51c51343e180ec62fc59a018843b4cd8f343452af0c12530d1a2448fd84c30f91c0c968db8315475b491a6963b7714c26431263d5c74fbc1'
            '7127aed50f0a3ce596ec030715bcedac57b9de4081d49a97eb669f7bdcd1c968f4cd5bfdf1a44d4602ca5f86c4c308bb42c17ba6fe4e2fe80c040061b52e21ec'
            '56c49e358571048a9ea78de33a9c5dfbe4b6d68890102d3d705aac8136f441bd81389ef181bc3fefdc61d68284cdb9124b838efd281a6f712fbb559163d8ff2e'
            '5101d4e3bfeee18d51a2a570db11e5aadf4b3596fa7fa59070ff0c9637538309bf9fee99f24a60c2dc9f6d897f28a00e66dffe656e0308d2fcd8906866b7d539'
            'd3dd9804fa094c395480813217f7f59c25725d6c9ccbb830b07f950d305e028c99bdad8bc92e849a4b5fbf7b0aadfdcabfa0b1182f751b5773fab32cbe0aea1b'
            'a5cb0a87a6e3449791d52209e19b818db8f673d84899073caa81a4cdc8867cdbc2cbe1e032f641703ecd2de433d3b6da70bb011ea15184bb404c0fcf8ae7436c'
            '8f47ca30cec603beb94dda109a77c16ab1e6ed1f07968e1f71dafc35c73521f6b511ddf9dc2b7fd85ad881d7e7c01217b42464d0beb5040b620e52f05248a952'
            '0d2e67821ca55f2ab68bff442deaaf191d77072dcba64ac98cf3c41ac5d6ea102ef10236439a98445f74cd1b96f768e729702ba88f418ee3560f17bff3f35a3a'
            'be0d52eef40d47b3c33ffb968eab5962c43c0bbc809a99b5be4fc0adee72ee718f14a2daf144a0681dcf13e65fef6ac09f315b4fd3e920f81003fa7d5b56af0d'
            '58f5aa0dad3e42b8b4bb9df55eb86620166a9a5f4ff52707d0b6fe41dfe8fe58db642072ddc22195f974a488a4a83b7ba9927992f12034387cd60caec5e17d8b'
            '2030cdef005a53ebd89a686cc11d70927e6f9b10d498e49e551ef67a7c449d1994ab7591e30ef6934b092ed8c619fa9f1a446d0784f0e9d7fb133c0716a03e50'
            '07d02c9a8b1c5c7c58027305ac7ff651ca37bc2c5e1aa8fb81a5d8f4a7aab441b685bf7b3d5505922f742e9c455be85ef9a42af391b3eecb2255bf59ae08b266'
            'f358909d801b47e9077387bb1ba9bfba3948b46eb0b21c5944d2b9627044b83711515bafa578a3ee3113d45f47ed76b00f3d86eb53893f988faab039ccb6fe3a'
            'f1ef435aa22f7beb2c8f9dab2347a841fdacd14bfe03443df0a8d65f83ab3549ce337f66dc31f1688702e7f2905987a274c829fd447251d3a2d24f84d29dc505'
            'e79a60d83079e74f14d97fe1a6c774bee46aeb6d7dcb5d955c445b2b8b32d3f1fdd0b473e34bfc3f2acfe34acfb3b1cbc866d26663c063f80bf56ff1f2b7939c'
            '5ac4301b07eca95d1da1c7842de0a1f123adc9d1bd7a564b93fe99d50c302f1f24f3f4218c7491cee9dda32e02e49e4835d1fa2ddc89945231a9bcbe86839e8e'
            '6b77dc1968e627d99625ea0bf72019c399d44eb2220e738d61817e240af53f4ec483cbc8667881b9df6eb4c63cbca397f75c0459b6fbe0a2be958599fcf49eb7'
            'dbbe8feeeb00d0f0722d2bfcc9aaea3bfee03bb3c2c0d5babb2d62b9cb5c067c4a60331944f207ccfdbf16d723304f384016254593b2fd0a3e0bf9a7a7b54543'
            '56596118bfee7e6d12657768861760f161654f7fd6ec6cc464001826e96c30650216f093977b7e8763d595903b4d656dec5bc1952f85d6d7e12f676371a598c5'
            '04cb63d5505c47547eda7f7374d6f26c5f7c690eb5b3b6ee51868eb906ca352fbc7ef1f5c3be537a769007a443bd755cd8b4ba8729a4cdd777dfa111f5ee726f'
            '085d2ab5c0e7c1a283fe07597789cc31deadf785984b7ab7c8b6ca608c7260ddb39c06aa52ffb13e045ac9719c7ae0f2ccd90e1b90ae3649dbe481739caff18b'
            '22a8a0e140eaee032d8539ad485db130b4b51e6a660dd0839327e66ac1d81e493e816d7f946685d587ef4160baecfcc9d1139b0e810c2fe63de3ca805dff685c'
            '424aa45f9984628e81222dff3d7be3e53d3936d813fe347a32dd9a44974a98293907a85ad618111971cd2b165cb7d657f3c2cb3f49f1803184a0d68d1d1bb577'
            '715c53ba721672f45b9b6f221125f56fd08f74bcd4439b89e0d8b5d72b6779581eab66a8f4cba7227a45e33a9f47dd090d96cf517393ea68114e4b46c4969788')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
