pkgname=thunderbird-i18n
pkgver=60.5.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('60ea5813e8c4d9701e1359552cb3de969374902316d1c4f132fd0f7a4671b199245d02f08b25cf87315ca6b78f978838f6f20843dee31731a501dbe56b89467f'
            '4db0e0d348783532740be9d88634766b3baa4ddd571525ef143fcee9d350468af81e2e1bded6d25e9b2640151450061402a660b3a0abaf6de68e0584edafc66f'
            'b3a5fcabd83c8a1cfa51d0d1ae6f711bd57ca33726d896d4b10a59f70f3372c2fe6706bc4e78d1671507157024adedd6580c664162a696ade2552f8cfade4ddb'
            '4e7120e02210db51d530e779a872f7a1358db6556006f3372b79d84bf2d276f98cb084b43b9ab2c87093ea69bc1d833113792fe4058b87b9b1ede46d87db34bf'
            '252e7f17c4b115127ba642dde02c09946516c799a96ed1830960deddf216c5ba51f961735273d12077e90df324eb732e23532d5749ac47ef923ced830e2a275a'
            '28ee3307ae33ab4ce6d0b71378a8bdbf2a5070f43b7271a40e532e255ec3c71a6556a403ca4c498c2d886cedccf4046c27442fc1e5001177fdee299b5cd03226'
            '662383c0bfd13c440079a2462f9a8621e80d4fbceb488e9c18d13569ae10c4dfc4a6f0b6eccfd6dce20c9b22cf10bb5ab70e8b6eb763002d7fba2a03f93a69fd'
            'e0031700cd628425aec0e8b5eaec2dbfd1e00a8b16681a611a21962e7c45812c8d33c1899118c32f4b704e56a62cfac44eae3685dac7d85594b80d873340f6da'
            '2024090a092139e17b36ff7a7411d76ba28c8e1532f0a3b432008810a29db8f4845cfbafbea095abc50aaa2a4ade32122635a8bdfff62c7ff40029266b3395be'
            '5c5a8f1391b01068ad51f27746639fe9f0a9c53713f2b6b0c55e559b5d822cbf80ce8e7bf180ead73df9bf1d990f72138411d871faf33f93607d04ff28b350f6'
            '587cf2118ffe973f7fd2a6199915fb53955f93aa7fb58721b9e491cb45cc8b7eac230f43fc24a98aeafa42da7f2f0bda67da6379937fdb0b9f3b1ef38ee5437c'
            '436672cccb30818047645650b862515bc5aa2f6e73af7dfbc49039fe90c33c861a00294c54eaeb2adbb5729b89ff5ca14cd8357ce08b1382376357ac35cb243a'
            '15031df8c1a434a9bf6889f33a1acab913b0992d150a4bdfd6c33a5a9e601213af8c465a4de4bdf09663f07356da2ea605ce405ca7152f14a1ee2fb271cd18a3'
            '5e016b37e825130743c8743edbd9c38623d695441748103372533550e0f9cd58afab50913bdd1ff0f8eb015c00db5ed3802266079a3dc824f0cbff022a4e9cda'
            'e2ac1f83b62b414b4cda8060e3c844cd7001be1a7cceecebd007486271649142e63aab79a48d5d6f15118efae7203c2a8530ab45306a7181de38dff76a593452'
            'f7bbef381ab621153e10d908d9cdfdada14e9f699abcb26c26083b25125fe0e3eca193bd1508d40a4e12ba54b7758be53ed0bd1044f3f9f5dd388645e8534b06'
            'da1b57bb5b57c1d9d966d7325923bbe761299a0395c7c3111d036a6c3805b375aa059725027ded0d3c404b8c7a7780244cb98bc708ade8164c073813398dbee0'
            '601c3195d87c09c16551cf0f2cf3e2b18e784561d73608c500d2274883b5eb6e6fe832edc34782512fdc1f7b1de3dae7cf8d7f26d9cfcdf07d450182d12dd3a8'
            '06e99fb9d36a92fe8db863846bc2212ebf8e8a8ccde52142ab758ba57de17fa4031af4eb207a2448462bc42ec30de79a51cc9d67b0bf74d68d8725feb99d1b35'
            '165b3353e3364a8c805c6b25a75769892dc9a89753cbde1756554bf184292dbdc320d3a583b2f0b01492ffb7a476bbad063513ae82e58eb1a8233fab8d7da58b'
            'c41219f6a39010be5f9eebfc9c041d9d50a36104ec6635774708960f6db8fe88bc25957abec3cedc712be204545cd660a1ef5edd81a1cb25739321ca522fa04a'
            'fd7cb2efc5cd004c4658da0a35587afd843a02fddc2b16e648084bc007de58f23ca279581f6a7f916b8b7135d878ed0347a9e7ae4d924b4856af45495d4c313b'
            '057b0deb04c462148e9c97e8112e8846427da0e788a1dae49d6b9df6784c360dc78af516ea80859491b62162a41f453b67cbb6ed6dd9d98c63a35d01f6975836'
            '4f9144fc4e38fcca19c8f63aa7932115728180fd56fe5b6e41d128722261b854cb5110fb7e493c1a1f11a2912dad76d98a36fbdd5af96240b5f3ac1d0705dbaa'
            'ef8ee05489059741c4650bc798121ce77d5b8bfcf2123c532414c765a2f9a263217e0c96756dd246ca82bc8190e22ffec0914d4efe088e9fcbd23d957ae73325'
            'ad7945f47dd253099ec8bfb379e375f4c279ed0a7eb42f0521bcd8a85b10478f5f023cb8a4aec942ca3403714932271688ef89f850ffe92a79a253adc0c5cc8e'
            '96f5010f90fa9516fc3ac55e9a2a7dba508fc5f3f92b75e74b22746101ff8d0b9ca88a3795a30cf5396b74b13e7572e31b9ddda034c6f6bac604194e86a7ca9c'
            '65f238cd989d0c995fbf58b1752d39a261b30fea7161dee0eab9d60c5304cb6f793574dcd61858bd653185de3d58107c3c0a5cf7247305f23e7c0d7cd787e1f1'
            '5e4c0dfa0d3c7ebcba64189837f8262ee2c14febf92b35f4a960290e37f486bee1b2a5d7efe168c7eb562d13bce3e9c11bdf721bacd3b76e0f3634cb4eae9d98'
            'dc48360c172d793c6c149c08d1cf48ca20781a7185ccd11179f063f06bb39409c184bbe04b1e736cc2f90dcf248e22539447d980146a967566ed61496e87b8c8'
            'c5c07e69ff6ca9719b8d12d029a20476035b5a8d13e793d1fb43dfe33321ba6e3b01cf6197040b9cd9c2261726abd6d5b453aa67af2dbdab27a0511c7bfa7180'
            'e6d72d77cb372f749469c3aca5994aa65a3e6994660750bec4b4b2f088305d2484845e37eabb2b11fc69261a9744dc2afde911977a510dc436c03574d0876e86'
            'c234e0d58e60e95b0e0f9bf81977cdf27fb42e685a540c6f0065d08bd4696002060ce20c8056c7c0b069b08ce2d4edba22dce5eed327af908cfcf33b52bc279d'
            'bdcff86819b04a495957a944c0041cbd8f5704aa74fec483d16a27644b048aea5acc2c7cb14487ac0b85f54939b4205b8e669aec96659087a994243117885b06'
            '816aa846ccfd06f5443655d24b5169211d056072c6459d28501b898db96e95c5245ecb25c277613c190dd1f117061d7fdef76310ffb3f6db1059adc032a73dcc'
            'a7d20a44dc28593acd612f1d7a8c98364f22e94248467d5f7f2d815deba46bb208d2490305605026a95ac4bf9b736b00bc72ab493f109289ee6d45ce7e355b41'
            '5c1c614bc732eea0ebde6cf603f0768e81a787c3be7c60a4e0b45c2d51d721bebc048dbf97b24b5724564fbd16d8fa21bb656dec279844466206f2e730b6381b'
            '845745331686b1ff159b45cac57591f8cfe4d86ec68b8204b5eec05707ed4ff90944cafaf277be15713b22bf76b3e50c1e460e5f04e505c46bbd62089c9d8265'
            'bf8b5048e8e7bac39a6c3a1e1a6434e1c86302ab57d0fdbe4bf6c44794e14a1f340d942f6732757fbdb462fa6eb31725acd1327ede30a92d70e3e82642f02b87'
            '947803be4aa5a8435c7cb04e41a5987081afb0bb7cc491d372756947ed908565b0c8474dbb90439d32f026196bca74b7d97b12bb73130944489a4a5285130583'
            'ccdbe3b0fe4d7e04ab2a4edf15736f081ce95594fb4256a8f637210ce5a9dc309f2083487c32274723b685192b4678a22a8f88b23ee45b2d18847724b14b40f2'
            '14ea772f65cd70650e8998e40f6950186a617ed19463a2496da45265bc4b67a9b332e5acfc6e4906638252aa2ab7da5fb098a0fd6aa75314e42a0a7b13e3d0ed'
            '082c91c17a5b96ba7b3f8290fd5722f109194ecc319958c2e081244cf6ecaa5ff088b1aabc300159f82fb22236c442d75483a35da37cda279bfb41693a170b43'
            'b9ff341461f5200a2577366fe9cdd944860c98d1fe90f13d08cfcef659f6bb8273e7b3494b6919d1c12eea9aefa02641e104bde377dae625fff39b16f5fbe5d6'
            '24b16eab1ef45f9509e02c681365e3afed277ef23462692e209ddbd7b97ab58af1ac556d6bdfd7d5feb0078b0ecf5cd6766f1a9b0a40632523b5453708ca202d'
            '7b0ad73839b306382695f9d569ffa909c549a3dc98f18b024b3bec366b8f4dbd8fe2e8c89d3a7bf0dd48460e5361bff353128f68d8b6ebd3a3dd81f475785841'
            'a9b6fddbe664062381b49bf671343149230f51454b134c9b9aac50675783088a086e60dd5dc1c0204148a6a2aaab9d996931461a2654a2d5a0a0ebbb2e9275f4'
            'ce498ef9f57c6ee2f734777cc80df937c6a1b0d33d8ab8fb5dda1f66f68e76be9698287fac1e9b32bd6f937752d068d4008c8b87b2a30c4eb90ba15302045fb6'
            '55c7333b1fcef53c1896dec9103220e668b5ee85c7b2af46476863a2d35bd49025726da1c8ced1f7e5b492be9ae8187263805bc1e2814c5d488d36b4ffbe1829'
            '7ccedcbb804ddfa160c70955c9a14623a41d99e3475aaa973019495ceb3b30645136ddbb19f28941becbd111214de973fb477bcc239f496843db6b42bb6473ca'
            '09a77642cdf5c7af170e8d12bc843a8882d5857831a3e54effca37d4698c13ed7df234230b6b7937eab3e03bed10a4fb0b6c8673fd11587fac40c4fa7d3c2f4f'
            'ef4aa8e3f74222ddfa7b2b6f815f2fd3bfb59709806eec8e38ed0508760dbfdd8caabf91a96ea4849877ee43ab51361bf566a90d353979ec4e911cf285cf8a88'
            '9379035dfebaea5c69dd16b62c12c99e2e9bce13f6944aa9636958b60ab40b8efbb309932cc21002b3c743aee932db412d5bcb7b033a3e0cd442704d7c7a9e97'
            'f33da7be766b95051a55d3186b78069e30cfc9f8a1c0db6f7422103fecf3e1b4e466ced904a80785de25363ced9b970319b5b9c74c5da15dd9ebc7bcca3bd75e'
            '12bbe8b1f71b51be31a6311a7ed2b554e07a7b7f86e2ac4ca261d7bafc983e97652f3b95a011c2fe4628637d5220a15e176d8c7eb2023269dcb464daea69e4fd')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
