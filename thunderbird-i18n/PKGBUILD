pkgname=thunderbird-i18n
pkgver=52.4.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('bfadc747f3b73796cc5822c81567aadd3d34a420ddd104d042d47041b03b7e62b9e1d95e117d5b9ee14897187dbee776896a2bb0c7dc62ca70cc1e1e5f33fd89'
            '1653f6ea89fcd4bead7a06badd7ea025dc2daf6a450dfb944e7b45e7d7da9818b660bfc02218ed79246b8231e42f6678beced2f78df668cbedc3676a088d2dfa'
            'c15aab335806ab81745841b4fb2035be33bf700b86edd39fcfd49891e32b68ee91cb0e71c0cd3813e43a3ba45a912876501c97560f7f1e2568729cec5082d478'
            '494b6a30de08858b7fe5003c8333192c0a393ca188defd075cc75438f9885a7fc5b746e392a411eb06eee242bab27bbbbaa52bb153d66fb996f4f2db434517c5'
            'a8a74fdfc2d97c61eb5b09fae2cf05be9af0411ef79296ddca3c26b503c1c017c0ced7bad5e6ec1c235c1198c5793ec041c7b48b6aba90a63d09e128e1aee024'
            '8c4e41295c063d5b2f5dfa0d20a202bd0b4e3577eaba2d139bca8575849a3c4387fdb0d2282b6360050c615ec336615ea04cd4304b31a5b00fa3be61f61ee45e'
            '5dc899065913907ee8e1416ab95e9c240b856e96fbf51c1ca06344de48e96687b2901cf90e98a49f1064b000bc78c9f43e54f194c908de3f97340c5d7201de38'
            '2e1973047891240f39d89c19e5f6767e735c9d7998e566c4b7e0e3243c61d887d2307ffa6c5d709e2e49639bf20b08f41d644230152150a9694b02ce6fe6d394'
            '39169bac23dffdac006e4d019f5c9ac99bf1ab7c55f7b85ad9ed5f05296afc3fdfb4ff0bb48180f38ef2b968016c753c8473b10d4b6552d3783d35e84208b473'
            '8ad1ff725a7a75cd691af9360e872e173b33ceb2f95c705c2cf6594b3a1fcdafa94c8892b79b1c9e694dad441482734211840cbd46522f7d284dea7a4ce7c7b9'
            '7416e98eeed2d97cff1303fab8bc1ae595bf6779c4990c59ceee8da8b00234db0f4e6b03392962d8e482da29755bfde3f655005c9346cf05446c8be654135844'
            'e4b918bac6500b62755b13ff002de440025cf2f5a9b4d9a65c35006d0e42bb3b79ad7106935c45f7afe9d445dbefdbf539a87377b354ac2b0a813e75e84d89e0'
            '9d8e18be30ab8fe2a95e270c9695eaee25016f4ef73c6a73075d0b71094e0b498ac80924a70421be95e178e84862c39db789c9e625d974c12e2219aa85e1b57d'
            '3770c63f71c7b35b79797778279c7dec5240427e529da4fc6976628ce05204681da489acaa22f8c27355f7b7872ac3656261b486da62af53dcc1da0cfee4a808'
            '165decda1107e3c48cccb68f857d606d4bb06125214088ce9ff348d53e45023a28f7a196722371e6b18f58fce51314c8277ab6b6dbc0323a32c70bd5147865a7'
            '507ccd9f8b9d8e8b1c43b8189d32afbece0b47340fbf14577ee4c888b883ca135b83f62f2b6ce8ed1962ba030daad3dac42b60ac26a01132578c1023c07a1b79'
            '3450490dd16f9bfc550fe33a4e31f7679b644e358b09b1b8ef275290d17255f8dce1c8a665b6ca8cfaa91365ce3a98bea7e3cbfbec8800aacc75ee3dcb920f23'
            'b40fe8131eb3be646cd8314fc664ebb4099d327ef78c8058b4054ce0266fd98c5f72bfccd8483ae950312e9310b21f4ff9bd7dbd0ab28ec3c79195436d505786'
            'ac4261ecb136c0ed4b9b45caa18f796e85e8cedf374464ab425b4f4ef41cdcdb5756c509114f306d6ef027f70313aa43a498711beb7ce4462a24bb5c18628406'
            'ba926a525a308b704733af586ec33d071961a1cd93c8090be12be844516714b419344f98d71af0a6d2d607eb3b76e64fa25ebb90ebb4657fef3960d5f2dde6e7'
            '9b081dcacfeb150e92f87577499d5716cc176ac1aedfb4aef880d2484224afeb2bf7c197e3b09ace37854a176538770b4f6afa8bf793899df0a21ee31eeb9d1c'
            'aba8d493f75aeaadf093e1666e85f1ff794346492d91099f6a2680b95f4d8e981dfb3509b190db0e1b6e4b74a381bca38b61c7bef3f67bef2b631eac8fb49f67'
            '6f57c57825a0f3e7eb530933ff82d4c31c73cde2d5d58edd57267d1712f0606fb8511ebdab409dc0c967b1319c3ffbb8158bb6dbea308d7ae7a56af4b94650f0'
            'fb2ddbb62f31071b07eb6f33f7f6015c8ffee96a5a78504adf6b9a2fda3c589bfeabf263fde638eab9e103750a06eead1a6465a56e10bc3034a5b8e0cd79be3e'
            'da59389943b6427f1c1056b7712db105fcd38b5979fa47e1a62b8ff03e345f4a9d1b3dbc23c356d906b741847de274bf3a7e53c12f9935d5a749508d750f9f11'
            'b9f7b628f7cc112e79eb5a7e382ada35fb6ba3d0197db33bc370a807fffc0a69cdf4187b87e9b13e460dc84e2b9663d995cb8ca831518b209efe428c32f97ead'
            '3a069934b02de31645925fb51efe16b137357571ab5376cd321d0263ec5bfac891851429deb216b78fb2c357486cb840b4aad943c0ccee690fad5bae6d39012e'
            '3dda07d74bc47ac1d20e294c1dacaf16805113aed31ac1246647f95c2e758672154ac427ec3915b577810a8df66cce83d3984f34539ecc01375a6b347d0140f4'
            'ff9e52667baeccfd829e210822355a3d995046fb807bacdb9d52e6f2c7145f96a8bda6e0ef5fadaa442cfa7985de36b09a8349cd860d55c1a131b04e4cb44d79'
            'a82683e66c379f84492f6b65e6ec068e472f3e9d56db5b9c393d69966a873f2ebd626d3d30ee6a5a2c47a5f82c0ac39abc39da2dd9c67a58505e4b83dab08503'
            'd297d4a86e2f7f31adaf27915eb4e6ae34edadd7fa3cc903e8d64ea6aa01b449d076be5deac803d1d39c74d9c5d09818fa0e2fd670005bafd41c83028ff117c4'
            '87f663896776abdf1608a28e905cd38cf935e8ab8a8cdd7482db1ac627e95695e1d15e9e3d9b3017e30e6534154e80fcd6cd70ededbdc2ccff12b200269771a3'
            'ad913ca637e7acf04255ad48d63ad7acfc317e6e55cae3f54b1338c98caf04b0aabfa18463e83d77f4aff211d21c496e98ba0ab473a57f79775f7efd8ecbed0d'
            '82b38db24f7d06cd763c3613e3ad43bd6c5070409d822b450473992e157a4f6ac72998b0beb0abe524b06de58c2f8537924a455b506fe0aa7229082588265c97'
            'fa9708def12178686e42ae96732977a0090a1765a71ee591160a634a68acb1e7da3655085bfa4b18ca1ef380d5a35600bd1c7e64bcc4d30060740b6787c93aad'
            'e3c2691cdbfbf52045a6b41fb7f70ec8abe399399b23045438b98d1b7505c6ec7f0ea25ec70a0ad5bd189ea6f1bf1aa2a50d6e9963ce9a69e5fc2e15d2bd0765'
            '673f9e7ffe4109f6bde302e01679511c4b64572c74e3e19d51b1050a979e6d417f120d5662d19155af0be9635ea85ae8f745a788547ba3519e9e3837cd48b4d9'
            '09c020644beb4dcb90d433fd61eb2e30e8333110476e2e9887e81be09d8cb9d678b65f0eb31d1c612dd8ef72203f13f7cc0500b1a3b2c2da48b4583c01c67c74'
            '0e223e693de23ea02b4aef01e2d34dc1cef727864309ffb5c045a84e7a938ab88e7609e8817afd9e3fd6e5c8b66402334ab17fb10d25a87858db982e2a507a9d'
            '1efb35004dc9869f266abe39754940da1690d44fde574e250c1298ddce0e050c0a861c6dbd28b00d22aca2abc16acda2369d290667e305fb371a6dbe0360ce60'
            'bdb2f713890d65a219f4081a1d4025ec3f5fbab7697ca0cea116e423a6f90aafb80f7f0e88a468d575dd1ca7168f7c90d24fb1b79397dcd85622400843a86c16'
            '7dd9b5797357c8fcdd78cc215c9ba875e31974681043552b7ab2e35adf8e4b991e12e0668afbd6a5887801cfb7e5fa868b40470f3a60d7bcabbd72df482b8488'
            '866934f8fe86bc53965d8da845bd06f5c07fece1704d4012a652457f06094466f7cb32a36643f9d720fd11fb1c1915eaffb794f68a565387dca80dd0388a5135'
            'd2fb213774b235bfee38f99263f67fc41ab8083b721762ee500b5f3c964713422436a53c1f3072a33bb3fc1259207bbf7cacabe0652ebd97c71889265a230fd4'
            '579777c8f776d86602c3b5eff112c5df1fe009462e2477577dd13c28435144b180165b4c6eef2b94997f4a3153730d8a8527b2656f84ef5d4f8545c3b8f550f6'
            '636a7eef7caebc7598bc224ed3516e9b6a799d3806515196832012cefb85dbfa97a59bc2c76dd34835014045f8dc42c9943b1a1f885c5fe6595eafc5417314f8'
            '580cf48c5a22c1701ea2b7a28805bd1749c1a3d6aaa8dc9838b51bb13d4d5982967d090c84766c1945f3d9c0818f52234286f5767b6dc46dd24c0322b93a02ee'
            'c5a64856d1eaf132fcd67f43589a2c0facffe43fc9fa9942935cb52a076ea266cf78348093118dc2e5afe7b0030dfde6fd0f04b875a801f3d75173c73904dfb3'
            '5c983dbdc349482f4822abdd9c5870bb4838970cb24003c4aee328188bffff279124b299057566bc061b98aadf25e4078e52e888e30beeba9a437d07b4cc8a25'
            '34476582251c95ff6a1cb190b4dd26c9167b5232d5d6e4a48256ffecf126e9a75ebdd723ca8ed578274c54f428a7ed5f9c5bb00444c12da5f0e40e7fc9c03021'
            'fd8dd034d17fc4d1a6628bbf2889d15f22b5a8beed256e901ad27af1a870efa1c92a307c85bb07fef29708e72b5cb48dfe8838e5e49161e464982768c259b443'
            '72550a7d2e8d639308172b7cbaf9487f909d22d86673d7900a3b2874cbb7b8bb882fcef27d2f79b1e5ebec7f7a5e24496e4b6837681a11d5b425b56baa195557'
            'df5aa6f5af5b1178d66b078a06a919b2b5234505c97eb1916e82b59c9ab1287dbeaeb5a4f776a345430c36f128023241e157889c5669b76c28f60751da615eda'
            '90611cca3af7e142a1800749e368ab9974aa470963b6c2f5f53937efc6b0e06cc29ec3f86922eee82e3603f7084ee1fdd146926fc972e722e160c2696df3f413'
            '0dc359b4cc57972425c175175c257134da68a207f96f127c38758e3fb6f5d8797db9ab14cbc87518b2f855a09215d96eeec6cfe0213b1d1e548798c2d5d6449b')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
