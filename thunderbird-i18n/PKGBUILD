pkgname=thunderbird-i18n
pkgver=38.7.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('153e5b3675053b917e1250d775bb9a87f15bba9b9fee0f8dc7209cc40c777e8e76ddfb48fbb682eb3380e5f2d2d6998e4c21686ff3ecf0bba054bd856db28baf'
            '7c235472ae8817bd3895b01bab99fe5fd180561791dc3df6a689bc7b107edccffd99f7fd4de3d4bf1950d943a52aa13351447e7b6490f2a2e3bafddad6d5b2f9'
            'ce931a6954768a0e6e2461e52c66cb1ac3a99b104368fb296b31ec405eed65321459cda9c22d471ae4654e92fda9e6ced73372ffedb8191fb978eba83a44d583'
            '1b42bea6b675852e06dde7c58b2a8f5d44fa10d3bea9d4ab86b841ec3f63efc7a3e8d0cc24bf34dd002d4af57b0f36be3f3ab8c26c7fbf862f8529e1752ed72a'
            '6fd21ad09cd4f50a9ce6fc355d1e32f568ba0ce7f1b84bded01663fe7c1aa5705bed000d0e8f828bbbecb021e37cb014958d3cc2ce17ce3e63a348518cc68112'
            '4ec2e2e6982b9c5eb53235115b749bdbdc285328c0ef08690d81c4eeb0f21f083c48852f487a02a720977c09d84ae7bfafabd32a962a51ce175184a36e34afe8'
            '0ec4a94b98a068c70f854403cc93ff44ac754e0b52cb63f24d2b5217f231cf0d2d9d6a3e660e848a1a309e52037424165cfb8c4f07e1248d0936d2a5333bbe28'
            '1606a8659716aee64dc168e24d99d97bdd2390faea070a94f82ff261d3e0f4e06e69fe1b603c7df5c1ff8c59705e7c8ac2fda2cbf2d11c505df638eb0f764547'
            '4df2084e23f7b45d2f42767a540366716cfad051f76dc239ebbc3f8f1a4e690540b5dac3829fcd7067e4a8b8030b59c5c952e0ea2c04c3e8c24ee7774099913b'
            '3627c65d57f4b88b98ff3ee49358e71ab1383a06f3d5cb7bce1eca43b7f23370a38dd843d628177b73fd4830a27898e0c886789586eaac4890250eecb6776c55'
            'aa49428c1d7a3e5b10d3c325e5a503b7f8a77fd1666f3500ef4b18166df4ae917d32ed513094be248b3ac382c6dc3b5c192b34ce4cc3829ba123782b3a38fe49'
            '9b76e8b27be6197a1c2051716710a4e5e1333c5ecef48f94a336aff5921947c670aa37963b49b2d7f6980a176bfba12c713485d3d46e25789df60c5318a4b3e6'
            '3bcfb322ff704fd3586a75aac874ac0f6f1f815f1edcba3e2050c9bb2b6c750c6f135694bd720757b9858e54569e972b2430c16e4712ac2813a71b8060ad965e'
            '3fac05a88296d5d3ce02f0bf0d2ce356994e448695809bdee42e4f10a0c425eb837b6aa954186e466e768a5cd0950818f9a3e3da82f0593d7e07d193389da2d9'
            '443c1f84ed977b35e6b9d9e8f03a3959417cf67052aa1d582b87ba5394ded91c4512e12dd96ec027ebf518660510fa190205248402e144ad3a14b8b63b871deb'
            '19f4ceb229faa1e08451a02c2f0677ce45dea767b53081c871ab98e42b4c2735a181c5a0515553f22e6a27f4e5c655e9122ca896a78bdec13419512825592d56'
            '497972f74520013002686ca1a2139de08c98f9d1357d0dc98cb07f9201174dcdadfb55557e9e580fc75f5e5695ac57a47caf6fbdf2ea0c23cd2af767fc614017'
            'd3da0d48c38c49ffb33351f9d41a89c29ba5642ada9bb934788e4b4cf6f3ed3053a15b263445254f87bc3122914f03313c06e62f0e3af7bfb8de8916b13ed292'
            'a8f7afd51062bad0f8ca8e80420332026042ce1468aff6bde20d061d58c1527d5e3c09d3034aea2e1f4779fedfadb29472116f767004d0cc4aedc80ce84150e1'
            '328f2843bd2da66a5df62ee16c4878bf5b269407c3f7141a4e8e472e5619b8b132efb5a77abafd7ee9694ea79a428ebbca98a5cb8ddd3bd784b9af24042ca6d7'
            'a420fe6075bd0b1016f1c7c7a329f17e428c486c122935d65610f1f1cf70abce08e73ba9774d2e56c02f7c14b81f27ecf927a2e572828151a6093b01efccaf21'
            'b5c44587101918ddf8582e38f8adb797c29262713d7d29d8d6421480a8ea775a2d79457f34ac0862c9494ca50535c7fc9d264772911c3e700f4e36c16fbf8641'
            '352ec6feba74f401a707b231af766b727fc1cc73d9a9c492f62e16369ffc8ea5ae7272610fb2386d44c247fed7286303e6ffcc4aefb2c8da0be40dc5e5ad20b8'
            '59320bc0f880e8f91f098780580125223e13b0c6f5bd02e3c2b422636a02690e810991fe2759ddc3ecdf2ad45471e4273a78b05ee604cb400d8ed411f3b6fbe6'
            'ad8a6418af7c78620d3cf5bdab6cacd704088eb09e0a4b18dd6a4592651cc65a80244429f4b68f0a1b550d67b9b4569a51e0101c9f32cb66e6dd6822a6f19b91'
            '0dd9904f05f381cccae919e383be70282bdada98c1e7f06c74aef85b3be5e82f6ff0c4737bd8f568d01111f0a52bc0914d81b1fc54bc8a6fd4e792bcaaa1015e'
            '028065523f5d08feb56864ff286fca91aef2178720ee761104fded0465fc9e559e6db549b0343360529032c35d85d4d99747a9a3d9e7c05b74c49a32ca23a8c9'
            '8658305145cd3c43548ca39fc48d236d8d231ca94c2958ecb55b149322f88f1164b935a5dc92277568566664257e8f72a18dcecf85a5e3c5f2e4888daaf12b66'
            'ae967a095134f2d0c22c7bde9882eda311e41724b520496a9b00c56edc34489a411bf386b03d6029cc64f0b9f6eb07dfe5fe1b57c926a0573859aed65bd9be58'
            '6fa3557a03ccf4029f229e67664f6b607fbc385c93dd3b7a2f01e989fac49b0cf397ed3083513d0bb880b93f3989e5558ee3114a2320c6c6d59fef47f6c7ce21'
            '4fea82bec846053d78698f594b369f4bb82143695f466bdd9b07ef65795ef81c3eb989b5917b68a6268875fc8d5e8dd25f1af84ca5cb0b69e378d86d985bb5d3'
            '414cf20d92b377cce32183b0ece94d6e87383bacff0d8418a0da2facfc4e116cbc55c099dddcd3c42d0ae0c4f2c9fd1dfa46db744764b26d2321aba82e9b2b85'
            '1c844933b32fa25412c34dc01b279d9767bce38829972f9f8790eba7553e8d8f53cbd1cf6a92d1aaf4203871919d2e47cd31a9f71e4d30af542b8d54def3808c'
            '92ad747a97fc4fe73de09cd9e8de787741bd5ff78c0be2f855cc2cb55e9716febfc09aa77411f42053365d8b5ba788a91c8720134a8f6b7c187b7cf7c196f2fe'
            '1bf87b65b8a4d66728d47e148d773234ac0f68067bbd3461502f44a9e5b91f20475128c4c7bcb1560d9ae2234b1b6a6786e1e3562e5c7f5306083754caf6e6fd'
            'd1a026293694a7d416bb9b42fdf02d1c745fcf0d4ccb9bf87dcdc7a9f7dbffcbdaf8a08fcf47115c097d4d2c383232ebf3b8fe033bc14f928a6a74b004401b13'
            '914724febd143b25943c5f7e8c9ab38d5465c6ad7898f4941a8dfeefbeb9e5556ba151014db89980789c5be5d7cc6bc76da3cd82a79d66d93103d2f4bfed6ce3'
            '270f74ddbd0bfe6f94d29a403c2440d00245641e573bb3b97cc397f53a98426432b0a4dc00770f73e3954a508658befaa84f0d35f304bf4e9e725834dc1fd5a5'
            '9a000fea4c3e937bcdf609447f26a32b6d21fc52067ffc0e9ef69c1a42ecd5b43631c14d1e8d588223cdb195fd18f740f6de68c761c804dece0b521720605e47'
            'ea6a5f97905f77b798810c6e3c8f40ac59699a15b5e2cc4c992245e2b0776931ae5ef730547a9a2d0e50f404f1984bb4f9b21abed668d53d7515474cfad2e8ab'
            'a9a6ff24a6fc32409d14d37aa113645ee53bbf4325871e40e4b090ed06d8b67ab86ff060ddef04511eac37337a80978d97ac81a6bab1580ed2d694352227350d'
            'ab4e9aecc25d173427bd676fc3887dc7eb31950d486e19ab03dc31ecd9b8303544029365f4ff37937d420efe101e9a061e7d771d90e53028c3b3e55e7418b205'
            'c65c22822fa04f97ec93cd80a9224cce0ad062c737b1db6666267660516a15cfa4b8e2f19998e2f1bc70177bcf0b799e1961ba9667b4a18af7501405716ce7c7'
            '7ba905db147bdef80eb074d429e40d648c4cb6633ca2b65bd9b48e97b494ddaba26c15bd6fcca157ec92c98be1262c943b07431edc7de23014c63c9b40ec9c0d'
            'c5a1014baaf617e4c4f87649113274cf5bda01924cc684b3f38805e67867e1b31436ca2f6a4e4802f3e107ffeeb15806f532eb8a73f4f9138c42292d78f2e852'
            'c06d26b7fcfca06e88ec4d4411780bbd448963a0922b6acac61d5682b87361431e86167cdc18cbd58129ba24fc819e484ff22c86cb9816bd71756aa26f1fad49'
            '8e41ad785397c4ea1069f8d027d633bd862a399beec2c3956f80ecfd51b7e8cb97c68897a9a579978a8e3e968b89392ac5ee46ea3c3aa5e2f636fdacb655017b'
            '4dabe1f30cf3002cf6821257c96069018a3711681dda18fc18cb83b1a0348dd5182bd630c3372d9ad9c56f70ecbb3c8cc5445b79c8bd067328fd00d557704826'
            '38ecfaf86209646fa77a3a2132c7e8f11eead2307de16fbcbdbdfb6c42b8aaeb48628b7d0e95ccf55e1ea3f2d76fe714c2b7ac95810426361fe3172fb357d060'
            '4741da477144e1ccdebff9fd03d3a56414474ca4e73d1c11ca2562e0425f1f830bff1d0bc78f19e252addff832f8d44785e3ea24b5f043d386aa797aca5d3a0d'
            '7a0be6c85567f7d766de08bc0553cad8739b77a8de3136717df8f32fde7e3a4735c8892dec495343872c6107c18cf90a77cbb3fba02d01b8b747ba9539c2e71f'
            '3b41dbc521b9f4d470ac0a31f9bb1bbac7a09261fe2f7ba61b938e15a7218ba867ab9cb01afe1fb7e9b4b6309b069a9ada1bd4c1e6fb2c7a0552b2c2e78a881d'
            'f6dcfed21f273820e09ced8f88a5bafc9a171a4ee5ec8f61a03ac3286f3631c0aea7bdb6618667106cd9c54b57dad50de25e6679f778faaeaf8bf9c147cf2315'
            'aabde683c108ff2bcdaaeb6def41f6b1370c2a31da28a83ffb1bbbfcc631bf13e489add6763ca9974b1f05de016e659646d84b47e4ee00ff2a0a01baf6fa3cbc'
            'd7ecc7a54e9b4ae70149823f6887e86fbaf4eb2fea64a8bdf5479a9c75c544d94f843fa9d735839fbd548353259add01076937d14a578c7e2f9e068b0478133a')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
