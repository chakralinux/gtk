pkgname=thunderbird-i18n
pkgver=45.3.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('c4fb9cac062925a07e2790e66a1ec86fec217be2c518715c884e6cfaa1471c83738d50a183c34aab0a4829b3d4d19c7d7a55c738a23260a69f38dad7d1821a67'
            'fc3b549cf3bcc761bdc310459c794aedeb5ea1969ec44bbaf3c4868d9dd7052ccd42ad801d286f8699bcdfa013ff68295d202aabce37597355064a298d382f39'
            '34d469b9eaa50fe6ba75d4585f388e47ba9ffc3e23f8c68ed9d178d6760e0fcad29591e8139e1000a4c70abf8630957ed14e52edc613297373973d64746e0231'
            'dcda0aa7d52ccf859fcdb06f32b121d451d1e76c069d59860c478f7bda205dff5a19fc85c3a9229eac2c25be21ddeb84696d5c6c933a09cf11d66eb5551985d9'
            '12248ec248444adc6c86aec9c9f20406d0abe9dbec15643893fed52e17c4764fc1629d4825ef5eb08094342911378577b6723cfd1a391c964d25a34fccfb03cb'
            'a1f48689a2e18c3d687052ef789084d01fcd4115d9a77959b22c903553de9079a18a0808089adb3b0158a61dd386a99d91b7f3c9d794201ca4f35bf8699b1480'
            'd6c85c084f4a993cde8e60956619e76a1fd2bcec88e20b681dd405f6712a64b24a262a8237d451a2b66cacb9cda69a5a9deb71529a3ecf2e79b8565c76055ce1'
            '72337152c55e7f3710da57a1b47657e2a6f8f88a93e97edc00fa1da94e75afe480edbaaf6e55650255ce1e3433389af6d15c396aca27b8be6bd2075c977437af'
            '98b3e081acb05da7dbb23fd275397b4f369b7b9273b57f14608e8c8290de33e1922f3ab75914c70d3ebf41b43661a8e478faef2d45b05d57c370f5fb0d66d580'
            '01fb865969eb3e25b6c7da1d01e34712bc0ae4d0f90787c8ca8980fd7e70bae3f4f2bcb52329a87a40cec106f299be78d2c1cfbbf4d27f3177d7d8fd2d02c1b4'
            'e691a8bf36dc348b2bb7155d7ac7c02fe5e6b273dcf32972a8a59dd8395e0b5bbd2b1592f702d44d44ea44e64f23f85eec9d9bc6c72cc2ea01c747002ec49be0'
            '572921ec1b33b41b6926a90c23fb3acf57bf2d50d16346a18da8fb1158f7d2dba7a334403d358f1e18c0e1b117a8525c947384f4b11b0b678ad59f20bcc4b17b'
            '9dbcadbbe2eda0fb0e2cf3dac6ebba72e19bcb09a3aa4f34160a60389fe5d73e07853443672edc6cb5300f3f05c41306ff27e95b16d2264873a726bf7f5d8f6e'
            '6e3c24418e57aa7fc1255b4409eba7d08bc1a7f0bc0fbae09fa2866d13708ef92b9ee363aa02207ee46bffaa5b7100cf8bcc3f34720c245383d2a75aee33ab79'
            '7d33bd1ce31756a75e1b907104198c2514b2252e336ce27d0b69bae6ae303338b5ac99a79d6bb059b00281de89a466716d4525440ef6983965cc3f3f437d9f8a'
            '3bc4c7e669d6c801be604f129579aae95ca5babda1fc20cf23aa25539c7a75b25763a060daea0b4c54e4c13d14cc22aa9e650f5f442346ea47e0a6c3d7f73ca1'
            '2e01b774e900cdcce4bac4496c26ca6626d01053a7f790822f7af3bbed374b82aee428df4e0fda78317aa6af160926ef21e433e6c500109f8dffe8c3ff937956'
            '33a52acc81e8e13317894aff426243c66e235105a9834b4e216dd938e0dc794a29fe4b67d605b1608403f469612a4aa97d9197a81c0b4ac98ea62131d223f5b7'
            '2ec14dc8637f5acb7f63a1f440eeea65b3d62aa3ac6e7b412e92195989b44935b23330b8b7b45a20ebecbe5f20a0b3a0372c4a1f4808ec32f2f0df7878edab75'
            '82ac204e7acd7191691316720a1360671ff5aff8e339ef167e432b086d9d2e007f9dcf9548ef2c9174303760c2a52f3c646abbdbd77eb6fb2ea6b21ed31a3f94'
            '36f4c5a58f86ae8547dcb3592a9f45909ab35259470dfdb8c54e8de83b3db0a4753531a04f1793f278e9964d26a4bc756fda336d291ea081b33c490bee543294'
            'abb9578ed8609ec2edb9bbee1fcae60bcbe05bb1ee37a2d470b3969363a22ecdb396c4f68f7626f8fb5e4a81a507ac2c815a4d78b589291ee90f03445946ff93'
            'c6b4397cfcbe9e6754dbeccddea7b2865625a28164282195595aac5f345568b53427f953b47def344cdef1398948a7720645e69ffc0ec2fe252b61109e4fb849'
            '5705cdb2abad6ade51f71fbf4edc3cbea17dff8ffe75a055fb09aaf993ab144444828aebbb9bd82139607ea4d781c4c58339868d6a37cc5d835aa7e48004b979'
            'd023f0e8efa65a00cd0e8786a2be1c313f45520062ed15b0bbcb6aeb6aecadef395b27fe0bc96144e313d6a908bd0314afd37e0aba7249fb30cd72899be2ef21'
            '62d75a315a2f33b3263bda327c039f0e599dbed07a7d43c3454a262c7be761c57a72256a6f294599e86a620646b6bd9f6f8beeb4405a0af6e925aeb7b8b94e69'
            'a253db2431fdd3d4e852ef86825bf3158a2f80eaf6e11a786a518dbb7b5932129f59a68d03f5bfb45e52c86faff1fbeb9c4d314b4e9ff4f41797df9fa589c4a8'
            '1b03ca67d53556225c12bb6bcedfcd64ea5ded8e74d1dc8735f82ed3b5c9aae8f909d0f08cfbd65cc513d3e4018259c1ba7a7fe73b8317dda9c73b4e4a09f1ac'
            '584bf838303a1d80ee5332559b41836457d40972852066efd6db9cea22e78b78b9b3f8134918c3c0f3005a608be0e8c6db5a78ab30525753bfc4c1fca3e030a3'
            '8f455e45bd132b05d4714156ff4aa5a948a4489c2a8d713baf5cc7b1ae0a6c752bcc02a52e9312c58f058b62155f37ba02a02dedf5bafc5579584af513263bb9'
            '18695fbd8cf9eb34bcec3b05f21d9ea1021ecb3276cd2adf09a2487871eb20076ad8498b8c67df0cd441d7c0240f2ad7b211e9b82a187500af8cbb2099aea261'
            '42cea2eb970581907d5aaf5258d26b680c99ab3e3f3d5cd2ebbdd84dc108ea042c7ca49660386f579bff959f807fc464dff4c24842cfdb1edc071b09bc1ceff4'
            'e44e1e4e1928089d80f2a37227a035df1048a2c624633eecc48b415bef40f2b6757221f7b5e6be6ed1de80a641f712ba35472d8d899edc71cec7555c831a0278'
            '693749f775ff7a5131389e9a5ab750dbc4eb0bc2386611b56113bbf7b3fc78d0151d1c13cea056cc26d77b2fc28fa2241109e80a6a591fd266630c1c60c62ce5'
            '68db9e7694911ac6bfff7cdf1ea4e741f30902a2305661c4be02b8766ddbb66ce52b3feb8eef40f165afa4cb377a8e26d2997375847ec3d3c4c64ce176f40c02'
            'c5384e20f9ed76d3690e15d7d06cc70704c3e3be7c5e603926352a33e0ff893898a5362857eb78c355a1b7ada7f96f8f02f06fc2d79f5bd76834bdc2ac5ad88b'
            '720de265086dff8782ea2d8a35988c90d24e24acae37a3421dd0143d3654d5a0b784d0154930838cf5b5c21cdcddfa7924c732e587790623b968199e7616e248'
            'cde9cfaf77f0c3a620ddae6962f6f63ae60a75502e3f95bd278c652a7e3f4e7cf286515da64fe0606b3a551fd84f7e828b8adddd9a1ccb9a4032dc6d767367f9'
            '172f138eaa34a30ef6c228b30e4edcc97f082f62b592437e40b99e4109d0f12d32833498f81620e33b4a77d31a27c23c7553748cce2f3749f4db88026615c387'
            '7f858f29953e6b81286df21a03c28d333f44f70a85c9c657e1e7a7669f3c6762268701d8ba6ecabbee431c49c864feb787d8abdad51f91167314c80ec521448b'
            'e5cf6b519701b72260f78c0b96c63e996e9ab3f5172c18a7198ad737507ce780606b613f416edd521bc3212174c6d0457c524681b389f9b879fb5c9a49a306f0'
            '5e43c95fa68fda8ae0cef3b372cf3ec5c7e5c560778777fb2a0205ad67798b8cf36b7fab091007752eb18fa98ce24cb2809b1af2968365ee451f9b50fbcb1c37'
            '891a422a7889603fa71d8f96808079e59f87bdf3e752e20479499b6b20d07a9b58e5f9bf4ad91e9e5b8db67f738d3a1f4e7f00a7f0efd5256f626c26feee7557'
            '0b4edf14eedb347a13f4c4ee2f3348d6e9fcf9b43c6c6704f5de071ff8007b8f631447502347aaf67b0ef785676f7af2bd4cbd67b00db75428bf3b6175e27211'
            '94603e45e738531177f5a202375923ea9fc36b2361f5fc4bdbfe0fcf49097fc0414b3270e97fd93964bf1e95e65cc50ac04a9839e5da147e4876183013fdc730'
            '7b8f17551e61d77c5b1aed2847ce42f5037e3d7f575b34f07c89a27d347e39095a7d2de0a82db6abff8f83b30806391cfd21c75bd01a16c36f4c2cbab8bc7341'
            '2e97a8705925d51597c690e5877a695e6ff9c9477f0f68139b4ecf48eaa30c124a724fdd9681195fd0692f08eb8f07277473cfd5b62405851449aec1cec7f3ae'
            'c65e4265f044130b7c2a6fd3556f98eadcf3913a203b01fc55c76223d0efa215ba0f17ccdc33e54b00466c497c67dbe3994122f0c23e80f38ef3d0bd511eeaaf'
            '276a666c8c07ce615718efb112250e126ac406960ac6deef65f631ac9546826754455187362481d25ebf64ba750f5bdf5e02ba8841890b13a5824903adc9b56d'
            '84cc49cbb29f608b78c1774d568d0623855fd560429f0b1438a2ab2ccfd74d438e56f05c5c564b0f16c3fdfb8a7eaacd1caad3c1cea918366c26515c77807b36'
            'd4d6164c68cc9a260d9e3f9ddd05adcfc88bc2f3e801f01728d83488aaca70a51657c410a655bcd025be54143cbd8e1d0be6cffd1a41517ffcfc2384b3b0f1b9'
            '76e215bb1a7c1cec10c706e702cd47b119ad2bf01a4448f2bffd22a87bd8ea2a6778cd98850fbcc76a6eb9a9460e724d11be00a73caea5d1ffa7fd2a91b5d83d'
            '779b009b1d197c60bb263a9a5ebd68808c9e6345cae0cf1acbc80b5bcb54119baf3497ebf29b6ec4ecc5a3c7f5107f73cbda3ee58122d274635a60906334c77b'
            '2869f3cf67e02de76079361d66f91d4a21d183f2ef050d39d6f8582bf66de8b027fe627d9a596fb7b6351e1195a1fc0daba71a683d94ff4000ef9ee20b3f6d87'
            '180086ec0baa27595906f66c8c9ccd017e5578dd1ff8875f1e8a7ee3c83867950ce9309e3608ae382c84b02e80383bae6a6e21140de4aa90258e4d87672e8643')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
