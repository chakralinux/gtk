pkgname=thunderbird-i18n
pkgver=45.1.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('2de70c2b066038bd0189e9e3470bd75dbbc6d6ee27759a06bd548ee23e47e3f0757036f8f89ade56c7af67c7e23ca5ab6fe502808684cb03fe779918fa3bbf52'
            '537ad2e4c5f0dc30b5823b25bbac301c275dee248f5f41a903169ab41f836578f9fc3f4db034f26a1159d49c0b5f8c701e86b8e84f3b4e70d7b88b7466000ea8'
            '9a277d63381fee98ea07120eaa4a815e589079ed61ec9909b7f4b55cee3f1bbb1af9528d47f72cc38dd9a8c0fabd0d7470dee574aa76f13845e99f6a68a053bd'
            '644056376bfea5b9d157a10d43661ab15e08b8c25e92844d2041157a66bf2e864abeb1b9f67220c1343846619eeeea9002cbb5ee840c3b50b9cee7f72453c926'
            '95a40d8b7b53b9d4f693a163a4c12075e7b83bb8ec6896a334fe01e3a3fabedfe82dce8f616d6f6b4c519dc2093eab6d4efc0eff001250f4ffd1198118af46f8'
            'a4ae8462258331ade9a30ab4842680dbc1da073efdda66b69c053fbc09a846ca1cd770d251b4b628dc517d5a0958f5b3a57d8bc4ca58d992626d6c9af43c5224'
            '8147fa8f444d3ed8e9e831ac75314c28ac6d07c11bfbf6f5de749ca2e42283880bdd2b165ba62c5d2e07b26774e700f697acb61342d98114423b1fe0b541e37e'
            'cd6d14585f6bd69147870505aeb1b0423cad699a4a073a987a9b9030553365f0c25c21cdf18386b31f2733afc106d7026d6b52177ef3a0573277196c835ad86b'
            '3baf05e948babd33b3a1686dd1672a5f03bb874ae8778b95e10aa1ff33c023940378bbc853e62ffff6f832e8f7c42051a7889daaeb63abe254f0e5730cb2ed47'
            '0f08669a9aee984892f2254ba666aeb0502e2246e0b71b0de18b32b64d0585340cebe6d765299131b86f8f53e4b7fcfff6b13dba4a83bf2a043e94b4e2acfe96'
            'c672eb731cf2cd4e4881eeb06029d091c84c5599d48927b96be3e093d40acbb3ddfcd020516c47bfe88a4b410a27ffc3ed2c62ffd3c172fb8d2ea98f1b3bfa65'
            '581a16c71f48d4a7b8065b8a055c92910df57037a0eb578a347a89147ccd50928fde723571fae51bcd856cd9cbb5f6c1b630e2cb3923e032aca9644989441361'
            '2901fc5f38054ea0095a3e462d727b425f50cd22986a1f166f3f07d447162e60ff2d9c0c0a5433bf797b5a0463305e6a2c5214621b1704baa12a8eef2fa24cff'
            'd98a2d9cf6d423fdbb9e739e494d18ab355ad1ba4353f9bd517ca462195044094887ff34b93e2d984742c51a452a4e63406b51281dee22e10c5c85cdcb0b5525'
            'bd4d71ee39fb19c4862382b5692cf23be7869440aae560fb11116e00cd6d8c14ba7e755826ae88ebb35e1cc484421124b8fe384e338ab27a2557fa83c6132dda'
            '269b7dd9fea4bd5fb1a78e66b8a92c4a456d8889b1f58dde835f60eac54f3dc205fb4943ddcc86073d7f9c309d4822c7f70df9bc9e9613e07290cd9c8d1c4f25'
            '40fb609d4de41f20126cd0050d6f8472085103143b2a5ecc9bc4f16346b4250a575c9a8c3ba9e653f4b9e8d1ce9034457f92ef8d543ce93ab3cc06af66c8a97d'
            'bc97da4687fdad3fc67a83960ee487b9bc5d6d529e3cd0bd45365cd207260a98e6e48d06eb4ec643553ff0c4ebe4a092d8f3a51ec6372a5ff415b612bdce5898'
            '8f9966ea9b8018cb3a02fb123c5404f36b28663f7d311c4febe5e30df6f5c1dfe937c2026264ac39739fc1cfd8685894b798e27cd993020557dad55663c5cca5'
            '006da70ce4bfbe11a95e4de45c9b7abb07952612c9f100bd6f9a831f67f2f4482178cc877caaff5b0ca7bda5c6f592b274f43622155be54f37a29d39f26bb864'
            '80c07b2647e1f2dc00d4bd6fd94874134a4d8d634ea96e88103fc043532ddf2b8df3fee4919be4a1443831d7d5fabb52c22f5a1193cb9c63aea3de657af47e5d'
            '3666d5d7304b7de39244ffe31749d6d40107e8c24ae2a3e1d5b1e337540f9ccbbed34d198dd0c686e663c329249679226a36a45da59fa9912832b550a6f14fe3'
            '1de0f40a2841a16e522cfee08c673953702e922211bc26cb4f7e45154512def9e71150a96a4329234f2c9c1cc5509321be5b272bedc860670ac6549f3c91e2e2'
            '10b130f5d1b2123edaad56927b9133c47ee8d8f78c30785dc0c2f3a418d93ae86c3090d15241ce9b9866491098f24c98cef87fc4d94f536e91378956822330a5'
            'a8974b77dc1588261f371f4ac6663b1f70fc5f5af9d5e026e7bc234e7767fa4ba70ede0a5c3e1ee40d824fa7eae35ae486803837561f22f9a9ee40fc6d561eb2'
            'e68ff7874f321c3d7cb6da63e94a798c12815183509eb7327140dd826559cb8bfbb38a22dbb7741ee8b9d868d7ab985f9a522b15276e98eea98a6e711c775062'
            '534cdd1c8e4c4e200ea5398f64e7b1f3e72b5ddda316cfd6a6ddfbc47a23cfa414724865b006a8ef47733d6aff3603b78406300e73876e62f8fd2974d2858ad4'
            '661e3a93f976c1e219832e8cf4d7f0121f27dd073d66b83edbbc2d887b7fdad18e987ffc56b712f69f2ac98491825e44b4bd167c33e05810c0ce9d1f9ec6ed05'
            'cef75bfda8458a506324c9610f70ec967c41414dbbf0a8fe123a8ec6b34d973bfb4709836b120c5efb48e94c0d9c0a3cfb4f0e12d13b4f4f3d4eb44f1c11129a'
            '9b8ab8c50b657a4545ea0160f8172d0ac1b2c7dfccddd289ace2b8aeb99da19e2dd587df7233509d15ff4fc8c012b260ee2c417a6a24ed3ffe3660c9763e9abb'
            'cd9569176afccf44c9bfba08a788006b177be60083e33f7aa1ee0530a93c2cd2b2f67770ac01e92e2f82f81d45dc8a87a5b310dd7ae0dccac375def1b105b6d4'
            '90ae25bc7aabf35034f87c7e86786de88df2ad70a2f6156dd7514466d1c46317950e457c0fa657ca8f1064acf4e90fab68bd788458013cdaed2d4413b3553f9c'
            '1664fb3f7e31f1464d86a6fdc6308c246214e28659fab9d78e75700a738d037e9f59c6c97dfa68a9cc64fc412ed396ee33c96db37d773ff6299c79e546622179'
            'eabde13d92ac4c362f98760183e14b4b43d3114c37bdb71f2bf14fd5d5d0eaea665e9e27b0f64cf6abc707ad4032aec878545dabd8c2829df9ec8535c9893cdd'
            '461a3eaa4b73949faa4629c00ab889157966d46baaf2c2ad729dd8864cadefe461aef0b71d9f033f0e2d57ea326e22e246de7c31b3c59bb0e068eb9267b9ffe2'
            '9c49045db2319fc2120c41c5082268bfc486d4c185fcfd7b3e4fa4ae66bcb2ea0d231de5998f1c2f7cd35bbbf9746c8ba095e30ebecad069e766c5e9136b56ed'
            '07be69c773720ff8c0f67c51603c8694ee8277d0254b7b7ae710b7943166954ae95d8f6951b5269f845e20cc89e6abe29f234d916ab25632129eaa8aadf75792'
            'ba72ff7ef890defb512865f8c187085123c300c36bd866814447ca496722bcbedd535e2827e86f919b47e202fc50335ca67945186ee3ae3d03f61a06bcf7d54d'
            'ba9c89dac17194b0939c2dfce818b2660ba8fdbf319f08f32f5cec15ec9c0e51e83134dcd5c778eac6a97243bcab89cccfa6238db2b277b3c1b04272c8d497c0'
            '04301efc088691d9c38d0023e192e20cca84eb9b1b63224591d4c71d1c2ec91704d05c9680e06ce0d28d38ca53bae993300c6bf2ab4e9d810ffb866c0b2ffe97'
            'a8ce9116609324583a88f7e5063e90426da540e901fa54ecad92898e2d83b87a76d2c8d3b6bbacc1d81a36129b8a8f662a0770e09a32bc1cbeb3defd76e8291d'
            '3ba181656d70160592fc3194f834ec2aa0086b92f6de6d6faf7614e3718332b09a1e61ff2ed789a5dc5ba138dcb195bb6ad3b749909445b98424eefd34549b04'
            '76db7ed1cc251295798d7c0b64d60bee90a4c519435ff31831e022eff85902dd495a4931735fe977950c839e2541b6f64086eed9181e87863039abe4b4dab026'
            'c7f78f551c84b327f00dcd83af632f14649b1cc37fd50c7240261c34051ee7c15e00bc9bea55868f5d0751a5a3b07c1b1e0a77250a0713335e29caf8e17fd535'
            'a7905b8a41db1492786cf95e5bbd8da73617494dca2741b804bb34be9a1a7cc5068b3ae8af6cc2f6ec112b66686d5ff0524c106783b699fe47a82ef365084adb'
            '071b48f607eaf224e3e6074d2a90d6a923ba503482193911d951aef550ad5904ba93afe2dbc1bfa8036f7be8e0a12c7ea7b85f9812ed034bd511c80cfcd92db3'
            '1a4e5ad0fe78fa0e37fb3969a5b32ecef6537c398a8b9626d9fce323e7e5916fbf87113e01c33c17ee398eddd035e30c76bcb807bf1ecb2bc9d86be218317d63'
            '9f8f570ab6272b70bd28b6e389fb8294ab4ccc49fc7e5af0edfb7e1173a5a4cf9215b31a9ab5757a3018cd81190ffaf0938024c35753b409704b429bb353c7c6'
            'b661165475bc880d615b08939527d643d74b0eefbffa614457c5daf5be142a94da224243f2d7723e3fcbb0944ab353203ac3b58489d4a56667dba36a8ed54a76'
            '148501de355e97a2bb0f3c09371cef2596cd6fad23a0c4ade43f81b78b1101bbf4e61f7df89ffc88777829059325a8e442f59cc5a4c4e2e700fd30118443bf03'
            'ddc7a717868233e3cd963e305f621ce630cc710fbcea0ba1581fe2b695001617f4c801a4bf38d61bfb960732b6a6b1ce99b9fb32f0e7b5bb8663875a2f209ed7'
            'badd2e0ff6935be47304ea3f142dd2a0bfd5cd755a2dc6c57cd0d96aeb374e7604d01b0eb8cdd83f61dfe0ca9c24f84894e0966f867b9ef957a023515ae68026'
            '19c90a5883d3a7929716bcf8896f3bc8957f5067432265caab1e4940bccc59c97f8b3caeac61d0888e0c946e1f740af5f56903323054da1036fe6602bfa45596'
            '705c21521fb6d49352c1a9d737977cd03fe4aebe8eeaa3ccd4e1b5d9769bab1d3e0853d36a5d5fccf3da026e6efd41ad48cbbb09c5a2fa57abfd83a368dad098'
            '44c3d17cb03603d7465c11952d1e1de6669a659ceb2721fe5b55c83dd9346d2a547caafdf1e72ae2f32e8d484c363a1cbdb30693ff378bee76928ba3cebef436')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
