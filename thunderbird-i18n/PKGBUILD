pkgname=thunderbird-i18n
pkgver=60.3.3
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('fabda884fa165a22d0fa6f364f3b8892c925da5b4266bef7027fca6baf51593b69b6334001a7fc0ae8eb6225a5fcad00ce81643a403fd2edccb3265e72c2e0db'
            'b9cd070d98e8405e547538ec6e6c83542f9a9c7437abdb7aba7d7d112a6a30a4de93db23cdcb710cf43b73626fb4db4ab1962a3ccfa53304b61f25dc93892edf'
            '40d591ec4503a01e72e6990b09694215f32624f2f7a5ce0ca09ec0e18be28dca80fbb469d4a3838e08307a6321a707374d4f4725939aaad98215e5e6bd825570'
            'e1f2b7e9f80dcec8ff36730807222e56a9b166ab2978389f97b44358b4fa95e8c9092cd86f02d2bdf52003855d01ff4a6ac48c965d0d484d722be10d27b7ae99'
            'd81fbb2fb3a0ff01337008e46e480f200a0ad7f3682d5b08733c0a58bb1a9bd5b08b92fbf12ad0d8430259f97991b5848c317c7e158f6f70272d58b3ce4ed5ae'
            '2356db376581ce3a48e36e58af4ec03c913046fe7d11b3f8cc0cf8795eabba6c49c16a11a903e896f3c3790c2fa3a576e1e5b575a64df2f75e69a7a4642555a6'
            '4790d4301cdd5678fab68ffadaba2780d9910568cbc87b17cbeaf1830b668e8a7111849c392bf487884951a875e3d3667895b1e32e882fb13dc5451ca019cfc0'
            'e9217cc6a22ba9f51f1f01175c32234183336da10639da95ffb8d277015ce36587031d79a54475bbe92739aa74908fd63f9e013ddd0ec3fa0ed75b5ad7d9dec8'
            'd10718c25d03e1cd40a4695776de30a7f17e08fa971b37f4c9bca47d9cfe1f922c20921eb9353a48e5347ba130441d2d2a4480f2973a2186b5f2e7dfc9f1cad6'
            '279ebff4624f9013b1c930ce164ae50b0a6fe31a04f2d01adf30d45804e7dce2d130807fe0a37297b5deff3d8448410572bd769001119ba6769a721f3b48eba8'
            '0183218f1eef2801225b4f70c3fbf1385b6461b7ba3c5f190bcb4e7b54e359ad4c915f20a2d93f929c81bc2117681ce8c2b12ff04a0f1df203daaf18ad1ce292'
            '3bc75e355f137dff2ff7ab99cf765d9440a2078423c5d59997ada16a50c5c806b9b2eefa5077ea2840536325d4a220b956136ebf40f827d0cbbf444f214afa47'
            '3a7a85b1360592abfb1a18c1c99fa4a9e8907c795fa5fbe77375cf3373f84d6ffb76a1a6f42b4b1ddf8a54f20cba17d167836ab741ba3945978a3429e7077c9b'
            'de6a3ada27081fad50b82d9c537f8006dbed344cea14f05bb01445bbc24a533471a5310f7984d5b9bfef2f1fbbb6861db349cc1ac93dda56e96c434d5e64305f'
            '498c346fc98ebb419de3138b7190f298db9ad4c99068fbbf1472b981bfe362ea2580978d7ba98266315b50d6757fe42395db16dd38c8439f27c3f5df4e760ff0'
            '6895d9ec37f46ec8d05a9b866f10ba3bbc0e6584d7cd5b542fc374ddd2f71fdd9804164e1986494e3a2d204cadbd8b8482a439784a2417208fec50535fdb409d'
            'ee8050a8351ce31890721c3062b2a4d2cc8e6e84e78d6e2e587ada576c5c4cecdaf0da76cd0d7fbdd3998ea0b39aeb754ab6f4fe5cd3d2a7db9b23592b1cddbc'
            '0eca117ba323f14fe138e4d5c0a5662769a5b07214de5e66e2abb4e51dd4d945e154c4500745c97bea6126cbba284f85d1fa04843d2b4f3c5650143944ae12cb'
            'a0cd34a9d5a940a97990dcfdf60e5127cacf91c24804e3d52ab9f85a1e7442ac91532afc15465ce10bbb38018d903b670fb2124309b9f5b2580ba2dcc815b5c3'
            '2acf0c11f0b03039544088e3b2b1f8ddea8389f90146be0a3ea9a5fbf5e8eb6587508a40053876c163be32861029316a9f0da17449065e79258a1e8949610898'
            '9c72bd7f193c27471588c4a9c365369f5ecf8454ff5b3b5f983313b43032b0cbc853ad70f02873e60e2e21a6048630ba0739c70bf3f48318769ceb205c5f1bcc'
            'c036305926af74dc5df86edb60be0e436a48983f144c8a5896a30fd963760aba95a61ddc9704642a8dba526e21fe9a27541d60f14f4d7629d2ce2f04a2cfcacf'
            '48f21327143dfe40b5f7adca7a39f4fc553abe2ebd233977415affd0fcf03a2c5bb32a06e6bb300b5338101600f48dcea0069c9885b57ba2fcd04f262c24bf4a'
            'e2cbe2033c172c7d3ffbc12246a9d133b3b8786a9c9bd97a11b30133e4e4f337154db87ae7e6177ecd81b34a87c12d733e24b4d47527370b16593e9cd23cc225'
            '03b7a1e6ff0f9cfd8c3527187f7336a48e628dc99735f8c4d50cba4262a95eb5d3f599b2c2b0081307e55b0cfabfbadb11e405e9114aff8bd5f9c5c7caa2aca7'
            '9c09f1f964fa7fbf045575e8f83fcc9751555afc4555ec8b9637f466f539b389c0d217d571056ed0f3a029f29e92e2c9ca45c80864ab85297ffd32ed774862d9'
            'bcc9ac3cb0529d80491ec10a883dd5c61ee31aff367e1ed48196c8f1339b61e9ef3bc339446f25c3c21a0575a9ecd7b2fca63c6f4699c2011c188eb0b8569dc9'
            '5ae3528f517d9777b861bda27232e0ce6ab0be6bac6d763859e0d37ace39d31c9ec0541923838f1097e67b5475875def27de761e0bb37c1f425e67782769c2b2'
            'de393ac1afd3a18a7315919f6bc6228af8f40843481716bd5f4ca0e30dcb3ee27392c91d65beb7f5328e50cc78ba4932529eab1af0e28c16bd0c35fdcb831307'
            '5dbd6a221e81a23c88fc6789ef6c2b581c8872ab44e9508a74edca09305fea77dbca2bc5652ac441fdd1670e9f44a08e1b0cbb50dad99a9bb2f49de322fbd845'
            '0f89f0968ca4b41c6954c10d1b1d86284c685e613c6f1a4c26d30746e2743b8708a4a2ab7278bc362839bbcf0ec19e349e3c7b06e073351d8311a2c0e6a2f80b'
            '05f67e19e7e8b0fe8d9b876c2e550ef35a5b22c78fdab561deb253f3683b20dd3e6eb57397e55ef52b212549c30a39c1f8a41d945a5a5cff165f0f386b8e0b05'
            'ce74888340fd856e02d45e5b19f1192ac7ca3632e13e87abaffdaae6fba9d52a992ecd8237452de3d9386985e9e274f0d4550320032bda15b28ad39b3e9ecd84'
            'a3c2baad455d093661bb7c135265cb345fdf2e0d5704148357a74c0304629c43d00257933835bd4a6f6a3f27787373444b6ed5bcf81528e30ff29cff663cd68c'
            '33e2a2638547f10cfd9fa07b2f973d579feb86d9bc11363c346279741adba001de51719e38ccdf16932dd09841f14911c33813a70c7f9cf20a8c093025289d1d'
            '2d9dca390a0b893023ba195cb6077af46b1c38a417f78ebe963481a5f68b270dac1d9822d5691600c061e0d46b03c1ba92d77cec97e557c18d67fd5659865245'
            '3ef81ea906e79f9140a701dc04e64eca55cc0a3cf8fcf4a723c2a355386095eb82b0e0eea92b835d9f516e027a20a8c4959c0697b85cf5528bd678d2230494d9'
            '19a6b4737094ff97b74505745e3d6d3a78d511b3c53d5d2f9ec35244fc25f749c302cfcf6b37f1ec914b5e379ccc57a57cfb5cbff6931ef46db5a71db41bee32'
            'e7c2ecab95bd07098f6185df1ea0eb0d9e2d97571e71826b916e6fa58ec752d0e14a3c3f6cdf046828c85ffc645d26d68995bc3261e8bcf1ce87dad550df4102'
            '36c96c21c258a38b0c192b7e3c1a95fe3d00632246783cca8d1323e6c953fb535299d5e80099f978cc1babe966a2af38a891f2e899f2a5bd2a7f803f5d6bf206'
            '852b2ac382044f0797ac6c590dd25efba5b63d595e7e6abb4ba43820cc2b792bed646b9ea986257163c5d715e5cdc463b4ad931de68d8990de7b5a155b28e463'
            'cc8db5330d868239aa09abb09e637493fb9a4aa81547487f18c194c9d2f3fc847cb3043f82d8efb1e84fcab1e77f722570040f6cea4fd41e9bf4e874ae7a188b'
            '9a4471845b9024b71cbff3737bc9c9840b225e2b30cd47d5e8d8e6f51932468a524359657c3f57af3c05bd15ebf58164c6c4aaa07250e09d8f18928496f1a4c6'
            '02a62854dde75d10061357ad7bd1e9445dfbb0abf64ec2b7d73584a0fe3b65ab3a20ea5b54c0a0d675caa5606dcaea47e84030437d765e61cc713b4d607ca93b'
            '8f03dd1bd76017bb6201b3893b9c33971304b7c10637841d1107567f5729d25d3ee4c1124012f90c88becd105142f3bdf088e321aa0febe2e4b4f857e71c8578'
            '6e1ce5cef2bbd58f54132b7df0a360f2f017b250c5809fef43642571a0e33b73333429d1b25cddce5b65468b06cb922963155370413cf188301d3e9c78d7ee6d'
            '066fb7e19dc1a556d5778a38a449f95e99bca5337ee91caf0b9dea1ee06271ff45ef88ded723759c490c7ffef6f8e096010f7232f940a80e80935bbc38e116d8'
            '6f7b9c004ae56576055e1efa3f789746ac0109f1c8ffd2c1a2f729ea94af91149571fdf6fb8420b468512b5bc1257ab5272a1930b0c2fd6cba1c7c162a050fa3'
            'f076c9146e7571d4989930bca93625ebf3e1a52ee5b2f47c471014490ece96cec68d283e13fc6a2e6787d0e24162c6ec9918b24a91a1812bb4dc290cd23167ee'
            'cedcf9e67d1d0ec95c8945d5cbde57d747be937e285e8ade7c5cbe83bbb04f6b037aa2a8f157036b851a45231d133acb35f6768fe610b939722140bfcd141231'
            '21141f361074a8609b9340485c6a5ec61a860e1ab485b48e6ca3c43bff67080c40ef71246f2ddcdb5eaa9b50ff1d488ddefe658e4275eee0c5643e906a8dca42'
            '7f0c28edfbef4072f88e1f2a5689e7936182ca243cbcf628f0d33e5be586c7619652cc12513b19338878e76d5c3235c658366956bdab8765173f1e5bbd1598e1'
            '81f962d19f51c64d7bf8a790cc00fcf6b87c9ec19a7e9c8d73621f5c2bd1695b1618eaf9b1b929ec2917f78f3b681815e95c39e63945e92c3af97c776518df81'
            '4c2797bf1ae44388cbc21828e00c334daa8fe1b54b780e75e0fb36c03964de271c5948b2fc967314e6b5f425ffdea569c52c970c764417ce1062350cdb615330'
            'c8bdf836c383c1b8093a29a8e92b3ea75e29ae58cbf30f5320f8b87ac4231db77d5231a2ca24b012ef9088124a34e3d186e6c0aee13c146231e3759cbd9780c2')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
