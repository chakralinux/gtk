pkgname=thunderbird-i18n
pkgver=38.2.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
md5sums=('85b879d5d1c779050ccb61ab4fc4eb95'
         '956103c705f263fe0ecf70f7f026995d'
         'c078e043e9f3e9964102cbab58cd5cba'
         '210cdb36274638da4725b95cb839b357'
         'b5d5ed3deebc1e36db70dd5daa6484d8'
         '45548e85f9148b37bc77122ca70550a9'
         '80721d9e27d8598bbe5e7769eaca3b70'
         'f8e12f64fca85fa59ba101fc1f460916'
         'de5f5363f3cbfba46dade8f77c238211'
         '42e8c358006f7a91e44cb1a5440a1ab0'
         '5448d64211c2464df0f9074e2ef1108e'
         '93698f72048fd92dbf69c71bcbdaa8c5'
         '33286de36dd2dcf8c7d23012b317edcb'
         'a744ba75142886cae07abe39ca3f312d'
         '7ce89e89764e85a28f270f4a194b2dda'
         '7f0e04a0a27b0437fd5e9f976deb84e5'
         '686d2add0d8c19624dcceab48244ec5f'
         'c5c179a5ea3130fac81142c8b0337573'
         'f7e44f807705ee3b71692f18d07aebed'
         'b9d65be3b65181300adbdf9adb39eee8'
         'e83f12df3973b5aecf9b3ff5c1132198'
         '188f3a9e8d00db62978b861e3b1afac5'
         '2f0526283049d2320bdcc07e1d8069c1'
         '41919ef93cf8e1140604359af2b23f20'
         'c083c7972e441f7504191a0e372d7d93'
         '4e26275ffbdc0a26af435ec6055962c4'
         '4b65b786fa7141963aec55ce93feeaad'
         '07687f3c3e7bfc356961294148a86643'
         'fe635364c8d593e4ccec964f4efab414'
         'e64fbc5d30f3512da26a50eb9bc1131b'
         'b6d140732704a18b9e130e146a2179c2'
         'f0a3788084e3963f9737e0e6c959bf66'
         '8f2a693f35757905999b9aa02548e04a'
         'ea1dd9e2bd94be70137325390f0cf2c3'
         '4efa650fbae780cef3b3bcfd05c6b085'
         'de00df9011be841dce82b5ea0655697e'
         '529a4a87dd86eb8977945df4b51f1e73'
         '4bbf6473eeb1891fd43db630fc2a43fd'
         'da6a9da2b6216232a6dc9e5ead65d67d'
         '9201438cfa051bad7c656084db6e4e87'
         '32681f284b8bdddbc2a06f7f8e775410'
         '4334fa3c2c428b9a4694779ddd0c24cf'
         '0849be47eb7bc10d98ab6a9ec194effc'
         '58c8c6612b737b0d78e94f1e2b10c7e4'
         '55f1b086c1f432800c497b768ea0d09f'
         '3d55142b0e21c3c6ec38b8edc59df2f5'
         '7f92f512cac825900d80e4bda2ca25d8'
         '84807f231f29fb1ac210c3febaada61f'
         '86c3dba9797989fabcb3897005dfd1fd'
         '9e24083618dab7576d0af0c38636766c'
         '9c1df2d28f8eee7482d6cee8f51fe889'
         'e789acc9665dbd5c44745ec35a9a5978'
         '9e2f29d225aaf6fab73397248d18186f'
         '80b2c7f9f05960edd8fa441d81f46593'
         '1c95498227b3e45a60495f8013546246')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
