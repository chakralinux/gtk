pkgname=thunderbird-i18n
pkgver=38.6.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('a7b5f52d4f3124f6d757f05a25cae7aa655a9e63ba79831d3a11619351ea3f2e0ed4f2c7e766aa4d84626557f03f111d887efd4eb26906d595985e79e022e53c'
            'ebaf3722cc86b72110245c2853d6adf0776949e07cfe6bc0b49da79353769ab2375b8ede9db80c325bce4a19e49d6404070abd4e9a48a6f3c542827121ffbcec'
            'a050585607f18d4b7046bd3d5160a1783be2de5d3198fb77b54c7a827eed9220107d103288b16792a99e1eaa059c1698dd5a5623ffe2996ad3fb7ef954829142'
            'efb999357db627d95b67da1981f1b1d4c6d96b36eb15d3db14dad8293389094254d199fc813607cf649f781d43f4f09dde1c97b3a98c2ebd1897847d072bf249'
            '958944afb3e3091a85713c997a092969ca557e932dd41f2b55123956dd6210f2a9e12463ac989bcf752be1c68868abf34d6ad4e1592bbe59fd1ba549387eb7a7'
            '232a585be79a0e206375c184f5c1c3e7a415e84618c7de585ea51f6b39374de43f5cecaafc8ec390dc20d24ba9a2e733f4947194a2ef724dd3df6acba477aafe'
            '364b551c5fc8969a0d42ea4de944248fdbbcd612af8a6160a935df9de8b740acdb309e228dff8ad13a8ab145f3748725d10550e6326e2888c3950e107714d9cd'
            '8711d973fe1492e398490fa9119b7b08ba40e1e22886d74e1d505b59f6f66428c7ce98c07b9ef413385a536ef3562be789ddad5a136e53ba8c8c69fcf1a51ff9'
            'e8fc963337875cbce16360b1a4b88f8feea71e0ffc4b9b578b8fc64ad6a02492c55c45ebccb18635638569f2592f037a1826ae4393b92f1c22981bd51d4d4615'
            '23950e3594a3039adf0de3a474effb68c5bb826c3f73d8431ed56127cad3989c1f86074e32ec620f11cd1585a231e307ef6b9a36678f27ddda3a8dff1f76cd16'
            '739bc28e89fcd5e4cdfb12410765d9a4d61e8f8d5f815e9263790fe0bca59f191a3391d6633f1131b054267ebca77a59725a4bda7a2532af68dcc2490ff89e40'
            '724ac5d65d14f3e47abc5b49fa02abef9cb652367a1fe9f7b6929340ff41fe8e6dbe00dd556a3129812a08c7b6750c0b1fc65273afefac586aed3eb002facd04'
            '5ee42a6ca7a39521fcd150435df1a853cf78d07554f03a98471bc8cf72f820c583e959aadeabed868123faa1a12ed8e0aba9f963ea9eaaeaf775924ac66ae3f0'
            '0002e7cc43c61f2168ca26ef866ed13c4f488f7064cb226d2abc23a278e86ff72ac0013a6c0b25db05ee3177d83f7d3c95c79c0eebc7397c9143fa20f29cd275'
            'f0e5c8e3d2845de66f66c992e9c77772c65df77df4bb102fb5cda74a26750f0000bbba339ce30c9b45f4c1db30e48e880822dddfdc6945673424c49ae97c61e4'
            '8e34a289eb0f010e3f4338a3ea140a01c6a7fa1be2f5797253e0135d06852327849b2d60cd5af7c4fe09f37e155b405693ae9a549ed8765f4e80660ec8c8ad1f'
            '3a3bb3ce9261a80bb226cc4945fee59a96943dd62c454ccab3820da26b3f2abca55073f96f80959406c20b5400695ba98a19e25046813b35e294d4a555aa4f89'
            '0ff7937def9c2f5ceaa495b5a1b0e83d09230472d33582b0db5fa746e9dfbece712402491da4fb642e662001c53c159b2640c4c7d71f5a917ff198fb41848bc4'
            '94761af2c1f01d29896d571216ca30e47089e8c05d1b424ee77044bffd0207077f112cda4ccaa13a968c709c9608c7340aad336bb1268ace529e3a3952ffe9af'
            'fe49db16a52d0b51d59fb67f081d06bca546c81f4aeb54670ccf653a80090fa176229ea57d76123c4d08d49870c6e0db5915ca3db8aaf2c6dc18c353912f06c9'
            '3251f0d35b083734e3d869ebf7c45c32681e21ca3411eed641734c7fbcc04f05b78c71843a2dae3db4ed4495116abf8ed33d560153287b56341236f71eedd798'
            'e56393976b8b0a103905de8e66ed40bfe4afcfeff459c8438cab74ba87fba52d42ae3a938f2f3a3ce16e0f774d9b776b9269fea9843293492ba05aae0cfd2919'
            'c9e75cbe1b18a3a8cae21fb341aa48615c45c7343993ff3b812759c13255d2b78eced8c34fc1a8087aa055260c4df99a16f0d936601f9725dbed382a88e470f9'
            'b2725710d145c98c653030c8ebe903d73f6ea86c55ca70c4dd84038c0608a5ee377e8df3ba5c07302f4775478af1b7cca29478ed6b7d5e1df9268d290063d0c2'
            'eb8ade38c0c25dd1b4756ae0f0b4ce30e9cff8583f90ec0d243f264f11f82df082b18809192287770bb3b9076d89f4ebe3334672edc19805d0aa836ef138a914'
            'da2c9c3286b30a601bd7ebe9825d2f5b12709681ab9e39767109dc6baee99dcc3e50ccce07206ad4c7704bd77eb7f03c14df0bd54e836cb782b86cb97f202193'
            '690b957e3d98bb1352213df175713c6d36e51a5a10de2a259bf5ed1d011939903ed9143058167551155d86b641784f9e3c80fa030d8a3c1e6ed399d90f2cf24c'
            '1cdaacc893f89e4db0cc8583296efcdea76daf1136b2f8f05918fd393f2e3db914a9dde1d8043b5c3eceec2b3a3ebbe4cf3faea58584ff8708fd503a151897e3'
            'cee10c85eb631703b46c52283bb64b64f857d10ff475206b4fdaf4fa1bdd8a723919fb632803695e0a7d50eae622cc15396c39bccd673faa26232f83c6f2524b'
            '274135b4f689bf03a2d6e2df7451e9c76889bbfd9fb67d515e6aab8112942bb7e7990c0a450a33cd0ad5297671663d8f8d6a6b5ba54f2edd74d576f45fcef14c'
            '0f02392b736664ef6d52f449f1cea4b23ec55003e14bdf1ee3194eb6fb8d1e9ee9175083f0e609ccd67145c085e5f46e37032e27b0a8fd7e28c656c3beda8eea'
            '7ff0deebf4c7350f3d142ec8aa4e34a6e608b896bb3b8771e3a61405e0b35a5fa1b1b741ce6cefb8e4c81b3935802ab13775a992c7e2db4e410563dbc34d03b4'
            '1f674eff2a45c6f1b5f8c2e47751158134d7d2c15e8a26f657dfd9810716aaf2772bf6e537c23be261a4de8720d46092726c9b03486ae9a678b3c6093671ece3'
            '0cfa1a6233c9ce3a2aa671a0560eb24b5000ecfdcd7840b928799bdd7507ed3a2e53dd51a4b9f0ef19f31f3b1cfb877b813f68a2f6d4d377e6a395c01d5507ed'
            '1d06289cb0ab528c33c0614b989cc0ae756614db1eaa9007127acba08fba4a77a04e2aa8bda850c47c460c5e1914891fa808e94571061408403769d7da568f3b'
            '2b94c77b167d5d3f9f00d86c7f691fae84642170c998de1b5afee065fe3c5133b5ff3213ac15d4b3333deff8b2d5003ca0f5bd9270109823e7e593ee76b1ff2c'
            'd956aedcd61de3c31dca4121e90a87ab9c42911a73f0f7fb755c53a6d9dcb72c43605664afaf95516b24f1bedff1ee1d92ce1f0031c79c9d7dad97488ad3a59e'
            'f750de8ed4eb18f8d969f57edcfaeb2d1cd25b1e4f1da39177bbd912e77727f7d3fb570ef4e6831da608a320caf82205a3d0e313f8fd3129f001e1bb28a3b157'
            '1705b62fbcee9e6f8cfff6f5e3deb104e8dbed6a891ec853c6f6a50183e82b7dd4c1829350496a37ad1cd63d8d5d7fbfdca727912dda283e6516f3601cc80cf3'
            '139f28b28b7a6230e0fa18c7301a81fa5eacbe8b1ba5b662cfe28fbf612c9f66a6b73dc87ab4a0cf59478576f947072f4fce0c064d88bf7489d66321b35855b9'
            'e631cfd658f47280b5716ad91f8247bf11282692ed962813d317c2c39113a6285669befe8cf6f6e9d54c288da09a5cdb45e1a9ae2c5ac701e7be8726e747203f'
            '68a4bf089e9883b0596a6a72f027930d73e0e475d2ac2f8e9b95136be243f47843011e7705ef5d78b4b8ebd10b2ea0896fac14a8232997ab22bb1943f88d0943'
            'b5e24b17266754a3944d3c21b075483fb2a2e8fa98204b039331bed22550bd3120f8b230c26457583cece06033817db73fd678da186b4396cfce0a8197551496'
            '3d043bdd85420788b2243621dbb3b736402a348bf714faa9f978c47cbd6b14b745a4bd47387e0d5b6141eebd087dbb40f5f96788df1aadf06536ce3d3cba1f05'
            '81cd4ccaf86e6fc0f264756aba326b2db20e1b1f713235a542b3b27699212f5025467ccf1ab5ceb531812d83e449788757e33f6c5270c4f41c5572573fc7922f'
            '02ce42a82b40c28a7f92677200af19846ebc670210993cbac4af5caa26706f25f60105400ecaf7921d452548efd9bca7dc4053835cef0a9f32dd5833deeb6f2f'
            '3b17e991d7ba8364f2355190da1f3e09694f6c2ce445f23c5b8028f4de0874aa242c5c89cc9971a400a573d450597fe637a4909008cfc0a6485e53b7d3eef21c'
            '1d4b299d8f1482298e325fae6f0bb9480ffc8c7536a61c864dbbf947bc732321f6a12b26f476fa47dbbea60a669d89ab6614f7246211e64d5987649cb31db1ea'
            '6ab275fe7578c94374dbfc9e64fdf7dfded750f833f6769e9d5762e4b5307e3e264034135c65ab7e275e74b20ff87c3e208903125259e0f2d2f7f97ff3748d93'
            'f4b0b3ee2151fbfd12d15695a1561e5e65af364c47a7c28a29a5a217829b96f5a6e13a1c2a6650c086bcd7bf765399bf678d86f4378711067b06ace2e81b16fd'
            'b6a18431a5a1e1b98f99d3937a1caea92b0fdd46e9a196537cdd207e74a8dd9175d122ba7533b301af569a67218f9e401a52bfdb7a06a34628e1818db0af548c'
            '2d554f42400253e60f31d41998d43182a03a97f71c65a80c3b1c8561bcfef375b95eab803588fea398e2fd6432b8a963ac113990b2f2c852a5003ffc33e37931'
            'f1c6b8889870d520c987d8fc8f91eccd5a3f79ca9cb52beeebdb88485b7bb9f953e36c6bf52cc5c71da01550521765252a5fdbabcbf6ce9765be030bee9e534b'
            '57ac66b362bc5bc0d98f4eabd19829884132fb1cd40557732b8a50ad0497f38c7139dea9bdeeb31d98b42f6b92d72a483f39d6c411438c8206a1946cdf2c38f3'
            'ee10c5d5c3d90549ad71c5fc75912fbef97e188d47b0a85b9e5c2af7d4d3ca07c19fc21fe9c01db3a0e410fcf086fbd01b7ad15054c7f460e72ae03e5b3160fe')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
