pkgname=thunderbird-i18n
pkgver=60.3.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('c13719e8c97dacd35c1f8cc7ecb73de162eb1a17d5c3bae7e501f3675554bbbe0a6a08858445ad355d3ce6522997531092d5e516c971e6db366d2d00ae9d1906'
            '6502fb9e321420bc72d77fda5724e923b4dba80d4522c45985f4447f67862e991429c9c8e47b38e997cd7a729504d40c2eb5d3d50bca07d833c75e80103ee090'
            'e204a26bc828e4ee460e39cd48ec815db127436c640457cdeae870856e417937f5bb2007a4cc7eb9e7092c5d1f43d9551105eae28d539dcadb16ba089cd614c3'
            '2a906ab28ef4e24a9a64f7a58f290178d89fc203dd213ea5a3fcaab90b6e5c30c5af063c9e7cfcf040f56c29ddb5f4bf9c35d4d8d92d1e3af69dc83c8a8b0d29'
            'f65729612c4367d5c0590dd32ff0bd674ab1bf9edaaf771bd7900d322fd613f297b35332bba8fd3c95b54692ec8d55972fa68f6e97f04363214d2a701f14a4f1'
            'f68717f14b2767fdd302bbe2fff2a17d3d0ea23068b983a9d6052ef1dfe7c6169643bca1356eb9574c0eec7f6a34caee8666e588b1a966f91e26dfb24782549d'
            'c6aec1177a6a772b4d43c15df5ed0b2504c639cd5c66166af372d1d64b1936dc7e174f800dc28a6ad402e409e03e878354e63accd1b8732b8d25e394ffc7f814'
            '58a6431d2b160645021e06094cadb8ae26bddc306c0848acde6a7031bc085bb6b3f17d4091d4dad4f5cf40ea61179a331949550ab8747650cd2f20e1207050b7'
            '1879d76a7945cd92172e798913dd05960a3b14994776b004e6c517b3af4b6bfcf0af0808a381b0e9dc159ad15c25f423df3fa8fc32f1c334aaf57b351590e56c'
            '952313c86d5c8254665ba6e674c127d5d3199ae783df38ae8ef1d6cb9e1c05b87953137fed6c03eec77b8ebb01d4d74be14f1ceef610613a320bf52cf7222d56'
            '6957139a897cfb05d93e93ec5003cdf205342e7d001bbf1fe5ac4cd7e32a668d943ab0cb14b49072eb6c4f6654c4f7d28e102afc540ff1e5a4b9119ffeb77162'
            'e4ce8f8fba2b465318b1df1c29b9008135defd418ec5b7d3a912f7cac28c84b7e28e932419c247208705d390f5a9d07c6be72e12e84ec0ba7f742e2277a0121e'
            'bd5034234f937f8e1250e4f5a37aa8bd50a9b0db6afd0b5c6e519dab75586ed88489eb63a0d8e7acd52beaf5167887de8e56a0b88b66fbcad22a40c760f81212'
            '41773c402abf5ec5892ba4792313d2a454d68f5dac96e387b1e6dc09aff00d79dd56c16b4729ca642e0e63d33fe5b829214bccf3e98a22749205473adcb616ab'
            '8c58093c886e78c1d108eda630e40b638e4bb9c18ebeae5ec7d2c44be1bdf9f4e2448198df69512203872659d452d6e4eba6a218b8e08d1235a472e227652f1f'
            '02a148e4d19ccf3eb491be8437a86e903006f02ef8c45658bf7bcfff24c43ce7e75af2bdc8cef4f8892e00eb87dd437c9ab857fb3c85d71845a6d10dcbd04657'
            'b9edb8fac8e10c3d9cf5b501b2ff6aa463b13688e8f964cbae18f0070d773a7ff9f1f474de216231422c148ab06b4a1a604c95829623b071e228c84beaa0a1ae'
            '789fa9a262f39756ef976457b2cf51300a3a0e2c0468a15bd828a993ee30d4a17a1c0b9fde8083e2495af47fcabeea55f33cd5f750e03331306bfb502cd53952'
            '0ef425feaa8dfe68f19914c300145dd1019b5c5df990735662e3dfa3cbe9926a9fcf614d6b2650d1291da1f742dbf70d5db6a1e16e8e032b0be11aca7c3f3d03'
            '7550822d3cc0b782ffc5f2789cb503d6fe7e09fc1e14460711e2d456642d60101ca31f46807f3af84b16968d58c4592d477562c266d973f46bd65fd6f0512990'
            '64100aed3fdd37f763eb8fab0202d884f03016184ef2b8282b79c1bf1dd0c4da10b8d1e9c5e0fbdf8be6b5109fb9567ffabb8968cb68061702b0479565220a15'
            '6931d6a87d97c3dbc1a7db5bf6df4f4821e4086f7398b316e80b4f1a6bd86f54ee996e26f76f005ca8cc42d78505c35b641413126a2931e056f6935de9dba3b3'
            'fd1e7dd510831880362b5a9828410a461c21d8050e4feffbc0f66f2aa179999147851377da17e89fb0b8723dab5e90b39713551f879a8aa1893a6fd03c9c5015'
            'e6fe3aa0fad810433cae036b348379e34f4156bf3cf86b0d7a4beb1c5c9e7de41d882eeefdc9de85e48d5341d50e7ff308a3e944079c3098f07977f9dee6ca25'
            'a452f657666dc61dd93a6fa03f3b881b16380351894d95b61133c6927d96dca05d302118772ce6b98f0726d7ea3bffcc210365f31b49b4c99bd47c3a5abd7f6e'
            '90cca051a606b346c6eb3059497328884c79f41ac1bb066e20d09149a2af2a68ca502042c59f1c9a36eaaf421ce4732b668906305f9a4b79c761f5cebbff5469'
            '9459a84fcd6fa08b5baef244121060a18128b5d2fbc397b773277a754fffbd65843c5015da6d784414a9f8c11c01cac71091d583a40bc7ad1c2e77a0db8078ed'
            'f2e23b8ffe26d6366f4b68ad11a8d3cd6c3708b9368e3216318386ad0c74432bdff0207e780495c16301484db193b4bcb130933de559cd33dc01047da2087220'
            '2a183e91f1f4fc71320792c8b505b07369b336af209a8560a537ec968b19a311d381238b66b67b5ef4a454e38a54bf6db30add7b1ebeeb967766621e205bc21e'
            'f2b37a2f452e77bef00d15f4acb6bf297fb5af1f667378ea778b2a0922e802eef875db37702d548cfad2b78fcc6b6c878838051abcf8eec0738fecb0859949bf'
            '0c8aac6cbc992d4e1e81d40a7bc8799e2fcacae423ad33f68e97970ccf8f0f7e713640428f02981ada01f61ae7ebee0d1eea609d3e23ddf0711252e30616b667'
            '680451f1115284bbc7a2e90cbf12205d765a5d9765a000dae5ac22b574df35e883b5654c6786e675b14e23a5f4f45618ab1302af469901e5cdf78975b4f7fa48'
            '9e9a8c1a26559956f0cb2e09c7aca4a0b61e2f205bb82e362a5674e432e5a18ae07c062ce2ffd054120140e8e5abb06e5b5126bc794a3915dd51434b35d883d7'
            '4d5054e72df76de28c449d47bad21ec34f2de556c5c02943eac8d8820d0c8a7b3dab6440c6f9ff46fbde2af4ed556f5bbbfc032589104d6a56ba2121cf6d27fc'
            'b96642b9449601c2a03a4fa82b9f35254319c272ecb4a0e733f30fc7510e297b19bdc64ae09365b6e7f919502dd7261ce39b65d0dfc76988fac005a2b9634682'
            'd9bbb4aec2778c82cbadcbdbdd3b87317fb8913cce4788afe110273142f731ba554df7439a0bfd44077fe972911ef09f9c4246af0527286193f5f9462428eab7'
            '184c836c8e9f57a11ca978b0cbb28b4c79475c83e400677a4950f62901a6ebba17be6a8eb14489db22412cbdd421ca653316e2c40b3b58bbbad6e734928d1c64'
            'c7bfe5108c400afd8cebbed0965cfa004c9ffd241d126f2b1924dc537515ef861ce544688fce9000e1b81bdb09dc607f22b2e8384641a6ec86719f781952f9b6'
            '653287ac43b455fd1b9cce294ac99c54e014b7ca679d452b1daf06e8e04a97d09ca8809a4a32014b1c75fbcbce53f9c3b2909975da276381f29a5d3eaf88b809'
            '316e3a868a51a10bf0cc886d4138522a49765180968d480d5bf567b0ac0ad56df9be1575ebdd53ae0bf218dcdccd3da6d8c2f97358de4156daf74a9a07c25a55'
            '27c1cd2849bb17f282ad3140a3edd6cb965254b3fa9bd4131bfec3525df29cf1a44505ec3c4fbc4608e42d17cdaa5ffec08631d272d828cf16d611f4e13c812f'
            'ce4f359fd51f7f4b81ea1b6f692e1e075f1008e3a33339870da6af10eb4a317db30b4152c647e1a259a61325ae070e2925e3dbc0373a1bb05b6cb25b3e5a0a5e'
            '74ea7a46cd8d861e41672b11fbc352c9c2ce20d5f115a07612e404c00dd59c941de6059acd4a5dbc8a2c78a6be8627b08aaf9548df51fb61c7d605c36664c44c'
            'a5b4acafcc4ba68067638bb8e7370ea67fe263bf18607dac9b3d99d2f23356d1e3c234526879c8453bab63d5afb8beab63844e55b127c59890b9d615195218fa'
            'c66bb43af331fe75e4afdb7608d3ce31b2336b6547d8628108e13ccd446804a8149938ccc8e9522ecdc6da43c46d63269192967955561080f00b51a22d0c062a'
            'c84f726f70e473a2ba1c30383893ed1be359e6e05479bdd11bde005fd4774a7de42193158d87bf92dc9fac29071ff81b79d6498577a148ae9bf373a80ca1d76f'
            'fb6f327cb6c8eadd57337ba349598f77292a236ce8c1f3073a0b56fa6f516c25abce964f5be08eb98b0a6a46662886b9f4199cdf6cf2ad8cb07c473aa0ff1a33'
            '8aadba8b9ec38c52553806751aa00e73778a65580a5bd2dec1d78e3d1536709a1ee54415570332677da9318d52933035531eac1a7343fe1702732bf0ba105321'
            'eb1c5d96631322e5a33393384807aa26736710c82e1df49a280311f613dacf9d7f3f569e4850f1cffafad6c239de193737a986f186a1d725b4423c9e4b7eb6e6'
            'bb29e1ee8eeef20906a204b2984330f259494017b5516c117de30dbb723d23727662770562005c488bd9ceeff9e1115d5f433e2cc7cad9c9eb3549ef9e9beae1'
            '9d76a86052e0ce1d2888c86175df7ef3c9024c683aba2a7016f7af70e3dfb1b3a57b85ce88b864baab49e7c2edb20ed7a670b2dc4cfdd341689abb4fe4acde37'
            'd3e703e455975fb680e3dcea962dcc02e169cd6dfa399cc7de726cd22a01dde17c4e20ccb64dc554fd8c4399a0cca35f6e6252c01d322de23a641439954166f8'
            '374b55cf019b48aac56ac98458428ad036754706766364e72c2702fc413fe0065d5223020bbee0f0dee516b600c74e16ce1996b46d53fa08004ce844ee71df2f'
            'a6d4787114bde2dc42bb76c5a4a39023e098b401029231c28e3eb7fa2554ed4a8d83bfbb9a40643b7e1da2f8d105fe59329a28e2d4736a173910ca681d669daf'
            'b4377e8096a1ebd73e16d0a9c7ec7447f8b0e1988f361fb07193cd995b9e249de6fa288f669fa5f330428043342dae1b52b02a0ab2a1e02d17acd77a6f1d8e71')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
