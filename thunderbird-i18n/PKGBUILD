pkgname=thunderbird-i18n
pkgver=60.3.2
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('71d4b681bf5ae393ec8e3cfea5c53b53000a525cd6a5ddd65f17399437b159c33c887c257e2daa918de966e1182810be5d62604b5761a4fe6bc5e661f9292186'
            '7be8efce56c23687f705c00a3327c3eb3b0c3dfc86d88be3f192e6e7ebc1e77fb44d104c19948eb8ea9a56972416d5d8fc64dcb8539e656cd05794a183087338'
            '12b4b10042e065583c9022c095babc669a519fd99c1f406e5bb8db9af8e08e44cfe4d2ee8a22e7c98cc25e9b99d157767fa79cd4996e42efea84b7a98f0b7457'
            '091f6f816f5cdc067d030b79f66b7aa282db11146d19074df7a9533ad1dea8331e2c810313286e5efc919c9e96209a3633539f6d807820b62923fa0b3e4c423d'
            '5d8d494d1e09c03f626d45e5ed725daa487186661f1343f3fce5d4be2ae204db7eb0989cd135b504275671a9c74ea26ba25e0ccabf4b4018bb6dc4f00cbbc0e2'
            'e767cb6ad8ec23762a6206678d2b12608a9fd5e0a0da8e490cd2d85787d5239db5eb961b99405cdff1f5f9c41e7ac330a6f34fd59b14b8e6c8edfa1a718dbbce'
            '5087d275f2eb5b400a2c9356ec5fc0b322a599a64bbe3ccdff4c8da44bfa2a4b34667c991e1c9d77c8fdd2e3f3d028b271f5b6d7d07d09415d448a591e4a2cd7'
            'a17abfb8dcc03efbe0f69b62ce017ea33fc775fe93d44779ff9e46df41c3370276ee019a43798c96ceda07a870553345667d770fb1fb1a73337624959f16580b'
            '75e19b378875ac281c1397fac6e96a4f2d581331fa0da141eb2da09b360a2dd4a7128f94398a95aed5321d7dfc58fa58c0151a3901f4d91ec699d3aae433e287'
            '2c32987690ec71d33e910ec248075fe1f3c32a4b372133e53d29753a7e1aa54b27fbb1ca266c05c613e6ff28de1ddee2e8572ec58916ce45a0b9ad8f5e1e5320'
            '80cdfe8433a3d74ead1de28896a8bffff5eccc61d522fe6dd4353232d10fa2f4fad0aa1c10dfd01b4e500bba40e013ca5dd6ba1f657acead96f3dd8fb3a43565'
            'f7b625321662ef801f1a9038f5606b5ddd83725a6479b2abe87bd8fd648af307323fca0d1eb46d4cbd4fac961e2143138de4f364b6f459150b9410c92bbe3db0'
            'f366364bab49eb4f0871ddcc2cedf9a7dfef9330cc795ed95422cfe7903322e8f3261c7764c009ea68badb555a9fa37979308eee707df783dd4fd1c9f91cfb8c'
            '5e060080469f7a14ce14cbed2c206dc82c4af2bb3bfef441735af14eb22a1f962a51fc2d475c0a75f16b5057dbe8f2db3cde2bd9f280e2c1ba7763f7c35f1d3f'
            '84d62b60f0800869f89e2724b29998194f6b081d56b1e5eed49a895e8514c35439763d59d94914abd7acf80d97cb2b17658bac923dd1a710395310e30cb450f2'
            '05bdd55dba40fe3fe64dbc6109454c3984ad4803b310537ed0c730a238fe05f897c062a8a829f22c7272ee1bfc2dde6b2557baaa03fd68384cd670ca548114ff'
            '8e47d81b46dbcc1a26ffff8c845f269d3dadc0b4ace8c775d79d63f663f1a767d0640e4ef7caf505c6b163bcb080e514311bbabf128efc2e12e4cf587799233a'
            '2151b0d2dcf932bbdfb9ea25cb88e2666c4b3ee1f52152f33f5097b505a28349807d7e5bf8b1d627bf43c5de5874f0ab18e934a4b74c2d92602be6fe57d5c999'
            '808f3269b9e4ce12405cf97b778d7e24a82e22c0a32aaf15e0431927d3ed721aa935909b1e17311d9921762b5a0a78f4aa3c8a738dfc9efebebb0df6703145d9'
            '8b1defb3fc6d96b1dcaf5f838306f1a1dc4cc4a88b79e5b6e2cd1402e52b03167078c915904f1231f0fa50eb4c18e6d1c70f7949a98e5684228aeed6a8df89dd'
            '9f1224dfc7e9b25d27be56379ed66dee6a70c121a62581834ffa706990c2a224aa47cb712d29e7c5c348a7f8faa8a35428df775bcd47e84b3d9b7e814faf8d98'
            'd28380844581d9db813eb9269cd0efc00c0aee13adb3926c3d6c278abc78c0dd8e647bec8dbc32ad810b2d5dbd75d680a3365e16a883b5b8f2789f7d19a50365'
            '69376abe26158a6c8ffcfd3bd8a00e5dacaebee7d44f9605d174da5bb70663a326658c48a02e136612d3a66ebce3a98279625e8f1bd3fa204996a97ffbad97d0'
            '109d4933e8f4ffb97b797bd7374d72930f3adf86144d43ac32f824a2282275afe735b4865ff1c8dd0af7214dbab99073d16fc761668f97eab32ccb15039cf3d0'
            '494f08a2d92aa1a70db2e01134294d3205ed383762b3b714c84ab3f3fc3fc6c4a01e4d0fcd847e5fa3f4ca6dcca0015f0b8846d66cb03b3f82b1a7890446398c'
            'b5b1881485807954c5bbece6abe199e02fb1a1ac088195842b1a413f5fa8cdc5105887027f7a066707238592761a639a4a3f7dcb120402008e9a8db99d2b8823'
            'e869284a69b0d0e2aed193eab9c323b52d5af1d7473e632f656df250c6ab34603a214227ada30fd225987a089780d157562c7e612ca77378388ee0b1a5695137'
            'fac2e86a8676f7e7c420cf953c7dcddca864cb52f4671b8b8be3590f68d698705efa8e3dca483d96608be1f9d48fc241b3098329d9bb7d73f9878517d2be05cb'
            '04f475dfa715a1355feedd55dc100e9fe4d620f6190a8b0636037202814ab2c6788ed6bb7a5435aa346cb1f137f227589074d1254a8ae425eb4c0da95436a12e'
            'a3a72226db0ac53d756c4a69b95d277a53328fa7ec70d445c63c915581344e881ba12278a5bb1d94d8eb04284eec3e1c45de1b96c321b66d1c3897794594721b'
            '5343c4f35182fd39eae9241c11006085da32a794bc4f489c2ce977186b7370c77cab683ee55b47372c50675a45364b11221540be820f126cfaeb873efd836227'
            '24829d53935bd2ead5091323eba01d523ee685b32d5d58d8cdcedaa402d271e0e0adaa5d50baa450810a02b176bfa476b741d6f2a8d8d6f448b7163f4d234357'
            '287c64fa5ff3a04270cbcf7253398a0c0dcbc97cc5f8e3bd6c7e3b2748272e5241df859d91bc53e980126975e3619cab734c238662e8b97bd2a2c3ac726c66b7'
            '8468a69bef6b1033d31757271f1e1dfb2260a4a012d0c078271fdcc5aea0d298147ab0ba3119b918e20b541c90697b7631e02ad041cfb6973f2fbfd8fdfdd549'
            '509fd6763fee0373793053c986cd5e0512f73e3eeae75825448dcf24edae6dce6b2c98744aa72e5ce5259a21c471d684d4e3c253d3a723b9fd895e7e59e7f8a7'
            'd0d6b70b3a770c55479392b1e15704bec671d4513a99cb1f5675186dd30e94915b022d9788fd30ce7ce3cc95b4e51df2820b410db09d85cd72f0bc14705c1342'
            '0955d6040dd47c90da31f2254d3a9ebece74269c9fa8bc762672f7a8d4f5a6f188161aaa72c27dd648e49237d5aa48542c83c94e03cddc05e2fb866d2ed1bf93'
            'e7f9a01f47eb437da95245c099f8c555d22d32f46396b70e00146fce3742a085191b2b5d0b1961524c6d1014af1b764387e66a5ff9f06c1a9b3b713003b49318'
            '9399f43327d9c145569ac6d7afd67cb52b155e8c4071cfe880c818d2e71ea741e080ac6e26f94f274f9c4e20c5582c68b3f7f79d5f614801f8e3c399846f96d3'
            'f4bce0452bc896b7c2387b7478c8e8df850261f169c45fe711e61284eabc3bded25de2137afaa1a10e55f4370ce2d458650695e702a8170852d101428000c562'
            '12e8ec6cebd7e50fffb793212fba7c839240ae50416c0bdafc3124f4645bc80a5c37c54fddea8ca61058388bd319d1cb7618d7cbedc9652e7a1f24b56f3e3628'
            '1a0c2e37964bdeeed511e93125f51c8604e9efb69ea32e915b9d9689f912ab2eef91ca1e9d48586afe0e51e806685001c4102f59d4405c60208c3700b5a74f49'
            '8fe4f390959c313bf334a6066c31ae7fb6327e53e4a9ce45f3729cf94e222d157174244fe2d8a0c9ba1846219cab81edcc6cb9e24b426f88f078c57582163afa'
            'fab24f877a3a175b7bdb999c72c541b1af75744691f7768083a76f0129b0085e7ec5939b291a86131b78191fa8a90b4e357b62e074dd30299bd045ff634e827c'
            '8eff3ed4267d259f59b68d021835061439b2bf4477566c90827b230fb4f7c93c8357c9c95f8977f29ceecf5ae177674508c4551f02716c44e3475440855eee28'
            '8ebe8b2df53a35330fb26ce2dc48eb69742e9eb79964804b3801d9fdeb3512263213c6bb34d523f59ff509c14b6a2e4ccd27f02efb504935d461c118a0c87707'
            '8f633efcb9a426f94b0ccafae17c927883e6578f612f5d771a84a7ebbbbfc150d22ff0994d7a7c35af92b41a70d4320d38ceffd98e13c64e4eaa1d042667f981'
            '7d5adc7de3bb84291271cf2b051f79827866c5c8f58960c1693a9fecbf7584eb0f7f79486285abd8525fe61627e437de1b0e928672dac93662bde038480c9bed'
            '2e88a38422543871e642322eda8f180df798a18bf39c656737a24775fd23f3e5532fa461c0a791dc4d7f7ad7b9b010a993257eaffacc6b84b4ffeaa291838b76'
            '92a5ffc8149bc22f23658460ea4d9536a8962299a10999f9c6600cd345c91d198e8456670077828f559ab46d75a39882cf85dc0ba1cd4531b94dcbae48a64e7e'
            'd0e741df32a005ebb80b28d63dd99dd8f2f6e7b53fa46b4942457f470b486b84bf3a72aaf2ba68dd4a91a607592bb937e27ac8a68f4fc3246dc60fd2af12a652'
            'daf2176dc5630793d49ec795f87e55b3829a43598525973855567d86d2935b23495f54a03e1acb0cb1599d3d99fb96dc22a8b94d915307af672f185d1ccb3fd5'
            '40284c06c6a267f63d69048d79889ace94d40a4060c4230fdf2615a02c9ccf970942078ac0e228540972b212096e866c7f9751bec499d7d0bd862d2538d2e61d'
            '7e45baa021b3f3d557dbc746110e59ff29beceb918268bfbdb3e32c8d837b583fca90b20e1c01f00a0fbba94437c4d986281765cef81f1b8b034ac70bb4fbb3d'
            '9c2a0977b476005a0377788fd8cc2d1121aee74c9b474ee38cd22ee9495fb848c4ccd0f063f8523bf58edfe6ee5f5c1240c11d1f2a59e654d538db9295cc7b8e')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
