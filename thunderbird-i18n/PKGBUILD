pkgname=thunderbird-i18n
pkgver=31.4.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
md5sums=('27c7626a69ff7ea90a9b7a8e82a1de36'
         '0363f0cab457c981602352c6b73a681e'
         '768c13127f928ce3cc0c1a2bfd7b95ef'
         '705846dbae46d087a53cabfff74085ce'
         '799531bf0bc0587ea538f5e162387fb3'
         '9aca081058e8804a578af39829de5317'
         '41e18f1797e81fb6da6bc63cc9220fa6'
         '4e85bb3f8163c517dc28abb909fc3cc6'
         'e5302a0b423b74737ab448f4033bf993'
         'e96b2948eb8ee33e98bf2e6277182c4e'
         'd3d575d143dfa3a88609dba34e6f1bd7'
         'd5cfcd2ff1935b23c7e3dbf57d29e0a4'
         '6d27cacc9c2b3b1e43dccb2238db877f'
         '12bd72b4a60a32e26ab94095c6af859d'
         '496c479de8cbaea05b03b7f63b7df00b'
         'ad4091033f01ab198ed01dd8e58a596c'
         'c0a8dfba9f435f39c78eb9e9814e2176'
         '0fe8f39076f89f34fa2fc3d3b804fc6d'
         'f4e2c3a278332de4541ebb01cd7568b2'
         '20aef89f1c93f88abe96ee6eee65d121'
         'b3397b5d98425bb8e3f0f8c71fb5c23e'
         '938be42cda6cbfbc4e690ea66963fc9b'
         '1975a62a32cac2e8451088900f31949d'
         'ea5745445c8e6c7e688f7d0be26250bb'
         '2486835658b9d53283959a4b4e7c3dc5'
         '29def2f8423d44b7daa27dc4a819b311'
         '047228d3d615015db1aab95cd26a67d8'
         'ab043fd1072977b4b0c2160178cd7b89'
         '327c51c08854c10130d6d658865b3a2a'
         '9b822d95db7409926a5818b9d91a7859'
         'f19d28e4238d413ebf3adad6d6b786ae'
         'fefbc5cab37e41a21a3c6ac91a1fa385'
         '4bef88400481be5b91f206497c3632d6'
         '1ab030266c08e83ca03ae2e21d382871'
         'bf639b2d4ff68809e683ab0c5f2b2cf1'
         '6305df73af210f230dc2066c0e3a0990'
         '3a2debf6f195f8e0ba47af5a6171180c'
         '50425a2bd6f229ec1fcc4e4b1564c345'
         'a535cd38f5bff7808152d170d3c7a519'
         '773768a1da4859e35f62c1cc8ea75f90'
         'e1029ba16d764a78b3d35d8c2d125417'
         'fb5b319c1cd2452c9f09b0bc379ad0e2'
         'd5b8b7133643ac56ac8bc75f676fcfe6'
         'd3c4987f176bae757f84b4e901f0c553'
         '98721c9b6707a9090c2ed76ba7e98569'
         '8b43c1379965a96570049332504ad9d3'
         '9049229c0c83f83d992f210bf8de832f'
         '882c911173e28245e29633de6549fb41'
         'de960ad16dd71627742a796fa65401a4'
         'a4faf1ff1bc682a1f488a6476d085eb6'
         '71eda98a1ca835fe1d503804d6568f07'
         '5a51d7ed98a85f0649954dcd25629ea6'
         '555c52ce0ae0c980af707b97e6dcb22e'
         '569e7340d494bc93e021c980258506d6'
         '2ef2a18818fe7e98393876fa98c87240')


pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
