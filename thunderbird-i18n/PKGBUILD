pkgname=thunderbird-i18n
pkgver=45.5.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('f8df526fc642c1c817472dd266b29b2fab92746033ea3199e790977244fb3f94a259c40a94c7e0e61d4ee7df5146b00ff29391e99d82d64313b03aac1bb4fd05'
            '4eae47e55114d2edbe9282be518f22abffe07a96b215234b2403236b5d0813d0dd17a3a410450cd97ffe4ff9b97a1923aa39ad75a413a00d8c7eeb4f74cbba79'
            '3a015aedd7013fb1623592a37a578d2423fcde7aaa0e9fb0b91cace6512459473a61707f26d6686a238b5be5f25c1a53e0109f6898a44f7a3e2c6044195f51ff'
            '3931471a7bf9cf013aeb1ea743b50d11139424d3044bcfff40477ee21c3b9daf727b82bcc2bb0f1c2dcd44bdd92a2bc5ffb992def72f80771bf09d3a81e31e3e'
            'f6a74b271f88c9e00e778927796d3c9fc0cabac3013bef7633c2d26d674a9ec40a58ab9ee89ea0f118ce6e092f75350e4aedec756df4fb3feff1d779bcd72fb9'
            '142250bfdf86460f6ad27cb04bb685c96e83dff002a29610f02022464951058b23ae1836befcd99af8b7ab0ddf37e7d1e771379d11856e0c32c9671ea9f513df'
            '26ca36792d3edd62d729a61718b7a01d53bd53ca66da1088cf9940a15b00e6a820035254c70b8ceab896230cbd119925493c419d9b22da439f1d18b123a3b661'
            'bcf898169cb6385711da24ee79b44e870e1c2aec9f948ba108c91ac11b8a8a6b19ecdf4cb4e3757a7e441844e24e4a5d4097f010112baf2c5b0417a1a9011e9f'
            'e3549c37cd7fbf34fc4be12a96360b92e08d4a33715cc616b14e646f064b5bffd2f354dad31e89baffbf11592024fad59334c35293dcb6039373e6cf55d62cc2'
            '65646130c17539d8a8231222d6e6cef57cc9af48d72bb965cff3c3bfea3460ac827cfaf9725342b9655680a535648e8562d6011bfced00eb475dafe8ebc111b2'
            '5cc3518cadd49a8eaa42f35f33cc5489f8039288ecaa2630ef46cd37f44065231e02c5f56f3b401542547702b4a48f1fb7916e99b17c489565d603d7eb1cff97'
            '40aa6bce8eba16108cba5a5cd0b92f7108b07023fa9ea7d541c3adda54ca781f78db9deea9877148e52412977dcd203f34e3310a2307f8cc22c02b1dbe9685ed'
            '032e3fada6f7910d31fecf4812c35a75562e97a951f87c4872de165cfab934a01933287b87c59979ee9a53f094bdaec452f81eec1495b913a237bf801c905310'
            '4f8273ecea3d6954c14d3346a0728a3356a1d9369528f6dff4ee062f0b314eafbf52d2653e3b582d0f60c066839a2eadd6d61ae4d41c5cd17cb5d122703a8c91'
            '8bf20a703424dc7645a29d9ccd43be170b9e47fd0e092d0eac63583f16038528461fc747a3613ff0651dd32cb625a11eb1fc5c8d0c4d40ffd3104597a373db60'
            '765732421d35c06b160a4db140649160cd0398e2ade81fcfbb98b3a320825ec74ff439fbb91bb08ce8754a155379aac8c71f7207013dd10fa9a7f63e78522fc5'
            'f1520d48cb9fb9ecf727d036454d950d642afa1562f623a76fce26123600e068a28bfef0ae72093fd361da1ff6cfb1a773955588cea698ab7b07b6c421231fc8'
            '70d6c56743bb0f6778312e26151711dbf021ae515a1ae593faf1fdf03b29615d862e64de80ce4a59a1bffc6b6a518d54858e5e5fc58b8efd3f8fdab899c88917'
            '246bbad851e72e5c3e77b10f5793a9483971ccb20cadce13b02458f491cfc5a5474435242c3b6ed3c47ff5d99e056dc65b728a1da0e7a49da1177690a38ed9fc'
            'ad0778fd5b32a57dea3803daa98cd2dd2c89ed7fa264d503da4216188ecbf7ab049a87c4e6b5f5b7f6f3af3e03d92be8e5e9a790a414ab7b27fb308fb7c0fc36'
            '137a5210c90c45a6747c6d40df84d8cf0662125277814e347db349317bbb3ef78c767a8d37be6aa8abd291c88e75c45e39e8958823618efc2516b47d47be5f19'
            '271b1ea9486b7abb531e099d97f6644019a74fff0ffb6a829beb2a85f162641bb0d25024d40f3d5ebf0fc84d12c0541d0a6eb4a69c663101a352005d6a1159c3'
            'f0e8c6eb97a5562b3596ffae3e459513fcbdded3837a675e1f88ac95180f639f971c97825401b1cb20650bead1b5df6fb0b535c14f810df29b5513bbd659da93'
            'b47f3e8ebf8c9a5af684fb4b5345855e2423d7024de956b8e20f619f66410cc94ebb2ac846499be13786588910ee50490feff8d62a8cecf386d43735f7e1f572'
            '696fbe3d53a9febe7171ab11c2b1336a433d59676fa87c0c2ba5acaf504c961bff4180e06cc108c420555bb9ce09d127c09eecc9b76bbc74e9badfc2caa6adb5'
            'cc9a5a048b54deab38e418ea03c451a17dac425e7b922dfc2ddb13e241b3f4bb08429d214a95167f823f7d7b45b85abbf932caa9bee080cf1dc3352affd7a3a4'
            '832fe1826d715fa398bb5bfec5ace5cca7bc598d66883dfbf6ca8a527b92445388a65edd6d81707a59496efd35ebe168e612c8cddc0cfd59dae9fa105a8a535c'
            '8021acdbe851f1ab5cb0d0207047c9e211d0c904df71b746c7ecf51ea3a9599e8e7017c70303abe9e4044313789a5f987821073d6ce39d2e3ae94d0dd85d686b'
            'efc7535fc755d40b13a3394f7696567f54c712ba1cf2f27f50013c64f627d4e282d3d58998cd57513c30db517810c3480c06639ecb8f944435bbfe3f129db275'
            'c454bfd1545b37fb22c04724a95633803f3ef93e2ffb603c0c76c47d4aaefb5b5cae30fd88ccab8ecd42f073a4f70078e4b7f1893684d2dbb5b0eea05fc192b2'
            'b7b3d7d68a8bc7ca045896723cfb20d1bf560cde9f9a78928eabb26cf8a8ba6a0b2ea31d9378a8d3ef32b9bc048351fbf762f774440ba6c7b41a50456f77b190'
            'cf5c9b6235f8f03a3478a08390ba6426f463b1723468ef43c0718b8c260406e51159c8db36e8dab0c1fa7fe446e860096e2631fa890353c3a14f5016f5d57c52'
            '5732d4bcdc63cdb731786a29814bc7d9d2edcfa5ae0e7d22a1ef7162cc16698dadc9a7a055d18a2e26cc20ddbac2ca09fe6329ab664cb453ce0c36ff854aa362'
            'c3f1f98dbf5b9c56559a6b9ec29f784b0eb3e689d7d86cb43a56847b988853f9d178f45bc2e8c8a6538cc197170d88f7988b76e28e5025a2d3fbea740d68d240'
            'd1c254abf1bcfdd6b10c3b4df14176b6e0270301353f8fc970b722336106ca6c5744ccc0b97cb7ce0b48fc8331521aa876821f9f50d54b0ace76e496caf1161e'
            'cfae61ea1531fdfc5bf7f6f6eee6c2785e103cd01835b5697636a8865b057fcc782703f091ac09b79c16fab5c3de3ac974e582b877894288674e2b424e4d46de'
            'c0973c27ebfa565a089a2d176590e1e686fe5a86ca9c5feb112f70d485fbba593deff9fc613e1e1ae9ca94a98f8f28d1ae35b9bbb5b49990e741204640980b11'
            '9e6e212f82f36d9b06fd9cc4ef20f9b43f4d12de6a12c87bf24f86cf15b05c7ef1190b181314ec2a71a704802ccceaee1a6eab1a5aaba326692030c27e7b8c37'
            '5774a02131e3247d322cb1e9de9d18e068d42ffd12f096387d5ef2ed809784b10f6524e55ed4c1e9cef670d7288a63f91b82cd40549fa63646066345e5060a05'
            'f01afe4647784ec0ea499e21b4e9fa33135b9d085dd8c246a8fa118712261e409b69c1a5baea4603fceea9612fffeb348a9c1d3e91494ea21f5dcc3c52feb05e'
            '25614830137405e81176028e855a51aa653c64ba6eb13b329cf78626c2b0c6b79ecc460cf7aeba50e4e01e0cb1e3d36d93ac00f7ad4e28ae26290d2b414ffdfa'
            '92a5b6e12202299e539a6f7e542ebb10aa2310dd94680ed4bae7e9f4f4404d8fec26789766a1236dd89afbdc4b528ea950f21e308dc323039195b931b5db4ab1'
            'a7d365aacef44460925c45d843eaebb63b19d62f94a8f299eea68b0f6a277f874809e6c0b9885d6f736c5c55e4f18543f4ee21e9f2fe1ed209ef7213bbd82326'
            'd1e56aedc428cf2f4a470c7d670642c8ea9129e4d4bd1e2d46d614c228391d8c3cbffbc1fdbe9e8146d36b3e3244d2c21c078142c6cf8729d0542eca6134c3d1'
            '7e7ce187200dd3322bce3f4f99f6c798178ebee0eafe80f7ca2a3bd621cb65d973096b89b1daeef2b59deb20476de18bbd284cb8eef74c5dccd70e5bf6d43c84'
            '13ef11a9886ee22d26bbaa2238b9cb3c4e6892d064016e466bfdcfddadb55d9721ac9cf3851063ffd095412b7dc42faa8a17121bb12c7b4f58c208148db98317'
            '7175fc475e2765e2025093f2b1d6a94bb75f5dacdaee7d350dbea63564c3add8b156d3e4388c60914abfdc4e3ec3a2294dc0a684cc9548814546100d070e985e'
            'c044eaa590b3a34031d469e31c809e54423bfc77f08faa5896b3d1255b7197119054ae488475ca4452e6e46924189daa5886fb1e4fc6c599a8a937f8883bcbed'
            'e1d4295682ce9e4ee9e1f0b55652afdab9848d859869c305065f076f4d755d26ca782b54a3cc773bb50b42c254a09176e12f648103af47722c5bd39d32eb80d0'
            '77aa3803327ff27f2e6bbc1cdfbde5abebc6469bbf154967fc83b0d9f55ece5e285a2d3c0724fcad188078c3ac13fb88cdd11db306e1e4c74b42f8f8fc54e08d'
            '857d63059fe0124ec5a920ceb3427fa9685ba16cdb4a0f9e2f87967c20b843c9b2d9e599a62da55ce59207b03ab3c372765004b263cada827d7ae8948559f916'
            '42cae78ab92c5b04ac10e07ecf743016fc3719679b5770213fcf7fd5aa4b5e1bcdb6055f1f74558aab08f5101baa0c469cba47f5fadca84acedb94c61cf07fab'
            '501aa30708f59a2ca59ba194fd49d9106129500d850a05f735834a46410487a14ce862afc37b1e7792190ddfc23c98ffcc944fcfe9ed1c4fa568a9658c16b715'
            'd99b9020fcf814d2ffb4db47dbdc56c5171867919d06224443402808ff0f636c77d0a9b0063c10851aa558a05bfc55d0edbb5f5f1c16a4da4d28429f51a8ab0d'
            'caa45165315e0eaf395113f50f5d56c1bce5c6505f8979e737e2f7cca2f8b32b0dd5fc397114f666e751a9664dc9e307be5b787eaf5480130fd1b162046aac55')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
