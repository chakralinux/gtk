pkgname=thunderbird-i18n
pkgver=52.5.2
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('02210011b262f75447f73ed31e584d5ca0774cf4f4a71621e7f0f118f1e5f8007ac362de51bcc1b246103171e5e17e2978b2fdb4b47dc2ffe298e74a6da06084'
            '8dffec5aa3c0a20d7b85fef5160efc38f9296b9099eb3c085fca5528e9eb290a9226ab46097594c5e6799e3b67c13c2075f1ea7b39f039a87b80b1a29e0166bf'
            '5fc0de75825b5fca44221a838354c74ac39dc72153d1646dfc5f9508fe2d0e54af351bb87cee1ce85b4551571311c223080fbc40a8d95e065e8e9beed08ca1ed'
            '211191e4b0f309e89573801ec74e18bc5fdea89df30ee2283b3a746ddd6a4909d5c8c2b81d222cdf69c36d64573d6f08c36992d1ccbfa6c897bdc538f077b154'
            '18722a193c17873ff88e8abb206bc0e94868c7755173203489f6082603cfa23b39140665b3c3028dfcd288792fa631aa4baf58eb36ef59435f384a75ffac91b0'
            '7dc1e29d4f49b7e649a2bdf1e4eeab6b59aa3683fb414beabe6f8ce771cca9f6647739d30f6742f20f8005b52bcf2ae3af2f98c4ef55670c88781d527f2c64e4'
            '1e033db56d0e211bd3999c62fc53efddde70d5f9c7ed3adcee5782b71f06ac21cbef36785938875dba1ff2bff3670e81ced888bf0c4a8c10acecf672f2678623'
            '13645959796cb9bdc90f5418884a9ddfe1c16ff449cc1408199163980eaef0a38c08717c0a63c4028f44677defa04c794a6c6713518720deb83be7314d4c870a'
            '4e9490db2c1edf8e7e0c9aa7c8f11a348a1432585b07d8fbf072882e0f1f7a46acc9d79a3b0ad84016cf146c30336eded1645f4c390f120c89750ae2c8438725'
            'aff86f3d89004554e5d893548c48d11941ef46114aa513143237da2cc3206014d6769c9885d99e6448337aefcd7d5df57376d9515b268e0c459118493b6ac573'
            'd7a84df9711dc4b2efb8fea2e9e033558ff5357f1e1aea4096ec877fe75e72becfc535d1dbfa4678bddde7c5835e40e6296a4cb468272f1d475a50cc2148c654'
            'e2da03639cbb65deed5b0a57cafe703f0c3f3afb6aee2f8f35474ff57b9db9479128b0d509e03684ba8d60739ad3a90288ebbc37a2b01b3ce1de49a407145e54'
            '5cecabe8228561419c4de27eb3bbaa4a94e140538f3f20bf473655402ea72ef47d148de4f3fd52db49df64540d66629ebfa9fb5331f80fad94a773591692f682'
            '541f2d475912e884bc3d8c4a10656154bfd928620020c230b2a39a0ff98dedce9a5c51f37b1513845dce6077051d1abd03cb39c9a9294146538f3c3fbf31773d'
            '1860e065c3ecea2233bd100bb6aed98d4d3722135128ebf0b21d13ce8fc07f6e6401d54f3db9a787537f7213b99c466b22f64a3afd45a7d011c54d651a17f37c'
            '8a0e68816d9a34f825e89bac58e4839b106d958a1345dcd88ebe32e2c3ca30c28d028143752b1464643aa3253b3cd4bb2eb19c0568ae81979ae2c15be0e32e51'
            'dd3f6fc78cc6af42d23047269f6ea1aac6a2d095a6143a32a4427aa541b9638b53be5e2c1fe3a9a953c25384079b68f0d490e17296297935f5acbbc756f2aa96'
            '4766bffdb5598e9b63a0a3bae318dea0372ddaf1970e02227f1fc4f202c74ff1e614eb9f8a1ede467de73763539fe69a5d3123b5ff3a629d8dd344977f35236e'
            '01bf169dea44813fb5bbc54eb460b6a17f9e089cda630d0553802163d5f0ea0597b48e24a1252fb8e592ca8b731d9c9c1641065a704a109abbb248e34155692e'
            '68fb685fe1c82b33a81793cba8ee4ff524df3e27be50952dcceabc8c169088b7cd325073f509f247c46980fc1f2ac9ca43ee3d5236340ec91d2c1ab31de68422'
            '5c25d164ad4b887a80a320ae473ed8d8d5e5f19850877a991a3bd4e442d922e876cb51218fe49b4ebf02107758f448701047ec83cf2ceea3518c82e80a8561ae'
            '809d86de1a2a02058b4d9a4e08edc02721b851de8bc5bb132f7675239a15a59f14678d203906f61e01c15dbc11d3f7aff948602ecfe0326d619cbff3214ef7ff'
            '64f1e28cc6d32d1a68c70b944993f6511f85f58d2446d2097ce5f9b549a8bfb5fa068f958178c7537128f24479ad143213a0b5dbd252e276377e77a28b8b87a0'
            'b3780199848c5d3042c34addd5817e58145800f02adaf3229765a5eb6115a262e6cd577bb4c25550585f7d9098e7234be92cb9a0ddc0c055d103bfc36c18bda3'
            'b806dccab5736cd08658e5e10749b7205d424ebfda361fbd0d103448ce6f54eeb21ad1ed508c57824aa15b62c96a1e1c99bed6b7cc1c7e67e6f4eb70d0209265'
            'c83fb8168856b928130faa7c6efbd36c0bc3a6bb3ca07eb82b41a8795ee2ca938a86ee391a4800d4d33ef66202ad1ec272bcb57359bc421661ea8f565f8fba99'
            '9626e7254717444e8e0415665f263b2c7ca55f6b192e709d5bcc24bd6359d029f3406b1c9b3aac0fe231fa566e2e02fcde596bce0a7668a0af665646f26cd94d'
            '60583ec6808ed13e0063417686260d7cbccc83b527306b4a73177326ce4c2364bbdc5c109627d3bd3344bd41d94d6721916a5fb8d7b1583cae1cbe4c09b16b63'
            'fed94fdc500fb5e4b3fdb9da85c2eb02bce45c4bd8ddaa52ef571562ef4430578156aaaaf89c1a854682232e49afc62787d8958ddec4d45d03f4104a373c371b'
            'ed94e588def3be4bcdbf85de073f86db0ddb7d035dd1a11f0f4f06895a9c70ac379b296619644648d626db438f870184f7f5e0d9a5b2899d045d0f4a00db3d3d'
            '15a1ced10c2b3a871ee7cfadb0df30c6e2e34a3cad1d71fdfac4d4f67c31ebae820b585dcd720cd142c0ae1455c25220e084360fbad754ee6f53777765256000'
            '9315c8806b26187eef91f2be2b0d3edfc2ea94dd93931c267cb38d7340bb4fd85282a67a316e1b1b7b8b1ddc129c21416a3ccc0b89c34a6eb6c0a4c57f7bca41'
            '2f07bf92cda02556c79c219d81022fdf2395c6e3f817e0426a68dcf78e7d40a65072b16be113b65fd83e3dac23d234c4456578a8b2951dd68b03ebdf000502d9'
            '23b4d40c919ca9ff3d00d9cd3382fd8b6c0e6264b10a161ff160cfb817fab189cf62c441c6f721a77749352c388e832b9c13a8decf09277bf598d7c30ef197cf'
            'd2a88424aacee91a66e94eefb5082fd600e17987e173d40677451160acc9e574dad6101dcb9c8c732f2e62bf6972937e1e7386b43884c912aaeaf10611e7bf3a'
            'd9a7399bf306e7a016af94321a9078a366a0f6c563180555f4c347fe078a23d526dde7793e7517c9250a401023e4c8b3b5066f886c6965eb5fd461d1aafb6795'
            'ad300f12fe808f37a647add7d858b165baecb50714b170bb85255139d5aee291db245afd311855355c2e66e9c6fb7106673de016d99d88bf190b29b67982080e'
            '1377713ff089fd97dbfbf19ce3130e734b7b1812c76f0923f7706d615de96c0ba99b6e0bc324173b640a3da4cfcbc7b4aaa5cbd5ae79b761d25a3cdb7dfa2ad9'
            'cd8305e02f2da478b47039f755ef0ac2e26085e2c9ccc100ad74970b966729e40aaaf9ba6560c2bfbec65bd917688513a93fa9fdb465b0bb520fec74adc48048'
            '9739bfa53e7dbef088efd339acb2f9179d11a45bcfb379a8c8866f7f5dbf0f0c2726d084ed1f1d767baf547bf1c9c87e232483c6b8181dc71ba42f3d7de33475'
            '33e674f8a06c63c2da1587de36d7382549d6a87e7b16c1d19b158bc4ef7360882d2ba88f09021ba9c0088b63571f753838a437036d761442e193e224c0004671'
            '23748b39d7e713eb0a76186c4a4c7f9a2e91ffb4e79a9de689661dcc7155f768469846ae13622cd0706b29da549e2db0ab405c627859e99d6fd0818210ebd9e6'
            'f62fca78fe5496ee4b5f717f6605084a6c15cf419e05ad36dd3ab85b18ba966f016bb4c28c745c6a6216a38a09078a22bbb65eb23127dec07cabe5fc4381b51a'
            '256ff4325008600b2e7dd8eb5292bd29d97a4651d6269cab9cde313086f1743a6c3f4bcbef9b9c9ae3dc33337be7b38f3cbe74438a4c8ce179b2e5a5409140a5'
            '0df3d8b5bfc76f16f3bdbbb91395b79bb8e75f2e52c5951a797b076b32854e471af826c76a40118108a4cc12a02ae671a639d713c85a79aa5bd570d71750341d'
            'e12545d9ac9e11c70ba46830f0f3eb5310e8eb79243eabe4c6e37c98a686f5dcbd87a1b8ccc82a84b1632c0f69acd21eb089dbb1fad9a977d11efabed4592052'
            '36318b44315136e710ab0f9e8cdfc9fc8b01cc1c572ab1824f220553822d9ecb88bafe4bf542c22af719a3514b7aa3df3614d1c9b24a1ca65f1dba93950fdfde'
            '1a363ed44fa7e5fcc45de715b4c2a49b8969232df8fca0e788e1da70a383a3592e248c1a0a86fe008f2a61862b707cccca7780d244920535b78f53ec60cabe72'
            '989c41dc501a110282eeaefb565f77dfbcda431cdf4fc9450a0ffb84b592a66571439a0e3b2f8b7e1b42da4bd974a444217d19ef9d9bc9b01ed64ed5ff33e65a'
            '4d39ee85518d1d31b4976597ea6d639fa0372820fe4c42969855d85b6913bc4c316ae7f1eae53d48c1f9e5219afd3357ed9755533cc57fe37ad3b12e835db641'
            'e5730cd99ea5ec4eff39bb1b3a7a0f65dc44dee0109cbc47f18303371c965733cd9b90d43698e16ed5ccaeceddc1507306f8994e1bc482a71dd07b26d2eb4cdc'
            'c5e52078f06ec77b148d11992bdbab993b6c2cee3dabb66d52a376365960267b2ed29fdce2bc6ee4e1e526d56b97122c242e20f556b79ed93451bcc3d80c9912'
            'c23260b7bd64769b61ff8bd86a8d0d0b5484d6abdc588e1c5b24df4276f0ccccc5e3d78e2a280cba7022ceab578e76ff6808461fecf04280188ece97a0319692'
            '49f429b4fedac5179a5529e8eecfdb1f1872778382ff887c51a57deae2cb8a34680a0d7f7f7dd7684f640d12bbfaefe0d52f4fde272a9cbb9bb7664e3e14f7fc'
            'e2dc77c43bdc4c7e8dbf43618c0a526825eda4bf630ae60438878b376b9ac2c36c71dcba7a68f3ac6b41d9fc4fc6e7e79679a53c3f3765fa0ebe4ae6d6b4b73b')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
