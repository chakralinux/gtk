pkgname=thunderbird-i18n
pkgver=45.6.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('3a6cd8598b115ae3ebfae2c244569d9e1b5dd2a59c53132c840eab37fedee96fee0886c41c28f0abacde375f789a680c49f0dd9291262c27a406510801fd12ab'
            '3bea21350e5d70e83c2e167e9e54b696c821a57ac74565fc47992eacf7542d603c9e1f52707cfeffc60cc706d213bd20fd34229754cb28eed6467ba817ae4201'
            '0402b77d77dc40be47fc941df83a866d62de865a174496b3d1c1b9a82bbe778e19b99f2316c5d40537ad8d8a08c23214110984bbe1f78b77785d21982309f3f2'
            'f3e289aceceb4cc41aee702261620df7ff3cc9abf11486549647c2e9ec871f6e1af1ad86fd399c0c8fc3405c0bb9b1e7b88102910d520909bdcfff0024e2d79e'
            '882123a994d0e83b4a4c90720183b51cc40a3e3d0e3d242cb27abef3912923a8dca642f892fba58185dbe1e1a88e1d4000c88812d1c3551224b16261b2dbee18'
            '99f5747d5cab240e0cf13c251e6e2ac9d503662445cc25ec4e14537a838324811d69e7d2aaeb80fa2e1afa8dc6920c4b07264b10276375fa244c4734ae9f1ad6'
            '7cf9ee7542dd45f7421c1a12755842bc45e43df23f024cc0b9d20fda9ceb4e41a2979a5f392240adb94f60e1bb25518190dc7c1bd554478bfc8438725ebcd545'
            'a398890458951e40b7b3290880e832c3a8e7ba4358b687402ff850b3e224e651273e6dd00019eeba2ca9f5f709db596e6a01b583944a59efb467bf42dedebfaf'
            '87d3d009d37556eedd31bad1e273af46aab99a2e8c043decd246517cb4506ed9f19bebae42e345ef188858f8e36407b9b795251a89e60ebe49197d01df798729'
            '54ab6d8cf619f4771cba2b69473d7b967bd935317b8af058a05091a0f035001317b01c954cfe9e2f6e9f7e36356c71070b7730a502024097a7dbd76eace9afaf'
            'ff08a172c0eb48e92d510c74b68d83a97d6953e8b24002e8b4c4a1a0c692352906bcc3789845d0a37d18f587f5669adc513d4dfc8b754dd3bb525658075c4d6d'
            '17247abe2fb14cf1c97e8af6528f4fbb38ab96c86e5291a33b8c0c8adc55f3cda2bf2b16d4bf6c4f3f5627cafc95eea372151d0f250983c2c605dd8783a0081b'
            'c20edfcb64664455c6af018a55fa0da5e4df516e0ad02cd5e2dee71fba3604b77a2678d77e78e04cde22a801cedc37098610e5271b8eb23c07215b1ae072bb12'
            'd28c6f6f0464773237f29acf2d92d20b978b3eb762b42a682795e47a71353d517f01d80e653b6584c4645e55bb9a0a5abede1b6d3f65609f4fa66c443c52ae09'
            'e8e783d581181be497451044aaa4f905c6c392f46448d16b2a286e45fc5f0b70236855f68baaee0e05a84eb44f1e709de23e656ab502794d376aa7ad8b13d127'
            '9e8733cde5afd2f4b973b9522e4306cf52e047c150efd9b4dee6a8d90300a4b7a5915307c764db3a6765f9a4427c7c0ad34185020597c4f48cc7ce52724e0442'
            'ea19824204e8c1deffd4601f39d59c6636ecae72088e3b5f0dd2f55dd48cb243703fdab03938390d5c0d91d58b371c325224b35521b168f844966f6fcb6f313d'
            '102b80b0c982587a029e1d70bf095ff03b04f36dd6dfd9c88a39eda76cefaee5110d31e2b59af495b04736496218be8a3cc91c924ad67794cfb0c7e734833006'
            '3450d911186b53cc008cbb7fe8ca270369128bdf517943f301c1d73ce723d280f5f45e53cb0e8b428d2570340987da25da3e12c4408a1534742afcf4762216f2'
            '89652525c682837c826d2c95d7aefd0fd804c2045857a8af95750b0561626215e9758f8ac488e60e640690a33cfea5c3abfd4ddc4af9ccd572b13036635deed3'
            'db5a12caf0443d17b67aa7b7054df723ee896a72334a424ac9647c0439a99c42c0fb71a9fd1d2ff257e5613afe9bee64bd263f1da29bf955d4a02c5faaebbfc0'
            '2ebe450395354a3cd0831f256100ee62fa3321a0d9042b02d0216331b87ef655891d8fa0c24e0b436f1214264c92364a5a4fc7dfa76abe038def1cea1f9a3566'
            'c43963b8b28a3eb3d72ab1ac71e145ae355ab124096ed6ee9e94665a1509ff8b5a719c67093e4b65514afd8bad63386b7eff7a2e09e7f5d0afce2bc9f73bde3e'
            '52d366756d4882dec2421e8f0d08317a9a514eb2ff58573f9debc0299277bf9d29869a795cb3023cf1ad2938c8aebb74e43dfed1dd8be34d72700c89802a87b8'
            '3c07d62c450bf0235a6fa29886668118464b9372ae06c2df17943d1a1e72e67c77bef5e0018e0dede33b449f2a2d7418495019dabbf5192634ec6d835be161d0'
            'f7b4de933d4f78caa0a59e7bab596492c95274016cdd7a2216f83a17108cd83d82de2c1b52d0f53efb6ca6627f4d7b7d3b474aa551bcaca2cb6b0a4da91933f6'
            '794bfafc4e3fc58aaabebc62355366cb3a2395e803e9f04c2dadb0034e9000a39dc719edd29ac99ba3a4fc463488a54b4954cf43fab40f56f1ddcbeebd960708'
            '5021ea765233ddfde361c8c6ada35da339ce4c21e496ba5485df621ac790e5aca28ae924025c2376cb9e5ceb63e398f97a3fde631398c20f58352b20bfec261a'
            '22d210ff59881e628dacc4c869db844a25312d3991ceb5caf568f0e65add42ecb9b6016569ebf2a3dd66c7a4d9b8ed81adf68b8b0f20a549a6ede26c3bc59599'
            '9d53b753d443f3c4098480ec97c88c4e19e5dccec03ca89774b69d767353fdf27d43627e5a11d2b410dc39b4f49b4eecba56735ff117292e8c05b29eac01fe2e'
            '312e1f1443531eea8c3adcb40b43f3723c5608e917df2e2d8cf2321645e1d62c812e90332172b4dc3568a230578fcb790c698873256bbcb156a75a4bf4c1bff5'
            'c87b3cd149fa5c267faea6d7354b2c6bebff9416eeb7453ae32fa9458ef6edf9e942da7a2e297dadeb55da69e226a62eb0612dec3b086c91ec70c71f04959ced'
            'b635397ba96780cde27bdb8b282add4b5184905540e8ff7d19ba60fceb831def487014e2485754615b861744e5341c3a6ef0664f9c8b557703d25586cac66c5c'
            '75d7d807fcab90dbb70178b8f3d28730365f5eba7ea7b9df8d13bf720d4dbe1b7784e23aaf482c64c53d6ac0f81a3b99ea93a85ca20d6a7c0e8c7821e73f5e4a'
            'e3bca8fa446e4cc698bff7301781ff55df883673350a7be7a7d46bbed3d57d592e37895c426bdddf6f20bb3f8d5c809e158b212b0192910e4dace32ebdf5ba04'
            '6257ae673b9a309f0550cc3adba5b92d03045a110079d918ee0f7888f394792a9e27e5ed105a635bf21f7dbd440085011a275188c1d12826100032d5d3f8479c'
            '6aa7be320b6b356129da7d66850c6f716fda5ff454a4ea7492d506d85d2cf14a449cde4b7ce92048411dfe6611124b3239cd9aaa8af8674eeaa57b72afde0df5'
            '400f60a2a7be9c897bb5a6e40928e86798238fcab0caa3c15d5c63d21b33fbf18d4b4c14317aaa185030e55fcc7de0c411e55c361b1315d87c9f1cc1b8c3bc9c'
            '9dbd63cf40f252dfed68b9cc2c1a904845ac7e7fc0671cae4761047f1cf3243d84493becfd3cc16c7cfa8259b0d443235bdd57e682bee68a8fd6503171f4e436'
            '96fb22e66ebaea9a48a5425b109398e49017d753dfed446f8418c4b8fbdf1c64a35ff2a53b6da2d6d625a43ba42bd008ff0ebdd6bbe6f77caa91554d3e73bacf'
            '79826c2e01cfa8dcf34f0f940b25370aee2c23dc29c0600bfa81e01a67f82b6b2477b4ae1fff6590b82975d2707e663caad9b5e2083533ec603859dcb9f3c6e0'
            '42f3e11e402b2ffd91333d8d50eb7f6f8e771d0a32413906517947ff9a468c6d1f1236cb5ca27f54706f6b6f5dc78a1a938cbd168174b3672f89500cf5c9e9c2'
            'a16e19ec2126874c7539cbb1245831c960fe76a21e5a56e3611473cd548377d109c708b5dbfede7f4ad8cf2c2abb7de8b17dcc7a145b30f003ac6df7138bd9ca'
            '432dbcb0338f29e76bac12de16b403e8d20936202c32649ad6a0eae9408f67ac505376d8a71a27fa3ca5a9f8a0f4fb43c9602b351fcec57ff3655a12956f436d'
            'afbc2511448afb307e1e2dcaaa8294d358b1ec616ecc021826d6aa428bd5fb72798b11795a1bfbb41527c6f61cc8c779dd36888a9c4049f23a927ae70df57cbb'
            'fef444b6fd98fe74560ca5d27c37e5f76ee3c77d30fb88cad460405317d9a4365d35dcaef8940b213d1478f10f820cd7c1d57bf25eb5337bdce1e298dd974d94'
            '2d882d88e719ac660f2ddf8be1f1091899a5239af4763bf3c86b30d06710f6edad1b69f3169ca442b1a92d6b7fc46049c158d229de0a1f8e6c750bed8a4f62c8'
            '53f89875c35130055a89b3560c638e1acb0b053241483b3037f115835d55867e1dc891b7c3517faf6bc344e29412b60aa1654f3217d9fe1a4d6e7941965023bf'
            'c8974be59522b4d123906fb6ed062aa6a1efce94c6406c0e3f6e05f86974cc7370ab63535dd90fb046b7c02880fe43602401877276c5a3ac2368838b2687ba4d'
            'bbcdb2d29ab2f60bcdca72381665800207be4a093387cd14548fedfcacff46465ba70fd902a3d0f4199d87b2b3667cc8d76315f6c7a962c4628b6e23385821cf'
            '0c084b211f5265126f372b3ba609cbe355ccced0482048f942d186c283c66c5f6e82bebded6951833428cf67238366220c8c658a90fe87612ccac7badc13569f'
            'f793d07aad5e4f8002384342612375b0e5c05db87802ba3590d65b30fca68c6f3c1834304dbe4871abc091a17738dbd41ac878ca6dd3a4167e52238367b60d3f'
            '317bff2f0a9d99697f461a1ee5084e68326038bdc22ab9ce832f457dd9f45263371d041499eda7c812001bb59e3a6f05058066ef56512394f8da558e34499ced'
            'f719044cdc7e3e01b324545880d7aa40e1b79cbd9d2687852ae6a203d5667ff89ba365a4d086b1cd6ce4dd8380684dbef57cab3a53ee0be9fa97a7a2265424ba'
            'a971bdb41075b4e408f7c50a830bc4220f8f33252670beea8b650d04e0a04629f7a1d2a75cc2eda140b0d376c5bc05695855b15712f74582cc19d4f4d6e61a2a')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
