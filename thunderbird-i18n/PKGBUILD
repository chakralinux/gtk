pkgname=thunderbird-i18n
pkgver=45.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('80659c914873717c6538e2933a2983190476cf42498a01337ce0cd6468401aa66002061fe54175c47280fa482c43372a1951d78db5b331826fa2b086047c1014'
            '56c7e5761f2192a1963acdecae1ce1fdfc8f194470c7c1827d4a0cb8c676c9d24fbf07e7a9fb098b36ab5ca29bf33869e61fa9c02b11c65f4a133351fe1e3c33'
            'fa30bccdbf7086b4d4ba8430b9757ac006b77447cad36bc5f1052e52fa1bacbdd3c6500df9825b4a1f0d2db3f5dd2fd9e839d367db337091645b17d09f0fcc55'
            '8e0a27afc62171d57964737a546d00a4dd0ead57ceb74ecf938135f893922ee8fe8542fa2f081d08ef6b9b1b6d20e980ba249be355e25232b08428a3cad328f0'
            '5778ac2190053da035823c09318d437f5a83df620ff213a81ea83a4d0bb4da32386f6253177af5aad7e09060dc7e54dfc20231b54b5639d4c198739b6fcbe7a1'
            'f77dc513837b607e7660fa787dfcb3f6106134e166e348bb2b8be8bca2912bf7f5bd60bfec9c30b9ee79dd5d7f8d94a9076642550f86ba72813a52b2202d4b5a'
            'ccbef9ae973cb1316b0e39334a48034e58acbf7da80bd67437048a1e2921feea2e648fffdef0e1c460b193458314c74dba7f2d9e22a4ce45dbdcbb99ac8af3d7'
            'be4148a088df5d11fd6e6ff3c93e8d591a928cb6b9d9c2d4bc608c4bc4e336ff2ce6eb86a224b7c5fed50d57bee734160fef3d523aca13aaafc54c48719eea23'
            '1681285c30c41b0cabd706789ba637b6c92e6a7d121667d8df10bce29c36602779d7bb77b0b7c1fa41d84de542778aa3b05f980498ef1e709332e43fd26e2e0e'
            '7677a09c493891b3f9f434adf4f0847dc51f0df4e9a6095358cc0143a4b75e38b2dc1dfa19be86e20c3d22a721c4acd67cd7d8e2cbfc218b54736b82af144893'
            '498921c87eb2f40ebd1f99a17b095f9f6806448143be233cab18acffa7b0703a02605164e4053c1f15b2f48f4ef6d89385ce72e00ae6a696ad9b69cb744b7c2c'
            'dd23f39f7ca413afe82e3b5087c08463c31d158baa479f8edcba7026e3aa6a21a646e4c6a3cf04d5baf84a45502ae7a89c08c8fd30b4f969393682101d069e5b'
            '626de3bc3947243baddc7d6354001443c613c32b831aa9b7b17a34490a7851d950c6e1a45dc24f03fec18055e9ffd031e43749c7846b0e9164f6d7d6d3e464a9'
            'dd0f677511b793304ef51a31364adb34f047b25871aa3cee6f7761b6b034af47b4f69db4d0d79145b47f4799997da8f0e8bc8f930343bb3ad119611936693409'
            'cdfbd29da8ff4cca2ed28888ff49a685ab9cde58f0b38e84bd06b3d4f53cf98ae650bd424fe9ae1dcfbada29cfb563f87d0a2679f3f5e32e94e48655f9d8f707'
            'a1bbf04d6c65ac8ecf1d2e0c68cdc8369431fd9932788ababea084292f79c5087fbdfcb8947dec40dcfe45eda54f6e649f5e0de7621cf8c4a515d747c7c80475'
            'c3742b34164ae550f5353b9ecd03e0bfbc04be34263c4da995c49a89c2becc8d4d94ee2a694722b3c4280c267af9691a79ee723f4a0549834e19f2500f054f67'
            'a7fa33fa2b28f3cffb5ab791d2b4413fcd1fc32949054e0a7cf48f68d6ff4399da5bc6c4136a79392a91523fd706de188775060782d0e8201768095320c60539'
            '7dc980d797b42e8a8e389d9372fd3d892e4f5ff3681f9c3f06a17d2582898da3b4df23083868c7fba8862c9878b1e91b517cd6139d096988d57ac3389fc33561'
            'f5f6706ecb89ea2564385dae07fe4de0e82ddc7a7e443cacb75baf8a13a0c643607b337e1acd606d797f6b29b43aee4085f14bec2592557a572b4f8826f76245'
            '64e125fa3f297c4f33143d7d24c227a946e146481bd070aa25ec8284ab6942524b6c1107ff1ea70c8c376da3ae96168d57c2854e165a3403b3f8b307ab18d7d3'
            '97eebb339983a130f0fdc888dc142ff99b31650ab4646fbd05b1bbc796e8547052848473013b48eeb7ab6b091e74ef77050d4325a9d5d660735b09f14c36456a'
            'ea470dea6a05b7858a6e45d156f85a54281e9b9039e7e1bb4eef9094acade72e2b21ad11f2d7efb35efffb676907bcfc7b192ebe031baeb23a725db3b569a62a'
            '14c42f54c080ca6acdcabaf5d8ed5573832b225e0f56a6269b3b7723d37b9fb0c82203d8c21b5e1bd829c055d67c4f8d8bd94485610ae4045c3a74cd519835fb'
            '702b2e509a1db9e64c19d8355e4e40e674508a8598789fcafd1d241495fa1790b789f90be22b94483d940d26de7387588cae6cd1d2fcde0fe9db93e951db0a10'
            '8e0c66bb1b28ad61f505b2cf2bfcf1c767d4b6a179105c3315358b0e66e29077dfcd8b08cfa7831128608c54fa0c2bc0510cc2da6025325e764c43dd00e4d078'
            '3687dfcfed27105d511cf44bbc2c545ba1263315709067d2fae2f1126ab7d055354f9728df68b51ab3da69f945980a3b7ad0ce2194d9bd81ad93f7eca2bb064f'
            '108370c92420d82ee62cd6160c0d158ea853841832567416fb7e4be03a9f436d350262420086e9b13ec084243a99a5556a3a36cb2fd54005772a24453134fc71'
            '1228ab08131adb70b27ce9a68b1435bc4ffc77ca659e1099a5469fe1d5def1307f1f912fbb71ec5eeaa4c54ddff2581f93553ae357a0031d5e998120348b898c'
            'e7bf6aebd2cd8b826837fec08ffd84291d2fda3b34e20cb8d31c6ea75d49777cbed2f7d91811520bc4ad29ef88b9a639bc3c2ff74fce9b180994e36eb592bedf'
            '47fd1f199523602e4aa152f63f2cfa539da31266251d3a1d93a0b8ee94047b1e5ca8fc4f8d975975a537b02882f971de13b5cac65ad3d604e0026d1cc836951e'
            'd01783831dfcf0dbf66c65a9a83b0ef237b7de1cc06b088d820e2c463bf586e7495245602aba15ba229c1f0541c0d89e9a1b7eaaeefb618fa6c1566ebef89330'
            '3693c9e204b190f4b52b49fef1b7f83a629046d6f32b08e0f77d07fe4519ab58fb6aa77899756ff9575fc1db975c637af323e624c014c1ef230872311a701424'
            '61cfab336f21ce41afd2b677eb66856fd248620dac6a52dbd2da1e77c40c67c6351f42aaac28b20f8122a2ecd4bdf852fe30dee0d6e87ba52a773e71ae609ed8'
            '0f0e73386b140e2090d8301d15c2541696d46bfa5e9d2088ac3fe4870ff602c4e686bb8e1d99e8f82cb2b7fe4fd765170eac5b232d714a83f94cc4d6e46762be'
            'c87b9c4fde8ed959b63846b45918d8bcf532e487b1be3c85c2db8682cac9c8b16ee4c1a8b8bf5f35b2250373d37696d64be81cc66b855e55a59d823a97ff992f'
            'faf9c62c1cf0229f767231b8bd6d5bda1c7de151bfc7085691cc4ea07102b4bdbbd77330fce272d08ccc04835c437bab6fcd0f266ec61f13361a4affaafd2d0c'
            '1a128c1e2cf8a8f29a36ac039d6b6d1a797ecc5d11cd19d152b075092450d1bd8850fe79f82eaf673eb1a9509ab77c2354346c4c206ac9b9182207e51fa7592e'
            '1e2162995a8b1d0fed664ea65bf54295a6214cdca90a9439bab2354a5a74ba9ff6cb622bd9ac794f18c2bae69f421ef5db93101b1690b009c6bf8db7437732dd'
            '6d469195169a3680777eef8bbfbc818a7cf96eab06f0d5669573dc350b3d6777e5e1328b82a15acb4d7e2be159cab9e3efaa63ddf0ae55306d6b96bdeb0f4458'
            'e8a81c72219e190c34d57572a83932405dbce6f3bd48c1eb82583beb48ca148977c88155e817d0aa17900ff439ff4713a11fc32b5063a6a7c56b2df78929ae24'
            '6e20322c01ffa5d31cee398bde8aa416fb1ec821526f5c8f9614ed952e423d8329d4963a31f9c03b11357717a71e48d6e3e973b96a64a832ab5b183551e21c1e'
            '664db38e7d44e64ed5fadb4e4e659c08fded95b39aedb1abd9d032241aea396b4a919cfb3abfcdf953065cc269d590b2d77f2118187aa8e88afbe7f3c059f10e'
            'b71dc792bb59389942490fadfcae3110a92e8169baf6a1dc16c1722110869b56ac8e02c16b8971f852ff95dcfb07881f69c1b891108fa58a670fea326b7e0f5c'
            '7137784a077d836c8b7cdf379c99518c054015b03dd10cb1645cad46ee048f9ccc89535283443ca4c98b2eea6803bbba094135ae9cc125723d9225360feab521'
            'e5f3333a22f59508a88ef851aebc771dd9876d12917644e34245c633e37be3d28561f48747015f46a18458663da9aed66a12194451fa508b628bd50a1776eda6'
            '9cdfbc481781eaee71fd060d8f7a082e4409c9919968c166eb50e53908d3c09e1ddcd5ec778f33cb6c44a056ba35bfff86838851fdd13ddbab276571e247b967'
            '9b9c8639c564598a5a5679bae6846a37831238fb690e02ef2a2d661bcc4898c130554ec1c45bf81b53cebab812bc3ac139d3bd854cfc33ee1de5fa526096b63d'
            '6956bd208793f593bc7b83a09c5711ce92a45f640597372a7aa82f8d79cb331cdc9201bd06fdc213b54aeebf27d06129c3cddaf0d03e5a67744e57afd93c89e1'
            '950fd6b4260083d82d759f59f5a8fc09409aae8ab715aaa51c1f0f6c7e56dab67be2e738f910593e5fce383c88b46a654b81751d5262c43911d7fb23e90cace3'
            'd912a7d998df1b8d9eb19d41dcdad87eb5f2f3ef077313479909a579e3cd515d85f70e557d82d56e58842be16ad74439b4a9739259e8c52bc2dbc806c4975fd0'
            'cdb247a5fc456083cb45a085d0d3e1b7f5ec3157149d4067e71b8e68278b33831a38f2f60f8c9d2fc59d26c6b6df3d3c1798f431f0bf85c4e6e62bf7380f41a2'
            '16466a480af1c50c76d0c70d766c6a18a4535ab6fa71fbaa17daaeded45258d6f92ade7fc393d29fa084f4d6adef2c61a3eb076b401c933f55494a23dce36c42'
            '75bbc90fd3db09f643a3aee042e718794d6cd2e89c53aea7628eb40fad25b48f86c40ccad9032cbc077759ad38b4929b5f453b9d70da43d3c31bec8f83709b9a'
            '9010b99221e176aa2f48091176a77a2d232caeccd6bc6e83fe17ff69dedcf29a44b87a0a70ab11de8f81ca4e3f1eb3c2261f63735ff4fcf8c99cf5e69096174a')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
