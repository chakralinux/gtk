pkgname=thunderbird-i18n
pkgver=52.1.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('d23e9005a3e8bd720eb647e4d964495946d708e84afed2c099b417364788aaefd2ef5c4c14e2ce69e97d62b121f2aef8805cf2af9ba12220800ea21e644fbc23'
            'c2294166f33f34b59e1ae6873322ae9b439d5315c2aa896e101c7169956a92059e85248d096231c15544162d2fb69e9e6a1ffa126697a441bdce66564e29f223'
            '24ea71f32f033970fd0166e49ac0598c267a50e7ade20948392cfad82d4774f1d62df6c433f360e52432cf74b1e037bbc48a00f02a34a0b3dfe3a91adb13b89c'
            'eb47b8a1f74ee72240bebea80e13997aeaa0fcc40830f7e368162b2f37338d800ba633f82f2e0320bfd3af70fd8b39abea2c8a851e651084d87d777ac61250bf'
            '745246a0ff5feb3be5b314cc2779df630c8d400e09913b101e875b4b4baf27a5998f6325bfde700c40fa009073bb2d537d6a37ee1051d45551918ddb5b305858'
            '692b658c488adc4a10c60efb01bd08ff58699af8e7dadd22ed22e17f3702f306ff753e372034c5839a62a755b89971d51bb071b566de0a562df36ba000f4b4bb'
            '90d0e8c282039657f4a7d7c71c095dde77c3795358b1e49d67c29372e662ffb3a342f4de56a4403e0c4273032ac0479974a6efb9943c2d0fbc1cb5952728f770'
            'b6358df8b3ed70c56d3e55f4a546061480f4e0250b11156987c7a3891d9266837db1b2fea57f258ec08d9337d11a7e368e1145ea0a873e2746e51ccf1d53c0ad'
            '03fe662f42e15c049d212e7a5db23fc18774267d88b058a43aa11b92959ee52c522cc7d2a8ff86cf593b203aad9b86e209da85c13f751bd64594826b4a6fc6ec'
            '15d7c44b1e7fec2b58e15a59bc54671a698f311109dd1d2cabf017e0c03aa92c71d30bdbd33d75334721673a46fe597da8b7ea8a9eb989fc4ced3f633e9dd4a0'
            'b8dcaefb514a9fb8571fa40b8968d11a0206f09e5f6770f7bcf4f0edb9f09a8cebda1a1e0e34941bc94acf66fc6c43df88dae420b8e2a5b906b3f8f03ef62b98'
            '7e745b7b5031ba74c1725fae9224a8ab41adc97e43bb31208cd29e23f07aed5f2843cdfb0b58a7d534d1e54e8bc340e589bf7e1eb95213939a1bcf2822137b45'
            '680d9fe1fb00bc39d2ac9ec663d2e0bc89913a4144861b952da37094ec0654424db86d8b9944e161a2210b6ce50c53d76fa92b4eb8134df02fb5e8d40afca43b'
            '2bcb0651031ac70b9951f57871b584f885d996003b73b8288d2dec4e218be162e0adf6547c29f2364e1861dc86a580393adb8e377be9c357e4642e86f02900d2'
            '82058c06bfcad1cb0bb96ca40cccddfe459ca9980cbe3fc5c83006ab4eac01fceb22b4aa1f180f9a7523439a30b990cef4054ab3449565d732b0b7bd27eb5cd8'
            '7a558b18cf39efd334620219a827e342e1359ed47e1366d43e9e95c321e8bd6741d40042eaf73c0501b7aba1f86204544083ca513e9180cdd0953fb52fd5dc7f'
            '2bdea0855d8282c20b484c3dc83db584b5284fd579ec21466fec95a62aecd98cc036ff6038b520b4f60c826dc8f96bf98504132d0617f302f8f6a36ad0af8060'
            'b74cdccc3c3b53ef2daec49ab08f645a3c55a43b67a80a6c90733aa3c2af918c71807ca48caf568d121eeae8c5185c2bcdca301390bcb266ab0dff77af35a50f'
            '053c4ce7a6a035d8457ccacb012f1a4df29384d7ae10a06180413350f58b3056af05b63b9dec5736539b76a0719c05f6649bb600bf41c3e60a21a205d7f7cbd5'
            'c9b389bef0e84391863bdd06f0da3152e0f0b111fbbe10ce6c744c473a14546d766510d7abbe061c4bdfd9ebad2977f077decec1472f5e6b1ebadcacab7a7999'
            'a5396e26b6f371ed27865085231d14c3d83b748a7647aea8e4eb1905ca901253a81969c57263c167b69ef695d37f7344938d0f10ec058b48ca90c640f18a1675'
            'e8cafe28c0c0395fd8c355cf54bd52934dd614f3093f7535ab6217bde9e4cc24eaa479b8b79ae186bd055baddf3853a58801053e82d96f92318e6c39e1ede51b'
            '73cdd21617b534f7368a99999f295e85b76d6ce1733e017bad64dc2a938744f2410c32868cd529d3224505bb0dd96cc3ab785afdeecf492a48fe1453f34abb05'
            'e88e5ed28a0d0bcf415fd67675d5540b21f8d0336f15356fbf4caf99b98a6b4ca0171cd4eccd1510cde177a57821df9e329d11c91bf659002f256f8fcf8c8ada'
            '383aeebce239d3c9e75f31ce0bf0caa6eebd42b770d33453b7b004dfb9cf52aa82bf7678e98f99ddc0aaa681cf96f712e936d88ea8ab22674b7d579517705c17'
            'eacd04be9ee244575347039fc0e366f7df15f5279495a4a485cc256b8e1340c77101c8ff611041558a3c25acdd0235a0858451af86e351f646fc0f23e36786d8'
            '6f5c8f9798f069a919ad1c45ffd0d33e7392f1e899efcc8ea638c0e5dc29de324bde509fee685a865db859e2114d010bc9f481d4a7dbc8e56b936206142108e8'
            'e425cef70b6dbd649541c63b557a7b67bf9f1684a9ae6ce85a6f32befcca072f828458ac4cb3e38a497f6f4892c085738ca89f452a8436b6784010a23334ab46'
            '8ae48d6415cc460002083977fcdacf2f7ea74a68783f22bbf62f1c2bfd21db48037d1475adb2d2869ce3e28f12b1969e30eafe19fac5e47c05526c2d2e689b6c'
            'b211c862d1d596db4c36c63090844a4f9968fa0e803c155c245733f3262cee87d3a22ae0d808a7705986aafd982e8a9465a4c2ba3f17acbefc4d92c5a216ece0'
            '8c18d4a3d01ffe49ed0557e01eb78671c4bd511a38a56d87b1481bc45049d700b1110a20dde4e092f010b2b2c967d40fcde18413a388ddefe15751e3989092cd'
            '25d07d0332efb2e572d24ead58b643db0c6e70e66e9a84335ec16d220f92e2dc6499f7fae3efc1fdeda18e0e48d7861da38d99bef894b49e97449df46fff7de6'
            '7ed6c0a7be7f2ee0f5a263701b8b137d592c04c92a00ad9fd3509000e6e42a820f5b3a3ee9d559f4efaccb79be1d5f85a396e16cdf805b68ede8119297158709'
            '84347daa33229108ba73287721ff7c61725fd9f469ce8ecbb4711493c1095380002a4f39cdfad1ba696e2488fbb302eef55d0064aac99687d664c15445926f43'
            'a57e9ca1dc65696883d588b744e28f9244a29e6d2bb0bb563a7a6d08e0415d2fd4e6ab1983a0d4c008f894389106c939151413a446d853e9bd8b8e099fc4c29e'
            'f826d80adad2c5fb1ffda291111d3622fe2b21275936c97270b52b17f703c99d617184b70f734efbfb025f5385aa4eb87601c6103b833a8925a4a162f533bee5'
            '9bf90b4c193ac34dede24af6c8d5285f1b1882fb2793b8251141bb25449ce633665cef39e3046d902fee81e0e2136859d7789984a701c62706f3742578dc162e'
            '133c984da409ecfcf0a4dbf426362206fdf9bed6ae994e9158dcb0adb38b46ae26c270857057354d16690932b92e9dd0f56dc7cc2f28bb43192c98a01bb2387f'
            'cdedfd4afb27bab14c739a6a9906369ad8380da82a0f3a3d785b2547fdc020632005ed56628a240463612c38f7603f654f06ff4b7ee4ce2bfce6e2fd0f56a6f1'
            '854ae0aa33cc0c209347e34c2637b205b7d3b60b66ee41bb28d78bb84e88ca59acc5d191a2c57e866daacceb10699490b5da1e101648bca05b46992aec56940e'
            'a18488bb619fe62800bb34c229d3aea2d67b1366e1c511bb0c58fbcd36a2afaf7fdb4bc1a9549286f51b3b8b593c0d1f54ab4cdc9274022e5b79b0e28684f449'
            'c7fd181488ef4c70615336ef65dafcdd7c64ea06bfd306537f9b57782fa4991e767972d89ac371b8b5d8e75e484c8b5993a50440152621ed23a3a3569fcf1e63'
            '35d3970ff9f11edd373b923eba743e4ed37e81222e1f423de7143e9c304547dd53bd20e321af1da39fb9754b89e44c1352c28e87ab168795e8d62de94df97159'
            'b1d0d2f0ae18b0d12e99f9eafbba160ac71d4d4569d94281a9f1eb0cafaf33e7031647a9f0d583c10d048311828ce797a043075e131f3da79c614a37a2d40974'
            '882c2f2e2a2f7b14c5557288461d1be96c36328f7f6fd2a1dfcce9ecb65cb9e8665b6547f1eedcc7867df1e6512f34c97f44c9fbb6f517e477bde7752a997420'
            '6a19f9f9f12904f012de0467fde97b9a38e5cdf58156fa38836887533dd0810fbfc44c1899139945ffea7fc9484b1fb30b57730a9a659345473748b022aa315b'
            '444e1994322ac301408b0a00ac024870936c40320bbd9c9c81ad004e7f63180467493f261f7324fc8e0e21daebf4667cd136de47b77f9f92bf71478b03aa26c4'
            '6a10a0de9a5dd758561d926a171718e973798331a26928edaa9ca02eeb3117edd473ae75c58fb6d1f7e833897ef0f5c6d62812eff29b44bafd7cef38dbbf654e'
            'e34c4ca1dbc47577500118b2cc08ba069cf85adfd456c56799682e79e0b95890f5f95a086ec79fa8bafe8d3256bbf14716797b241afc6f105a76e8f251724c1e'
            '5f016a5bd47dc6580bca46c39bf02f679ea703cbba6153efae47c530241dae38375427030bd89e326f6023cf225876d1b1233da9357fae35f47516a5b319f47d'
            'ee98dcf1795e59e691d94253caff84983ac7d7122444f6e45f25f39a4c78f4b0f8dcaa798f3fc67d5af2d6faf37b0aeea6f596b5a035bde09255ab94d9f05369'
            'f0c240927c0801feaf6477bf93347fd5306cd98f932d4590b0fa39003a7c46420c8b2ada1917e379ab84548f6bee3dc01f29ee18f3fe68fce173297151b5533c'
            '8637fdeb3ae22a4eebd746a2ab0c8d65723ff13f81769025e20f31f8b143d6933278c01dd28992ce72c48cf597e6ef69ceb43cd4066b9dfe86453ff40e82bc5c'
            'ffa94231b1ed5e9b978369cc683080336d89f18322b1d7ecb9787450615de13ef1d9fd33a3fb95cc14a03d2ae8f693c2f770aa8f5dacb059150648bd243f8243'
            '526dce3da955c63f2e2f0f70d916433e95977f08792e24931dcf1b28bfb0480d9784959fae25162fae38faf4c75c96913b392a907f0f07181cd80222e7a263c1')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
