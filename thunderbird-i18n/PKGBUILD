pkgname=thunderbird-i18n
pkgver=52.1.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('e490f84c768035be7d3eef8640907310a81a5361d08e49bc2e70dfeeb4d37f4b1ac981a6ae2a0539abc0a26c04b99e578d79dca88694db4658210cb43c397144'
            'bd8cc800583e31056d3dcab8a6c10c1b25ed49853c7891df64856df776c29573575b156faf6649cb32708fca819fdc4e51f09d0714c7209cbaab592e7c0b6111'
            'aacd3e48f458f149b04dbb62d56f350b1f87f7b0f99cd22f9ab0f344a853a507705c16446f45d60a4f105c74410b17bd3aab6161577afc4fd3fc4def2d4884fb'
            'c20fba0ed6da50d28214948c5b766ca0c5fbd5ab536f0cbb060359d14041a618d1a549a2e88e44243b66f0a98952805bc012e243f41aa2fc8d23df8ab9f00e2b'
            'f1b5cf136effc9384927aae124c4a31a2775614a69bab1570cd8bee7dd66d48c2a60ae029bfa90b8e9fdd63815e879d2f7ab4ee3cbcf280fccf83773934517bc'
            'f3176cf9e61428f598517c803c3811851859151752bb8e493284913d9bfdb6683c952f9715dad71e48b485ed316b56429743090707848348661badd53f858cd2'
            '51e724e28d38de1779801ee86a19aea977defa6b1171fbc5b4936a9de73f25214772469d46221b1dd70f31de48e64477e87a98485603c0e1809bed552b26d5ba'
            '97f8b00918ee5a47d16701f5285536bde40a9d230b120c6917b3129a0bf12d41981d860cea44386da9f040c24866026e35a9a16e277b309d0f259d22c58fa2d6'
            '6e49f700741fbce1b03a0f973eadbe716e29ac799747bd76a782f7eea9e1135f94c633fcd23942e98a155ee2381668d1e70957302b68b0a932708cd7e87b8459'
            '33b11ff337cfcff30004f9d05e36be01ae56a0771c3e1c50bffd713928f3fd8837d553c17826c975d8b2da12683be79cfd07d0d9fbca41bae461624f939acde7'
            'e21207316d29f1523204631fa5c961a23c9702ce5e10baed9264f3dd39e696a967bdd9d23fac2eb8a25b95f1d8538d308a2d027e18bf9e8bae6955d815caf1a7'
            'b216c8465f3f82b9ae11f1b69ad3603b2aeb61ff7f2422f868fcaaf9dad373efbb85d82204568eb03df318f43bd51884408d6b5b6ab5873dbdb038738b0fca47'
            '35271c0c208ea8b5ab76c0021327dc8de7f1a5eada80071b54cc7cfa9d0cc5980db0ba9e0a6b030918b5e25fae5d7b6bb87aaba12cf19f92927fc0b2136f5e6b'
            '7f69d87a4403b2583f2c7f9ae4240924b2894d1921c0b87a5b9ffb12b095467b41de005bb74c6dfe9c8e99ff2538055a0702944fd2d7ae9663ee89ed41a32f96'
            '5fc078d945b3df2da0e459fe4a06c12587a1834a195eb4a44e3029cbe6a8905c5d94b3314f79f90a4b088c1a44d8dd237b10ad39e68931d138eef5caee348b3b'
            '0dd7616ab16f1ec0763e5c3316c55ba48744b389a4e131caa5c7beb0373c5de5e03eb914cc38049a917616a02b90f11603e387c8803f392e000ea60439050ea5'
            'dae868a5db9b7ab55f2fbcf6f6c7e8ac40f83ac03308266661bc62a544bacd36d1858d8ee96fdbb0aadac74fc2e4a9acb1989185264a06f9406b819daea84b0e'
            '5965346218347c57a88c53582fb3265810a22596408a363fe46c9064f5d6243db08feeebf2395a8b2b5f2057d8548b150e712514752911ba7e3f6b79810c6300'
            'c45c44e6c41908bbb8fc01d1f0e7d661f2b652a9af31e1410f7f01652aac19ec4ba60aa33bae19d0269bd406ceb2ea43760108e101b383e08aaa33ddc668cb47'
            '608a47026878fe8309cbb193f775cb741012625311eb1cfa2366b37e016ff2cf38f28456e18ad0074bc2d6df0293c8eab5fe4b86a4a61bcd7c80301ed09b1075'
            'c2e5cb1a86cba211a858a7a57805af316c0383f0bad76f60c37508a0772318fc7312a267a8cd6d8d495b12d665126073bede0a07387c814c94ccbb985701639a'
            '2c7588c8237bd83b2ab23da96942a4bb03d841eb455ed22767a11fad7cc3f44ddecef609ed4f24424c5444657c7890987802ac939dbafbf233aebc48af7d4b04'
            '874d63679a5bc9fc197ba39733d0d49fdc207b6e9b848ea22064efead638cf159ab6c970182c2081936cc45f9002ce13fe93129f9420923d40a45cf79e1de765'
            '8a95184ed2f556abca427f9a2b765b5fb3ea65e84f328349ddcd794733e362735c48ddfed3ab235f889660f437916c36c35f497c63f3024d7f9fe0b9ed90b200'
            'd77ec25bc903e8ef3fde854af8cd44c021e800675ba554f0352f9e543b3d7123846b4f6c138ed2c7a4dbaebaa2dbf6d93489bb62c8eb0a13933b875f4d2ab771'
            'cd2b9eccd334025e87a9d0ae58656113549c06e43bb739850294faed7d5669713ef808d008af783ff5c9e85d32213d9ff9a2fc980871df8e5127d0f3b87e9555'
            '531ecd3135a329834a862044c944c933d913805fea5716fad1e6f742aece99f10664882fd5af8d9977eb43eeded9ac3c44df5d0e682785c5defb413fa037103b'
            '6c2a50a651c89a9358104f7cf5292dcaece3a8cc96a2781e3e4dc9776846cd92894d7f2a92dc01a286e5e89a48492e5d49213e05460d363ee84ab58647f6d479'
            'bbdc0aad6cef7aac71fc261d5b0704138c9aa6ce855b6d05f933920b980bb045c0e1429e82cf6e42e766035cc1d43554e486ebd00c96d1aa4d16751a5852fe63'
            'c9dd165332e0e9f4343ab8fd3c9be559d3dc9036fbf6c87ac5129792e35e740dba477995558c678044fdc24f9e080dbc72f1de43f38a4e719e51967381bfbf1b'
            'd8a6d9355b5ba014ef1f92937e1a149d7c51c323b1bd6790b9142226cbfac7308b413c1428390b5d0cb96614653e9464c3cf580d00c2c1c6cee2c1564f676e0a'
            '6e9ee6268621b743bb029bf4ed89eb442de49b8c8da45bb71bd9cd2beb62864fbb889609b39ed5a266bd66c321ac343294e2f739306544f2c7d5421c972e5524'
            '3239044aefd27ff8d01cc97ca29b034fd9c411b7ed4b6cd929d71cd64b680e2d32cd52f1dda8df3bdab1ed8048f9320001b1028b75bf7a9e65094c6f92d12c16'
            '796ea68de5faae40ada6cb14f9d56ba18d5be8fe08096122f04a52d64428862a704fbaba82f87737f4880bca4e34e7ae9fe669a212f9878a6359394c0edcaac1'
            '3d1f74d8f45193a42432b1880317dcc3467ee3cc66baf1c4ac093e66bded3e7d46e6638cfd0a63e3f8b1325fa274adb98d7f25a44bdd52d0e963498746f67569'
            '2a311ba891e6ded5cac354e2144a8d296d24ea8d10acadd752af554b3f1331b47df4af62e5498995771e4d1b2b28821a664138a155b8a40733c59894ad26519a'
            '572eebd0bd4677d037c58e37f132d250a195e319d362b8d121521bef380290e233b5e61188a2841019b9642de824e682d10d9771f5e109bdb8fcfc4d2dedf196'
            'e7c6fbe0d6112210a1e1c2b28a23aa91737c38804aebd5208e11c0d44f5ce1fe84c86c98a1670b0de89104bacbf4b8e9d8233dcf214987726056e1cd237818dd'
            '18428751f569a520b159a85050fdc22002aa386a8a438688f857cd858a489dadd9eea846ed23815c5ae2496345012f4a94423b6d5afba6878845a17bb4e0cfec'
            '7a91dcb8c2200c2a1f3fcf8b4da7b7bbef0ca3f17cbdfaff52bd01aaea279e759085410f5353336dc4760aa41d72b75ae6786f6bb287d93d983ef86572fc29a4'
            '7ce2a9759f7cf32ca72d20ad2a67280bbd4bbe179545c01fffa481f4038e5f0af84f4393db4dd6214d106998fe34e45e451d005bd6abf27ddef32f55cec80da5'
            '8fc89478b96d7aba8d506321232a1a7e999a215d1312666a31004d1abe64c02b36c577a48b2c47dc3131cf4a6d53b55eb45c3514849612c9870e699e8679aff9'
            '2c10030733938d649d096d0308913cbc73d0c23f019b877048fa1a964d63a6b618b805c7ded5c09f1b79bd32b4797215ddbf34be3a5158db46297a2ea2e69e88'
            '589c00c6452587b22631fecb3b470285df2b4ef6d97075fe63aad7931a2498e7cc5065f52034b43b0f2d3f93558069125575dc35ce9cc999ccc538fe371528cf'
            'eec4bc5aab40e846e2df2f39f50306d2bb60152b8ab7eb608c6724f6a85da31681c75e533fa499d516627c7df43ee3fa641260ee2a543922a72395052db2288f'
            'b687be2751183813f829a9793f826df65424c207ae22a5239929e96ccac9a9b5bb1fc648a02bd9832ce158b2ee8cc82cdf9ee8f6e3a7d1930fc7c44a856c9e64'
            'f007f63c74cef95b64047fa61a5a736db1221e7ec36634ecb1ec959a9f95aa715a98b88f71d5ecf60e24dbf176189cb66c24ae1e0fc9d556b15094248187022b'
            '94277ef3d6ac0159fc5f32b3c3a88dfbd0536f02a1d566cf0564ca10afd595e36e730a55bfe6dd5badc249a7c3c680eacabf3be4f1d2f3d3d35a57ca70a5aa8a'
            '491d00ece2e57dd096e45af1e9cbd446d8237834b2af112f18ba2875e276b89ffcce36064b40a8b4bd5267e13ce4a1f5cb498f0e3c47b70b0ba18bffde7e2343'
            '3f0d80485f010a5e6bba9f800b11f4c595d36d9c4f89cb6bebe1f060ac40ea9b98a9815d2c518e2b16b9a16fd4e380c75d8f4f4d468305736d95a09b142396aa'
            '069b5cf91b1a7611fb7ea5c0e15386e0848321a988572008cda5a866030c21dd7b6cd35badb1cdd4708ae7b24cd5db5a81da462aec5d6392e4ec0495024f0ae0'
            'd17efb7013c61d66742c6102797cd2c0886abdf8ece501d2202b6fbbb600981b06caf5d6e652c408f9567be94cae98d70d8714048313761acaf9a0168932db10'
            '78cab63f469d9d4799c7cb2050b6064608eceef82cc0c97e406ccf9b4923ea9b233fa202fdcb83fa3a1e10c3baabab1eea9fd9aabf2cfe6e85017e28ff8ecdd3'
            'ee1aafeb173d00d1fabff26b94cf043e8e181141f704635248dc2cd1a043d0e9ccf14dd0a95f3bb6f0e86f508496e52130ae170f6b88078336e4ce8d5df307f0'
            'dc92f016a4a850f35640ab31a1cb9301ff654793dbcbb9151bdc1e1a5982e69191e520c43b88549d921e7727adbb4f6b59ce06f066fc4688c163da179ded1b3c')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
