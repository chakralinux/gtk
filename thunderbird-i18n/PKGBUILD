pkgname=thunderbird-i18n
pkgver=45.5.0
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="http://www.mozilla.com/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'bn-BD  "Bengali (Bangladesh)"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pa-IN  "Punjabi"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'ta-LK  "Tamil (Sri Lanka)"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)
sha512sums=('229faedef6e343e74b35cf6f64a19686cea0377223ef2acfc5a3521f51dfc091f6cc0e780ee81d7c605ee8205908cd740a53b67be27e3bb1f65d802c72a0d5b9'
            '87dca388f05e89b46a6c9e5aab6d2f577213ad2043f41680f062ac0ccbbda01ba658666c73b64fd1ec5a9ab3e0517dbe6554555c4731c3024b5f17880158f13a'
            '1b318d11c4ea68cfa62613d007c19857373e7c7e702ae134650c4d5b20bb2e1ce2d5261a4e536f4ea74ca8adc63c822ce05ed70335e9afa7461979e12c2c5c31'
            '8fa95739d37a92b6ba0b917b6fb83cb808c9c4de7e48f7a45a0202e53066669a07c1389b8c5f5d2b326c1bb4d4007c52201fbb89a3ead7c65198e23c77a79af1'
            'a10c622f2f7c1c35aa2e7ecfe8d50d33e18ba64e434b821b042b6aababafbdf3ccd4316e0968a00e3ac86a4d2df8ce6202bb1357e8d8f364e0846a61bc34fce5'
            '7e089d3e2facf84a925de834f7e3228ccd374d3f8aa05ae552b7834eebc2e5fe4da8a8bd938b3e091fb0ce9e22f01f214156a2f383d298a1f18a659c9da057f3'
            '59f1756aacc46e3d8e49e9ec3235f00bb4696e3c4a4579f07f4d47becb6f52eea8042420b6956e942d42e84cbb818bec478dd2e3c72b9b3a70bde481f7df3b6e'
            'cb13d87e3895746190edc6516c721c02a5fb48a98daa74f0e20f7b5614d76af0f0e2199a463951a64c773e3356d4fdf943cb8e3607fb6d10d23e212759a18d13'
            '217c5d02d75a82d71185ef976fe672f091383f1b6f2afaf6788387745d3f1e30509a49f25617ab6882857f72560d1b22f044e700cea93922cfb23db12c98dfec'
            'a1d875c8af1e897df2e1df34d9566208f7897a01af0765f96ebb52f4be750353aaa39c181a5a7f367a697c244057e280f7a361910f37f980014ea545ebcacf52'
            '25d6382e23d0ed855052826260de39ca29d46cd0c67b71873a9f754714ad93762d959b52806792a74b811e0e5a5bdc9fbb80e8d94e2115ea53f0687dd51851cf'
            '17ef534896b7fca612c5026e6cb15577cd20047b2a2679f426cc1e4e6d06396e96df484a9d03af397b4695993d991cf78a0bc1fdf04b4093580e01dc9dc1f2e9'
            'b9e89ac184bef3569e676ad4581e345de92fc68e845905a830c5f31ece6031d42175d9bc979960ea0880adbfb39ad7c39010bc6d8765875b814a3b2b364c4f00'
            '6dd8fb13596ece1f0a966561c0e2a1f0694bb8193b896378c9875d632b7bb4667b8efd3267021df1b875df72e0dca2923a1d558e938904c335c3209d242c7b37'
            '1606d6a6f59de21a0fb89ee606c23ae545cc81e01c788a9a54bddeb059b7f06cf8a2b293d086c827be5886aed45eb43097222c79207aa14e19bc0217be2ba98b'
            'ddab735e68b9a6201fba41c21dcb07780441d25d9d5203644f31214eee1476e9fd2c8ead031096c52bfdca2242f2590f94f86370052d333a677b8784c97667ed'
            '775807d75570159cc0da5ed7c1b540268be5a6d62b03a38c9b1325123f7f44a582b8a091fcf4516276cf96ac703d25cd96c6be7e952f65ac61f87ad3ff46271a'
            'd8a19ca77d9a4fc7054388899c4b4c02dced5aa3e76fc461ab3b694a8304fc2f7a1b0e27fcc1a98746ee30ff53d840aab75f8f2e1cd60b2cbbc4605670d77752'
            '083b03e3b5e722160ac426c9644a99a0ad4f60f934eb6b1e0e217c96402d9cc5671d61a63d83ae526e7f9c6b3fece40de5754c2ebcea780318128f46b158ae7a'
            '0684bf6d3d1ca6e6a6d5c892ff9b2191bd56a0fdcec47e03d7b66143d90de4d348634744b15adae69fc36710674b64f701819b6075c81c86ef9671d36af7321e'
            '2f51fe9cc5940e5c8dc34846adec622b05dd9e59554293d51599f262bbb77af3122e02a0acece7975246f2822a145a9cec3b6c52134b3c09ec64007e2e3c4905'
            '953f583f7683a5f9a514e69ea3731f477a978df59212ceba893ba40b66dcb47c6ef898c9caadf4a992d6775c3392a16031771d28b0061168984b3d40adeef12b'
            'b0c66149a10e0925417c3cd60763b029466410248084287965d5b045ee0d5e01ae90de030f3e20c44aa5d386d575ef48809b0ecaad177baf9d4631f2f6f79b7c'
            'ab5eab0f5a9e86b4e440aa25cd5d7d2fd60bb04b1facd2b5a11c3c37d72011a9adf7973aa7b9604d1a54842c50fb907e7a1edf059fddae297a17ce01635e73a5'
            '4e996b1f6ec223e7bca1605006200f07d67a6b93a81289cfa8e9a8ab91f7cce1d3912fdebb9ac92b77b206c1a25e272d7b671964b1042595f77c75d8534cfda0'
            'e07c68d93c25ce09f6306e0e4ff01ae6ac77f4498daa45c734d82e410967828276ec693cb6c6c8fee8781416e48dd610d99279e7c1ba56a6ab703a5d64d53c33'
            '0b32cab6b38657c19f274c9474619532825bebfb672865753c24452de8023f18a68efdcc36acd6be57ba5ec89f2d9eda3b4384c5554426fce6d5789e1fcb14f2'
            '06b83cac82d8a421e55744a7cba025c2e7ecc2e167202604edb6a973810bdca29e816bf621802cbd236ebca4cc912399abf2a4bf1d68262ace0b4c5de6863fa8'
            '140ecda71c0c48990d3784875f2d795e7a79db62a1c13b0fe3a994d9f7206f177f06098485f7c90ef67b4035b59e3d0efe0f0df116e5ee0f3f632c3d052333cf'
            '825c2d535d449435f461462038f9c0824b3a252c200492cd4c58b132581dbc3cc693c3b7a9aed574860d943b18a2cc228b71e8184745094f209f9ca50a452357'
            '191d4c290f43aa0df7b53156e40ae9e322066a1d874816520d6f255d5b249c5a1c21ab9f3216bf0a3b5a39054c834f9fd516dc5823201a80b2ddf05c9bb99a48'
            '1c7a75c075f4534116443d7024751ee52e2205a3258ba1109037438a0a2c719e93531a3f370cf1956635fd020a92ae2af41c003bf4970c312e1dba9060daa6b4'
            '091d5161cdda5560e2fb11791c685713419e1b452d743d3561c4329f3d94fd59efbfe7aabb9673ae4a069dca6717ddbd84002f89ecec26dc01f25f330576384b'
            '74c80fdffeef12b11a29beb3adaa9986532f7d2b6de8f407b10baefdd736ac32e3671379d413d92aff289f0e13c1e5debd91b7ff82bda05d0dea54712a5dfa79'
            'a62b00ebcf3b9af626eccd017d54894c651410af6bc97f17840112f6276a82cbd8a9bb55626f1422a188b86589598a4bb8a64e5386148a650733eb2f98c9b1af'
            '81efd3624f5b03630a0ab32282bb19b4fe84dc86babf48573f3a562a76db87dd57d9d55ba32a2401b8d13790b9c6b3ad47f022da267c94a6b8340cd31704b122'
            '9cbef96bc6ce5f98b6b8a01a8afe2e307ed7f7421e3fdbd74be3e55a9c0e758ea788fe7108bdb821a1ac7355a5a32c497a59b4dce27a3b15601e05eedc0c53bd'
            'af4ff8f64bc5c4f7540119f77d6397a4b8c7f81a97c6effcad95d4be413b3b364004781e5f3ed2d5ed898b38cfb08c4d3ab4eade408afa9764dd40e2fbb84879'
            '2134d3cbdf4cf7839035c85b08d5bd16956824efcd83a32f9b839c926a66d269f646af3c0f1d7d231b7dffe66adee1b930ad955851846c080b538ea65502fa77'
            '8f4ffc4968ca79115038ab346b47ec490df762ed665c5f5f54c643bbd60c41ad9c1dddcb3ed71116bf41a704fee56af959c214841e703314610e3cff2005fb4b'
            'cb1f9588519d11e8738ee6211f4aa6492af6f35af106c5a969d910390004136a9089301ba6f3411b52e607a91585b9ab58125445c9e5a239d4fa77add08a5fd5'
            '0d089fc9018f6400ee452feec496898f6bb3b5d50b9a29fc6483f1b3c0c642b78ffab1bc4c899cd7934af270c5e469f750d9bfb9a19e9c0df431b0f61a4105df'
            '2c33435d81a60624cfaa24be178493c9e4f2eb155c531f1a5207b05ddfd98cc5718c29c8813ece7d79bac1b48b7a0040c19c109d6c59fb60175b4c7c4d30a684'
            '2e9814a7b8a75c2a34748cf55d23fc225a42e209e5c6e7950da5ac760c3533a96b16740a4cb7b5244f01caddd5014cfbfc98827ed64ad0f93e67c68a0c88caf4'
            '769d8c4e06fa7d8b208fdc8a8f0d78fae8a736866f58974d20788e5c5c2c63d7bcf53f7d6d9f0a04718aef9476a24eed03aa46cc371ca7b4fc688d086965bced'
            '8c92b27cc7640f255ea96743ee8e1a50cd0568af76133451a8f1be41868866309a2388b18887f13a123b70e8698e75ff5db09ee96bba6f86667504b891813adc'
            '0310b2056e3c13b01dddd5772f28e51c1175d3211c396fdfcbd9cf295932f655b59b472478614bb2b178e08114525d8948480344ddc1f4ae208d047b6f47f214'
            'd9222d291d7ca806a2e1f45fa5ac566b1d1aea915fac383b3acc34dcb0c7db068ad798a1e0a88f7375e36fdf1f035141c822293e4d1c7f367dc7d12787763847'
            '3218d8556e08342f939f9f05eba10c32d31f41633e550d0b58473e7eeb61b972af7cb0cf9dcced8dbb57670faf1ecc4e403bb9a530492e3f0c8cf2ad181b3943'
            '48a8754c14d8377f1e40828035d7b9ab49e3bdafdedf401e3961bbd55ae1d593ac89f686b516fccbb952d4832b6f84260ba9b9528773fce2b024bd7e369236f3'
            '963afff38cb5e82044672979c3bc5e4b1bd779bafcae4d1871dc6187b5730a248a8f28badca9048107cbab14ae4e7da96c8b4e9249f451ede78d88a2cb22c2e3'
            'a7f23af98dd1c68e9931a90e4e53e67e9d413202188ed5ea470a80f8830c25deac761ffe0066dfad0c77b840ad99b44d855bd2361a0de302feb2187774b10fc7'
            'fe8251dcece952a8fb206d9c2ce7856c642d19c152f5c54277b9e66bd0cfe7311d8be39d372c37d1311237faeeaa1bc1e352e10839c9d1885990878e486c1d93'
            'd8688ac1d73baad60139560ccd30efdc8bf906877e8991369c6a0e5a0920f91901b0ae16f0d6c704cecbacf98ada707f369213b47a183140a08bfdcc46ace940'
            '2dbfdc97614ad998af3eaade2651fab26bafaa3b3f7bb9d96321e96e6ec397e29129e6b412b76fada9bf0bf50a11ec92a5cd9017c0f35f27a12e55d051596aa8')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
