pkgname=thunderbird-i18n
pkgver=60.2.1
pkgrel=1
pkgdesc="Language pack for Thunderbird"
arch=('any')
url="https://www.thunderbird.net/"
license=('MPL' 'GPL')
depends=("thunderbird-kde>=$pkgver")

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'be     "Belarusian"'
  'bg     "Bulgarian"'
  'br     "Breton"'
  'ca     "Catalan"'
  'cs     "Czech"'
  'cy     "Welsh"'
  'da     "Danish"'
  'de     "German"'
  'dsb    "Lower Sorbian"'
  'el     "Greek"'
  'en-GB  "English (British)"'
  'en-US  "English (US)"'
  'es-AR  "Spanish (Argentina)"'
  'es-ES  "Spanish (Spain)"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fi     "Finnish"'
  'fr     "French"'
  'fy-NL  "Frisian"'
  'ga-IE  "Irish"'
  'gd     "Gaelic (Scotland)"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hr     "Croatian"'
  'hsb    "Upper Sorbian"'
  'hu     "Hungarian"'
  'hy-AM  "Armenian"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'nb-NO  "Norwegian (Bokm√•l)"'
  'nl     "Dutch"'
  'nn-NO  "Norwegian (Nynorsk)"'
  'pl     "Polish"'
  'pt-BR  "Portuguese (Brazilian)"'
  'pt-PT  "Portuguese (Portugal)"'
  'rm     "Romansh"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'si     "Sinhala"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sq     "Albanian"'
  'sr     "Serbian"'
  'sv-SE  "Swedish"'
  'tr     "Turkish"'
  'uk     "Ukrainian"'
  'vi     "Vietnamese"'
  'zh-CN  "Chinese (Simplified)"'
  'zh-TW  "Chinese (Traditional)"'
)

sha512sums=('c41737af99fc3d82547e82784289b6292d0bbcb47be13a785b668a97c0b804d9ce4ed0a7e18f089d36d234d085f72af6c1ad4908c1d335baa83bd0bb591c7538'
            'e7f4878f5999455cf61f667aec7dfd285b0624a7410feffb9d5fdd0eabd51e988d64bb97288cf601f512c8f42d450d01abf80af10a5055bec8bcecb2d95d28c5'
            '9d4499e3776f6e93083b44113e14e2899dbfa26cdf19d3eb28a5a87df8bc3fe99edcb9b8c572cde6f0488683f7c1b2f3fc2c24437da712633574aa440e6fdf01'
            'ef79c6fb8149bd83aba5d18ac05d833caa5fa84c40c6e7df6f7d82b0c4d2053fde8dee10be60c9c0e68213295d98b1226d7f0d7b7e6152249040a85ad8327ed6'
            'd54c60f9125aff7ab5a1d188769326324586ba3daab75916d02800680a9ac010b4bb08d84b1afc1345f40b6d52c1d661ad04f8c9b1a8021690516d0631af3b50'
            '483417c228eb084839e15969550c17aac20d28dab770729cd2d9f2b06b5bf3e01b7e9ec4dd5927405464c87f96f86f66791fde646224a200551d1b631d6500b5'
            'f47e917ebd48fe056d775ecd824cf29ee6191223526f124941bc82bc1feca664ee7182cd2c0dabcab0bd7a2171da381c744575179d80936cf65efe3db8874b67'
            '81a18fb92a01826ea780a97c65f92baa6920eb653f3dbfef792681ee38da1a29ea33946a374630c8e7863337293f4cb648665419938df5b380c7a073102bf5e3'
            'b8e8a75111deb9ab31b82f7c7d6f9ff70f7a60cdf384dc7a3bb21c893655124bc9a1c31fb22b42b05c546fcbd3e430bd1417f6795b66e43140a21506edca7e4d'
            '4b7bd57f2bee29b786daaa1331777b2e81bb281a0954bf8ca2b11420cee81a224ed1d993375ff70a97a8fe33543596c52218966b149beae0e78f832c42ae2189'
            'c6a2d551f9d1d122bab5d8cb1b9c8affbbf5b8a6ca52100bdc96ab141879fd3486652661882d55a77236d98795bdfe2da3c9ff7e0ce6bcd02bd90b2a37ac1b6d'
            '20a71719c5fb829a22167fbabb1f1c1ad7fab634fb801fcf7784c6a2094808483a17da500342ac93cbf766d3b5f6078f98ed774c7a67d529a4811c0dde4ac3a6'
            'a012c1e40024a006177563e0735e49fed9e5649367e854ed27343f6e7eb52f0a870cb4257f67e76b6fe045f7657f3f5425174d1c955a778f116f781eaef4b9aa'
            '62172267366463f759a1243cb0daf0d3765fe1f5f014b388158b024fcd852af1975869d4ca8a02b91804a4e12f10fee4220ab631a1016330165802757602ea86'
            'e87a68b60f6f24c70241a9e188cdb2f72e9fa29128c480013e0b2fd70a5f75766c985c64618cc96c17bbfc4d7e6595d6e1956438db8e938ee977a39740c14313'
            '4ef1c35fc033e5a1db43aa79ed4f9120fa20f914a2461494c614f9d260086fb8d58cf4e00f425b793630295e45a4c66243c30d7809e3c2596e6f8ce717b93a79'
            'e8b0cab938174f85f2af9936404ff2bc2213e16677dbcd85502b7179794130b01553b6675cd93ca2ef34ab1dc1dfcb9c434eec76c08f68a22ad1acd4b2a74ae8'
            '7bb3a0fd563c5d09ebafc3da6ee312804c8a465574f6b8355ad477e13935b2b6483489f6b039575208ebfa0c8266ce01b3efe6e2fa7e0802eaf0fcbf7dd0b15e'
            '65462fcc19a20d8a404e1511faf3241e26fbf99def1f4e695f4cc920ac872743e119206e0ffa3a3fc42be37d5cfe9ca3d63d95333c94fafc8dfcc073e4b1bbb9'
            'aae25897c3868d0fc2a42ed79eff8050189e81d2ae2b748f523980cedccc244a182209018b0523b58ac005b941bf84364d7959b4fa403956bb49bd5e46100f47'
            '12d4d8362e59edfd1699fbb65b51334816d9b0ad2f5ed7345b1c3a9a80d1e3e60b0d079e16d1901854fbd2832d56a461beec9cd882ac1571314f81aef763b3e3'
            '7b8a75797a4e8442db0ca18ba6e331a1bdd9b9c4bea9e247972fdc8ef249d9c6d52202cc4a6537d7c6e648edb120719b88869356d2244e9e85b0f574d2236dac'
            'c055d56d99a79a7bd393f294170b892ceff34dffcb16c5193cbc8b94c3e2aa1a1796ec0146578fece9ba6c4de11c87f379e4818c0960b05927e5e540eabeeb90'
            '5d6c6e769135caeb535f0123c6725eae8fc6fab77e703ca80d6bb1951d14a2f149a1def591968d0c268ad36d409d65d581df1863c5a7d17bae0689d577fe0951'
            'c5b83a9b8bc3a38904698da2dcc40b21b8a8bce2314edadf671812fc49e8edc699d74f12d38830b54a80d81af38ac168edd101cb7ba0c0d4247620ab5e456f93'
            '124d68b07766051c71364620e0212956b81e25f1687efd9fd7ea0ed74f6fc3e194f10b82e598aa1f1d8d54a50953202f805b071ea45805e716af73a2115240f8'
            'e3d0cc09f4ba43d3b9a63a7b0d9f71101ce636787b2d8d6b94d88455551f6b922c94f0edc310c0cbb7119c8c268bd71ef3d003215d4c74f32359b6cf601b55bd'
            '06fa03a7bc0e84bed80d2eff93e8729dfbba026fa62552138f69e87177881c0fe07c291e90ce78ca5e8d4debeb5e75fa0df48db605c634a4717cb70a4a2e12d6'
            'fe15756885a43b882bcc7a94c916fa90ad9b7f7d7846518e446dabedf5df21185f2dae807072402ba7413dd23533bab9ac83c1c6f1488c69b7e42fbf1d6d82ba'
            'ca6bce5ed8cb66abcbec233941062b01bc18e35d501e796f16609f22a11d40ede0568aa3600a590b6c3bbc073ce74b08095903660371333b8f868867ed2ad6e1'
            '1c9578cccc15e64b0fb6985a0d5d9151e90923972150267076d89dc4c16a46848a347f73dfb7a08326fbb8b97f7b51aa6161d995fe0565e30ee67f71940ef712'
            '322e4f05034facbb6bb4e51214e4f95679cc7328846c00b85694a20a8bf4e89c6ce8a6e6e65cddd563169e11ef78b8502a6e9649c890004b5cc371774d125fe5'
            '4952429ba4b73a5357b6d395ffacb7d895ed74900ee21deb3f228fe5623b5bdaeaedceabd1c893c1824c33cf805ee41aae2fc1318a667fc0f9e7ec01ecec4c5c'
            'c060712228441e866e9d4309407a894b7729edde6e135743264d26ee93c0e828a2aabdfacc3be121f53f7c4a47a43d4f6aeaea87034a4652808d9f0a8da77a50'
            '440f1d37677ba90f63489fc542b241f570293cccf3a2ab843e9eb8abba664c107e061cb3b14a30bf432459701a51a9b58e6630a220acbd48105fd5a7492da46a'
            '436ee46a66da118e7a29c2e66bcc5922d486dc6f9bdfc29e025733eac3e1bbc316baf88185bf62ee301273dae95c72b930a4143ee6c1094596714f34404bccbd'
            '0dc2eeb723efcb3af4c3e3f8df3bc07ace232285f65d3cbc2a970673eaee3e6c720dc391a8df0cda3472a3b986fdc92df0b7b4aec0abb2bfb7adbdce475a4c8e'
            '340f9704b4d654af42e9cc8bdb85daf16f32af10f2675968f26456c29b788b49d41bc9740c15e52796b74365c1bdc30995e5fffa0ea53abab15d203772c74a78'
            '5623ff6b1f322bd44f1826980c0eb459d82ed4ac12a41846e5006eecce1971d2a534aab90ffc6a7b922a412a8828f6bb411f78ef123a727686d4cd08eee7c457'
            'ba861f3db1e4a033d66b68ef625220701312d854a50bfea367e6b90bfc15e5dbb994c9eebfd2596da1f4879d0f796ec7826c72a6c659ad205ef7386a4e6052e5'
            '82ca4bd6f4d68d187132ab864577e3a16dfe4418bf68796f6ccd477c6eac4bae267054ac06b491df1847cc8e171b373d826f7ece8790908bb9d20ad960db59a7'
            '6f6f8d4116c66ba6cce7b937993c3a188d1f44c2eb0ba178b3efd87236ba71ef390dbe6209f28db7479fc025a2f0a0d6821d1405f2c0045896761d509a90ce1b'
            '24472ac2bc8c09c2c1a35b95891b057abef35d4b420cb6e995e3344340014f89be4fed706747fa4666803a23562f6a8e3f60843ae78a2ae129c154448ff7fbdb'
            '9c0d08bc4b9efb53011e50f68ec0250c79b571851f71a3c3b9c6114c3f9abba13aa00d1f7db2b10b0b255d8899b37a868212e909b2eb40037d149154f126eedb'
            '80aaa375781a60c8ebdbb7eeeb00bc843715e5d4a48762406aac85d5c0d183a9b02eb83392ffd2f0d3e82e2fe9f66a72626fcee9a8e35306ead5499f3538a04c'
            '2bcee77666ffe135925c313482edb8d32c0004f458b33d9b3132b57db664fa56318d8f0b0f83fc2286283a3879fbf1882dc8e9c5562eaa5116400a6f6ffd2565'
            'ba4a08a9f1ddeacf2b9c4e46cc13a0c2637eb1a2373baaa9cc4a868d810dea08fb93162206b3b6839fe8d6d500544d785c470dd76cd842c752a8ddc7ddba8cdf'
            '22d2a1c92ce35fa815de772e953b29887a973fcbe3777c54e5ea3b0867c9252c23f9134189345c4578840014fb084c408dad7b753a2f404a50fe762097bea98f'
            'b5359bd3fed66cc7b112f0a6e529c8c54a033f499fd3b609ef6980676cd43ed7ce972d8f8b81994f5cf1b1ce55a7169990a895549cc671502192cf95eef4fd8e'
            '5e634e247a79ffafb62acaf701ee808e1aca91b12f5b6bbcd43625b477440700be6a7bc8d11fe41e68d887550af0c14e8509ef5864aee144e2728255ca1d14be'
            'ca3e430d82b8b8833e24ea7498d48ee330e4009de9ae145e50ba06ae1072c3a93b1d4e1d1bfa22c3452da8b4b0472b8926d13318a08d6730475057f337f2f39c'
            'b9ebb7111e88c1d78ceb6b6afbed34b912812c049711721882234b5130bfb2a98351b78c36f462919ca48a26e2d6eb3bcc3b76746f9e98b47ebc907766159ae2'
            'e2230a2a9a694a9b68f8d1d00f13cfdc4fcd5e880dd5bbf3dc637c88a31f4a02863372e2158759b9a283ee8490c1cd622873213c1c42542b45dd92f8447953a7'
            '9397bf5942ddf7198bb2bbcc152d4335a47fba602f0dbd0fb8c4b8731ab5a8aa1d5edb4ebac4424e2414fec441b19e337fd5748f21a369d9709e2bae1912d8fb'
            '8770a606a67fb0a6dbdcd05e964a949d4e075107d04ebd0d429068f114ae7ccb097e72775ab64e4bd7c158b32a9d859a9d7789e2927e64f661d4d66d511bfe44')

pkgname=('thunderbird-i18n')
source=()
_url=https://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/$pkgver/linux-x86_64/xpi

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=thunderbird-i18n-${_locale,,}

  pkgname+=($_pkgname)
  source+=("thunderbird-i18n-$pkgver-$_locale.xpi::$_url/$_locale.xpi")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

# Don't extract anything
noextract=(${source[@]%%::*})

package_thunderbird-i18n() {
  pkgdesc="Transition package to split build"
  depends=("thunderbird-kde=${pkgver}" "thunderbird-langpack=${pkgver}")
}

_package() {
  pkgdesc="$2 language pack for Thunderbird"
  provides=("thunderbird-langpack=${pkgver}")
  conflicts=("thunderbird-i18n<31.0")
  install -Dm644 thunderbird-i18n-$pkgver-$1.xpi \
    "$pkgdir/usr/lib/thunderbird/extensions/langpack-$1@thunderbird.mozilla.org.xpi"
}
